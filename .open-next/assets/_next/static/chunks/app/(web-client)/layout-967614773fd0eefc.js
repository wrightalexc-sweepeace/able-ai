(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6269],{3752:e=>{e.exports={container:"loading_container__RVnup",pulse:"loading_pulse__m_QbV"}},25731:(e,t,i)=>{"use strict";i.d(t,{A:()=>c,O:()=>u});var n=i(95155),r=i(12115),a=i(16203),o=i(85004);let s=(0,r.createContext)({user:null,loading:!0});async function l(e){for(let i=0;i<10;i++){var t;let i=await (0,a.yx)(e,!0);if(null==(t=i.claims)?void 0:t.role)return i;await new Promise(e=>setTimeout(e,1e3))}return null}let u=e=>{let{children:t}=e,[i,u]=(0,r.useState)(null),[c,f]=(0,r.useState)(!0),{authClient:d,loading:v}=(0,o.D)();return(0,r.useEffect)(()=>{let e=()=>{};return!v&&d&&(e=(0,a.hg)(d,async e=>{if(e){let t=await l(e);t?u(Object.assign(e,{token:t.token,claims:t.claims})):u(null)}else u(null);f(!1)})),()=>e()},[v]),(0,n.jsx)(s.Provider,{value:{user:i,loading:c},children:t})},c=()=>(0,r.useContext)(s)},34477:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{callServer:function(){return n.callServer},createServerReference:function(){return a},findSourceMapURL:function(){return r.findSourceMapURL}});let n=i(53806),r=i(31818),a=i(34979).createServerReference},43020:(e,t,i)=>{Promise.resolve().then(i.bind(i,45827)),Promise.resolve().then(i.bind(i,53083))},45827:(e,t,i)=>{"use strict";i.d(t,{default:()=>g});var n=i(95155),r=i(12115),a=i(20996);let o=()=>{let[e,t]=(0,r.useState)("default");return(0,r.useEffect)(()=>{if(!("Notification"in window)){alert("This browser does not support desktop notification"),t("denied");return}let e=()=>t(Notification.permission);"granted"===Notification.permission?t("granted"):"denied"!==Notification.permission?Notification.requestPermission().then(e=>{t(e)}):t(Notification.permission),"permissions"in navigator&&navigator.permissions.query&&navigator.permissions.query({name:"notifications"}).then(t=>{t.onchange=e})},[]),e};var s=i(34477);let l=(0,s.createServerReference)("7fad076ff87a53fb2dc1878d8dc87b650c1a1b2caa",s.callServer,void 0,s.findSourceMapURL,"subscribeFcmTopicAction");var u=i(85004),c=i(25731),f=i(49509);let d=()=>{let e=o(),[t,i]=(0,r.useState)(null),{messaging:n}=(0,u.D)(),{user:s}=(0,c.A)();return(0,r.useEffect)(()=>{(async()=>{if("serviceWorker"in navigator&&"granted"===e){if(!await (0,a.TT)())return;let e=await navigator.serviceWorker.register("/firebase-messaging-sw.js");if(!n)return console.error("Firebase Messaging is not initialized.");let t=await (0,a.gf)(n,{vapidKey:f.env.NEXT_PUBLIC_FIREBASE_VAPID_KEY,serviceWorkerRegistration:e});i(t),l((null==s?void 0:s.token)||"",t)}})()},[n,e]),t};var v=i(56671);let g=e=>{let{children:t}=e,i=d(),{messaging:o}=(0,u.D)();return(0,r.useEffect)(()=>{if("serviceWorker"in navigator&&o){let e=(0,a.xD)(o,e=>{var t,i,n;v.oR.info(null==(t=e.notification)?void 0:t.title,{icon:null==(i=e.notification)?void 0:i.icon,description:null==(n=e.notification)?void 0:n.body})});return()=>e()}},[i,o]),(0,n.jsx)(n.Fragment,{children:t})}},53083:(e,t,i)=>{"use strict";i.d(t,{ProtectedRoute:()=>c});var n=i(95155),r=i(66766),a=i(25731),o=i(35695),s=i(12115),l=i(3752),u=i.n(l);let c=e=>{let{children:t}=e,{user:i,loading:l}=(0,a.A)(),c=(0,o.useRouter)();return((0,s.useEffect)(()=>{l||(null==i?void 0:i.claims.role)||c.push("/signin")},[l,null==i?void 0:i.claims]),l||!i)?(0,n.jsx)("div",{className:u().container,children:(0,n.jsx)(r.default,{src:"/images/ableai.png",alt:"Loading Logo",width:180,height:180,className:u().pulse,priority:!0})}):(0,n.jsx)(n.Fragment,{children:t})}},66766:(e,t,i)=>{"use strict";i.d(t,{default:()=>r.a});var n=i(71469),r=i.n(n)},71469:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var i in t)Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}(t,{default:function(){return l},getImageProps:function(){return s}});let n=i(88229),r=i(38883),a=i(33063),o=n._(i(51193));function s(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,i]of Object.entries(t))void 0===i&&delete t[e];return{props:t}}let l=a.Image},85004:(e,t,i)=>{"use strict";i.d(t,{D:()=>v,R:()=>d});var n=i(95155),r=i(12115),a=i(23915),o=i(16203),s=i(35317),l=i(90858),u=i(74826),c=i(20996);let f=(0,r.createContext)(null),d=e=>{let{children:t}=e,[i,d]=r.useState(null),[v,g]=r.useState(null),[m,p]=r.useState(null),[b,h]=r.useState(null),[S,_]=r.useState(null),[w,x]=r.useState(!0);return(0,r.useEffect)(()=>{!async function(){let e,t=await fetch("/firebase-config.json"),i=await t.json();0===(0,a.Dk)().length?(console.log("[Firebase] Initializing new instance..."),e=(0,a.Wp)(i)):(console.log("[Firebase] Reusing existing instance."),e=(0,a.Sx)()),d((0,o.xI)(e)),p((0,s.aU)(e)),h((0,l.c7)(e)),_((0,u.lS)(e,{backend:new u.C8})),g((0,c.dG)(e)),x(!1)}()},[]),(0,n.jsx)(f.Provider,{value:{authClient:i,db:m,storage:b,ai:S,messaging:v,loading:w},children:t})},v=()=>{let e=(0,r.useContext)(f);if(!e)throw Error("useFirebase must be used within FirebaseProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[511,2992,5965,94,3063,3753,8441,1684,7358],()=>t(43020)),_N_E=e.O()}]);