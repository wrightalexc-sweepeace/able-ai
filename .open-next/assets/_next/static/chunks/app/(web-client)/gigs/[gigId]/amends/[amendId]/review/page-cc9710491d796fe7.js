(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5295],{2247:(e,t,a)=>{Promise.resolve().then(a.bind(a,72216))},38509:e=>{e.exports={viewContainer:"ConfirmAmendedGigDetailsPage_viewContainer__QRphI",mainContent:"ConfirmAmendedGigDetailsPage_mainContent__iWjj2",header:"ConfirmAmendedGigDetailsPage_header__r19FQ",headerContent:"ConfirmAmendedGigDetailsPage_headerContent__ByqNK",headerIcon:"ConfirmAmendedGigDetailsPage_headerIcon__YqtKJ",headerTitle:"ConfirmAmendedGigDetailsPage_headerTitle__W0Jxb",headerSeparator:"ConfirmAmendedGigDetailsPage_headerSeparator__Brx2Y",card:"ConfirmAmendedGigDetailsPage_card__S7mBR",instructionBlock:"ConfirmAmendedGigDetailsPage_instructionBlock__QAdQh",instructionText:"ConfirmAmendedGigDetailsPage_instructionText__ME9QW",notificationCard:"ConfirmAmendedGigDetailsPage_notificationCard__ElY7t",notificationMain:"ConfirmAmendedGigDetailsPage_notificationMain__Ayii5",friendlyIcon:"ConfirmAmendedGigDetailsPage_friendlyIcon__ze4Vj",notificationText:"ConfirmAmendedGigDetailsPage_notificationText__JuhP3",chatButton:"ConfirmAmendedGigDetailsPage_chatButton__hAJsQ",chatIcon:"ConfirmAmendedGigDetailsPage_chatIcon__rN20b",detailsHeader:"ConfirmAmendedGigDetailsPage_detailsHeader__SDUv7",detailsTitle:"ConfirmAmendedGigDetailsPage_detailsTitle__E_fhD",editIcon:"ConfirmAmendedGigDetailsPage_editIcon__dVmGe",detailItem:"ConfirmAmendedGigDetailsPage_detailItem__ObDDj",detailItemLabel:"ConfirmAmendedGigDetailsPage_detailItemLabel__ILHtB",detailItemValue:"ConfirmAmendedGigDetailsPage_detailItemValue__mjpJN",highlightedValue:"ConfirmAmendedGigDetailsPage_highlightedValue__xbNI0",totalCostValue:"ConfirmAmendedGigDetailsPage_totalCostValue__aMjS1",feesText:"ConfirmAmendedGigDetailsPage_feesText__gFxln",actionsFooter:"ConfirmAmendedGigDetailsPage_actionsFooter__J6xh5",actionButton:"ConfirmAmendedGigDetailsPage_actionButton__8_odG",workerConfirmButton:"ConfirmAmendedGigDetailsPage_workerConfirmButton__ybLnp",buyerConfirmButton:"ConfirmAmendedGigDetailsPage_buyerConfirmButton__K1C6p",suggestButton:"ConfirmAmendedGigDetailsPage_suggestButton__P_QyN",declineButton:"ConfirmAmendedGigDetailsPage_declineButton__xGR_8",loaderContainer:"ConfirmAmendedGigDetailsPage_loaderContainer__vmTF2",buyerColor:"ConfirmAmendedGigDetailsPage_buyerColor__XQMSi",workerColor:"ConfirmAmendedGigDetailsPage_workerColor__6c8yH"}},51154:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(19946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},53243:(e,t,a)=>{"use strict";a.d(t,{Y:()=>n});var i=a(34477);let n=(0,i.createServerReference)("400e000ab33a7f5af2587925f175e4f793654b0f04",i.callServer,void 0,i.findSourceMapURL,"getGigDetails")},72216:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var i=a(95155),n=a(12115),o=a(35695),s=a(25731),r=a(86325),d=a(53243),l=a(51154),c=a(32497),g=a(38509),m=a.n(g);let _=e=>{let{gigDetailsData:t,isLoading:a,handleEditDetails:o,isEditingDetails:s}=e,[r,d]=(0,n.useState)(t);return(0,n.useEffect)(()=>{t&&d(t)},[t]),(0,i.jsxs)(i.Fragment,{children:[!t&&a&&(0,i.jsx)("div",{className:m().loaderContainer,children:(0,i.jsx)(l.A,{})}),t&&(0,i.jsx)(c.A,{gigDetailsData:t,editedGigDetails:r,setEditedGigDetails:d,handleEditDetails:o,isOnConfirm:!0,title:"Amended Gig Details",isEditingDetails:s})]})},u=e=>{let{lastRoleUsed:t,isLoadingConfirm:a,handleConfirm:n,handleSuggestNew:o,handleDecline:s}=e;return(0,i.jsxs)("footer",{className:m().actionsFooter,children:[(0,i.jsx)("button",{type:"button",className:"".concat(m().actionButton," ").concat("BUYER"===t?m().buyerColor:m().workerColor),onClick:n,disabled:a,children:a?(0,i.jsx)(i.Fragment,{children:"Loading..."}):(0,i.jsx)(i.Fragment,{children:"Confirm changes"})}),(0,i.jsx)("button",{type:"button",className:"".concat(m().actionButton," ").concat(m().suggestButton),onClick:o,children:"Suggest new changes"}),(0,i.jsx)("button",{type:"button",className:"".concat(m().actionButton," ").concat(m().declineButton),onClick:s,children:"Decline changes"})]})};var f=a(6188);let h=e=>{let{gigDetails:t,gigDetailsData:a,isLoading:n,isLoadingConfirm:s,lastRoleUsed:r,notificationMessage:d,handleEditDetails:l,handleConfirm:c,handleSuggestNew:g,handleDecline:h,isEditingDetails:C}=e,D=(0,o.useRouter)();return(0,i.jsxs)("div",{className:m().viewContainer,children:[(0,i.jsx)(f.A,{title:"Confirm Amended",onBackClick:()=>D.back()}),(0,i.jsx)("section",{className:"".concat(m().card," ").concat(m().instructionBlock),children:(0,i.jsxs)("p",{className:m().instructionText,children:[t.buyerName||"Unknown"," has changed the hourly rate to \xa322ph, the update details are below. Please accept to confirm these changes, edit to suggest new changes, or decline."]})}),(0,i.jsx)("main",{className:m().mainContent,children:(0,i.jsx)(_,{gigDetailsData:a,isLoading:n,handleEditDetails:l,isEditingDetails:C})}),(0,i.jsx)(u,{lastRoleUsed:r,isLoadingConfirm:s,handleConfirm:c,handleSuggestNew:g,handleDecline:h})]})};var C=a(82940),D=a.n(C),A=a(34477);let G=(0,A.createServerReference)("40b16666d46cb18b1c574a148302a4eae9a8461561",A.callServer,void 0,A.findSourceMapURL,"handleGigAdjustment");var P=a(56671);let x={user:"Benji",change:"the hourly rate to \xa322ph",prompt:"Please accept to confirm these changes, edit to suggest new changes, or decline"},b={user:"Sue",change:"added one hour to the gig",prompt:"Please accept to confirm these changes"},y=e=>{let{gigId:t,amendId:a,user:o,lastRoleUsed:s}=e,[r,l]=(0,n.useState)(void 0),[c,g]=(0,n.useState)(!0),[m,_]=(0,n.useState)(!1),[u,f]=(0,n.useState)(!1),C=s?x:b,A=async()=>{o&&r&&!m&&(_(!0),await G({gigId:t,firebaseUid:o.uid,newFinalRate:r.hourlyRate,newFinalHours:r.estimatedEarnings,currency:"usd"}),_(!1),P.oR.success("Suggested changes confirmed!"))};(0,n.useEffect)(()=>{(async()=>{if(!o||!s)return;let e=JSON.parse(localStorage.getItem("amendedGig")||"");g(!1),l(e),g(!0);let a=s.includes("BUYER")?"buyer":"worker",i=await (0,d.Y)({userId:o.uid,gigId:t,role:a,isViewQA:!0});g(!1),i.gig&&l({...e,status:i.gig.status})})()},[o,s,t]);let y=r?{date:r.date,location:r.location,summary:r.specialInstructions||"",payPerHour:"".concat(r.hourlyRate),totalPay:"".concat(r.estimatedEarnings),time:function(e,t){let a=D().utc(e),i=D().utc(t),n=a.format("h:mm A"),o=i.format("h:mm A");return a.dayOfYear()!==i.dayOfYear()?"".concat(n," - ").concat(o," (Next day)"):"".concat(n," - ").concat(o)}(r.startTime||"",r.endTime||""),status:r.status}:void 0;return r?(0,i.jsx)(h,{gigDetails:r,gigDetailsData:y,isLoading:c,isLoadingConfirm:m,lastRoleUsed:s,notificationMessage:C,handleEditDetails:()=>{f(!u)},handleConfirm:A,handleSuggestNew:()=>{},handleDecline:()=>{},isEditingDetails:u}):null};function p(){let e=(0,o.useParams)(),t=e.gigId,a=e.amendId,n=(0,r.K)(),{user:d}=(0,s.A)();return(0,i.jsx)(y,{gigId:t,amendId:a,user:d,lastRoleUsed:n})}}},e=>{var t=t=>e(e.s=t);e.O(0,[2006,3151,2992,5965,586,94,3063,6874,3753,1260,8441,1684,7358],()=>t(2247)),_N_E=e.O()}]);