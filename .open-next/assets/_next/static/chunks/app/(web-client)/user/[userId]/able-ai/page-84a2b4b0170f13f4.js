(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1081],{4516:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},13717:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},14186:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},19946:(e,t,a)=>{"use strict";a.d(t,{A:()=>g});var s=a(12115);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),i=e=>{let t=n(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},l=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,s.forwardRef)((e,t)=>{let{color:a="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:c="",children:g,iconNode:u,...p}=e;return(0,s.createElement)("svg",{ref:t,...d,width:r,height:r,stroke:a,strokeWidth:i?24*Number(n)/Number(r):n,className:o("lucide",c),...!g&&!l(p)&&{"aria-hidden":"true"},...p},[...u.map(e=>{let[t,a]=e;return(0,s.createElement)(t,a)}),...Array.isArray(g)?g:[g]])}),g=(e,t)=>{let a=(0,s.forwardRef)((a,n)=>{let{className:l,...d}=a;return(0,s.createElement)(c,{ref:n,iconNode:t,className:o("lucide-".concat(r(i(e))),"lucide-".concat(e),l),...d})});return a.displayName=i(e),a}},24313:e=>{e.exports={dropdownContainer:"OnboardingOptionsDropdown_dropdownContainer__fXruX",dropdownTrigger:"OnboardingOptionsDropdown_dropdownTrigger__bLBAT",dropdownMenu:"OnboardingOptionsDropdown_dropdownMenu__b__l_",slideDown:"OnboardingOptionsDropdown_slideDown__HpjUz",dropdownOption:"OnboardingOptionsDropdown_dropdownOption__CWe_t"}},34477:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{callServer:function(){return s.callServer},createServerReference:function(){return n},findSourceMapURL:function(){return r.findSourceMapURL}});let s=a(53806),r=a(31818),n=a(34979).createServerReference},35169:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},35695:(e,t,a)=>{"use strict";var s=a(18999);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},37184:e=>{e.exports={container:"AbleAIPage_container__elr3S",fadeIn:"AbleAIPage_fadeIn__NXmUx",qaIndicator:"AbleAIPage_qaIndicator___heUC",disableQAButton:"AbleAIPage_disableQAButton__E1IxJ",header:"AbleAIPage_header__JscyU",title:"AbleAIPage_title__phRvP",aiAvatar:"AbleAIPage_aiAvatar__BZ1hU",aiIcon:"AbleAIPage_aiIcon__cHhyi",gigsSection:"AbleAIPage_gigsSection__qSwiZ",gigsSectionTitle:"AbleAIPage_gigsSectionTitle__f4iKS",gigsLoading:"AbleAIPage_gigsLoading__k9550",noGigs:"AbleAIPage_noGigs__X5N3N",gigsGrid:"AbleAIPage_gigsGrid__rgTck",gigCard:"AbleAIPage_gigCard__Smozv",gigHeader:"AbleAIPage_gigHeader__IFODj",gigTitle:"AbleAIPage_gigTitle__7b4_p",gigStatus:"AbleAIPage_gigStatus__i3AIp",gigDetails:"AbleAIPage_gigDetails__a3GgZ",gigDetail:"AbleAIPage_gigDetail__2XR7C",gigDescription:"AbleAIPage_gigDescription__3_Yvu",feedbackSection:"AbleAIPage_feedbackSection__w_sCb",feedbackText:"AbleAIPage_feedbackText__X_7vk",feedbackButtons:"AbleAIPage_feedbackButtons__4yVtv",helpfulButton:"AbleAIPage_helpfulButton__TQgN2",notHelpfulButton:"AbleAIPage_notHelpfulButton__DJbXR",chatInput:"AbleAIPage_chatInput__XZ_BF",userAvatar:"AbleAIPage_userAvatar__0kCYo",messageInput:"AbleAIPage_messageInput__VTUV7",sendButton:"AbleAIPage_sendButton__tco55",modalOverlay:"AbleAIPage_modalOverlay__QcMhO",modalContent:"AbleAIPage_modalContent__ZxVWh",slideIn:"AbleAIPage_slideIn__xBD9n",modalHeader:"AbleAIPage_modalHeader__99kMG",closeButton:"AbleAIPage_closeButton__W1L3S",modalBody:"AbleAIPage_modalBody__SEvJ2",modalGigDetails:"AbleAIPage_modalGigDetails__ntBRE",modalGigDetail:"AbleAIPage_modalGigDetail__hbjYX",modalDescription:"AbleAIPage_modalDescription__U_w_1",modalNotes:"AbleAIPage_modalNotes__AHzro",modalFooter:"AbleAIPage_modalFooter__cgZ8m",goToOffersButton:"AbleAIPage_goToOffersButton__9qG_o"}},39672:e=>{e.exports={loadingContainer:"Loader_loadingContainer__p_FTp",loader:"Loader_loader__8pViD",l3:"Loader_l3__h_z0X"}},42474:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var s=a(95155),r=a(12115),n=a(75684),i=a.n(n),o=a(66766);let l=(0,r.memo)(e=>{let{text:t,senderType:a="bot",avatarSrc:r,showAvatar:n=!0,isNew:l=!1,role:d="GIG_WORKER"}=e,c="bot"===a,g=c?i().bubbleBot:i().bubbleUser,u=c?i().alignBot:i().alignUser,p=l?i().messageWrapperNew:"";return(0,s.jsxs)("div",{className:"".concat(i().messageWrapper," ").concat(u," ").concat(p),"data-role":d,children:[c&&n&&(0,s.jsx)("div",{className:i().avatarContainer,children:(0,s.jsx)("div",{className:i().avatar,children:(0,s.jsx)("div",{className:i().avatarInner,children:(0,s.jsx)(o.default,{src:"/images/ableai.png",alt:"Able AI",width:24,height:24,className:i().avatarImage})})})}),(0,s.jsx)("div",{className:"".concat(i().bubble," ").concat(g),children:t})]})});l.displayName="MessageBubble";let d=l},44020:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},51078:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(95155),r=a(39672),n=a.n(r);let i=e=>{let{customClass:t,customStyle:a}=e;return(0,s.jsx)("div",{className:t||n().loadingContainer,style:a,children:(0,s.jsx)("div",{className:n().loader})})}},51178:(e,t,a)=>{"use strict";a.d(t,{g:()=>r});var s=a(34477);let r=(0,s.createServerReference)("40a6088411db4989a2f014a668b13745b3cfee1afe",s.callServer,void 0,s.findSourceMapURL,"getWorkerOffers")},53904:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},54416:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},55868:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},56059:e=>{e.exports={chatInputContainer:"ChatInput_chatInputContainer__kQbSj",inputWrapper:"ChatInput_inputWrapper__YH3PQ",input:"ChatInput_input__SnAnJ",sendButton:"ChatInput_sendButton__lPB0c"}},66766:(e,t,a)=>{"use strict";a.d(t,{default:()=>r.a});var s=a(71469),r=a.n(s)},69074:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(19946).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},71469:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{default:function(){return l},getImageProps:function(){return o}});let s=a(88229),r=a(38883),n=a(33063),i=s._(a(51193));function o(e){let{props:t}=(0,r.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}}let l=n.Image},75684:e=>{e.exports={messageWrapper:"MessageBubble_messageWrapper__fGlfF",slideInPrimary:"MessageBubble_slideInPrimary__rNcDf",slideInSecondary:"MessageBubble_slideInSecondary__3xEJw",alignBot:"MessageBubble_alignBot__OXTPG",alignUser:"MessageBubble_alignUser__q4Iz0",avatarContainer:"MessageBubble_avatarContainer__Fs_Eb",avatar:"MessageBubble_avatar__fCeB8",avatarInner:"MessageBubble_avatarInner__xTgmE",avatarText:"MessageBubble_avatarText__HGFoH",avatarImage:"MessageBubble_avatarImage__uYRjw",bubble:"MessageBubble_bubble__icB0Z",bubbleBot:"MessageBubble_bubbleBot__M0YBw",bubbleUser:"MessageBubble_bubbleUser__IfTgA",messageWrapperNew:"MessageBubble_messageWrapperNew__jISf_",confirmButton:"MessageBubble_confirmButton__JXGTu"}},76203:(e,t,a)=>{Promise.resolve().then(a.bind(a,98444))},85189:(e,t,a)=>{"use strict";a.d(t,{A:()=>y});var s=a(95155),r=a(12115),n=a(88536),i=a.n(n),o=a(56059),l=a.n(o);let d=e=>{let{onSend:t,placeholder:a="Type your message...",disabled:n=!1,role:i="GIG_WORKER"}=e,[o,d]=(0,r.useState)(""),c=()=>{o.trim()&&!n&&(t(o.trim()),d(""))};return(0,s.jsx)("div",{className:l().chatInputContainer,children:(0,s.jsxs)("div",{className:l().inputWrapper,children:[(0,s.jsx)("input",{type:"text",value:o,onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),c())},placeholder:a,disabled:n,className:l().input}),(0,s.jsx)("button",{onClick:c,disabled:n||!o.trim(),className:l().sendButton,children:(0,s.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z",fill:"currentColor"})})})]})})};var c=a(35695),g=a(25731),u=a(6188),p=a(44020),h=a(13717),_=a(53904),m=a(24313),b=a.n(m);let f=e=>{let{onSwitchToManual:t,onChangeSetupMethod:a}=e,[n,i]=(0,r.useState)(!1),o=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=e=>{o.current&&!o.current.contains(e.target)&&i(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let l=e=>{i(!1),e()};return(0,s.jsxs)("div",{className:b().dropdownContainer,ref:o,children:[(0,s.jsx)("button",{className:b().dropdownTrigger,onClick:()=>i(!n),"aria-label":"Onboarding options",children:(0,s.jsx)(p.A,{size:20})}),n&&(0,s.jsxs)("div",{className:b().dropdownMenu,children:[(0,s.jsxs)("button",{className:b().dropdownOption,onClick:()=>l(t),children:[(0,s.jsx)(h.A,{size:16}),(0,s.jsx)("span",{children:"Switch to Manual Form"})]}),(0,s.jsxs)("button",{className:b().dropdownOption,onClick:()=>l(a),children:[(0,s.jsx)(_.A,{size:16}),(0,s.jsx)("span",{children:"Change Setup Method"})]})]})]})},x=r.forwardRef((e,t)=>{let{children:a,onScroll:r,className:n,onHomeClick:o,onSendMessage:l,role:p="GIG_WORKER",showChatInput:h=!1,showOnboardingOptions:_=!1,onSwitchToManual:m,onChangeSetupMethod:b}=e,x=(0,c.useRouter)(),{user:y}=(0,g.A)();return(0,s.jsx)("div",{className:"".concat(i().chatContainerWrapper," ").concat(n),children:(0,s.jsxs)("div",{className:i().chatContainer,onScroll:r,ref:t,children:[(0,s.jsx)(u.A,{onBackClick:()=>x.back()}),(0,s.jsxs)("div",{className:i().chatContent,children:[_&&m&&b&&(0,s.jsx)("div",{className:i().onboardingOptionsContainer,children:(0,s.jsx)(f,{onSwitchToManual:m,onChangeSetupMethod:b})}),a]}),h&&(0,s.jsx)(d,{onSend:e=>{l&&l(e)},role:p,placeholder:"Type your message..."})]})})});x.displayName="ChatBotLayout";let y=x},88536:e=>{e.exports={chatContainerWrapper:"ChatBotLayout_chatContainerWrapper__wnqLp",chatContainer:"ChatBotLayout_chatContainer__ewwhg",chatContent:"ChatBotLayout_chatContent__4ZfaH",header:"ChatBotLayout_header__kDs7E",headerText:"ChatBotLayout_headerText__T8qhV",footer:"ChatBotLayout_footer__6W9Pa",onboardingOptionsContainer:"ChatBotLayout_onboardingOptionsContainer__q62lL"}},98444:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>I});var s=a(95155),r=a(12115),n=a(35695),i=a(66766),o=a(4516),l=a(55868),d=a(69074),c=a(54416),g=a(14186),u=a(85189),p=a(42474),h=a(51078),_=a(25731),m=a(51178),b=a(37184),f=a.n(b),x=a(85004),y=a(72260),v=a(76294);let A=()=>(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"12px 16px",color:"var(--secondary-color)",fontWeight:600,animation:"slideIn 0.3s ease-out",opacity:0,animationFillMode:"forwards"},children:[(0,s.jsxs)("div",{style:{display:"flex",gap:"4px",background:"rgba(126, 238, 249, 0.1)",padding:"8px 12px",borderRadius:"20px",border:"1px solid rgba(126, 238, 249, 0.2)"},children:[(0,s.jsx)("span",{className:"typing-dot",style:{animation:"typingBounce 1.4s infinite ease-in-out",fontSize:"18px",lineHeight:"1"},children:"●"}),(0,s.jsx)("span",{className:"typing-dot",style:{animation:"typingBounce 1.4s infinite ease-in-out 0.2s",fontSize:"18px",lineHeight:"1"},children:"●"}),(0,s.jsx)("span",{className:"typing-dot",style:{animation:"typingBounce 1.4s infinite ease-in-out 0.4s",fontSize:"18px",lineHeight:"1"},children:"●"})]}),(0,s.jsx)("style",{children:"\n      @keyframes slideIn {\n        from {\n          opacity: 0;\n          transform: translateY(10px);\n        }\n        to {\n          opacity: 1;\n          transform: translateY(0);\n        }\n      }\n      @keyframes typingBounce {\n        0%, 60%, 100% {\n          transform: translateY(0);\n          opacity: 0.4;\n        }\n        30% {\n          transform: translateY(-8px);\n          opacity: 1;\n        }\n      }\n    "})]}),j=e=>{let{gig:t,onClick:a}=e;return(0,s.jsxs)("div",{className:f().gigCard,onClick:()=>a(t),children:[(0,s.jsx)("div",{className:f().gigTitle,children:t.role}),(0,s.jsxs)("div",{className:f().gigDetails,children:[(0,s.jsxs)("div",{className:f().gigDetail,children:[(0,s.jsx)(o.A,{className:f().gigIcon}),(0,s.jsx)("span",{children:t.locationSnippet})]}),(0,s.jsxs)("div",{className:f().gigDetail,children:[(0,s.jsx)(l.A,{className:f().gigIcon}),(0,s.jsxs)("span",{children:["\xa3",t.hourlyRate,"/hour"]})]}),(0,s.jsxs)("div",{className:f().gigDetail,children:[(0,s.jsx)(d.A,{className:f().gigIcon}),(0,s.jsx)("span",{children:t.dateString})]})]}),t.gigDescription&&(0,s.jsx)("div",{className:f().gigDescription,children:t.gigDescription})]})};function I(){let{user:e,loading:t}=(0,_.A)(),{ai:a}=(0,x.D)(),b=(0,n.useRouter)(),I=(0,n.useParams)(),w=null==I?void 0:I.userId,k=Array.isArray(w)?w[0]:w,N=(0,r.useRef)(null),C=(0,r.useRef)(null),[S,B]=(0,r.useState)(null),[P,D]=(0,r.useState)(!1),[M,T]=(0,r.useState)([{id:1,type:"bot",content:"Hello! I'm Able, your AI assistant! \uD83E\uDD16 I'm here to help you find gigs, answer questions, and provide support. You can ask me about available gigs, how the platform works, or request help with anything else. What can I help you with today?"}]),[O,R]=(0,r.useState)(!1),[G,L]=(0,r.useState)(null),[W,E]=(0,r.useState)(null),[z,H]=(0,r.useState)(!1),[q,U]=(0,r.useState)(0),[F,Y]=(0,r.useState)(!1),X="support@ableai.com",Z=async()=>{if(!(null==e?void 0:e.uid))return null;try{let t=await (0,m.g)(e.uid);if(t.success&&t.data)return[...t.data.offers,...t.data.acceptedGigs].slice(0,3)}catch(e){console.error("Error fetching gigs:",e)}return null},J=e=>{B(e),D(!0)},V=(0,r.useCallback)(async e=>{if(!a)return void L("AI service temporarily unavailable. Please try again.");try{T(e=>[...e,{id:Date.now()+1,type:"typing",isNew:!0}]);let t=v.Sj.object({properties:{response:v.Sj.string(),hasGigs:v.Sj.boolean(),gigs:v.Sj.array({items:v.Sj.object({properties:{id:v.Sj.string(),title:v.Sj.string(),description:v.Sj.string(),location:v.Sj.string(),price:v.Sj.number(),date:v.Sj.string()}})}),needsLiveAgent:v.Sj.boolean()}}),s=await (0,y.rL)("gemini-2.0-flash",{prompt:'You are Able, an AI assistant for a gig platform. Your role is to help users find gigs, answer questions about the platform, and provide support.\n\nUser message: "'.concat(e,"\"\n\nPlease respond appropriately based on the user's request:\n\n1. If they're asking about available gigs, jobs, or work opportunities, set hasGigs to true and I will fetch real gigs from the database\n2. If they need help with the platform, provide helpful guidance (set hasGigs to false)\n3. If they request a live agent, set needsLiveAgent to true\n4. Be friendly, helpful, and professional\n\nIMPORTANT: Only set hasGigs to true if the user is specifically asking about available gigs, jobs, or work opportunities. For general questions about the platform, set hasGigs to false.\n\nFor platform help, provide clear, actionable advice.\nFor gig requests, provide a helpful response and set hasGigs to true."),responseSchema:t,isStream:!1},a);if(s.ok&&s.data){let e=s.data;console.log("AI Response:",e),console.log("hasGigs:",e.hasGigs),setTimeout(async()=>{let t;if(e.hasGigs){console.log("AI requested gigs, fetching from database...");try{let e=await Z();console.log("Fetched gigs:",e),t=e||void 0}catch(e){console.error("Error fetching gigs:",e)}}else console.log("AI did not request gigs");T(a=>{let s=a.filter(e=>"typing"!==e.type),r=e.response;e.needsLiveAgent&&(r+="\n\n*Note: For more complex issues, you can request a live agent.*");let n={id:Date.now()+1,type:"bot",content:r,gigs:t,isNew:!0};return E(n.id),H(!0),Y(!1),[...s,n]});let a=Date.now()+1;E(a),H(!0),Y(!1)},1e3)}else throw Error("Failed to get AI response")}catch(e){console.error("Error getting AI response:",e),L("Failed to get response. Please try again."),setTimeout(()=>{T(e=>[...e.filter(e=>"typing"!==e.type),{id:Date.now()+2,type:"bot",content:"I'm sorry, I'm having trouble processing your request right now. Please try again in a moment.",isNew:!0}])},700)}},[a]),K=(0,r.useCallback)(()=>{z&&(H(!1),U(0),T(e=>[...e,{id:Date.now()+3,type:"bot",content:"Thanks for the feedback! If you have more questions, I'm here to help.",isNew:!0}]))},[z]),Q=(0,r.useCallback)(()=>{if(!z)return;let e=q+1;if(U(e),H(!1),e>=4){Y(!0),T(e=>[...e,{id:Date.now()+4,type:"bot",content:"I'm sorry I couldn't resolve this. I'm escalating to human support. Please email us at ".concat(X," or compose an email here: mailto:").concat(X),isNew:!0}]);return}T(e=>[...e,{id:Date.now()+5,type:"bot",content:"Sorry about that. Could you share a bit more detail so I can better assist?",isNew:!0}]),setTimeout(()=>{H(!0)},0)},[z,q]),$=(0,r.useCallback)(e=>{T(t=>[...t,{id:Date.now(),type:"user",content:e,isNew:!0}]),V(e)},[V]);return((0,r.useEffect)(()=>{C.current&&C.current.scrollIntoView({behavior:"smooth"})},[M]),(0,r.useEffect)(()=>{if(G){let e=setTimeout(()=>L(null),5e3);return()=>clearTimeout(e)}},[G]),t)?(0,s.jsx)("div",{className:f().loadingContainer,children:(0,s.jsx)("p",{children:"Loading authentication..."})}):e?(0,s.jsxs)(u.A,{ref:N,className:f().container,role:"BUYER",showChatInput:!0,onSendMessage:$,children:[G&&(0,s.jsx)("div",{style:{background:"#ff4444",color:"white",padding:"8px 16px",margin:"8px 0",borderRadius:"4px",fontSize:"14px"},children:G}),M.map((e,t)=>{let a=e.id;return"typing"===e.type?(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",marginBottom:"0.5rem"},children:(0,s.jsx)("div",{style:{flexShrink:0,marginTop:"0.25rem"},children:(0,s.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, var(--secondary-color), var(--secondary-darker-color))",boxShadow:"0 2px 8px rgba(126, 238, 249, 0.3)"},children:(0,s.jsx)("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"#000000",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid rgba(255, 255, 255, 0.2)"},children:(0,s.jsx)(i.default,{src:"/images/ableai.png",alt:"Able AI",width:24,height:24,style:{borderRadius:"50%",objectFit:"cover"}})})})})},"".concat(a,"-avatar")),(0,s.jsx)("div",{children:(0,s.jsx)(A,{})},"".concat(a,"-typing"))]},a):"bot"===e.type?(0,s.jsxs)("div",{children:[(0,s.jsx)(p.A,{text:e.content,senderType:"bot",isNew:e.isNew,role:"BUYER"}),e.gigs&&e.gigs.length>0&&(0,s.jsxs)("div",{style:{marginTop:"8px",marginLeft:"40px"},children:[(0,s.jsx)("div",{style:{fontSize:"16px",fontWeight:"600",color:"var(--secondary-color)",marginBottom:"12px"},children:"Available Gigs:"}),e.gigs.map((e,t)=>(0,s.jsx)(j,{gig:e,onClick:J},e.id||t))]}),z&&W===e.id&&!F&&(0,s.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginLeft:"40px",marginTop:"8px"},children:[(0,s.jsx)("span",{style:{fontSize:"14px",color:"var(--text-color)"},children:"Was this helpful?"}),(0,s.jsx)("button",{type:"button",onClick:K,style:{padding:"6px 10px",background:"var(--secondary-color)",color:"#000",border:"none",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:"Helpful"}),(0,s.jsx)("button",{type:"button",onClick:Q,style:{padding:"6px 10px",background:"transparent",color:"var(--secondary-color)",border:"1px solid var(--secondary-color)",borderRadius:"6px",cursor:"pointer",fontWeight:600},children:"Not helpful"})]})]},a):"user"===e.type?(0,s.jsx)(p.A,{text:"object"==typeof e.content&&null!==e.content?JSON.stringify(e.content):String(e.content||""),senderType:"user",showAvatar:!1,isNew:e.isNew,role:"BUYER"},a):null}),(0,s.jsx)("div",{ref:C}),P&&S&&(0,s.jsx)("div",{className:f().modalOverlay,onClick:()=>D(!1),children:(0,s.jsxs)("div",{className:f().modalContent,onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:f().modalHeader,children:[(0,s.jsx)("h3",{children:S.role}),(0,s.jsx)("button",{className:f().closeButton,onClick:()=>D(!1),children:(0,s.jsx)(c.A,{size:20})})]}),(0,s.jsxs)("div",{className:f().modalBody,children:[(0,s.jsxs)("div",{className:f().modalGigDetails,children:[(0,s.jsxs)("div",{className:f().modalGigDetail,children:[(0,s.jsx)(o.A,{size:16}),(0,s.jsx)("span",{children:S.locationSnippet})]}),(0,s.jsxs)("div",{className:f().modalGigDetail,children:[(0,s.jsx)(d.A,{size:16}),(0,s.jsx)("span",{children:S.dateString})]}),(0,s.jsxs)("div",{className:f().modalGigDetail,children:[(0,s.jsx)(g.A,{size:16}),(0,s.jsx)("span",{children:S.timeString})]}),(0,s.jsxs)("div",{className:f().modalGigDetail,children:[(0,s.jsx)(l.A,{size:16}),(0,s.jsxs)("span",{children:["\xa3",S.hourlyRate,"/hr"]})]}),S.estimatedHours&&(0,s.jsx)("div",{className:f().modalGigDetail,children:(0,s.jsxs)("span",{children:["Total: \xa3",S.totalPay," (",S.estimatedHours,"h)"]})})]}),S.gigDescription&&(0,s.jsxs)("div",{className:f().modalDescription,children:[(0,s.jsx)("h4",{children:"Description"}),(0,s.jsx)("p",{children:S.gigDescription})]}),S.notesForWorker&&(0,s.jsxs)("div",{className:f().modalNotes,children:[(0,s.jsx)("h4",{children:"Notes for Worker"}),(0,s.jsx)("p",{children:S.notesForWorker})]})]}),(0,s.jsx)("div",{className:f().modalFooter,children:(0,s.jsx)("button",{className:f().goToOffersButton,onClick:()=>{k&&b.push("/user/".concat(k,"/worker/offers")),D(!1)},children:"Go to Gig Offers"})})]})})]}):(0,s.jsx)(h.A,{})}}},e=>{var t=t=>e(e.s=t);e.O(0,[7918,2006,3151,2992,5965,94,3063,6874,1163,8441,1684,7358],()=>t(76203)),_N_E=e.O()}]);