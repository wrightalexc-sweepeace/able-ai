(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9030],{25731:(e,r,t)=>{"use strict";t.d(r,{A:()=>u,O:()=>d});var n=t(95155),l=t(12115),i=t(16203),a=t(85004);let s=(0,l.createContext)({user:null,loading:!0});async function o(e){for(let t=0;t<10;t++){var r;let t=await (0,i.yx)(e,!0);if(null==(r=t.claims)?void 0:r.role)return t;await new Promise(e=>setTimeout(e,1e3))}return null}let d=e=>{let{children:r}=e,[t,d]=(0,l.useState)(null),[u,c]=(0,l.useState)(!0),{authClient:h,loading:f}=(0,a.D)();return(0,l.useEffect)(()=>{let e=()=>{};return!f&&h&&(e=(0,i.hg)(h,async e=>{if(e){let r=await o(e);r?d(Object.assign(e,{token:r.token,claims:r.claims})):d(null)}else d(null);c(!1)})),()=>e()},[f]),(0,n.jsx)(s.Provider,{value:{user:t,loading:u},children:r})},u=()=>(0,l.useContext)(s)},34477:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{callServer:function(){return n.callServer},createServerReference:function(){return i},findSourceMapURL:function(){return l.findSourceMapURL}});let n=t(53806),l=t(31818),i=t(34979).createServerReference},67329:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>h});var n=t(95155),l=t(12115);let i={page:{minHeight:"100vh",background:"#000",color:"white"},header:{padding:"32px 24px"},title:{fontSize:28,fontWeight:800,marginBottom:6},main:{padding:"0 24px 40px"},formGrid:{maxWidth:640,margin:"0 auto",display:"grid",gap:16,gridTemplateColumns:"1fr"},colHalf:{gridColumn:"1 / -1"},colFull:{gridColumn:"1 / -1"},fieldRow:{display:"grid",gap:8},label:{color:"#e5e7eb",fontSize:13,fontWeight:600,display:"flex",alignItems:"center",gap:6},required:{color:"#9ca3af",fontSize:12},help:{color:"#9ca3af",fontSize:11,marginTop:6},input:{width:"100%",padding:"12px 16px",borderRadius:18,border:"1px solid #374151",backgroundColor:"#111827",color:"#e5e7eb",fontSize:14,outline:"none",transition:"box-shadow 120ms ease, border-color 120ms ease"},inputFocus:{boxShadow:"0 0 0 2px rgba(96,165,250,0.45)"},banner:{color:"#e5e7eb",lineHeight:1.5,fontSize:16},error:{color:"#fca5a5",fontSize:13},submit:{width:"100%",padding:"14px 16px",background:"#60a5fa",color:"#0b0f1a",borderRadius:12,border:"none",fontWeight:800,cursor:"pointer"},result:{maxWidth:960,margin:"18px auto 0",padding:16,border:"1px solid #1f2937",borderRadius:12,background:"#0b1220",color:"#e5e7eb",fontSize:14},resultHeader:{display:"flex",gap:8,alignItems:"center",marginBottom:8},resultName:{},resultGrid:{display:"grid",gap:6},badge:{color:"white",padding:"2px 8px",borderRadius:999,fontSize:12},resultDetail:{fontSize:"14px",marginTop:"6px",color:"#e5e7eb"}};var a=t(34477);let s=(0,a.createServerReference)("403cc22ea473a4e0e8cd51344cd05b484e1dd43c6d",a.callServer,void 0,a.findSourceMapURL,"runRtwCheckAndStore");var o=t(25731);function d(e){let{id:r,label:t,required:l,helpText:a,children:s}=e;return(0,n.jsxs)("div",{style:i.fieldRow,children:[(0,n.jsxs)("label",{htmlFor:r,style:i.label,children:[t," ",l&&(0,n.jsx)("span",{style:i.required,children:"(Required)"})]}),s,a?(0,n.jsx)("div",{style:i.help,children:a}):null]})}function u(e){let{id:r,type:t="text",placeholder:a,value:s,onChange:o}=e,[d,u]=(0,l.useState)(!1),c=d?{...i.input,...i.inputFocus}:i.input;return(0,n.jsx)("input",{id:r,type:t,placeholder:a,value:s,onChange:e=>o(e.target.value),onFocus:()=>u(!0),onBlur:()=>u(!1),style:{...c,..."date"===t?{colorScheme:"dark"}:null}})}function c(e){let{children:r}=e;return(0,n.jsx)("div",{style:i.banner,children:r})}function h(){var e;let[r,t]=(0,l.useState)({share_code:"",dob:"",forename:"",surname:""}),[a,h]=(0,l.useState)(!1),[f,m]=(0,l.useState)(null),[p,g]=(0,l.useState)(null),{user:x}=(0,o.A)();async function b(e){e.preventDefault(),g(null),m(null);let t=function(e){if(!e)return null;if(/^\d{4}-\d{2}-\d{2}$/.test(e)){let[r,t,n]=e.split("-").map(Number);return isNaN(new Date(r,t-1,n).getTime())?null:e}if(/^\d{2}-\d{2}-\d{4}$/.test(e)){let[r,t,n]=e.split("-").map(Number);return isNaN(new Date(n,t-1,r).getTime())?null:e}if(/^\d{2}\/\d{2}\/\d{4}$/.test(e)){let[r,t,n]=e.split("/").map(Number);return isNaN(new Date(n,t-1,r).getTime())?null:e}return null}(r.dob);if(!t){alert("Please enter a valid date of birth."),g("Please enter a valid date of birth.");return}if(function(e){let r=new Date,t=new Date(r.getFullYear()-18,r.getMonth(),r.getDate());return new Date(e)>t}(t)){alert("We can only process applications for individuals aged 18 or over."),g("Applicants must be at least 18 years old.");return}if(null==x?void 0:x.uid){h(!0);try{let{error:e,payload:n}=await s({userId:null==x?void 0:x.uid,forename:r.forename,surname:r.surname,dob:t,shareCode:r.share_code});if(e)throw Error();console.warn(n),m(n)}catch(e){g(e.message||"Something went wrong")}finally{h(!1)}}}return(0,n.jsxs)("div",{style:i.page,children:[(0,n.jsx)("header",{style:i.header,children:(0,n.jsx)("h1",{style:i.title,children:"Validate your Right to Work in the UK"})}),(0,n.jsxs)("main",{style:i.main,children:[(0,n.jsxs)("form",{onSubmit:b,style:i.formGrid,children:[(0,n.jsx)("div",{style:i.colHalf,children:(0,n.jsx)(d,{id:"share_code",label:"Share Code",required:!0,helpText:"This is usually 8–11 characters, a mixture of letters and numbers, starting with ‘W’.",children:(0,n.jsx)(u,{id:"share_code",placeholder:"Enter share code",value:r.share_code,onChange:e=>t(r=>({...r,share_code:e}))})})}),(0,n.jsx)("div",{style:i.colHalf,children:(0,n.jsx)(d,{id:"dob",label:"Date of Birth",required:!0,children:(0,n.jsx)(u,{id:"dob",type:"date",placeholder:"dd-mm-yyyy",value:r.dob,onChange:e=>t(r=>({...r,dob:e}))})})}),(0,n.jsx)("div",{style:i.colHalf,children:(0,n.jsx)(d,{id:"forename",label:"Forename",required:!0,children:(0,n.jsx)(u,{id:"forename",placeholder:"Enter first name(s)",value:r.forename,onChange:e=>t(r=>({...r,forename:e}))})})}),(0,n.jsx)("div",{style:i.colHalf,children:(0,n.jsx)(d,{id:"surname",label:"Surname",required:!0,children:(0,n.jsx)(u,{id:"surname",placeholder:"Enter surname(s)",value:r.surname,onChange:e=>t(r=>({...r,surname:e}))})})}),(0,n.jsx)("div",{style:i.colFull,children:(0,n.jsx)(c,{children:"Sorry, right now because of UK immigration laws, foreign students cannot work as freelancers :("})}),p&&(0,n.jsx)("div",{style:i.colFull,children:(0,n.jsx)("div",{style:i.error,children:p})}),(0,n.jsx)("div",{style:i.colFull,children:(0,n.jsx)("button",{disabled:a,type:"submit",style:i.submit,children:a?"Checking...":"Submit"})})]}),f&&(0,n.jsxs)("section",{style:i.result,children:[(0,n.jsxs)("div",{style:i.resultHeader,children:[(0,n.jsx)(function(e){let{outcome:r}=e;return(0,n.jsx)("span",{style:{...i.badge,background:"ACCEPTED"===r?"#10b981":"EXPIRED"===r||"REJECTED"===r?"#ef4444":"#f59e0b"},children:r})},{outcome:f.outcome}),(0,n.jsxs)("strong",{style:i.resultName,children:[f.name.forename," ",f.name.surname]})]}),(0,n.jsxs)("div",{style:i.resultGrid,children:[(0,n.jsxs)("div",{children:["DOB: ",f.dob]}),(0,n.jsxs)("div",{children:["Permission expiry: ",null!=(e=f.permission_expiry_date)?e:"—"]}),(0,n.jsxs)("div",{children:["Reference: ",f.govuk_check_details.reference_number]}),(0,n.jsxs)("div",{children:["Last checked: ",new Date(f.last_checked_at).toLocaleString()]}),(0,n.jsxs)("div",{children:["Company: ",f.govuk_check_details.company_name]}),f.details&&(0,n.jsxs)("p",{style:i.resultDetail,children:[(0,n.jsx)("strong",{children:"Status:"})," ",f.details]})]})]})]})]})}},74568:(e,r,t)=>{Promise.resolve().then(t.bind(t,67329))},85004:(e,r,t)=>{"use strict";t.d(r,{D:()=>f,R:()=>h});var n=t(95155),l=t(12115),i=t(23915),a=t(16203),s=t(35317),o=t(90858),d=t(74826),u=t(20996);let c=(0,l.createContext)(null),h=e=>{let{children:r}=e,[t,h]=l.useState(null),[f,m]=l.useState(null),[p,g]=l.useState(null),[x,b]=l.useState(null),[v,y]=l.useState(null),[j,S]=l.useState(!0);return(0,l.useEffect)(()=>{!async function(){let e,r=await fetch("/firebase-config.json"),t=await r.json();0===(0,i.Dk)().length?(console.log("[Firebase] Initializing new instance..."),e=(0,i.Wp)(t)):(console.log("[Firebase] Reusing existing instance."),e=(0,i.Sx)()),h((0,a.xI)(e)),g((0,s.aU)(e)),b((0,o.c7)(e)),y((0,d.lS)(e,{backend:new d.C8})),m((0,u.dG)(e)),S(!1)}()},[]),(0,n.jsx)(c.Provider,{value:{authClient:t,db:p,storage:x,ai:v,messaging:f,loading:j},children:r})},f=()=>{let e=(0,l.useContext)(c);if(!e)throw Error("useFirebase must be used within FirebaseProvider");return e}}},e=>{var r=r=>e(e.s=r);e.O(0,[2992,5965,94,8441,1684,7358],()=>r(74568)),_N_E=e.O()}]);