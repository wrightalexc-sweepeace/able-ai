(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2202],{20333:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>c});var t=s(95155),l=s(12115),i=s(35695),n=s(51154),r=s(1444),o=s(25731);async function d(e,a){return await new Promise(e=>setTimeout(e,500)),{id:a,role:"Bartender",workerName:"Benji Asamoah",workerAvatarUrl:"/images/benji.jpeg",workerId:e,date:new Date(Date.now()-1728e5).toISOString(),hourlyRate:25,hoursWorked:8,totalPayment:200,duration:"4 hours",details:"Completed gig on Monday, 9:00 am. Location: Central Train station",earnings:80}}function c(){let e=(0,i.useRouter)(),a=(0,i.useParams)(),s=a.userId,c=a.gigId,{user:u,loading:m}=(0,o.A)(),f=null==u?void 0:u.uid,[h,x]=(0,l.useState)(null),[b,g]=(0,l.useState)(!0),[k,j]=(0,l.useState)(!1),[v,N]=(0,l.useState)(null),[w,y]=(0,l.useState)(null);return((0,l.useEffect)(()=>{!m&&((null==u?void 0:u.claims.role)==="QA"&&c||u&&f===s&&c)&&(g(!0),d(f,c).then(a=>{a?x(a):(N("Gig not found, not ready for feedback, or feedback already submitted."),e.push("/user/".concat(null==u?void 0:u.uid,"/worker")))}).catch(()=>{N("Could not load gig information for feedback.")}).finally(()=>g(!1)))},[u,m,f,s,c]),m||b)?(0,t.jsxs)("div",{className:"flex items-center justify-center h-40",children:[(0,t.jsx)(n.A,{className:"animate-spin",size:32})," Loading..."]}):!v||h&&u&&(null==u?void 0:u.claims.role)==="GIG_WORKER"||w?h||w||!u||(null==u?void 0:u.claims.role)!=="GIG_WORKER"?w?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-60",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold mb-2",children:"Feedback Submitted"}),(0,t.jsx)("p",{className:"text-green-600",children:w})]}):(0,t.jsx)(r.A,{gigData:h,user:u,role:"GIG_WORKER",mode:"worker",onSubmit:e=>(N(null),y(null),null===e.wouldWorkAgain)?void N("Please indicate if you would work with this buyer again."):h&&(null==u?void 0:u.uid)?void(j(!0),setTimeout(()=>{y("Feedback for ".concat(h.workerName," submitted successfully!")),j(!1)},1200)):void N("Gig information or user ID is missing."),loading:k,error:v,successMessage:w,handleBack:()=>e.back()}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-60",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold mb-2",children:"Feedback Not Available"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Gig information not available for feedback."})]}):(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center h-60",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold mb-2",children:"Feedback Error"}),(0,t.jsx)("p",{className:"text-red-600",children:v})]})}},65184:(e,a,s)=>{Promise.resolve().then(s.bind(s,20333))}},e=>{var a=a=>e(e.s=a);e.O(0,[5146,3151,2006,2992,5965,94,3063,6874,3529,8441,1684,7358],()=>a(65184)),_N_E=e.O()}]);