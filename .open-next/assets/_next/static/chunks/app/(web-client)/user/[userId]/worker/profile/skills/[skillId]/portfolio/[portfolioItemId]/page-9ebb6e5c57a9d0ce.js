(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1566],{4229:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(19946).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},19946:(e,t,a)=>{"use strict";a.d(t,{A:()=>d});var l=a(12115);let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),n=e=>{let t=o(e);return t.charAt(0).toUpperCase()+t.slice(1)},r=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},s=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var u={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,l.forwardRef)((e,t)=>{let{color:a="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:n,className:c="",children:d,iconNode:m,...p}=e;return(0,l.createElement)("svg",{ref:t,...u,width:i,height:i,stroke:a,strokeWidth:n?24*Number(o)/Number(i):o,className:r("lucide",c),...!d&&!s(p)&&{"aria-hidden":"true"},...p},[...m.map(e=>{let[t,a]=e;return(0,l.createElement)(t,a)}),...Array.isArray(d)?d:[d]])}),d=(e,t)=>{let a=(0,l.forwardRef)((a,o)=>{let{className:s,...u}=a;return(0,l.createElement)(c,{ref:o,iconNode:t,className:r("lucide-".concat(i(n(e))),"lucide-".concat(e),s),...u})});return a.displayName=n(e),a}},22495:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>C});var l=a(95155),i=a(12115),o=a(35695),n=a(54416),r=a(80928),s=a.n(r);let u=e=>{let{onClick:t,ariaLabel:a="Close"}=e;return(0,l.jsx)("button",{onClick:t,className:s().closeButton,"aria-label":a,children:(0,l.jsx)(n.A,{size:24})})};var c=a(63586),d=a.n(c);let m=e=>{let{title:t,icon:a,children:i,className:o="",titleClassName:n="",contentClassName:r=""}=e;return(0,l.jsxs)("div",{className:"".concat(d().card," ").concat(o),children:[t&&(0,l.jsxs)("h2",{className:"".concat(d().cardTitle," ").concat(n),children:[a&&(0,l.jsx)(a,{size:20,className:d().titleIcon}),t]}),(0,l.jsx)("div",{className:"".concat(d().cardContent," ").concat(r),children:i})]})};var p=a(28399),g=a(62310),h=a(51154),b=a(4229),_=a(99696),f=a.n(_),x=a(25731);async function v(e,t,a){return(console.log("Fetching portfolio item: ".concat(a," for worker: ").concat(e,", skill: ").concat(t)),await new Promise(e=>setTimeout(e,500)),"p1"===a&&"benji-asamoah-id"===e&&"bartender-skill-id"===t)?{id:"p1",type:"image",thumbnailUrl:"/images/mock-portfolio-1.jpg",fullUrl:"/images/mock-portfolio-1-full.jpg",caption:"Mixing drinks at a wedding"}:"p3"===a&&"benji-asamoah-id"===e&&"bartender-skill-id"===t?{id:"p3",type:"video",thumbnailUrl:"/images/mock-video-thumb.jpg",fullUrl:"https://www.youtube.com/watch?v=mockvideo",caption:"Flair bartending demo"}:null}function C(){let e=(0,o.useRouter)(),t=(0,o.useParams)(),a=(0,o.usePathname)(),n=t.userId,r=t.skillId,s=t.portfolioItemId,{user:c,loading:d}=(0,x.A)(),_=null==c?void 0:c.uid,[C,j]=(0,i.useState)({type:"image",thumbnailUrl:"",fullUrl:"",caption:""}),[k,y]=(0,i.useState)(!0),[P,w]=(0,i.useState)(!1),[S,I]=(0,i.useState)(null),N="new"===s;(0,i.useEffect)(()=>{if(!d){if(!_){console.error("User is authenticated but UID is missing. Redirecting to signin."),e.push("/signin?redirect=".concat(encodeURIComponent(a)));return}if(_!==n){I("You are not authorized to edit this portfolio item."),y(!1),e.push("/signin?error=unauthorized");return}}},[c,d,_,n,e,a]),(0,i.useEffect)(()=>{if(d||!c||!_||_!==n){N||S||y(!1);return}N?(j({type:"image",thumbnailUrl:"",fullUrl:"",caption:""}),I(null),y(!1)):(y(!0),v(n,r,s).then(e=>{e?(j(e),I(null)):I("Portfolio item not found.")}).catch(e=>{console.error("Error loading portfolio item:",e),I("Could not load portfolio item.")}).finally(()=>y(!1)))},[c,d,_,n,r,s,N,S]);let A=e=>{let{name:t,value:a}=e.target;j({...C,[t]:a})},T=async()=>{if(!P){w(!0),I(null),console.log("Saving portfolio item data:",C);try{N?console.log("Simulating create..."):console.log("Simulating update..."),await new Promise(e=>setTimeout(e,1500)),console.log("Save successful!"),e.back()}catch(e){console.error("Error saving portfolio item:",e),I("Failed to save portfolio item.")}finally{w(!1)}}};return d||k?(0,l.jsxs)("div",{className:f().pageLoadingContainer,children:[(0,l.jsx)(h.A,{className:"animate-spin",size:48})," Loading Item..."]}):S?(0,l.jsxs)("div",{className:f().pageContainer,children:[" ",(0,l.jsx)(u,{onClick:()=>e.back()}),(0,l.jsx)("div",{className:f().pageWrapper,style:{paddingTop:"2rem",textAlign:"center"},children:(0,l.jsx)("p",{className:f().errorMessage,children:S})})]}):(0,l.jsxs)("div",{className:f().pageContainer,children:[(0,l.jsx)(u,{onClick:()=>e.back()}),(0,l.jsx)("h1",{className:f().pageTitle,children:N?"Add New Portfolio Item":"Edit Portfolio Item"}),(0,l.jsxs)(m,{title:"Item Details",children:[(0,l.jsxs)("div",{className:f().formField,children:[(0,l.jsx)("label",{htmlFor:"itemType",className:f().formLabel,children:"Item Type"}),(0,l.jsxs)("select",{id:"itemType",name:"type",value:C.type,onChange:e=>{j({...C,type:e.target.value})},className:f().selectField,children:[(0,l.jsx)("option",{value:"image",children:"Image"}),(0,l.jsx)("option",{value:"video",children:"Video"})]})]}),(0,l.jsx)(p.A,{label:"Thumbnail URL",id:"thumbnailUrl",name:"thumbnailUrl",value:C.thumbnailUrl,onChange:A,placeholder:"e.g., /images/my-image-thumb.jpg or a direct URL"}),(0,l.jsx)(p.A,{label:"image"===C.type?"Full Image URL (Optional)":"Video URL",id:"fullUrl",name:"fullUrl",value:C.fullUrl||"",onChange:A,placeholder:"image"===C.type?"e.g., /images/my-image-full.jpg":"e.g., https://www.youtube.com/watch?v=...'"}),"video"===C.type&&(0,l.jsx)("p",{className:f().hintText,children:"Currently only supports public YouTube or Vimeo links."}),(0,l.jsx)(p.A,{label:"Caption (Optional)",id:"caption",name:"caption",value:C.caption||"",onChange:A,placeholder:"e.g., Mixing drinks at a wedding"})]}),(0,l.jsx)("div",{className:f().saveButtonContainer,children:(0,l.jsxs)(g.A,{onClick:T,disabled:P,children:[(0,l.jsx)(b.A,{size:20})," ",P?"Saving...":N?"Create Item":"Save Changes"]})})]})}},25731:(e,t,a)=>{"use strict";a.d(t,{A:()=>c,O:()=>u});var l=a(95155),i=a(12115),o=a(16203),n=a(85004);let r=(0,i.createContext)({user:null,loading:!0});async function s(e){for(let a=0;a<10;a++){var t;let a=await (0,o.yx)(e,!0);if(null==(t=a.claims)?void 0:t.role)return a;await new Promise(e=>setTimeout(e,1e3))}return null}let u=e=>{let{children:t}=e,[a,u]=(0,i.useState)(null),[c,d]=(0,i.useState)(!0),{authClient:m,loading:p}=(0,n.D)();return(0,i.useEffect)(()=>{let e=()=>{};return!p&&m&&(e=(0,o.hg)(m,async e=>{if(e){let t=await s(e);t?u(Object.assign(e,{token:t.token,claims:t.claims})):u(null)}else u(null);d(!1)})),()=>e()},[p]),(0,l.jsx)(r.Provider,{value:{user:a,loading:c},children:t})},c=()=>(0,i.useContext)(r)},28399:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var l=a(95155);a(12115);var i=a(41203),o=a.n(i);let n=e=>{let{id:t,name:a,placeholder:i,type:n="text",value:r,onChange:s,required:u=!1,...c}=e;return(0,l.jsx)("input",{id:t,name:a,className:o().input,type:n,placeholder:i,value:r,onChange:s,required:u,...c})}},31323:e=>{e.exports={button:"SubmitButton_button__5Wvdr",buttonTextDesktop:"SubmitButton_buttonTextDesktop__op4yl",buttonIconMobile:"SubmitButton_buttonIconMobile__GxFRF",loadingTextDesktop:"SubmitButton_loadingTextDesktop__YgD0N",loadingTextMobile:"SubmitButton_loadingTextMobile___tT0O",loaderMobile:"SubmitButton_loaderMobile__1Gkg5",l3:"SubmitButton_l3__gSX9e",loaderDesktop:"SubmitButton_loaderDesktop__ZWl3R",l5:"SubmitButton_l5__0hU8s",loadingText:"SubmitButton_loadingText__CbZns",loading:"SubmitButton_loading__pKbxt"}},35695:(e,t,a)=>{"use strict";var l=a(18999);a.o(l,"useParams")&&a.d(t,{useParams:function(){return l.useParams}}),a.o(l,"usePathname")&&a.d(t,{usePathname:function(){return l.usePathname}}),a.o(l,"useRouter")&&a.d(t,{useRouter:function(){return l.useRouter}}),a.o(l,"useSearchParams")&&a.d(t,{useSearchParams:function(){return l.useSearchParams}})},41203:e=>{e.exports={input:"InputField_input__NlH8Q"}},51154:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(19946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},52864:(e,t,a)=>{Promise.resolve().then(a.bind(a,22495))},54416:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let l=(0,a(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},62310:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var l=a(95155);a(12115);var i=a(31323),o=a.n(i);let n=(0,a(19946).A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),r=e=>{let{children:t,disabled:a=!1,loading:i=!1,...r}=e;return(0,l.jsx)("button",{type:"submit",className:o().button,disabled:a||i,"aria-label":i?"Processing":"string"==typeof t?t:"Submit",...r,children:i?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:o().loaderMobile}),(0,l.jsx)("span",{className:o().loaderDesktop})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:o().buttonTextDesktop,children:t}),(0,l.jsx)("span",{className:o().buttonIconMobile,children:(0,l.jsx)(n,{size:18,strokeWidth:2.5})})]})})}},63586:e=>{e.exports={card:"ContentCard_card__Za5Sy",cardTitle:"ContentCard_cardTitle__4B_hn",titleIcon:"ContentCard_titleIcon__m_p2v",cardContent:"ContentCard_cardContent__fIbLA"}},80928:e=>{e.exports={closeButton:"PageCloseButton_closeButton__tJ2OZ"}},85004:(e,t,a)=>{"use strict";a.d(t,{D:()=>p,R:()=>m});var l=a(95155),i=a(12115),o=a(23915),n=a(16203),r=a(35317),s=a(90858),u=a(74826),c=a(20996);let d=(0,i.createContext)(null),m=e=>{let{children:t}=e,[a,m]=i.useState(null),[p,g]=i.useState(null),[h,b]=i.useState(null),[_,f]=i.useState(null),[x,v]=i.useState(null),[C,j]=i.useState(!0);return(0,i.useEffect)(()=>{!async function(){let e,t=await fetch("/firebase-config.json"),a=await t.json();0===(0,o.Dk)().length?(console.log("[Firebase] Initializing new instance..."),e=(0,o.Wp)(a)):(console.log("[Firebase] Reusing existing instance."),e=(0,o.Sx)()),m((0,n.xI)(e)),b((0,r.aU)(e)),f((0,s.c7)(e)),v((0,u.lS)(e,{backend:new u.C8})),g((0,c.dG)(e)),j(!1)}()},[]),(0,l.jsx)(d.Provider,{value:{authClient:a,db:h,storage:_,ai:x,messaging:p,loading:C},children:t})},p=()=>{let e=(0,i.useContext)(d);if(!e)throw Error("useFirebase must be used within FirebaseProvider");return e}},99696:e=>{e.exports={pageContainer:"EditablePortfolioItemPage_pageContainer__2pcQD",pageLoadingContainer:"EditablePortfolioItemPage_pageLoadingContainer__U3MiA",pageWrapper:"EditablePortfolioItemPage_pageWrapper__AhOZE",errorMessage:"EditablePortfolioItemPage_errorMessage___42aM",pageTitle:"EditablePortfolioItemPage_pageTitle__BUG_6",formField:"EditablePortfolioItemPage_formField__Pesum",formLabel:"EditablePortfolioItemPage_formLabel__j0I0B",selectField:"EditablePortfolioItemPage_selectField__Cd31r",hintText:"EditablePortfolioItemPage_hintText__HBW1o",saveButtonContainer:"EditablePortfolioItemPage_saveButtonContainer__2HNv_"}}},e=>{var t=t=>e(e.s=t);e.O(0,[7208,2992,5965,94,8441,1684,7358],()=>t(52864)),_N_E=e.O()}]);