(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5152],{14928:(e,i,a)=>{Promise.resolve().then(a.bind(a,38253))},38253:(e,i,a)=>{"use strict";a.r(i),a.d(i,{default:()=>_});var n=a(95155),r=a(12115),s=a(35695),t=a(25731),l=a(51154),o=a(82428),d=a.n(o),g=a(87647),c=a(53243),u=a(51178);async function f(e,i){console.log("Fetching gig details for worker:",null==e?void 0:e.uid,"gig:",i);let{gig:a,status:n}=await (0,c.Y)({gigId:i,userId:null==e?void 0:e.uid,role:"worker",isViewQA:!0});return a&&200===n?a:null}async function p(e,i){try{var a;let n=await (0,u.g)(e.uid);if(n.success&&(null==(a=n.data)?void 0:a.offers))return n.data.offers.some(e=>e.id===i);return!1}catch(e){return console.error("Error checking if gig is available offer:",e),!1}}function _(){let e=(0,s.useParams)(),i=e.userId,a=e.gigId,{user:o,loading:c}=(0,t.A)(),u=null==o?void 0:o.uid,[_,h]=(0,r.useState)(null),[v,m]=(0,r.useState)(!0),[G,x]=(0,r.useState)(null),[C,S]=(0,r.useState)(!1),[j,k]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{!c&&((null==o?void 0:o.claims.role)==="QA"&&i&&a||o&&u===i&&a)&&(m(!0),f(o,a).then(e=>e?(h(e),k(!0),p(o,a)):(x("Gig not found or access denied."),!1)).then(e=>{S(e)}).catch(e=>{console.error("Failed to fetch gig details:",e),x("Could not load gig details.")}).finally(()=>{m(!1),k(!1)}))},[c,o,u,i,a]),v)?(console.log("Rendering loading screen, isLoadingGig:",v),(0,n.jsx)("div",{className:d().loadingContainer,style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"#1A1A1A",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999},children:(0,n.jsx)("div",{className:d().loadingContent,children:(0,n.jsx)(l.A,{className:d().loadingSpinner,size:48,style:{color:"white",animation:"spin 1s linear infinite"}})})})):G?(0,n.jsx)("div",{className:d().container,children:(0,n.jsx)("div",{className:d().pageWrapper,children:(0,n.jsx)("p",{className:d().errorMessage,children:G})})}):_?(0,n.jsx)(g.A,{userId:i,role:"worker",gig:_,setGig:h,isAvailableOffer:C,isCheckingOffer:j}):(0,n.jsx)("div",{className:d().container,children:(0,n.jsx)("div",{className:d().pageWrapper,children:(0,n.jsx)("p",{className:d().emptyState,children:"Gig details not found."})})})}},51154:(e,i,a)=>{"use strict";a.d(i,{A:()=>n});let n=(0,a(19946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},51178:(e,i,a)=>{"use strict";a.d(i,{g:()=>r});var n=a(34477);let r=(0,n.createServerReference)("40a6088411db4989a2f014a668b13745b3cfee1afe",n.callServer,void 0,n.findSourceMapURL,"getWorkerOffers")},82428:e=>{e.exports={loadingContainer:"GigDetailsPage_loadingContainer__6Oa5O",loadingContent:"GigDetailsPage_loadingContent__CXDwj",loadingSpinner:"GigDetailsPage_loadingSpinner__VjG5m",spin:"GigDetailsPage_spin__uGDQ8",container:"GigDetailsPage_container__s3nCn",pageWrapper:"GigDetailsPage_pageWrapper__Oiked",errorMessage:"GigDetailsPage_errorMessage___Pwy8",emptyState:"GigDetailsPage_emptyState__6GRVG"}}},e=>{var i=i=>e(e.s=i);e.O(0,[2027,3151,2006,2992,5965,94,3063,6874,3753,2861,8441,1684,7358],()=>i(14928)),_N_E=e.O()}]);