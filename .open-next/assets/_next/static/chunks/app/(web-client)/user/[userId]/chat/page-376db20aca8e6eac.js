(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6666],{10019:e=>{e.exports={container:"ChatPage_container__2Sp0l",fadeIn:"ChatPage_fadeIn__DWm1K",loadingContainer:"ChatPage_loadingContainer__HDUUx",header:"ChatPage_header__YobJZ",backButton:"ChatPage_backButton__rVy_p",headerContent:"ChatPage_headerContent__idHCY",participantInfo:"ChatPage_participantInfo__PYxc_",avatar:"ChatPage_avatar__ge94E",avatarImage:"ChatPage_avatarImage__IYfap",avatarPlaceholder:"ChatPage_avatarPlaceholder__Yma_n",participantDetails:"ChatPage_participantDetails__LRbw5",participantName:"ChatPage_participantName__pMphX",participantRoleContainer:"ChatPage_participantRoleContainer__wh0mr",participantRole:"ChatPage_participantRole__JOiQ3",chatContent:"ChatPage_chatContent__Mkp5R",messageWrapper:"ChatPage_messageWrapper__USF7Y",slideInPrimary:"ChatPage_slideInPrimary__8wms6",messageUser:"ChatPage_messageUser__CvvzV",messageOther:"ChatPage_messageOther__UeWlB",messageContent:"ChatPage_messageContent__bVVVF",messageBubble:"ChatPage_messageBubble__37L1l",bubbleUser:"ChatPage_bubbleUser__9ytd4",bubbleOther:"ChatPage_bubbleOther__qmhv1",messageText:"ChatPage_messageText__aSErg",messageFooter:"ChatPage_messageFooter__h1FXZ",messageTime:"ChatPage_messageTime__pNY35",messageRole:"ChatPage_messageRole__mhQe5",typingIndicator:"ChatPage_typingIndicator__pdOkm",typingBounce:"ChatPage_typingBounce__nFRqI",chatInput:"ChatPage_chatInput__AvAAB",inputWrapper:"ChatPage_inputWrapper__dcRUz",input:"ChatPage_input__RLxVY",sendButton:"ChatPage_sendButton__xq_A6"}},12486:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},17576:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},19946:(e,a,t)=>{"use strict";t.d(a,{A:()=>u});var s=t(12115);let r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,t)=>t?t.toUpperCase():a.toLowerCase()),i=e=>{let a=n(e);return a.charAt(0).toUpperCase()+a.slice(1)},l=function(){for(var e=arguments.length,a=Array(e),t=0;t<e;t++)a[t]=arguments[t];return a.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim()},o=e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,s.forwardRef)((e,a)=>{let{color:t="currentColor",size:r=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:d="",children:u,iconNode:h,...m}=e;return(0,s.createElement)("svg",{ref:a,...c,width:r,height:r,stroke:t,strokeWidth:i?24*Number(n)/Number(r):n,className:l("lucide",d),...!u&&!o(m)&&{"aria-hidden":"true"},...m},[...h.map(e=>{let[a,t]=e;return(0,s.createElement)(a,t)}),...Array.isArray(u)?u:[u]])}),u=(e,a)=>{let t=(0,s.forwardRef)((t,n)=>{let{className:o,...c}=t;return(0,s.createElement)(d,{ref:n,iconNode:a,className:l("lucide-".concat(r(i(e))),"lucide-".concat(e),o),...c})});return t.displayName=i(e),t}},25731:(e,a,t)=>{"use strict";t.d(a,{A:()=>d,O:()=>c});var s=t(95155),r=t(12115),n=t(16203),i=t(85004);let l=(0,r.createContext)({user:null,loading:!0});async function o(e){for(let t=0;t<10;t++){var a;let t=await (0,n.yx)(e,!0);if(null==(a=t.claims)?void 0:a.role)return t;await new Promise(e=>setTimeout(e,1e3))}return null}let c=e=>{let{children:a}=e,[t,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(!0),{authClient:h,loading:m}=(0,i.D)();return(0,r.useEffect)(()=>{let e=()=>{};return!m&&h&&(e=(0,n.hg)(h,async e=>{if(e){let a=await o(e);a?c(Object.assign(e,{token:a.token,claims:a.claims})):c(null)}else c(null);u(!1)})),()=>e()},[m]),(0,s.jsx)(l.Provider,{value:{user:t,loading:d},children:a})},d=()=>(0,r.useContext)(l)},35169:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},35622:(e,a,t)=>{Promise.resolve().then(t.bind(t,35881))},35695:(e,a,t)=>{"use strict";var s=t(18999);t.o(s,"useParams")&&t.d(a,{useParams:function(){return s.useParams}}),t.o(s,"usePathname")&&t.d(a,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(a,{useSearchParams:function(){return s.useSearchParams}})},35881:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>p});var s=t(95155),r=t(12115),n=t(35695),i=t(66766),l=t(71007),o=t(17576),c=t(35169),d=t(12486),u=t(51078),h=t(10019),m=t.n(h),g=t(25731);function p(){let{user:e,loading:a}=(0,g.A)(),t=(0,n.useRouter)(),h=(0,r.useRef)(null),p=(0,r.useRef)(null),[_]=(0,r.useState)([{id:"benji-123",name:"Benji",role:"WORKER"},{id:"sue-456",name:"Sue",role:"BUYER"}]),[v,f]=(0,r.useState)([{id:"1",senderId:"benji-123",senderName:"Benji",senderRole:"WORKER",content:"Hi! I just wanted to confirm the details of our gig. Could you let me know if there's anything specific you'd like me to focus on?",timestamp:new Date(Date.now()-3e5)},{id:"2",senderId:"sue-456",senderName:"Sue",senderRole:"BUYER",content:"Hello! Yes, please focus on the main tasks as outlined in the gig detail. Let me know if you have any questions.",timestamp:new Date(Date.now()-18e4)},{id:"3",senderId:"benji-123",senderName:"Benji",senderRole:"WORKER",content:"Great! I look forward to working with you. I've started on it right away. Thank you for the clarification.",timestamp:new Date(Date.now()-6e4)}]),[x,C]=(0,r.useState)(""),[b,j]=(0,r.useState)(!1),P=_.find(a=>a.id===(null==e?void 0:e.uid))||_[0],N=_.find(e=>e.id!==P.id)||_[1],w=e=>e.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),y=e=>"BUYER"===e?(0,s.jsx)(l.A,{size:16}):(0,s.jsx)(o.A,{size:16}),k=(0,r.useCallback)(async e=>{if(!e.trim()||b)return;j(!0);let a={id:Date.now().toString(),senderId:P.id,senderName:P.name,senderRole:P.role,content:e.trim(),timestamp:new Date,isNew:!0};f(e=>[...e,a]),C(""),setTimeout(()=>{j(!1)},1e3)},[P,b]);return((0,r.useEffect)(()=>{p.current&&p.current.scrollIntoView({behavior:"smooth"})},[v]),a)?(0,s.jsx)("div",{className:m().loadingContainer,children:(0,s.jsx)("p",{children:"Loading authentication..."})}):e?(0,s.jsxs)("div",{className:m().container,children:[(0,s.jsxs)("header",{className:m().header,children:[(0,s.jsx)("button",{onClick:()=>t.back(),className:m().backButton,"aria-label":"Go back",children:(0,s.jsx)(c.A,{size:20})}),(0,s.jsx)("div",{className:m().headerContent,children:(0,s.jsxs)("div",{className:m().participantInfo,children:[(0,s.jsx)("div",{className:m().avatar,children:N.avatar?(0,s.jsx)(i.default,{src:N.avatar,alt:N.name,width:40,height:40,className:m().avatarImage}):(0,s.jsx)("div",{className:m().avatarPlaceholder,children:N.name.charAt(0)})}),(0,s.jsxs)("div",{className:m().participantDetails,children:[(0,s.jsx)("h2",{className:m().participantName,children:N.name}),(0,s.jsxs)("div",{className:m().participantRoleContainer,children:[y(N.role),(0,s.jsx)("p",{className:m().participantRole,children:"BUYER"===N.role?"Buyer":"Worker"})]})]})]})})]}),(0,s.jsxs)("div",{className:m().chatContent,ref:h,children:[v.map(e=>{let a=e.senderId===P.id,t=_.find(a=>a.id===e.senderId);return(0,s.jsxs)("div",{className:"".concat(m().messageWrapper," ").concat(a?m().messageUser:m().messageOther),children:[!a&&(0,s.jsx)("div",{className:m().avatar,children:(0,s.jsx)("div",{className:m().avatarPlaceholder,children:(null==t?void 0:t.name.charAt(0).toUpperCase())||"U"})}),(0,s.jsx)("div",{className:m().messageContent,children:(0,s.jsxs)("div",{className:"".concat(m().messageBubble," ").concat(a?m().bubbleUser:m().bubbleOther),children:[(0,s.jsx)("p",{className:m().messageText,children:e.content}),(0,s.jsxs)("div",{className:m().messageFooter,children:[(0,s.jsx)("span",{className:m().messageTime,children:w(e.timestamp)}),(0,s.jsx)("div",{className:m().messageRole,children:y(e.senderRole)})]})]})})]},e.id)}),b&&(0,s.jsxs)("div",{className:"".concat(m().messageWrapper," ").concat(m().messageOther),children:[(0,s.jsx)("div",{className:m().avatar,children:(0,s.jsx)("div",{className:m().avatarPlaceholder,children:N.name.charAt(0).toUpperCase()})}),(0,s.jsx)("div",{className:m().messageContent,children:(0,s.jsx)("div",{className:"".concat(m().messageBubble," ").concat(m().bubbleOther),children:(0,s.jsxs)("div",{className:m().typingIndicator,children:[(0,s.jsx)("span",{}),(0,s.jsx)("span",{}),(0,s.jsx)("span",{})]})})})]}),(0,s.jsx)("div",{ref:p})]}),(0,s.jsx)("div",{className:m().chatInput,children:(0,s.jsxs)("div",{className:m().inputWrapper,children:[(0,s.jsx)("div",{className:m().avatar,children:(0,s.jsx)("div",{className:m().avatarPlaceholder,children:P.name.charAt(0).toUpperCase()})}),(0,s.jsx)("input",{type:"text",value:x,onChange:e=>C(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),k(x))},placeholder:"Type a message...",className:m().input,disabled:b}),(0,s.jsx)("button",{onClick:()=>k(x),disabled:!x.trim()||b,className:m().sendButton,"aria-label":"Send message",children:(0,s.jsx)(d.A,{size:18})})]})})]}):(0,s.jsx)(u.A,{})}},39672:e=>{e.exports={loadingContainer:"Loader_loadingContainer__p_FTp",loader:"Loader_loader__8pViD",l3:"Loader_l3__h_z0X"}},51078:(e,a,t)=>{"use strict";t.d(a,{A:()=>i});var s=t(95155),r=t(39672),n=t.n(r);let i=e=>{let{customClass:a,customStyle:t}=e;return(0,s.jsx)("div",{className:a||n().loadingContainer,style:t,children:(0,s.jsx)("div",{className:n().loader})})}},66766:(e,a,t)=>{"use strict";t.d(a,{default:()=>r.a});var s=t(71469),r=t.n(s)},71007:(e,a,t)=>{"use strict";t.d(a,{A:()=>s});let s=(0,t(19946).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},71469:(e,a,t)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),!function(e,a){for(var t in a)Object.defineProperty(e,t,{enumerable:!0,get:a[t]})}(a,{default:function(){return o},getImageProps:function(){return l}});let s=t(88229),r=t(38883),n=t(33063),i=s._(t(51193));function l(e){let{props:a}=(0,r.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,t]of Object.entries(a))void 0===t&&delete a[e];return{props:a}}let o=n.Image},85004:(e,a,t)=>{"use strict";t.d(a,{D:()=>m,R:()=>h});var s=t(95155),r=t(12115),n=t(23915),i=t(16203),l=t(35317),o=t(90858),c=t(74826),d=t(20996);let u=(0,r.createContext)(null),h=e=>{let{children:a}=e,[t,h]=r.useState(null),[m,g]=r.useState(null),[p,_]=r.useState(null),[v,f]=r.useState(null),[x,C]=r.useState(null),[b,j]=r.useState(!0);return(0,r.useEffect)(()=>{!async function(){let e,a=await fetch("/firebase-config.json"),t=await a.json();0===(0,n.Dk)().length?(console.log("[Firebase] Initializing new instance..."),e=(0,n.Wp)(t)):(console.log("[Firebase] Reusing existing instance."),e=(0,n.Sx)()),h((0,i.xI)(e)),_((0,l.aU)(e)),f((0,o.c7)(e)),C((0,c.lS)(e,{backend:new c.C8})),g((0,d.dG)(e)),j(!1)}()},[]),(0,s.jsx)(u.Provider,{value:{authClient:t,db:p,storage:v,ai:x,messaging:m,loading:b},children:a})},m=()=>{let e=(0,r.useContext)(u);if(!e)throw Error("useFirebase must be used within FirebaseProvider");return e}}},e=>{var a=a=>e(e.s=a);e.O(0,[3151,2992,5965,94,3063,8441,1684,7358],()=>a(35622)),_N_E=e.O()}]);