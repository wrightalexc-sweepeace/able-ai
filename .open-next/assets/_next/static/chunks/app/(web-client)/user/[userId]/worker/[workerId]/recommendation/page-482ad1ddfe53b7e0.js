(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6188],{6188:(e,a,r)=>{"use strict";r.d(a,{A:()=>g});var t=r(95155);r(12115);var n=r(35169),i=r(12908),o=r.n(i),s=r(6874),l=r.n(s),c=r(25731),u=r(53843),d=r(35695),m=r(66766),h=r(61508),p=r.n(h);let f=e=>{let{uid:a,handleClick:r,unreadCount:n,unreadNotifications:i}=e;return(0,t.jsxs)(l(),{href:"/user/".concat(a,"/notifications"),passHref:!0,onClick:r,children:[(0,t.jsx)("button",{className:p().notificationButton,"aria-label":"Notifications",children:(0,t.jsx)(m.default,{src:"/images/notifications.svg",alt:"Notifications",width:40,height:40})}),n>0||i>0?(0,t.jsx)("span",{className:p().notificationBadge,children:n>0?n:i}):null]})},g=e=>{let{user:a}=(0,c.A)(),r=(0,d.usePathname)(),{isHomePage:i,title:s,onBackClick:h,handleClick:p,unreadCount:g,unreadNotifications:_}=e,x=r.includes("/able-ai");return(0,t.jsxs)("header",{className:o().header,children:[i?(0,t.jsx)(m.default,{src:"/images/home.svg",alt:"Back",width:40,height:40}):(0,t.jsx)("button",{onClick:h,className:o().backButton,"aria-label":"Go back",children:(0,t.jsx)(n.A,{size:20})}),s&&(0,t.jsx)("h1",{className:o().title,children:s}),(0,t.jsx)(l(),{href:"/user/".concat(null==a?void 0:a.uid,"/able-ai"),className:o().chat,children:x?(0,t.jsx)(u.A,{width:40,height:40}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{children:"Chat with Able"}),(0,t.jsx)(u.A,{width:30,height:30})]})}),i&&(0,t.jsx)(f,{uid:null==a?void 0:a.uid,handleClick:p,unreadCount:g,unreadNotifications:_})]})}},12486:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(19946).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},12908:e=>{e.exports={header:"ScreenHeaderWithBack_header__mx1Ch",backButton:"ScreenHeaderWithBack_backButton__0EIlD",title:"ScreenHeaderWithBack_title__Un97C",chat:"ScreenHeaderWithBack_chat__WpLse"}},19946:(e,a,r)=>{"use strict";r.d(a,{A:()=>d});var t=r(12115);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,r)=>r?r.toUpperCase():a.toLowerCase()),o=e=>{let a=i(e);return a.charAt(0).toUpperCase()+a.slice(1)},s=function(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return a.filter((e,a,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===a).join(" ").trim()},l=e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let u=(0,t.forwardRef)((e,a)=>{let{color:r="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:u="",children:d,iconNode:m,...h}=e;return(0,t.createElement)("svg",{ref:a,...c,width:n,height:n,stroke:r,strokeWidth:o?24*Number(i)/Number(n):i,className:s("lucide",u),...!d&&!l(h)&&{"aria-hidden":"true"},...h},[...m.map(e=>{let[a,r]=e;return(0,t.createElement)(a,r)}),...Array.isArray(d)?d:[d]])}),d=(e,a)=>{let r=(0,t.forwardRef)((r,i)=>{let{className:l,...c}=r;return(0,t.createElement)(u,{ref:i,iconNode:a,className:s("lucide-".concat(n(o(e))),"lucide-".concat(e),l),...c})});return r.displayName=o(e),r}},25731:(e,a,r)=>{"use strict";r.d(a,{A:()=>u,O:()=>c});var t=r(95155),n=r(12115),i=r(16203),o=r(85004);let s=(0,n.createContext)({user:null,loading:!0});async function l(e){for(let r=0;r<10;r++){var a;let r=await (0,i.yx)(e,!0);if(null==(a=r.claims)?void 0:a.role)return r;await new Promise(e=>setTimeout(e,1e3))}return null}let c=e=>{let{children:a}=e,[r,c]=(0,n.useState)(null),[u,d]=(0,n.useState)(!0),{authClient:m,loading:h}=(0,o.D)();return(0,n.useEffect)(()=>{let e=()=>{};return!h&&m&&(e=(0,i.hg)(m,async e=>{if(e){let a=await l(e);a?c(Object.assign(e,{token:a.token,claims:a.claims})):c(null)}else c(null);d(!1)})),()=>e()},[h]),(0,t.jsx)(s.Provider,{value:{user:r,loading:u},children:a})},u=()=>(0,n.useContext)(s)},28399:(e,a,r)=>{"use strict";r.d(a,{A:()=>o});var t=r(95155);r(12115);var n=r(41203),i=r.n(n);let o=e=>{let{id:a,name:r,placeholder:n,type:o="text",value:s,onChange:l,required:c=!1,...u}=e;return(0,t.jsx)("input",{id:a,name:r,className:i().input,type:o,placeholder:n,value:s,onChange:l,required:c,...u})}},33950:(e,a,r)=>{Promise.resolve().then(r.bind(r,96743))},34477:(e,a,r)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),!function(e,a){for(var r in a)Object.defineProperty(e,r,{enumerable:!0,get:a[r]})}(a,{callServer:function(){return t.callServer},createServerReference:function(){return i},findSourceMapURL:function(){return n.findSourceMapURL}});let t=r(53806),n=r(31818),i=r(34979).createServerReference},35169:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(19946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},35695:(e,a,r)=>{"use strict";var t=r(18999);r.o(t,"useParams")&&r.d(a,{useParams:function(){return t.useParams}}),r.o(t,"usePathname")&&r.d(a,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(a,{useSearchParams:function(){return t.useSearchParams}})},41203:e=>{e.exports={input:"InputField_input__NlH8Q"}},51154:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(19946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},53843:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});var t=r(95155);r(12115);var n=r(66766),i=r(69456),o=r.n(i);let s=e=>{let{width:a=260,height:r=260}=e;return(0,t.jsx)(n.default,{src:"/images/ableai.png",alt:"App Logo",width:a,height:r,className:o().logo})}},61508:e=>{e.exports={notificationButton:"Notification_notificationButton__NL740",notificationBadge:"Notification_notificationBadge__ZxPNU"}},66766:(e,a,r)=>{"use strict";r.d(a,{default:()=>n.a});var t=r(71469),n=r.n(t)},69456:e=>{e.exports={logo:"Logo_logo__aLQuM"}},71469:(e,a,r)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),!function(e,a){for(var r in a)Object.defineProperty(e,r,{enumerable:!0,get:a[r]})}(a,{default:function(){return l},getImageProps:function(){return s}});let t=r(88229),n=r(38883),i=r(33063),o=t._(r(51193));function s(e){let{props:a}=(0,n.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(a))void 0===r&&delete a[e];return{props:a}}let l=i.Image},72200:e=>{e.exports={container:"RecommendationPage_container__qALV0",pageWrapper:"RecommendationPage_pageWrapper__tNeff",recommendationCard:"RecommendationPage_recommendationCard__dXQ_9",prompt:"RecommendationPage_prompt__Rjjk5",form:"RecommendationPage_form__9pYQV",inputGroup:"RecommendationPage_inputGroup__eqBce",label:"RecommendationPage_label__abuDu",input:"RecommendationPage_input__c3C4Q",textarea:"RecommendationPage_textarea__eFMIF",nameEmailGroup:"RecommendationPage_nameEmailGroup__BakhV",submitButton:"RecommendationPage_submitButton___r6zj",botMessageContainer:"RecommendationPage_botMessageContainer__2C3v4",botAvatar:"RecommendationPage_botAvatar__2R1yW",botText:"RecommendationPage_botText__93ICR",loadingMessage:"RecommendationPage_loadingMessage__Qg1R_",successMessage:"RecommendationPage_successMessage__rMa6Y",errorMessage:"RecommendationPage_errorMessage__vGmQf"}},85004:(e,a,r)=>{"use strict";r.d(a,{D:()=>h,R:()=>m});var t=r(95155),n=r(12115),i=r(23915),o=r(16203),s=r(35317),l=r(90858),c=r(74826),u=r(20996);let d=(0,n.createContext)(null),m=e=>{let{children:a}=e,[r,m]=n.useState(null),[h,p]=n.useState(null),[f,g]=n.useState(null),[_,x]=n.useState(null),[v,b]=n.useState(null),[j,N]=n.useState(!0);return(0,n.useEffect)(()=>{!async function(){let e,a=await fetch("/firebase-config.json"),r=await a.json();0===(0,i.Dk)().length?(console.log("[Firebase] Initializing new instance..."),e=(0,i.Wp)(r)):(console.log("[Firebase] Reusing existing instance."),e=(0,i.Sx)()),m((0,o.xI)(e)),g((0,s.aU)(e)),x((0,l.c7)(e)),b((0,c.lS)(e,{backend:new c.C8})),p((0,u.dG)(e)),N(!1)}()},[]),(0,t.jsx)(d.Provider,{value:{authClient:r,db:f,storage:_,ai:v,messaging:h,loading:j},children:a})},h=()=>{let e=(0,n.useContext)(d);if(!e)throw Error("useFirebase must be used within FirebaseProvider");return e}},96743:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>g});var t=r(95155),n=r(12115),i=r(35695),o=r(28399),s=r(51154),l=r(12486),c=r(72200),u=r.n(c),d=r(25731),m=r(6188),h=r(34477);let p=(0,h.createServerReference)("7fb08d3b8c35ad0b77807faac01ae2fa61dc878208",h.callServer,void 0,h.findSourceMapURL,"submitRecommendationAction");async function f(e){return(console.log("Fetching details for workerId:",e),"benji-asamoah-id"===e)?{name:"Benji Asamoah",primarySkill:"Bartender"}:{name:"Selected Worker",primarySkill:"Talent"}}function g(){let e=(0,i.useRouter)(),a=(0,i.useParams)(),r=(0,i.usePathname)(),c=a.userId,h=a.workerId,{user:g,loading:_}=(0,d.A)(),x=null==g?void 0:g.uid,[v,b]=(0,n.useState)(null),[j,N]=(0,n.useState)(!0),[k,P]=(0,n.useState)({recommendationText:"",relationship:"",recommenderName:"",recommenderEmail:""}),[y,S]=(0,n.useState)(!1),[w,R]=(0,n.useState)(null),[A,C]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(!_){if(!g)return void e.push("/signin?redirect=".concat(encodeURIComponent(r)));if(!x){console.error("User is authenticated but UID is missing. Redirecting to signin."),e.push("/signin?redirect=".concat(encodeURIComponent(r)));return}if(x!==c)return void e.push("/signin?error=unauthorized");P(e=>({...e,recommenderName:g.displayName||"",recommenderEmail:g.email||""}))}},[g,_,x,c,e,r]),(0,n.useEffect)(()=>{h&&(N(!0),f(h).then(e=>{e?b(e):R("Could not load worker details to recommend.")}).catch(e=>{console.error("Error fetching worker details:",e),R("Error fetching worker details.")}).finally(()=>N(!1)))},[h]);let E=e=>{let{name:a,value:r}=e.target;P(e=>({...e,[a]:r})),R(null),C(null)},B=async e=>{if(e.preventDefault(),R(null),C(null),!k.recommendationText||!k.relationship||!k.recommenderName||!k.recommenderEmail)return void R("All fields are required.");S(!0);let a={workerId:h,recommenderUserId:null==g?void 0:g.uid,...k};try{let e=await p(a);e.success?(C("Recommendation submitted successfully! Thank you."),P({recommendationText:"",relationship:"",recommenderName:(null==g?void 0:g.displayName)||"",recommenderEmail:(null==g?void 0:g.email)||""})):R(e.error||"Failed to submit recommendation. Please try again.")}catch(e){console.error("Submission error:",e),e instanceof Error?R("An unexpected error occurred: ".concat(e.message,". Please try again.")):R("An unexpected error occurred. Please try again.")}finally{S(!1)}};return j?(0,t.jsxs)("div",{className:u().loadingContainer,children:[(0,t.jsx)(s.A,{size:32,className:"animate-spin"})," Loading Worker Details..."]}):v?(0,t.jsxs)("div",{className:u().container,children:[(0,t.jsx)(m.A,{title:"Recommendation",onBackClick:()=>e.back()}),(0,t.jsx)("div",{className:u().pageWrapper,children:(0,t.jsxs)("div",{className:u().recommendationCard,children:[(0,t.jsxs)("p",{className:u().prompt,children:[v.name," is available for hire on Able! ",(0,t.jsx)("br",{})," Please provide a reference for ",v.name,"'s skills as a ",v.primarySkill,". Your feedback will be added to their public profile."]}),w&&(0,t.jsx)("p",{className:u().errorMessage,children:w}),A&&(0,t.jsx)("p",{className:u().successMessage,children:A}),(0,t.jsxs)("form",{onSubmit:B,className:u().form,children:[(0,t.jsxs)("div",{className:u().inputGroup,children:[(0,t.jsxs)("label",{htmlFor:"recommendationText",className:u().label,children:["Your Recommendation ",(0,t.jsx)("span",{style:{color:"var(--error-color)"},children:"*"})]}),(0,t.jsx)("textarea",{id:"recommendationText",name:"recommendationText",value:k.recommendationText,onChange:E,className:u().textarea,placeholder:"What makes ".concat(v.name," great at ").concat(v.primarySkill,"?"),required:!0})]}),(0,t.jsxs)("div",{className:u().inputGroup,children:[(0,t.jsxs)("label",{htmlFor:"relationship",className:u().label,children:["Please describe how you know ",v.name,"? ",(0,t.jsx)("span",{style:{color:"var(--error-color)"},children:"*"})]}),(0,t.jsx)("textarea",{id:"relationship",name:"relationship",value:k.relationship,onChange:E,className:u().textarea,placeholder:"e.g., Worked together at [Company/Event], Supervised them, Hired them for a gig...",required:!0})]}),(0,t.jsxs)("div",{className:u().inputGroup,children:[(0,t.jsxs)("label",{htmlFor:"recommenderName",className:u().label,children:["Your Details (won't be public on their profile) ",(0,t.jsx)("span",{style:{color:"var(--error-color)"},children:"*"})]}),(0,t.jsxs)("div",{className:u().nameEmailGroup,children:[(0,t.jsx)(o.A,{id:"recommenderName",name:"recommenderName",type:"text",value:k.recommenderName,onChange:E,placeholder:"Your Full Name",required:!0}),(0,t.jsx)(o.A,{id:"recommenderEmail",name:"recommenderEmail",type:"email",value:k.recommenderEmail,onChange:E,placeholder:"Your Email Address",required:!0})]})]}),(0,t.jsxs)("button",{type:"submit",className:u().submitButton,disabled:y,children:[y?(0,t.jsx)(s.A,{size:20,className:"animate-spin"}):(0,t.jsx)(l.A,{size:18}),y?"Submitting...":"Submit"]})]})]})})]}):(0,t.jsx)("div",{className:u().container,children:(0,t.jsx)("p",{className:u().errorMessage,children:w||"Worker not found."})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[7208,2006,3151,2992,5965,94,3063,6874,8441,1684,7358],()=>a(33950)),_N_E=e.O()}]);