(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1883],{20753:(e,n,s)=>{Promise.resolve().then(s.bind(s,44048))},25731:(e,n,s)=>{"use strict";s.d(n,{A:()=>d,O:()=>c});var t=s(95155),i=s(12115),a=s(16203),r=s(85004);let o=(0,i.createContext)({user:null,loading:!0});async function l(e){for(let s=0;s<10;s++){var n;let s=await (0,a.yx)(e,!0);if(null==(n=s.claims)?void 0:n.role)return s;await new Promise(e=>setTimeout(e,1e3))}return null}let c=e=>{let{children:n}=e,[s,c]=(0,i.useState)(null),[d,u]=(0,i.useState)(!0),{authClient:h,loading:x}=(0,r.D)();return(0,i.useEffect)(()=>{let e=()=>{};return!x&&h&&(e=(0,a.hg)(h,async e=>{if(e){let n=await l(e);n?c(Object.assign(e,{token:n.token,claims:n.claims})):c(null)}else c(null);u(!1)})),()=>e()},[x]),(0,t.jsx)(o.Provider,{value:{user:s,loading:d},children:n})},d=()=>(0,i.useContext)(o)},35695:(e,n,s)=>{"use strict";var t=s(18999);s.o(t,"useParams")&&s.d(n,{useParams:function(){return t.useParams}}),s.o(t,"usePathname")&&s.d(n,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(n,{useRouter:function(){return t.useRouter}}),s.o(t,"useSearchParams")&&s.d(n,{useSearchParams:function(){return t.useSearchParams}})},40584:e=>{e.exports={container:"Invoice_container__wspcZ",printButtonContainer:"Invoice_printButtonContainer__d8nk9",printButton:"Invoice_printButton__LDQw8",invoice:"Invoice_invoice__OnnPB",header:"Invoice_header__vbkSx",companyInfo:"Invoice_companyInfo__81NlP",invoiceInfo:"Invoice_invoiceInfo__6XI0T",billingInfo:"Invoice_billingInfo__lkSV3",buyerInfo:"Invoice_buyerInfo__ybctC",workerInfo:"Invoice_workerInfo__TLPQ8",itemsTable:"Invoice_itemsTable__GUrkI",totals:"Invoice_totals__Pwtvf",totalRow:"Invoice_totalRow__fcoG2",status:"Invoice_status__wK_Ed",paid:"Invoice_paid__Xmvzu",pending:"Invoice_pending__0w2xZ",footer:"Invoice_footer__D31bW",loading:"Invoice_loading__wjfAO",error:"Invoice_error__VW2xF",qaIndicator:"Invoice_qaIndicator__BLUDK"}},44048:(e,n,s)=>{"use strict";s.r(n),s.d(n,{default:()=>d});var t=s(95155),i=s(12115),a=s(35695),r=s(40584),o=s.n(r),l=s(25731);let c=async e=>{try{if(!e)throw Error("Invoice ID is required");return{invoiceNumber:"INV-2024-001",date:"2024-01-15",dueDate:"2024-02-14",buyer:{name:"John Smith",email:"john.smith@example.com",address:"123 Business Street\nLondon, UK\nSW1A 1AA"},worker:{name:"Sarah Johnson",email:"sarah.j@example.com"},items:[{description:"Bartender Services - Corporate Event",quantity:1,rate:150,amount:150},{description:"Additional Hours",quantity:2,rate:25,amount:50}],subtotal:200,tax:13,total:213,status:"Paid"}}catch(e){console.error("Error fetching invoice data:",e)}};function d(){let e=(0,a.useParams)(),n=(0,a.useSearchParams)(),{user:s,loading:r}=(0,l.A)(),d=n.get("id"),[u,h]=(0,i.useState)(null),[x,m]=(0,i.useState)(!0);return((0,i.useEffect)(()=>{m(!0),c(d).then(e=>{e?h(e):h(null)}).catch(e=>{console.error("Error fetching invoice data:",e),h(null)}).finally(()=>m(!1)),!r&&((null==s?void 0:s.claims.role)=="QA"||s&&(null==s?void 0:s.uid)===e.userId?c(d):(null==s?void 0:s.claims.role)==="QA"||s||(console.warn("Invoice data fetch attempted by non-QA, non-authenticated user."),m(!1)))},[s,r,e.userId,n]),r||x)?(0,t.jsx)("div",{className:o().loading,children:"Loading invoice..."}):u?(0,t.jsxs)("div",{className:o().container,children:[(null==s?void 0:s.claims.role)==="QA"&&(0,t.jsx)("div",{className:o().qaIndicator,children:"QA View - Mock Data"}),(0,t.jsx)("div",{className:o().printButtonContainer,children:(0,t.jsx)("button",{onClick:()=>{window.print()},className:o().printButton,children:"Print Invoice"})}),(0,t.jsxs)("div",{className:o().invoice,children:[(0,t.jsxs)("header",{className:o().header,children:[(0,t.jsxs)("div",{className:o().companyInfo,children:[(0,t.jsx)("h1",{children:"Able AI"}),(0,t.jsx)("p",{children:"123 Business Street"}),(0,t.jsx)("p",{children:"London, UK"})]}),(0,t.jsxs)("div",{className:o().invoiceInfo,children:[(0,t.jsx)("h2",{children:"INVOICE"}),(0,t.jsxs)("p",{children:["Invoice #: ",u.invoiceNumber]}),(0,t.jsxs)("p",{children:["Date: ",u.date]}),(0,t.jsxs)("p",{children:["Due Date: ",u.dueDate]})]})]}),(0,t.jsxs)("div",{className:o().billingInfo,children:[(0,t.jsxs)("div",{className:o().buyerInfo,children:[(0,t.jsx)("h3",{children:"Bill To:"}),(0,t.jsx)("p",{children:u.buyer.name}),(0,t.jsx)("p",{children:u.buyer.email}),(0,t.jsx)("p",{children:u.buyer.address})]}),(0,t.jsxs)("div",{className:o().workerInfo,children:[(0,t.jsx)("h3",{children:"Worker:"}),(0,t.jsx)("p",{children:u.worker.name}),(0,t.jsx)("p",{children:u.worker.email})]})]}),(0,t.jsxs)("table",{className:o().itemsTable,children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{children:"Description"}),(0,t.jsx)("th",{children:"Quantity"}),(0,t.jsx)("th",{children:"Rate"}),(0,t.jsx)("th",{children:"Amount"})]})}),(0,t.jsx)("tbody",{children:u.items.map((e,n)=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{children:e.description}),(0,t.jsx)("td",{children:e.quantity}),(0,t.jsxs)("td",{children:["\xa3",e.rate.toFixed(2)]}),(0,t.jsxs)("td",{children:["\xa3",e.amount.toFixed(2)]})]},n))})]}),(0,t.jsxs)("div",{className:o().totals,children:[(0,t.jsxs)("div",{className:o().totalRow,children:[(0,t.jsx)("span",{children:"Subtotal:"}),(0,t.jsxs)("span",{children:["\xa3",u.subtotal.toFixed(2)]})]}),(0,t.jsxs)("div",{className:o().totalRow,children:[(0,t.jsx)("span",{children:"Tax (6.5%):"}),(0,t.jsxs)("span",{children:["\xa3",u.tax.toFixed(2)]})]}),(0,t.jsxs)("div",{className:o().totalRow,children:[(0,t.jsx)("span",{children:"Total:"}),(0,t.jsxs)("span",{children:["\xa3",u.total.toFixed(2)]})]})]}),(0,t.jsx)("div",{className:o().status,children:(0,t.jsxs)("p",{children:["Status:"," ",(0,t.jsx)("span",{className:o()[u.status.toLowerCase()],children:u.status})]})}),(0,t.jsxs)("footer",{className:o().footer,children:[(0,t.jsx)("p",{children:"Thank you for your business!"}),(0,t.jsx)("p",{children:"Payment is due within 30 days"})]})]})]}):(0,t.jsx)("div",{className:o().error,children:"Invoice not found"})}},85004:(e,n,s)=>{"use strict";s.d(n,{D:()=>x,R:()=>h});var t=s(95155),i=s(12115),a=s(23915),r=s(16203),o=s(35317),l=s(90858),c=s(74826),d=s(20996);let u=(0,i.createContext)(null),h=e=>{let{children:n}=e,[s,h]=i.useState(null),[x,m]=i.useState(null),[v,_]=i.useState(null),[j,I]=i.useState(null),[f,p]=i.useState(null),[b,w]=i.useState(!0);return(0,i.useEffect)(()=>{!async function(){let e,n=await fetch("/firebase-config.json"),s=await n.json();0===(0,a.Dk)().length?(console.log("[Firebase] Initializing new instance..."),e=(0,a.Wp)(s)):(console.log("[Firebase] Reusing existing instance."),e=(0,a.Sx)()),h((0,r.xI)(e)),_((0,o.aU)(e)),I((0,l.c7)(e)),p((0,c.lS)(e,{backend:new c.C8})),m((0,d.dG)(e)),w(!1)}()},[]),(0,t.jsx)(u.Provider,{value:{authClient:s,db:v,storage:j,ai:f,messaging:x,loading:b},children:n})},x=()=>{let e=(0,i.useContext)(u);if(!e)throw Error("useFirebase must be used within FirebaseProvider");return e}}},e=>{var n=n=>e(e.s=n);e.O(0,[835,2992,5965,94,8441,1684,7358],()=>n(20753)),_N_E=e.O()}]);