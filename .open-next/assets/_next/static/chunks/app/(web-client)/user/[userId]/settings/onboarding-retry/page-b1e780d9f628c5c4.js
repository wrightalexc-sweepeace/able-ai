(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6228],{19276:e=>{e.exports={onboardCard:"onboarding-retry_onboardCard__gKL36",buttonWrapper:"onboarding-retry_buttonWrapper__ANRm1"}},25731:(e,t,n)=>{"use strict";n.d(t,{A:()=>l,O:()=>c});var a=n(95155),r=n(12115),i=n(16203),s=n(85004);let o=(0,r.createContext)({user:null,loading:!0});async function _(e){for(let n=0;n<10;n++){var t;let n=await (0,i.yx)(e,!0);if(null==(t=n.claims)?void 0:t.role)return n;await new Promise(e=>setTimeout(e,1e3))}return null}let c=e=>{let{children:t}=e,[n,c]=(0,r.useState)(null),[l,g]=(0,r.useState)(!0),{authClient:u,loading:d}=(0,s.D)();return(0,r.useEffect)(()=>{let e=()=>{};return!d&&u&&(e=(0,i.hg)(u,async e=>{if(e){let t=await _(e);t?c(Object.assign(e,{token:t.token,claims:t.claims})):c(null)}else c(null);g(!1)})),()=>e()},[d]),(0,a.jsx)(o.Provider,{value:{user:n,loading:l},children:t})},l=()=>(0,r.useContext)(o)},28805:e=>{e.exports={container:"SettingsPage_container__x7Ugk",card:"SettingsPage_card__RPA5a",pageWrapper:"SettingsPage_pageWrapper__jAv2v",pageHeader:"SettingsPage_pageHeader__IPiGF",section:"SettingsPage_section__53RKH",sectionTitle:"SettingsPage_sectionTitle__neP96",form:"SettingsPage_form__sbwBS",formGroup:"SettingsPage_formGroup__6o89j",label:"SettingsPage_label__7ReZn",inputField:"SettingsPage_inputField__ywxTh",actionButtons:"SettingsPage_actionButtons__Wpvj0",button:"SettingsPage_button__UO4k9",secondary:"SettingsPage_secondary__ifHfj",danger:"SettingsPage_danger__6o6Pv",errorMessage:"SettingsPage_errorMessage__TbRSe",successMessage:"SettingsPage_successMessage__oEpcO",verificationSection:"SettingsPage_verificationSection__enDg_",verificationHeader:"SettingsPage_verificationHeader__BM_6D",warningIcon:"SettingsPage_warningIcon__lJrub",verificationModalTitle:"SettingsPage_verificationModalTitle__Go0QF",verificationText:"SettingsPage_verificationText__kQWg8",verificationActions:"SettingsPage_verificationActions__S_Z8e",resendButton:"SettingsPage_resendButton__F7p0K",modalOverlay:"SettingsPage_modalOverlay__3E3Hd",modalContent:"SettingsPage_modalContent__SxHiM",modalTitle:"SettingsPage_modalTitle__EqqS9",modalActions:"SettingsPage_modalActions__GOE9o",closeButton:"SettingsPage_closeButton__HJ688",modalHeader:"SettingsPage_modalHeader__IXvxa",bottomNavSection:"SettingsPage_bottomNavSection__Fvvyt",bottomNav:"SettingsPage_bottomNav__YBsS_",bottomNavLink:"SettingsPage_bottomNavLink__4aE_x",dangerLink:"SettingsPage_dangerLink__xIS_c",pageDescription:"SettingsPage_pageDescription__dhnvR",profileInfo:"SettingsPage_profileInfo__VGWTF",linkList:"SettingsPage_linkList__OkGOY",passwordChangeSection:"SettingsPage_passwordChangeSection__57gx8",loadingContainer:"SettingsPage_loadingContainer__3uwln",stripePromptInline:"SettingsPage_stripePromptInline__1xf3_",stripePromptHeader:"SettingsPage_stripePromptHeader___PeiB",stripeIconWrapper:"SettingsPage_stripeIconWrapper__HPLJp",stripeButton:"SettingsPage_stripeButton__9mpfO",stripeStatus:"SettingsPage_stripeStatus__q3LlT",stripeStatusBannerConnected:"SettingsPage_stripeStatusBannerConnected__2y3qb",settingItem:"SettingsPage_settingItem__qzFsE",settingLabel:"SettingsPage_settingLabel__cpvHX"}},34477:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{callServer:function(){return a.callServer},createServerReference:function(){return i},findSourceMapURL:function(){return r.findSourceMapURL}});let a=n(53806),r=n(31818),i=n(34979).createServerReference},35695:(e,t,n)=>{"use strict";var a=n(18999);n.o(a,"useParams")&&n.d(t,{useParams:function(){return a.useParams}}),n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}}),n.o(a,"useSearchParams")&&n.d(t,{useSearchParams:function(){return a.useSearchParams}})},45638:(e,t,n)=>{Promise.resolve().then(n.bind(n,85101))},61125:(e,t,n)=>{"use strict";n.d(t,{I:()=>r});var a=n(34477);let r=(0,a.createServerReference)("404a83a773f709870df51d0df4fef9f92c356ea997",a.callServer,void 0,a.findSourceMapURL,"createAccountLink")},85004:(e,t,n)=>{"use strict";n.d(t,{D:()=>d,R:()=>u});var a=n(95155),r=n(12115),i=n(23915),s=n(16203),o=n(35317),_=n(90858),c=n(74826),l=n(20996);let g=(0,r.createContext)(null),u=e=>{let{children:t}=e,[n,u]=r.useState(null),[d,S]=r.useState(null),[p,P]=r.useState(null),[f,m]=r.useState(null),[v,b]=r.useState(null),[h,x]=r.useState(!0);return(0,r.useEffect)(()=>{!async function(){let e,t=await fetch("/firebase-config.json"),n=await t.json();0===(0,i.Dk)().length?(console.log("[Firebase] Initializing new instance..."),e=(0,i.Wp)(n)):(console.log("[Firebase] Reusing existing instance."),e=(0,i.Sx)()),u((0,s.xI)(e)),P((0,o.aU)(e)),m((0,_.c7)(e)),b((0,c.lS)(e,{backend:new c.C8})),S((0,l.dG)(e)),x(!1)}()},[]),(0,a.jsx)(g.Provider,{value:{authClient:n,db:p,storage:f,ai:v,messaging:d,loading:h},children:t})},d=()=>{let e=(0,r.useContext)(g);if(!e)throw Error("useFirebase must be used within FirebaseProvider");return e}},85101:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>u});var a=n(95155),r=n(61125),i=n(25731),s=n(35695),o=n(12115),_=n(28805),c=n.n(_),l=n(19276),g=n.n(l);function u(){let{user:e,loading:t}=(0,i.A)();(0,s.useRouter)(),(0,s.useParams)().userId;let[n,_]=(0,o.useState)(!1),[l,u]=(0,o.useState)(null),d=async()=>{if(!t&&e){_(!0),u(null);try{let t=await (0,r.I)(null==e?void 0:e.uid);if(t.error&&500===t.status)throw Error(t.error||"Failed to generate a new Stripe account link.");200===t.status&&t.url&&(window.location.href=t.url)}catch(e){u(e.message||"An unexpected error occurred.")}finally{_(!1)}}};return(0,a.jsx)("div",{className:c().container,children:(0,a.jsxs)("div",{className:"".concat(c().card," ").concat(g().onboardCard),children:[(0,a.jsxs)("header",{className:c().pageHeader,children:[(0,a.jsx)("h1",{className:"pb-2",children:"Stripe Connection Failed or Expired"}),(0,a.jsx)("p",{children:"It looks like your Stripe account connection session expired or encountered an issue."}),(0,a.jsx)("p",{children:"Please try connecting your account again."})]}),(0,a.jsx)("div",{className:g().buttonWrapper,children:(0,a.jsx)("button",{type:"submit",disabled:n,className:c().button,onClick:d,children:n?"Retrying...":"Try Again"})}),l&&(0,a.jsxs)("p",{style:{color:"red"},children:["Error: ",l]}),(0,a.jsx)("p",{style:{marginTop:"auto"},children:"If the issue persists, please contact support."})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[7208,2992,5965,94,8441,1684,7358],()=>t(45638)),_N_E=e.O()}]);