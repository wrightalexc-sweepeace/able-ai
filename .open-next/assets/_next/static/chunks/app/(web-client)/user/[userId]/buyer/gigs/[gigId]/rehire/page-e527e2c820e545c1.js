(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[415],{13717:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(19946).A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},24313:e=>{e.exports={dropdownContainer:"OnboardingOptionsDropdown_dropdownContainer__fXruX",dropdownTrigger:"OnboardingOptionsDropdown_dropdownTrigger__bLBAT",dropdownMenu:"OnboardingOptionsDropdown_dropdownMenu__b__l_",slideDown:"OnboardingOptionsDropdown_slideDown__HpjUz",dropdownOption:"OnboardingOptionsDropdown_dropdownOption__CWe_t"}},25517:(e,a,r)=>{"use strict";r.d(a,{default:()=>m});var t=r(95155),n=r(12115),o=r(25731),s=r(85189),i=r(42474),l=r(37352),c=r(6874),d=r.n(c),u=r(51154),h=r(74867),p=r.n(h),_=r(66766);let g="/images/logo-placeholder.svg",b=e=>{let{loadingAuth:a,error:r,originalGigInfo:n,workerToRehire:o,chatMessages:c,chatContainerRef:h,handleBookWorker:b,isBooking:m,userId:v}=e;return a?(0,t.jsxs)("div",{className:p().loadingContainer,children:[(0,t.jsx)(u.A,{className:"animate-spin",size:32})," Loading Rehire Information..."]}):r?(0,t.jsx)("div",{className:p().container,children:(0,t.jsx)("div",{className:p().pageWrapper,children:(0,t.jsx)("p",{className:p().errorMessage,children:r})})}):n&&o?(0,t.jsxs)("div",{className:p().container,children:[(0,t.jsxs)(s.A,{ref:h,children:[c.map(e=>(0,t.jsx)(i.A,{text:e.content,senderType:"bot"===e.type?"bot":"user",avatarSrc:g,showAvatar:"bot"===e.type},e.id)),o&&(0,t.jsx)("div",{className:p().rehireCardContainer,children:(0,t.jsx)(l.A,{workerData:o,onBook:b,isBooking:m})}),r&&!m&&(0,t.jsx)(i.A,{text:"Oops! ".concat(r),senderType:"bot",avatarSrc:g})]}),(0,t.jsx)("footer",{className:p().footerNav,children:(0,t.jsx)(d(),{href:"/user/".concat(v,"/buyer"),passHref:!0,children:(0,t.jsx)("button",{className:p().homeButtonNav,"aria-label":"Go to Home",children:(0,t.jsx)(_.default,{src:"/images/home.svg",width:40,height:40,alt:"home"})})})})]}):(0,t.jsx)("div",{className:p().container,children:(0,t.jsx)("div",{className:p().pageWrapper,children:(0,t.jsx)("p",{className:p().emptyState,children:"Information for rehire not available."})})})},m=e=>{let{initialData:a,userId:r,timeDifference:s}=e,{user:i,loading:l}=(0,o.A)(),c=(0,n.useRef)(null),[d,u]=(0,n.useState)(!1),[h,p]=(0,n.useState)(null),[_,g]=(0,n.useState)(a?[{id:1,type:"bot",content:"Awesome, you want to rehire ".concat(a.originalGig.workerName," for a ").concat(s," hour shift at ").concat(a.originalGig.originalLocation," next ").concat(a.originalGig.originalDate," starting at ").concat(a.originalGig.startTime,".? ")},{id:2,type:"userAction",content:"Yes, I want to rehire him."},{id:3,type:"bot",content:"Perfect, ".concat(a.originalGig.workerName," is available next Friday - Click here to book him now!")}]:[]);(0,n.useEffect)(()=>{c.current&&(c.current.scrollTop=c.current.scrollHeight)},[_]);let m=async()=>{if(!(null==a?void 0:a.workerForRehire)||!(null==a?void 0:a.originalGig))return;u(!0),p(null);let e={buyerUserId:(null==i?void 0:i.uid)||r,workerId:a.workerForRehire.workerId,role:a.workerForRehire.role,proposedDate:"Next Friday",proposedStartTime:"18:00",proposedHours:a.workerForRehire.proposedHours,proposedRate:a.workerForRehire.proposedHourlyRate,location:null==a?void 0:a.originalGig.originalLocation};try{await new Promise(e=>setTimeout(e,1500)),console.log("send data here: ",e),g(e=>[...e,{id:Date.now(),type:"bot",content:"Great! ".concat(a.workerForRehire.name," has been booked for the new gig. Details are in your calendar.")}])}catch(e){e instanceof Error?(p(e.message),g(a=>[...a,{id:Date.now(),type:"bot",content:"Error: ".concat(e.message)}])):(p("An unknown error occurred while booking the worker."),g(e=>[...e,{id:Date.now(),type:"bot",content:"Error: An unknown error occurred."}]))}finally{u(!1)}};return(0,t.jsx)(b,{loadingAuth:l,error:h,originalGigInfo:null==a?void 0:a.originalGig,workerToRehire:null==a?void 0:a.workerForRehire,chatMessages:_,chatContainerRef:c,handleBookWorker:m,isBooking:d,userId:(null==i?void 0:i.uid)||r})}},42474:(e,a,r)=>{"use strict";r.d(a,{A:()=>c});var t=r(95155),n=r(12115),o=r(75684),s=r.n(o),i=r(66766);let l=(0,n.memo)(e=>{let{text:a,senderType:r="bot",avatarSrc:n,showAvatar:o=!0,isNew:l=!1,role:c="GIG_WORKER"}=e,d="bot"===r,u=d?s().bubbleBot:s().bubbleUser,h=d?s().alignBot:s().alignUser,p=l?s().messageWrapperNew:"";return(0,t.jsxs)("div",{className:"".concat(s().messageWrapper," ").concat(h," ").concat(p),"data-role":c,children:[d&&o&&(0,t.jsx)("div",{className:s().avatarContainer,children:(0,t.jsx)("div",{className:s().avatar,children:(0,t.jsx)("div",{className:s().avatarInner,children:(0,t.jsx)(i.default,{src:"/images/ableai.png",alt:"Able AI",width:24,height:24,className:s().avatarImage})})})}),(0,t.jsx)("div",{className:"".concat(s().bubble," ").concat(u),children:a})]})});l.displayName="MessageBubble";let c=l},44020:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(19946).A)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]])},53904:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(19946).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},56059:e=>{e.exports={chatInputContainer:"ChatInput_chatInputContainer__kQbSj",inputWrapper:"ChatInput_inputWrapper__YH3PQ",input:"ChatInput_input__SnAnJ",sendButton:"ChatInput_sendButton__lPB0c"}},74867:e=>{e.exports={container:"RehirePage_container__fV3tb",chatScreenHeader:"RehirePage_chatScreenHeader__j8LPy",botAvatarHeader:"RehirePage_botAvatarHeader__1V0_I",rehireCardContainer:"RehirePage_rehireCardContainer__0uuxC",footerNav:"RehirePage_footerNav__BFuT9",homeButtonNav:"RehirePage_homeButtonNav___IG3M",loadingContainer:"RehirePage_loadingContainer__BInNy",errorMessage:"RehirePage_errorMessage__iBjy6",emptyState:"RehirePage_emptyState__MYxUf"}},75684:e=>{e.exports={messageWrapper:"MessageBubble_messageWrapper__fGlfF",slideInPrimary:"MessageBubble_slideInPrimary__rNcDf",slideInSecondary:"MessageBubble_slideInSecondary__3xEJw",alignBot:"MessageBubble_alignBot__OXTPG",alignUser:"MessageBubble_alignUser__q4Iz0",avatarContainer:"MessageBubble_avatarContainer__Fs_Eb",avatar:"MessageBubble_avatar__fCeB8",avatarInner:"MessageBubble_avatarInner__xTgmE",avatarText:"MessageBubble_avatarText__HGFoH",avatarImage:"MessageBubble_avatarImage__uYRjw",bubble:"MessageBubble_bubble__icB0Z",bubbleBot:"MessageBubble_bubbleBot__M0YBw",bubbleUser:"MessageBubble_bubbleUser__IfTgA",messageWrapperNew:"MessageBubble_messageWrapperNew__jISf_",confirmButton:"MessageBubble_confirmButton__JXGTu"}},82277:(e,a,r)=>{Promise.resolve().then(r.bind(r,25517))},85189:(e,a,r)=>{"use strict";r.d(a,{A:()=>x});var t=r(95155),n=r(12115),o=r(88536),s=r.n(o),i=r(56059),l=r.n(i);let c=e=>{let{onSend:a,placeholder:r="Type your message...",disabled:o=!1,role:s="GIG_WORKER"}=e,[i,c]=(0,n.useState)(""),d=()=>{i.trim()&&!o&&(a(i.trim()),c(""))};return(0,t.jsx)("div",{className:l().chatInputContainer,children:(0,t.jsxs)("div",{className:l().inputWrapper,children:[(0,t.jsx)("input",{type:"text",value:i,onChange:e=>c(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),d())},placeholder:r,disabled:o,className:l().input}),(0,t.jsx)("button",{onClick:d,disabled:o||!i.trim(),className:l().sendButton,children:(0,t.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z",fill:"currentColor"})})})]})})};var d=r(35695),u=r(25731),h=r(6188),p=r(44020),_=r(13717),g=r(53904),b=r(24313),m=r.n(b);let v=e=>{let{onSwitchToManual:a,onChangeSetupMethod:r}=e,[o,s]=(0,n.useState)(!1),i=(0,n.useRef)(null);(0,n.useEffect)(()=>{let e=e=>{i.current&&!i.current.contains(e.target)&&s(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let l=e=>{s(!1),e()};return(0,t.jsxs)("div",{className:m().dropdownContainer,ref:i,children:[(0,t.jsx)("button",{className:m().dropdownTrigger,onClick:()=>s(!o),"aria-label":"Onboarding options",children:(0,t.jsx)(p.A,{size:20})}),o&&(0,t.jsxs)("div",{className:m().dropdownMenu,children:[(0,t.jsxs)("button",{className:m().dropdownOption,onClick:()=>l(a),children:[(0,t.jsx)(_.A,{size:16}),(0,t.jsx)("span",{children:"Switch to Manual Form"})]}),(0,t.jsxs)("button",{className:m().dropdownOption,onClick:()=>l(r),children:[(0,t.jsx)(g.A,{size:16}),(0,t.jsx)("span",{children:"Change Setup Method"})]})]})]})},w=n.forwardRef((e,a)=>{let{children:r,onScroll:n,className:o,onHomeClick:i,onSendMessage:l,role:p="GIG_WORKER",showChatInput:_=!1,showOnboardingOptions:g=!1,onSwitchToManual:b,onChangeSetupMethod:m}=e,w=(0,d.useRouter)(),{user:x}=(0,u.A)();return(0,t.jsx)("div",{className:"".concat(s().chatContainerWrapper," ").concat(o),children:(0,t.jsxs)("div",{className:s().chatContainer,onScroll:n,ref:a,children:[(0,t.jsx)(h.A,{onBackClick:()=>w.back()}),(0,t.jsxs)("div",{className:s().chatContent,children:[g&&b&&m&&(0,t.jsx)("div",{className:s().onboardingOptionsContainer,children:(0,t.jsx)(v,{onSwitchToManual:b,onChangeSetupMethod:m})}),r]}),_&&(0,t.jsx)(c,{onSend:e=>{l&&l(e)},role:p,placeholder:"Type your message..."})]})})});w.displayName="ChatBotLayout";let x=w},88536:e=>{e.exports={chatContainerWrapper:"ChatBotLayout_chatContainerWrapper__wnqLp",chatContainer:"ChatBotLayout_chatContainer__ewwhg",chatContent:"ChatBotLayout_chatContent__4ZfaH",header:"ChatBotLayout_header__kDs7E",headerText:"ChatBotLayout_headerText__T8qhV",footer:"ChatBotLayout_footer__6W9Pa",onboardingOptionsContainer:"ChatBotLayout_onboardingOptionsContainer__q62lL"}}},e=>{var a=a=>e(e.s=a);e.O(0,[7918,2006,3151,2992,5965,94,3063,6874,4659,8441,1684,7358],()=>a(82277)),_N_E=e.O()}]);