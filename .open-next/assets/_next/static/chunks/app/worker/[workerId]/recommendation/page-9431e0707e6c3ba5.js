(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9403],{437:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>f});var t=r(95155),n=r(12115),o=r(35695),s=r(28399),i=r(51154),l=r(12486),c=r(11435),m=r.n(c),d=r(34477);let u=(0,d.createServerReference)("7f624243b60aa1af649b0e5deb700a8effadd76165",d.callServer,void 0,d.findSourceMapURL,"getWorkerForRecommendationAction"),p=(0,d.createServerReference)("7ffc6b0ff15825c2bf2e00ddda8438d52f3fb138b4",d.callServer,void 0,d.findSourceMapURL,"submitExternalRecommendationAction");async function h(e){let{data:a}=await u(e);if(!a)throw Error("worker not found");return{name:a.userName,skills:a.skills}}function f(){let e=(0,o.useParams)().workerId,[a,r]=(0,n.useState)(null),[c,d]=(0,n.useState)(!0),[u,f]=(0,n.useState)(),[_,g]=(0,n.useState)({recommendationText:"",relationship:"",recommenderName:"",recommenderEmail:""}),[v,x]=(0,n.useState)(!1),[b,N]=(0,n.useState)(null),[j,R]=(0,n.useState)(null),k=null==a?void 0:a.name.split(" ")[0];(0,n.useEffect)(()=>{e&&(d(!0),h(e).then(e=>{e?r(e):N("Could not load worker details to recommend.")}).catch(()=>N("Error fetching worker details.")).finally(()=>d(!1)))},[e]);let P=e=>{let{name:a,value:r}=e.target;g(e=>({...e,[a]:r})),N(null),R(null)},S=async a=>{if(a.preventDefault(),N(null),R(null),!_.recommendationText||!_.relationship||!_.recommenderName||!_.recommenderEmail||!u)return void N("All fields are required.");x(!0);let r={workerId:e,..._,skillId:u.id};try{let e=await p(r);if(!e.success)throw Error(e.error||"Failed to submit recommendation.");R("Thank you! Your recommendation has been submitted."),g({recommendationText:"",relationship:"",recommenderName:"",recommenderEmail:""})}catch(e){e instanceof Error?N(e.message||"Failed to submit recommendation."):N("An unexpected error occurred.")}finally{x(!1)}};return c?(0,t.jsxs)("div",{className:m().loadingContainer,children:[(0,t.jsx)(i.A,{size:32,className:"animate-spin"})," Loading Recommendation Form..."]}):a?(null==a?void 0:a.skills.length)===0?(0,t.jsxs)("p",{children:[a.name," don't have skills yet to showcase"]}):(0,t.jsx)("div",{className:m().container,children:(0,t.jsx)("div",{className:m().pageWrapper,children:(0,t.jsxs)("div",{className:m().recommendationCard,children:[(0,t.jsxs)("p",{className:m().prompt,children:[k," is available for hire on Able! ",(0,t.jsx)("br",{}),"Please provide a reference for ",k,"'s skills as a"," ",(0,t.jsxs)("select",{className:m().select,value:(null==u?void 0:u.id)||"",onChange:e=>{let r=a.skills.find(a=>String(a.id)===e.target.value);f(r?{id:String(r.id),name:r.name}:void 0)},children:[(0,t.jsx)("option",{value:"",children:"Select a skill"}),null==a?void 0:a.skills.map(e=>(0,t.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,t.jsx)("p",{className:m().note,children:"Your feedback will be added to their public profile."}),b&&(0,t.jsx)("p",{className:m().errorMessage,children:b}),j&&(0,t.jsx)("p",{className:m().successMessage,children:j}),(0,t.jsxs)("form",{onSubmit:S,className:m().form,children:[(0,t.jsxs)("div",{className:m().inputGroup,children:[(0,t.jsxs)("label",{htmlFor:"recommendationText",className:m().label,children:["Your Recommendation"," ",(0,t.jsx)("span",{style:{color:"var(--error-color)"},children:"*"})]}),(0,t.jsx)("textarea",{id:"recommendationText",name:"recommendationText",value:_.recommendationText,onChange:P,className:m().textarea,placeholder:"Enter your recommendation here... eg: What makes ".concat(a.name," great at ").concat((null==u?void 0:u.name)||""),required:!0})]}),(0,t.jsx)("div",{className:m().inputGroup,children:(0,t.jsx)("textarea",{id:"relationship",name:"relationship",value:_.relationship,onChange:P,className:m().textarea,placeholder:"Please describe how you know ".concat(a.name,": e.g., Worked together at [Company/Event], Supervised them, Hired them for a gig..."),required:!0})}),(0,t.jsxs)("div",{className:m().inputGroup,children:[(0,t.jsxs)("label",{className:m().label,children:["Your Details (won't be public on their profile)"," ",(0,t.jsx)("span",{style:{color:"var(--error-color)"},children:"*"})]}),(0,t.jsxs)("div",{className:m().nameEmailGroup,children:[(0,t.jsx)(s.A,{id:"recommenderName",name:"recommenderName",type:"text",value:_.recommenderName,onChange:P,placeholder:"Your Full Name",required:!0}),(0,t.jsx)(s.A,{id:"recommenderEmail",name:"recommenderEmail",type:"email",value:_.recommenderEmail,onChange:P,placeholder:"Your Email Address",required:!0})]})]}),(0,t.jsxs)("button",{type:"submit",className:m().submitButton,disabled:v,children:[v?(0,t.jsx)(i.A,{size:20,className:"animate-spin"}):(0,t.jsx)(l.A,{size:18}),v?"Submitting...":"Submit Recommendation"]})]})]})})}):(0,t.jsx)("div",{className:m().container,children:(0,t.jsx)("p",{className:m().errorMessage,children:b||"Worker not found."})})}},11435:e=>{e.exports={container:"RecommendationPage_container__KysOK",pageWrapper:"RecommendationPage_pageWrapper__z95d5",recommendationCard:"RecommendationPage_recommendationCard__oEG_0",prompt:"RecommendationPage_prompt__1n7vt",note:"RecommendationPage_note__OOIdG",form:"RecommendationPage_form__qW9qX",inputGroup:"RecommendationPage_inputGroup__RBJDX",label:"RecommendationPage_label__YjMwT",input:"RecommendationPage_input__NL18F",textarea:"RecommendationPage_textarea__xWDfu",nameEmailGroup:"RecommendationPage_nameEmailGroup__k3YKq",submitButton:"RecommendationPage_submitButton__bgxAS",botMessageContainer:"RecommendationPage_botMessageContainer__t6A6o",botAvatar:"RecommendationPage_botAvatar__dwkPs",botText:"RecommendationPage_botText__tNMzr",loadingMessage:"RecommendationPage_loadingMessage__cCj8Y",successMessage:"RecommendationPage_successMessage__KHIUM",errorMessage:"RecommendationPage_errorMessage__ISKr_",select:"RecommendationPage_select__SCE41"}},12486:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(19946).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},19946:(e,a,r)=>{"use strict";r.d(a,{A:()=>d});var t=r(12115);let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,r)=>r?r.toUpperCase():a.toLowerCase()),s=e=>{let a=o(e);return a.charAt(0).toUpperCase()+a.slice(1)},i=function(){for(var e=arguments.length,a=Array(e),r=0;r<e;r++)a[r]=arguments[r];return a.filter((e,a,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===a).join(" ").trim()},l=e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let m=(0,t.forwardRef)((e,a)=>{let{color:r="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:s,className:m="",children:d,iconNode:u,...p}=e;return(0,t.createElement)("svg",{ref:a,...c,width:n,height:n,stroke:r,strokeWidth:s?24*Number(o)/Number(n):o,className:i("lucide",m),...!d&&!l(p)&&{"aria-hidden":"true"},...p},[...u.map(e=>{let[a,r]=e;return(0,t.createElement)(a,r)}),...Array.isArray(d)?d:[d]])}),d=(e,a)=>{let r=(0,t.forwardRef)((r,o)=>{let{className:l,...c}=r;return(0,t.createElement)(m,{ref:o,iconNode:a,className:i("lucide-".concat(n(s(e))),"lucide-".concat(e),l),...c})});return r.displayName=s(e),r}},20703:(e,a,r)=>{Promise.resolve().then(r.bind(r,437))},28399:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});var t=r(95155);r(12115);var n=r(41203),o=r.n(n);let s=e=>{let{id:a,name:r,placeholder:n,type:s="text",value:i,onChange:l,required:c=!1,...m}=e;return(0,t.jsx)("input",{id:a,name:r,className:o().input,type:s,placeholder:n,value:i,onChange:l,required:c,...m})}},34477:(e,a,r)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),!function(e,a){for(var r in a)Object.defineProperty(e,r,{enumerable:!0,get:a[r]})}(a,{callServer:function(){return t.callServer},createServerReference:function(){return o},findSourceMapURL:function(){return n.findSourceMapURL}});let t=r(53806),n=r(31818),o=r(34979).createServerReference},35695:(e,a,r)=>{"use strict";var t=r(18999);r.o(t,"useParams")&&r.d(a,{useParams:function(){return t.useParams}}),r.o(t,"usePathname")&&r.d(a,{usePathname:function(){return t.usePathname}}),r.o(t,"useRouter")&&r.d(a,{useRouter:function(){return t.useRouter}}),r.o(t,"useSearchParams")&&r.d(a,{useSearchParams:function(){return t.useSearchParams}})},41203:e=>{e.exports={input:"InputField_input__NlH8Q"}},51154:(e,a,r)=>{"use strict";r.d(a,{A:()=>t});let t=(0,r(19946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])}},e=>{var a=a=>e(e.s=a);e.O(0,[7208,8441,1684,7358],()=>a(20703)),_N_E=e.O()}]);