(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[549],{35695:(e,r,s)=>{"use strict";var a=s(18999);s.o(a,"useParams")&&s.d(r,{useParams:function(){return a.useParams}}),s.o(a,"usePathname")&&s.d(r,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(r,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(r,{useSearchParams:function(){return a.useSearchParams}})},69496:(e,r,s)=>{Promise.resolve().then(s.bind(s,93408))},93408:(e,r,s)=>{"use strict";s.d(r,{default:()=>f});var a=s(95155),n=s(12115),t=s(35695),o=s(93438);let i=e=>{let{isLoading:r,uiState:s,message:n,error:t,newPassword:o,onPasswordChange:i,onSubmitNewPassword:l,onGoHome:c,isSubmitDisabled:u}=e;return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"bg-white shadow-lg rounded-lg p-8 w-full max-w-md",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-6 text-center",children:"Account Management"}),r&&(0,a.jsxs)("p",{className:"text-gray-500 mb-4",children:["Loading... ",n]}),!r&&"initial"===s&&n&&(0,a.jsx)("p",{className:"text-gray-700 mb-4",children:n}),"inputPassword"===s&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-gray-700 mb-4",children:n}),(0,a.jsx)("input",{type:"password",value:o,onChange:e=>i(e.target.value),placeholder:"Enter new password",className:"w-full px-4 py-2 border rounded mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500","aria-label":"Enter new password",tabIndex:0}),(0,a.jsx)("button",{onClick:l,className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",disabled:u,"aria-label":"Save New Password",tabIndex:0,children:r?"Saving...":"Save New Password"})]}),"success"===s&&(0,a.jsx)("p",{className:"text-green-600 mb-4",dangerouslySetInnerHTML:{__html:n}}),"error"===s&&t&&(0,a.jsxs)("p",{className:"text-red-600 mb-4",children:["Error: ",t]}),!r&&("success"===s||"error"===s)&&(0,a.jsx)("button",{onClick:c,className:"w-full bg-gray-200 text-gray-800 py-2 rounded hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500 mt-2","aria-label":"Go to Homepage",tabIndex:0,children:"Go to Homepage"})]})})};var l=s(16203),c=s(23915);async function u(e){let{authClient:r,currentActionCode:s,setUserEmail:a,setUiState:n,setMessage:t,setError:o,setIsLoading:i}=e;i(!0),o(null);try{let e=await (0,l.RE)(r,s);a(e),n("inputPassword"),t("Resetting password for ".concat(e,". Please enter your new password."))}catch(e){console.error("Error verifying password reset code:",e),o(e instanceof c.g?e.message||"Invalid or expired action code. Please try resetting your password again.":"An unexpected error occurred while verifying the password reset code."),n("error")}i(!1)}async function d(e){let{authClient:r,oobCode:s,newPassword:a,userEmail:n,setMessage:t,setUiState:o,setError:i,setIsLoading:u,router:d,continueUrl:g}=e;if(!s||!a)return void i("Action code or new password missing.");u(!0),i(null);try{await (0,l.R4)(r,s,a),t("Password has been reset successfully! Attempting to sign you in...");try{if(!n){t("Password reset, but email not found for auto sign-in. Please sign in manually."),o("success");return}await (0,l.x9)(r,n,a),t("Password reset and signed in successfully!"),o("success"),g?d.push(g):d.push("/")}catch(r){console.error("Error signing in after password reset:",r);let e="Password reset successfully, but auto sign-in failed. Please try signing in manually.";r instanceof c.g&&(e+=" (Error: ".concat(r.message,")")),t(e),o("success")}}catch(e){console.error("Error confirming password reset:",e),i(e instanceof c.g?e.message||"Failed to reset password. The code might have expired or the password is too weak.":"An unexpected error occurred while confirming the password reset."),o("error")}u(!1)}async function g(e){let{authClient:r,currentActionCode:s,setUserEmail:a,setUiState:n,setMessage:t,setError:o,setIsLoading:i}=e;i(!0),o(null);try{let e=(await (0,l.sB)(r,s)).data.email;await (0,l.sv)(r,s),a(e||""),t("Your email has been successfully reverted to ".concat(e,". If you did not request this, please secure your account.")),n("success")}catch(e){console.error("Error recovering email:",e),o(e instanceof c.g?e.message||"Invalid or expired action code. Unable to recover email.":"An unexpected error occurred while recovering the email."),n("error")}i(!1)}async function m(e){let{authClient:r,currentActionCode:s,currentContinueUrl:a,setUiState:n,setMessage:t,setError:o,setIsLoading:i}=e;i(!0),o(null);try{await (0,l.sv)(r,s),t("Your email address has been verified successfully!"),n("success"),a&&t(e=>e+" You will be redirected shortly if a continue URL was provided, or click here: <a href='".concat(a,"'>Continue</a>"))}catch(e){console.error("Error verifying email:",e),o(e instanceof c.g?e.message||"Invalid or expired action code. Please try verifying your email again.":"An unexpected error occurred while verifying the email."),n("error")}i(!1)}async function h(e){let{authClient:r,currentActionCode:s,setUiState:a,setMessage:n,setError:t,setIsLoading:o,router:i}=e;o(!0),t(null);try{if((0,l.Pj)(r,window.location.href)){let e=window.localStorage.getItem("emailForSignIn");if(!e){let a=(await (0,l.sB)(r,s)).data.email;e=a||window.prompt("Please provide your email for confirmation")}if(!e){t("No email found. Please try signing in manually."),a("error"),o(!1),i.push("/signin");return}(0,l.hK)(r,e,window.location.href).then(()=>{window.localStorage.removeItem("emailForSignIn")}).catch(()=>{})}n("Your email address has been verified successfully!"),a("success")}catch(e){console.error("Error signing in:",e),t("An unexpected error occurred while signing in."),a("error")}o(!1)}let f=e=>{let{mode:r,oobCode:s,continueUrl:l}=e,c=(0,t.useRouter)(),[f,w]=(0,n.useState)(!0),[p,y]=(0,n.useState)(""),[b,v]=(0,n.useState)(null),[x,P]=(0,n.useState)("initial"),[S,k]=(0,n.useState)(null),[I,C]=(0,n.useState)(""),E=(0,n.useCallback)(e=>u({authClient:o.yK,currentActionCode:e,setUserEmail:k,setUiState:P,setMessage:y,setError:v,setIsLoading:w}),[]),N=(0,n.useCallback)(()=>d({authClient:o.yK,oobCode:s,newPassword:I,userEmail:S,setMessage:y,setUiState:P,setError:v,setIsLoading:w,router:c,continueUrl:l}),[s,I,S,c,l]),j=(0,n.useCallback)(e=>g({authClient:o.yK,currentActionCode:e,setUserEmail:k,setUiState:P,setMessage:y,setError:v,setIsLoading:w}),[]),A=(0,n.useCallback)((e,r)=>m({authClient:o.yK,currentActionCode:e,currentContinueUrl:r,setUiState:P,setMessage:y,setError:v,setIsLoading:w}),[]),K=(0,n.useCallback)(e=>h({authClient:o.yK,currentActionCode:e,setUiState:P,setMessage:y,setError:v,setIsLoading:w,router:c}),[c]);return(0,n.useEffect)(()=>{switch(r){case"resetPassword":E(s);break;case"recoverEmail":j(s);break;case"verifyEmail":A(s,l);break;case"signIn":K(s);break;default:v("Invalid mode: ".concat(r,". Please check the link.")),P("error"),w(!1)}},[r,s,l,E,j,A]),(0,a.jsx)(i,{isLoading:f,uiState:x,message:p,error:b,newPassword:I,onPasswordChange:C,onSubmitNewPassword:N,onGoHome:()=>c.push("/"),isSubmitDisabled:f})}},93438:(e,r,s)=>{"use strict";let a;s.d(r,{xv:()=>a,yK:()=>c});var n=s(23915),t=s(16203),o=s(35317),i=s(90858),l=s(74826);s(20996),a=(0,n.Dk)().length?(0,n.Sx)():(0,n.Wp)({apiKey:"AIzaSyBF7DIyylS8ByVbXxdmnmLkKpLyXSdEbQA",authDomain:"ableai-mvp.firebaseapp.com",projectId:"ableai-mvp",storageBucket:"ableai-mvp.firebasestorage.app",messagingSenderId:"697522507372",appId:"1:697522507372:web:7ce039897f0e597d4d9249"});let c=(0,t.xI)(a);(0,o.aU)(a),(0,i.c7)(a),(0,l.lS)(a,{backend:new l.C8})}},e=>{var r=r=>e(e.s=r);e.O(0,[2992,5965,94,8441,1684,7358],()=>r(69496)),_N_E=e.O()}]);