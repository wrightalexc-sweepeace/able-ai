(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{6233:(e,t,r)=>{"use strict";r.d(t,{default:()=>d});var n=r(95155),s=r(25731),l=r(85004),i=r(12115),a=r(35695);let o=()=>{let{user:e}=(0,s.A)(),t=(0,a.usePathname)(),r=(0,i.useRef)(null);return(0,i.useEffect)(()=>{let e=r.current,n=t.split("/"),s=n.includes("worker")?"GIG_WORKER":n.includes("buyer")?"BUYER":null;e&&e!==t&&s&&localStorage.setItem("GIG_WORKER"===s?"lastPathGigWorker":"lastPathBuyer",e),r.current=t},[t,null==e?void 0:e.claims]),null};var u=r(56671);function c(){return(0,n.jsx)(u.l$,{position:"bottom-right",richColors:!0})}function d(e){let{children:t}=e;return(0,n.jsx)(l.R,{children:(0,n.jsxs)(s.O,{children:[(0,n.jsx)(o,{}),(0,n.jsx)(c,{}),t]})})}},19324:()=>{},24865:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var n=r(95155),s=r(12115);class l extends s.Component{static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),console.error("ErrorBoundary caught an error",e,t)}render(){if(this.state.hasError){var e;return(0,n.jsx)("div",{style:{padding:20,color:"red"},children:(0,n.jsxs)("details",{style:{whiteSpace:"pre-wrap"},children:[this.state.error&&this.state.error.toString(),(0,n.jsx)("br",{}),null==(e=this.state.errorInfo)?void 0:e.componentStack]})})}return this.props.children}constructor(...e){super(...e),this.state={hasError:!1,error:null,errorInfo:null}}}},25731:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,O:()=>u});var n=r(95155),s=r(12115),l=r(16203),i=r(85004);let a=(0,s.createContext)({user:null,loading:!0});async function o(e){for(let r=0;r<10;r++){var t;let r=await (0,l.yx)(e,!0);if(null==(t=r.claims)?void 0:t.role)return r;await new Promise(e=>setTimeout(e,1e3))}return null}let u=e=>{let{children:t}=e,[r,u]=(0,s.useState)(null),[c,d]=(0,s.useState)(!0),{authClient:h,loading:f}=(0,i.D)();return(0,s.useEffect)(()=>{let e=()=>{};return!f&&h&&(e=(0,l.hg)(h,async e=>{if(e){let t=await o(e);t?u(Object.assign(e,{token:t.token,claims:t.claims})):u(null)}else u(null);d(!1)})),()=>e()},[f]),(0,n.jsx)(a.Provider,{value:{user:r,loading:c},children:t})},c=()=>(0,s.useContext)(a)},70378:(e,t,r)=>{Promise.resolve().then(r.bind(r,6233)),Promise.resolve().then(r.bind(r,24865)),Promise.resolve().then(r.t.bind(r,19324,23))},85004:(e,t,r)=>{"use strict";r.d(t,{D:()=>f,R:()=>h});var n=r(95155),s=r(12115),l=r(23915),i=r(16203),a=r(35317),o=r(90858),u=r(74826),c=r(20996);let d=(0,s.createContext)(null),h=e=>{let{children:t}=e,[r,h]=s.useState(null),[f,v]=s.useState(null),[x,g]=s.useState(null),[m,b]=s.useState(null),[p,S]=s.useState(null),[w,E]=s.useState(!0);return(0,s.useEffect)(()=>{!async function(){let e,t=await fetch("/firebase-config.json"),r=await t.json();0===(0,l.Dk)().length?(console.log("[Firebase] Initializing new instance..."),e=(0,l.Wp)(r)):(console.log("[Firebase] Reusing existing instance."),e=(0,l.Sx)()),h((0,i.xI)(e)),g((0,a.aU)(e)),b((0,o.c7)(e)),S((0,u.lS)(e,{backend:new u.C8})),v((0,c.dG)(e)),E(!1)}()},[]),(0,n.jsx)(d.Provider,{value:{authClient:r,db:x,storage:m,ai:p,messaging:f,loading:w},children:t})},f=()=>{let e=(0,s.useContext)(d);if(!e)throw Error("useFirebase must be used within FirebaseProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[2533,2992,5965,94,3753,8441,1684,7358],()=>t(70378)),_N_E=e.O()}]);