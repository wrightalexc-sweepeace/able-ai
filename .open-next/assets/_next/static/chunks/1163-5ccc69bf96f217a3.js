(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1163],{6188:(e,t,a)=>{"use strict";a.d(t,{A:()=>f});var n=a(95155);a(12115);var s=a(35169),i=a(12908),r=a.n(i),o=a(6874),l=a.n(o),c=a(25731),d=a(53843),u=a(35695),h=a(66766),g=a(61508),p=a.n(g);let m=e=>{let{uid:t,handleClick:a,unreadCount:s,unreadNotifications:i}=e;return(0,n.jsxs)(l(),{href:"/user/".concat(t,"/notifications"),passHref:!0,onClick:a,children:[(0,n.jsx)("button",{className:p().notificationButton,"aria-label":"Notifications",children:(0,n.jsx)(h.default,{src:"/images/notifications.svg",alt:"Notifications",width:40,height:40})}),s>0||i>0?(0,n.jsx)("span",{className:p().notificationBadge,children:s>0?s:i}):null]})},f=e=>{let{user:t}=(0,c.A)(),a=(0,u.usePathname)(),{isHomePage:i,title:o,onBackClick:g,handleClick:p,unreadCount:f,unreadNotifications:_}=e,A=a.includes("/able-ai");return(0,n.jsxs)("header",{className:r().header,children:[i?(0,n.jsx)(h.default,{src:"/images/home.svg",alt:"Back",width:40,height:40}):(0,n.jsx)("button",{onClick:g,className:r().backButton,"aria-label":"Go back",children:(0,n.jsx)(s.A,{size:20})}),o&&(0,n.jsx)("h1",{className:r().title,children:o}),(0,n.jsx)(l(),{href:"/user/".concat(null==t?void 0:t.uid,"/able-ai"),className:r().chat,children:A?(0,n.jsx)(d.A,{width:40,height:40}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"Chat with Able"}),(0,n.jsx)(d.A,{width:30,height:30})]})}),i&&(0,n.jsx)(m,{uid:null==t?void 0:t.uid,handleClick:p,unreadCount:f,unreadNotifications:_})]})}},12908:e=>{e.exports={header:"ScreenHeaderWithBack_header__mx1Ch",backButton:"ScreenHeaderWithBack_backButton__0EIlD",title:"ScreenHeaderWithBack_title__Un97C",chat:"ScreenHeaderWithBack_chat__WpLse"}},25731:(e,t,a)=>{"use strict";a.d(t,{A:()=>d,O:()=>c});var n=a(95155),s=a(12115),i=a(16203),r=a(85004);let o=(0,s.createContext)({user:null,loading:!0});async function l(e){for(let a=0;a<10;a++){var t;let a=await (0,i.yx)(e,!0);if(null==(t=a.claims)?void 0:t.role)return a;await new Promise(e=>setTimeout(e,1e3))}return null}let c=e=>{let{children:t}=e,[a,c]=(0,s.useState)(null),[d,u]=(0,s.useState)(!0),{authClient:h,loading:g}=(0,r.D)();return(0,s.useEffect)(()=>{let e=()=>{};return!g&&h&&(e=(0,i.hg)(h,async e=>{if(e){let t=await l(e);t?c(Object.assign(e,{token:t.token,claims:t.claims})):c(null)}else c(null);u(!1)})),()=>e()},[g]),(0,n.jsx)(o.Provider,{value:{user:a,loading:d},children:t})},d=()=>(0,s.useContext)(o)},53843:(e,t,a)=>{"use strict";a.d(t,{A:()=>o});var n=a(95155);a(12115);var s=a(66766),i=a(69456),r=a.n(i);let o=e=>{let{width:t=260,height:a=260}=e;return(0,n.jsx)(s.default,{src:"/images/ableai.png",alt:"App Logo",width:t,height:a,className:r().logo})}},61508:e=>{e.exports={notificationButton:"Notification_notificationButton__NL740",notificationBadge:"Notification_notificationBadge__ZxPNU"}},69456:e=>{e.exports={logo:"Logo_logo__aLQuM"}},72260:(e,t,a)=>{"use strict";a.d(t,{qc:()=>u,rL:()=>g});let n={UNKNOWN:{code:1e4,message:"Unknown error",type:"error"},MODEL_NOT_SUPPORTED:{code:10001,message:"Model not supported",type:"error"},SCHEMA_VALIDATION_FAILED:{code:10002,message:"Schema validation failed",type:"error"},AI_API_ERROR:{code:10003,message:"AI API error",type:"error"},STREAM_NOT_IMPLEMENTED:{code:10004,message:"Streaming not implemented",type:"warning"}};function s(e){"error"===e.type||"critical"===e.type?console.error("[Client][".concat(e.type.toUpperCase(),"] [CODE: ").concat(e.code,"] ").concat(e.message),e.details||""):"warning"===e.type?console.warn("[Client][".concat(e.type.toUpperCase(),"] [CODE: ").concat(e.code,"] ").concat(e.message),e.details||""):console.log("[Client][".concat(e.type.toUpperCase(),"] [CODE: ").concat(e.code,"] ").concat(e.message),e.details||"")}function i(e){}var r=a(76294);let o=(e,t)=>t.includes(e),l=(e,t)=>(s(e),i(e),t(e),{ok:!1,error:e.message,code:e.code,details:e.details}),c=e=>!!e,d=async(e,t,a)=>{try{let a,n=await e.generateContent(t);if("function"==typeof n.response.text){let e=await n.response.text();a=JSON.parse(e)}else a=JSON.parse(n.response.text);if(null==a)return Error("Parsed data is undefined or null");return a}catch(t){let e="object"==typeof t&&null!==t&&"message"in t&&"string"==typeof t.message?t.message:"Failed to parse Gemini model response";return a({type:"error",message:e,code:500,details:{err:t}}),Error(e)}},u=["gemini-2.5-flash-preview-05-20","gemini-2.0-flash"],h=()=>{};async function g(e,t,a,i){var g,p,m,f;let _=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3,A=arguments.length>5&&void 0!==arguments[5]?arguments[5]:h,E=(g=e,p=i,m=t,o(g,u)?p&&!o(p,u)?{...n.MODEL_NOT_SUPPORTED,details:{fallbackModelName:p}}:m.isStream?n.STREAM_NOT_IMPLEMENTED:c(m.responseSchema)?null:{...n.SCHEMA_VALIDATION_FAILED,details:{reason:"No responseSchema provided"}}:{...n.MODEL_NOT_SUPPORTED,details:{modelName:g}});if(E){return l(E,A),{ok:!1,error:(f=E).message,code:f.code,details:f.details}}if(!c(t.responseSchema))return l({...n.SCHEMA_VALIDATION_FAILED,details:{reason:"No responseSchema provided"}},A),{ok:!1,error:n.SCHEMA_VALIDATION_FAILED.message,code:n.SCHEMA_VALIDATION_FAILED.code,details:{reason:"No responseSchema provided"}};let N=null,S=0,x=!1,C=e;for(;S<_;)try{if(!a){let a={...n.AI_API_ERROR,details:{attempt:S,modelName:e,aiOptions:t}};s(a),A(a),N=a,S++;continue}let i=(0,r.oc)(a,{model:C,generationConfig:{...t.generationConfig||{},responseMimeType:"application/json",responseSchema:t.responseSchema}}),o=await d(i,t.prompt,A);if(o instanceof Error){N={...n.SCHEMA_VALIDATION_FAILED,details:{reason:o.message}},S++;continue}return{ok:!0,data:o}}catch(t){let e={...n.AI_API_ERROR,details:{err:t instanceof Error?t.message:String(t),model:C,attempt:S}};if(l(e,A),N=e,i&&!x&&S>=Math.max(1,_-2)){C=i,x=!0,S++;continue}S++}let I=N||{...n.UNKNOWN,details:{modelName:e,aiOptions:t}};return{ok:!1,error:"Sorry, I cannot answer this time. Please retry or report this issue.",code:I.code,details:I.details}}},85004:(e,t,a)=>{"use strict";a.d(t,{D:()=>g,R:()=>h});var n=a(95155),s=a(12115),i=a(23915),r=a(16203),o=a(35317),l=a(90858),c=a(74826),d=a(20996);let u=(0,s.createContext)(null),h=e=>{let{children:t}=e,[a,h]=s.useState(null),[g,p]=s.useState(null),[m,f]=s.useState(null),[_,A]=s.useState(null),[E,N]=s.useState(null),[S,x]=s.useState(!0);return(0,s.useEffect)(()=>{!async function(){let e,t=await fetch("/firebase-config.json"),a=await t.json();0===(0,i.Dk)().length?(console.log("[Firebase] Initializing new instance..."),e=(0,i.Wp)(a)):(console.log("[Firebase] Reusing existing instance."),e=(0,i.Sx)()),h((0,r.xI)(e)),f((0,o.aU)(e)),A((0,l.c7)(e)),N((0,c.lS)(e,{backend:new c.C8})),p((0,d.dG)(e)),x(!1)}()},[]),(0,n.jsx)(u.Provider,{value:{authClient:a,db:m,storage:_,ai:E,messaging:g,loading:S},children:t})},g=()=>{let e=(0,s.useContext)(u);if(!e)throw Error("useFirebase must be used within FirebaseProvider");return e}}}]);