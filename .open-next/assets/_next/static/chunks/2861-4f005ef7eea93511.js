(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2861],{5196:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},6188:(e,t,s)=>{"use strict";s.d(t,{A:()=>k});var a=s(95155);s(12115);var i=s(35169),r=s(12908),n=s.n(r),o=s(6874),l=s.n(o),c=s(25731),d=s(53843),u=s(35695),g=s(66766),_=s(61508),h=s.n(_);let m=e=>{let{uid:t,handleClick:s,unreadCount:i,unreadNotifications:r}=e;return(0,a.jsxs)(l(),{href:"/user/".concat(t,"/notifications"),passHref:!0,onClick:s,children:[(0,a.jsx)("button",{className:h().notificationButton,"aria-label":"Notifications",children:(0,a.jsx)(g.default,{src:"/images/notifications.svg",alt:"Notifications",width:40,height:40})}),i>0||r>0?(0,a.jsx)("span",{className:h().notificationBadge,children:i>0?i:r}):null]})},k=e=>{let{user:t}=(0,c.A)(),s=(0,u.usePathname)(),{isHomePage:r,title:o,onBackClick:_,handleClick:h,unreadCount:k,unreadNotifications:f}=e,w=s.includes("/able-ai");return(0,a.jsxs)("header",{className:n().header,children:[r?(0,a.jsx)(g.default,{src:"/images/home.svg",alt:"Back",width:40,height:40}):(0,a.jsx)("button",{onClick:_,className:n().backButton,"aria-label":"Go back",children:(0,a.jsx)(i.A,{size:20})}),o&&(0,a.jsx)("h1",{className:n().title,children:o}),(0,a.jsx)(l(),{href:"/user/".concat(null==t?void 0:t.uid,"/able-ai"),className:n().chat,children:w?(0,a.jsx)(d.A,{width:40,height:40}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Chat with Able"}),(0,a.jsx)(d.A,{width:30,height:30})]})}),r&&(0,a.jsx)(m,{uid:null==t?void 0:t.uid,handleClick:h,unreadCount:k,unreadNotifications:f})]})}},12908:e=>{e.exports={header:"ScreenHeaderWithBack_header__mx1Ch",backButton:"ScreenHeaderWithBack_backButton__0EIlD",title:"ScreenHeaderWithBack_title__Un97C",chat:"ScreenHeaderWithBack_chat__WpLse"}},14186:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},18315:e=>{e.exports={container:"GigDetails_container__cYCBA",workerContainer:"GigDetails_workerContainer__mRRMj",workerHeader:"GigDetails_workerHeader__EG1eE",headerLeft:"GigDetails_headerLeft__LmsjU",backButton:"GigDetails_backButton__62PWW",logoContainer:"GigDetails_logoContainer__EFFX2",workerPageTitle:"GigDetails_workerPageTitle___4zZp",workerChatButton:"GigDetails_workerChatButton__iODiu",workerMain:"GigDetails_workerMain__zkAjH",workerGigDetailsSection:"GigDetails_workerGigDetailsSection__XHzP_",workerGigDetailsHeader:"GigDetails_workerGigDetailsHeader__9nOOO",workerSectionTitle:"GigDetails_workerSectionTitle__cISKy",workerGigDetailsRow:"GigDetails_workerGigDetailsRow__8tMdP",workerLabel:"GigDetails_workerLabel__Dnt3D",workerDetailValue:"GigDetails_workerDetailValue__z_SGL",workerNegotiationButton:"GigDetails_workerNegotiationButton__aJ8My",workerInstructionsSection:"GigDetails_workerInstructionsSection___JuTN",workerSpecialInstTitle:"GigDetails_workerSpecialInstTitle__KoLsy",workerSpecialInstructions:"GigDetails_workerSpecialInstructions__kpEX3",workerWorkflowSection:"GigDetails_workerWorkflowSection__NrDOf",workerWorkflowButton:"GigDetails_workerWorkflowButton__KJ9iD",workerWorkflowButtonActive:"GigDetails_workerWorkflowButtonActive__N9CHX",workerWorkflowButtonInactive:"GigDetails_workerWorkflowButtonInactive__kJF64",workerWorkflowStep:"GigDetails_workerWorkflowStep__IX1pf",workerAdditionalActions:"GigDetails_workerAdditionalActions__UrrXF",workerAdditionalButton:"GigDetails_workerAdditionalButton__lIfVq",workerTermsButton:"GigDetails_workerTermsButton__qunU7",offerActionsSection:"GigDetails_offerActionsSection__86o4O",slideInUp:"GigDetails_slideInUp__Alb8m",offerHeader:"GigDetails_offerHeader__iP0yt",offerActionButtons:"GigDetails_offerActionButtons__KyMMp",acceptOfferButton:"GigDetails_acceptOfferButton__0CQNd",declineOfferButton:"GigDetails_declineOfferButton__zXk5O",float:"GigDetails_float__KESmL",shimmer:"GigDetails_shimmer__ppKsp",header:"GigDetails_header__DyYvG",headerActions:"GigDetails_headerActions__Dgdx9",calendarButton:"GigDetails_calendarButton__oAlMd",pageTitle:"GigDetails_pageTitle__RwlAj",chatButton:"GigDetails_chatButton__1Xjar",gigDetailsMain:"GigDetails_gigDetailsMain__OtvdH",gigDetailsSection:"GigDetails_gigDetailsSection__AiwaS",workerSection:"GigDetails_workerSection__8dMaa",workerAvatar:"GigDetails_workerAvatar__TKHtC",workerDetailsContainer:"GigDetails_workerDetailsContainer__SkdOC",workerDetails:"GigDetails_workerDetails__lO8VT",workerName:"GigDetails_workerName__pqsyq",gigDetailsHeader:"GigDetails_gigDetailsHeader__nMZfj",sectionTitle:"GigDetails_sectionTitle__bkLMR",specialInstTitle:"GigDetails_specialInstTitle__VwcC5",gigDetailsRow:"GigDetails_gigDetailsRow___QdKb",label:"GigDetails_label__RV8f1",detailValue:"GigDetails_detailValue__RR81A",negotiationButton:"GigDetails_negotiationButton__8Ory3",instructionsSection:"GigDetails_instructionsSection__N1WbE",actionSection:"GigDetails_actionSection__FxQOE",actionButton:"GigDetails_actionButton__I54Ny",actionButtonPrimary:"GigDetails_actionButtonPrimary__OiHBO",secondaryActionsSection:"GigDetails_secondaryActionsSection__08Dz6",secondaryActionButton:"GigDetails_secondaryActionButton__C0TYu",deleteButton:"GigDetails_deleteButton__7kC5G",icon:"GigDetails_icon___D8My",statusBadge:"GigDetails_statusBadge__JB_Du",statusAccepted:"GigDetails_statusAccepted__J99jE",statusInProgress:"GigDetails_statusInProgress___XOo_",statusAwaitingConfirmation:"GigDetails_statusAwaitingConfirmation__ULzXI",statusCompleted:"GigDetails_statusCompleted__44PHD",statusCancelled:"GigDetails_statusCancelled__gw_g6",statusMessage:"GigDetails_statusMessage__nRH5o",statusSuccess:"GigDetails_statusSuccess__Kz42T",statusDescription:"GigDetails_statusDescription__Rk9Eu",specialInstructions:"GigDetails_specialInstructions__GJKHz",footer:"GigDetails_footer__aMaVL",homeButton:"GigDetails_homeButton__qH7jx",loadingContainer:"GigDetails_loadingContainer__9zfsn",errorMessage:"GigDetails_errorMessage__drZAM",emptyState:"GigDetails_emptyState__d9Ufw",awaitingText:"GigDetails_awaitingText__eeGch",workerInfoSection:"GigDetails_workerInfoSection__IltFS",workerInfoContainer:"GigDetails_workerInfoContainer__eZMnV",workerInfoDetails:"GigDetails_workerInfoDetails__DId_4",workerStats:"GigDetails_workerStats__jpqLj",starBadge:"GigDetails_starBadge__g0aEu",sectionHeader:"GigDetails_sectionHeader__MsQxj"}},19946:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});var a=s(12115);let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),n=e=>{let t=r(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},l=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:i=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:d="",children:u,iconNode:g,..._}=e;return(0,a.createElement)("svg",{ref:t,...c,width:i,height:i,stroke:s,strokeWidth:n?24*Number(r)/Number(i):r,className:o("lucide",d),...!u&&!l(_)&&{"aria-hidden":"true"},..._},[...g.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let s=(0,a.forwardRef)((s,r)=>{let{className:l,...c}=s;return(0,a.createElement)(d,{ref:r,iconNode:t,className:o("lucide-".concat(i(n(e))),"lucide-".concat(e),l),...c})});return s.displayName=n(e),s}},22098:e=>{e.exports={actionButton:"GigActionButton_actionButton__Rx4Lb",activeWorker:"GigActionButton_activeWorker__mA4aQ",activeBuyer:"GigActionButton_activeBuyer__aaVHm",disabled:"GigActionButton_disabled__aLXDc"}},25559:e=>{e.exports={statusIndicator:"GigStausIndicator_statusIndicator__uOEa5",activeWorker:"GigStausIndicator_activeWorker__thr2W",activeBuyer:"GigStausIndicator_activeBuyer__lY6xx",disabled:"GigStausIndicator_disabled__xnumP"}},25731:(e,t,s)=>{"use strict";s.d(t,{A:()=>d,O:()=>c});var a=s(95155),i=s(12115),r=s(16203),n=s(85004);let o=(0,i.createContext)({user:null,loading:!0});async function l(e){for(let s=0;s<10;s++){var t;let s=await (0,r.yx)(e,!0);if(null==(t=s.claims)?void 0:t.role)return s;await new Promise(e=>setTimeout(e,1e3))}return null}let c=e=>{let{children:t}=e,[s,c]=(0,i.useState)(null),[d,u]=(0,i.useState)(!0),{authClient:g,loading:_}=(0,n.D)();return(0,i.useEffect)(()=>{let e=()=>{};return!_&&g&&(e=(0,r.hg)(g,async e=>{if(e){let t=await l(e);t?c(Object.assign(e,{token:t.token,claims:t.claims})):c(null)}else c(null);u(!1)})),()=>e()},[_]),(0,a.jsx)(o.Provider,{value:{user:s,loading:d},children:t})},d=()=>(0,i.useContext)(o)},34477:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{callServer:function(){return a.callServer},createServerReference:function(){return r},findSourceMapURL:function(){return i.findSourceMapURL}});let a=s(53806),i=s(31818),r=s(34979).createServerReference},35169:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},42355:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},46083:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s(34477);let i=(0,a.createServerReference)("406285e4a5b3e01ac696468e89531313be16ecb429",a.callServer,void 0,a.findSourceMapURL,"updateGigOfferStatus")},53243:(e,t,s)=>{"use strict";s.d(t,{Y:()=>i});var a=s(34477);let i=(0,a.createServerReference)("400e000ab33a7f5af2587925f175e4f793654b0f04",a.callServer,void 0,a.findSourceMapURL,"getGigDetails")},53843:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var a=s(95155);s(12115);var i=s(66766),r=s(69456),n=s.n(r);let o=e=>{let{width:t=260,height:s=260}=e;return(0,a.jsx)(i.default,{src:"/images/ableai.png",alt:"App Logo",width:t,height:s,className:n().logo})}},61508:e=>{e.exports={notificationButton:"Notification_notificationButton__NL740",notificationBadge:"Notification_notificationBadge__ZxPNU"}},63732:(e,t,s)=>{"use strict";s.d(t,{y:()=>i});var a=s(34477);let i=(0,a.createServerReference)("40d24a1ec023788a7626d74ce5a28bddbb77869bf3",a.callServer,void 0,a.findSourceMapURL,"declineGigOffer")},66766:(e,t,s)=>{"use strict";s.d(t,{default:()=>i.a});var a=s(71469),i=s.n(a)},69074:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},69404:(e,t,s)=>{"use strict";s.d(t,{U:()=>i});var a=s(34477);let i=(0,a.createServerReference)("402e2448f83fdc0f1b31fdff1de0016567c7fd3feb",a.callServer,void 0,a.findSourceMapURL,"acceptGigOffer")},69456:e=>{e.exports={logo:"Logo_logo__aLQuM"}},71469:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return l},getImageProps:function(){return o}});let a=s(88229),i=s(38883),r=s(33063),n=a._(s(51193));function o(e){let{props:t}=(0,i.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let l=r.Image},81284:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},81497:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(19946).A)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},85004:(e,t,s)=>{"use strict";s.d(t,{D:()=>_,R:()=>g});var a=s(95155),i=s(12115),r=s(23915),n=s(16203),o=s(35317),l=s(90858),c=s(74826),d=s(20996);let u=(0,i.createContext)(null),g=e=>{let{children:t}=e,[s,g]=i.useState(null),[_,h]=i.useState(null),[m,k]=i.useState(null),[f,w]=i.useState(null),[p,G]=i.useState(null),[D,x]=i.useState(!0);return(0,i.useEffect)(()=>{!async function(){let e,t=await fetch("/firebase-config.json"),s=await t.json();0===(0,r.Dk)().length?(console.log("[Firebase] Initializing new instance..."),e=(0,r.Wp)(s)):(console.log("[Firebase] Reusing existing instance."),e=(0,r.Sx)()),g((0,n.xI)(e)),k((0,o.aU)(e)),w((0,l.c7)(e)),G((0,c.lS)(e,{backend:new c.C8})),h((0,d.dG)(e)),x(!1)}()},[]),(0,a.jsx)(u.Provider,{value:{authClient:s,db:m,storage:f,ai:p,messaging:_,loading:D},children:t})},_=()=>{let e=(0,i.useContext)(u);if(!e)throw Error("useFirebase must be used within FirebaseProvider");return e}},86325:(e,t,s)=>{"use strict";async function a(e){try{return localStorage.setItem("lastRoleUsed",e),null}catch(e){console.log("Error updating last role used:",e)}}function i(){try{return window.localStorage.getItem("lastRoleUsed")}catch(e){return console.log("Error retrieving last role used:",e),null}}s.d(t,{C:()=>a,K:()=>i})},87647:(e,t,s)=>{"use strict";s.d(t,{A:()=>P});var a=s(95155),i=s(5196),r=s(42355),n=s(81497),o=s(69074),l=s(81284),c=s(14186);let d=(0,s(19946).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var u=s(53843),g=s(18315),_=s.n(g),h=s(35695),m=s(22098),k=s.n(m),f=s(86325);let w=e=>{let{label:t,handleGigAction:s,isActive:i,isDisabled:r}=e,n=(0,f.K)();return(0,a.jsx)("button",{type:"button",className:"".concat(k().actionButton," ").concat(i?"GIG_WORKER"===n?k().activeWorker:k().activeBuyer:""," ").concat(r?k().disabled:""),onClick:s,disabled:r,children:t})};var p=s(6874),G=s.n(p),D=s(12115),x=s(66766),N=s(25731),j=s(46083),v=s(34477);let S=(0,v.createServerReference)("4084359704f71594f9310ab1931288fb6d27cb5814",v.callServer,void 0,v.findSourceMapURL,"deleteGig");var b=s(56671),E=s(6188),R=s(25559),A=s.n(R);let I=e=>{let{label:t,isActive:s,isDisabled:i}=e,r=(0,f.K)();return(0,a.jsx)("div",{className:"".concat(A().statusIndicator," ").concat(s?"GIG_WORKER"===r?A().activeWorker:A().activeBuyer:""," ").concat(i?A().disabled:""),children:t})};var C=s(69404),y=s(63732);let B=e=>new Date(e).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),O=e=>new Date(e).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!0}),W=(e,t)=>{let s=new Date(e),a=new Date(t).getTime()-s.getTime();if(a<=0)return"N/A";let i=Math.floor(a/36e5),r=Math.floor(a%36e5/6e4),n="";return i>0&&(n+="".concat(i," hour").concat(i>1?"s":"")),r>0&&(n+=" ".concat(r," minute").concat(r>1?"s":"")),n.trim()||"N/A"},P=e=>{let{userId:t,role:s,gig:g,setGig:m,isAvailableOffer:k=!1,isCheckingOffer:p=!1}=e,v=(0,h.useRouter)(),[R,A]=(0,D.useState)(!1),{user:P}=(0,N.A)(),T=(0,f.K)(),[M,L]=(0,D.useState)(!1),[K,H]=(0,D.useState)(!1),[F,U]=(0,D.useState)(!1),[z,V]=(0,D.useState)(!1),[Y,q]=(0,D.useState)(!1),X=W(g.startTime,g.endTime),Z=g.buyerName.split(" ")[0],J=(()=>{if("GIG_WORKER"===T&&"worker"===s){var e;return(null==P||null==(e=P.displayName)?void 0:e.split(" ")[0])||"Worker"}return g.workerName?g.workerName.split(" ")[0]:"Worker"})(),Q={gigs:g.workerGigs||0,experience:g.workerExperience||0,isStar:g.isWorkerStar||!1},$=e=>{let t=g.status;switch(e){case"accept":if("PENDING"===t)return"GIG_WORKER"===T?"Accept Gig":"Offer Sent - awaiting acceptance";return"Gig Accepted";case"start":if("PENDING"===t||"ACCEPTED"===t)return"GIG_WORKER"===T?"Mark you have started your shift":"Mark as started";return"GIG_WORKER"===T?"Gig Started":"".concat(J," has started the gig");case"complete":if("PENDING"===t||"ACCEPTED"===t||"IN_PROGRESS"===t)return"GIG_WORKER"===T?"Mark as complete":"Mark as complete, pay ".concat(J);if(g.isWorkerSubmittedFeedback&&!g.isBuyerSubmittedFeedback)return"GIG_WORKER"===T?"Gig Completed":"\uD83D\uDD52Confirm, pay and review ".concat(J);if(g.isBuyerSubmittedFeedback&&!g.isWorkerSubmittedFeedback)return"GIG_WORKER"===T?"Buyer confirmed & paid: leave feedback":"".concat(J," has completed the gig");else return"GIG_WORKER"===T?"Gig Completed":"".concat(J," has completed the gig");case"awaiting":if("GIG_WORKER"===T)return g.isBuyerSubmittedFeedback?(0,a.jsxs)("span",{className:_().awaitingText,children:[(0,a.jsx)(i.A,{color:"#000000"})," ",Z," Paid \xa3",g.estimatedEarnings]}):"Waiting for ".concat(Z," to confirm and pay");return g.isBuyerSubmittedFeedback?(0,a.jsxs)("span",{className:_().awaitingText,children:[(0,a.jsx)(i.A,{color:"#000000"})," Paid \xa3",g.estimatedEarnings]}):"Pay";default:return""}},ee=async e=>{if(g){A(!0),console.log("Performing action: ".concat(e," for gig: ").concat(g.id));try{if("accept"===e&&"GIG_WORKER"===T&&"PENDING_WORKER_ACCEPTANCE"===g.statusInternal){let e=await (0,C.U)({gigId:g.id,userId:t});if(e.error)return void b.oR.error(e.error);m({...g,status:"ACCEPTED",statusInternal:"ACCEPTED"}),b.oR.success("Gig offer accepted successfully! You can now start the gig when ready."),setTimeout(()=>{v.push("/user/".concat(null==P?void 0:P.uid,"/worker"))},2e3);return}if("decline"===e&&"GIG_WORKER"===T&&"PENDING_WORKER_ACCEPTANCE"===g.statusInternal){let e=await (0,y.y)({gigId:g.id,userId:t});if(e.error)return void b.oR.error(e.error);m({...g,status:"CANCELLED",statusInternal:"DECLINED_BY_WORKER"}),b.oR.success("Gig offer declined successfully!"),setTimeout(()=>{v.push("/user/".concat(null==P?void 0:P.uid,"/worker/offers"))},1500);return}"accept"===e&&g&&"GIG_WORKER"===T?(m({...g,status:"ACCEPTED"}),await (0,j.Z)({gigId:g.id,userId:t,role:s,action:"accept"}),b.oR.success("Gig accepted successfully!")):"start"===e&&g?(m({...g,status:"IN_PROGRESS"}),await (0,j.Z)({gigId:g.id,userId:t,role:s,action:"start"}),b.oR.success("Gig started successfully!")):"complete"===e&&g?(m({...g,status:"COMPLETED"}),await (0,j.Z)({gigId:g.id,userId:t,role:s,action:"complete"}),b.oR.success("Gig completed successfully!"),"GIG_WORKER"===T?v.push("/user/".concat(null==P?void 0:P.uid,"/worker/gigs/").concat(g.id,"/feedback")):v.push("/user/".concat(null==P?void 0:P.uid,"/buyer/gigs/").concat(g.id,"/feedback"))):"confirmed"===e?(m({...g,status:"CONFIRMED"}),b.oR.success("Gig confirmed successfully!")):"requestAmendment"===e?(m({...g,status:"REQUESTED_AMENDMENT"}),v.push("/gigs/".concat(g.id,"/amends/").concat("123","/request"))):"reportIssue"===e?v.push("/gigs/".concat(g.id,"/report-issue")):"delete"===e?(await S({gigId:g.id,userId:t}),b.oR.success("Gig deleted successfully!"),v.push("/user/".concat(null==P?void 0:P.uid,"/buyer"))):"paid"===e&&b.oR.success("Payment confirmed!")}catch(e){console.error("Error performing gig action:",e),b.oR.error("Failed to perform action. Please try again.")}finally{A(!1)}}};return"GIG_WORKER"===T&&"worker"===s?(0,a.jsxs)("div",{className:_().workerContainer,children:[(0,a.jsxs)("header",{className:_().workerHeader,children:[(0,a.jsxs)("div",{className:_().headerLeft,children:[(0,a.jsx)("button",{className:_().backButton,onClick:()=>v.back(),children:(0,a.jsx)(r.A,{size:20,color:"#ffffff"})}),(0,a.jsx)("div",{className:_().logoContainer,children:(0,a.jsx)(u.A,{width:50,height:50})}),(0,a.jsxs)("h1",{className:_().workerPageTitle,children:[g.role," Gig"]})]}),(0,a.jsx)("button",{className:_().workerChatButton,children:(0,a.jsx)(n.A,{size:30,color:"#ffffff"})})]}),(0,a.jsxs)("main",{className:_().workerMain,children:[(0,a.jsxs)("section",{className:_().workerGigDetailsSection,children:[(0,a.jsxs)("div",{className:_().workerGigDetailsHeader,children:[(0,a.jsx)("h2",{className:_().workerSectionTitle,children:"Gig Details"}),(0,a.jsx)(o.A,{size:20,color:"#ffffff"})]}),(0,a.jsxs)("div",{className:_().workerGigDetailsRow,children:[(0,a.jsx)("span",{className:_().workerLabel,children:"Location:"}),(0,a.jsx)("span",{className:_().workerDetailValue,children:g.location})]}),(0,a.jsxs)("div",{className:_().workerGigDetailsRow,children:[(0,a.jsx)("span",{className:_().workerLabel,children:"Date:"}),(0,a.jsx)("span",{className:_().workerDetailValue,children:B(g.date)})]}),(0,a.jsxs)("div",{className:_().workerGigDetailsRow,children:[(0,a.jsx)("span",{className:_().workerLabel,children:"Time:"}),(0,a.jsxs)("span",{className:_().workerDetailValue,children:[O(g.startTime)," - ",O(g.endTime)]})]}),(0,a.jsxs)("div",{className:_().workerGigDetailsRow,children:[(0,a.jsx)("span",{className:_().workerLabel,children:"Pay per hour:"}),(0,a.jsxs)("span",{className:_().workerDetailValue,children:["\xa3",g.hourlyRate.toFixed(2)]})]}),(0,a.jsxs)("div",{className:_().workerGigDetailsRow,children:[(0,a.jsx)("span",{className:_().workerLabel,children:"Total Pay:"}),(0,a.jsxs)("span",{className:_().workerDetailValue,children:["\xa3",g.estimatedEarnings.toFixed(2)]})]}),(0,a.jsxs)("div",{className:_().workerGigDetailsRow,children:[(0,a.jsx)("span",{className:_().workerLabel,children:"Hiring manager:"}),(0,a.jsxs)("span",{className:_().workerDetailValue,children:[g.buyerName," @",g.buyerName.toLowerCase().replace(/\s+/g,"")]})]})]}),(0,a.jsx)("button",{className:_().workerNegotiationButton,onClick:()=>{(null==P?void 0:P.uid)&&g.id&&v.push("/gigs/".concat(g.id,"/amends/").concat("123"))},disabled:K,children:K?"Opening...":"Negotiate, cancel or change gig details"}),g.specialInstructions&&(0,a.jsxs)("section",{className:_().workerInstructionsSection,children:[(0,a.jsx)("h2",{className:_().workerSpecialInstTitle,children:"Special Instructions"}),(0,a.jsx)("p",{className:_().workerSpecialInstructions,children:g.specialInstructions})]}),(0,a.jsxs)("section",{className:_().workerWorkflowSection,children:[(0,a.jsxs)("button",{className:"".concat(_().workerWorkflowButton," ").concat("PENDING"===g.status?_().workerWorkflowButtonActive:_().workerWorkflowButtonInactive),onClick:()=>"PENDING"===g.status&&ee("accept"),disabled:"PENDING"!==g.status||R,children:[(0,a.jsx)("div",{className:_().workerWorkflowStep,children:"1"}),(0,a.jsx)("span",{children:"Accept gig"})]}),(0,a.jsxs)("button",{className:"".concat(_().workerWorkflowButton," ").concat("ACCEPTED"===g.status?_().workerWorkflowButtonActive:_().workerWorkflowButtonInactive),onClick:()=>"ACCEPTED"===g.status&&ee("start"),disabled:"ACCEPTED"!==g.status||R,children:[(0,a.jsx)("div",{className:_().workerWorkflowStep,children:"2"}),(0,a.jsx)("span",{children:"Mark you have started your shift"})]}),(0,a.jsxs)("button",{className:"".concat(_().workerWorkflowButton," ").concat("IN_PROGRESS"===g.status?_().workerWorkflowButtonActive:_().workerWorkflowButtonInactive),onClick:()=>"IN_PROGRESS"===g.status&&ee("complete"),disabled:"IN_PROGRESS"!==g.status||R,children:[(0,a.jsx)("div",{className:_().workerWorkflowStep,children:"3"}),(0,a.jsx)("span",{children:"Mark as complete"})]}),(0,a.jsxs)("button",{className:"".concat(_().workerWorkflowButton," ").concat("COMPLETED"===g.status?_().workerWorkflowButtonActive:_().workerWorkflowButtonInactive),onClick:()=>"COMPLETED"===g.status&&ee("paid"),disabled:"COMPLETED"!==g.status||R,children:[(0,a.jsx)("div",{className:_().workerWorkflowStep,children:"4"}),(0,a.jsx)("span",{children:"Paid"})]})]}),(0,a.jsxs)("section",{className:_().workerAdditionalActions,children:[(0,a.jsx)("button",{className:_().workerAdditionalButton,onClick:()=>{(null==P?void 0:P.uid)&&g.id&&v.push("/gigs/".concat(g.id,"/report-issue"))},disabled:F,children:F?"Opening...":"Report an issue"}),(0,a.jsx)("button",{className:_().workerAdditionalButton,onClick:()=>{(null==P?void 0:P.uid)&&g.id&&v.push("/gigs/".concat(g.id,"/delegate"))},disabled:z,children:z?"Opening...":"Delegate gig"})]}),(0,a.jsx)("button",{className:_().workerTermsButton,onClick:()=>{v.push("/legal/terms")},disabled:Y,children:Y?"Opening...":"Terms of Agreement"})]})]}):(0,a.jsxs)("div",{className:_().container,children:[(0,a.jsx)(E.A,{title:"".concat(g.role," Gig"),onBackClick:()=>v.back()}),(0,a.jsxs)("main",{className:_().gigDetailsMain,children:[(0,a.jsxs)("section",{className:_().gigDetailsSection,children:[(0,a.jsxs)("div",{className:_().gigDetailsHeader,children:[(0,a.jsx)("h2",{className:_().sectionTitle,children:"Gig Details"}),(0,a.jsx)(o.A,{size:26,color:"#ffffff"})]}),(0,a.jsxs)("div",{className:_().gigDetailsRow,children:[(0,a.jsx)("span",{className:_().label,children:"Location:"}),(0,a.jsxs)("span",{className:_().detailValue,children:[g.location,(0,a.jsx)("a",{href:"https://maps.google.com/?q=".concat(encodeURIComponent(g.location)),target:"_blank",rel:"noopener noreferrer",style:{marginLeft:"0.5rem"},children:"(View Map)"})]})]}),(0,a.jsxs)("div",{className:_().gigDetailsRow,children:[(0,a.jsx)("span",{className:_().label,children:"Date:"}),(0,a.jsx)("span",{className:_().detailValue,children:B(g.date)})]}),(0,a.jsxs)("div",{className:_().gigDetailsRow,children:[(0,a.jsx)("span",{className:_().label,children:"Time:"}),(0,a.jsxs)("span",{className:_().detailValue,children:[O(g.startTime)," - ",O(g.endTime)," (",X,")"]})]}),(0,a.jsxs)("div",{className:_().gigDetailsRow,children:[(0,a.jsx)("span",{className:_().label,children:"Pay per hour:"}),(0,a.jsxs)("span",{className:_().detailValue,children:["\xa3",g.hourlyRate.toFixed(2),"/hr"]})]}),(0,a.jsxs)("div",{className:_().gigDetailsRow,children:[(0,a.jsx)("span",{className:_().label,children:"Total pay:"}),(0,a.jsxs)("span",{className:_().detailValue,children:["\xa3",g.estimatedEarnings.toFixed(2)," + tips"]})]}),"GIG_WORKER"===T&&(0,a.jsxs)("div",{className:_().gigDetailsRow,children:[(0,a.jsx)("span",{className:_().label,children:"Hiring manager:"}),(0,a.jsxs)("span",{className:_().detailValue,children:[g.hiringManager," ",(0,a.jsx)("br",{})," ",g.hiringManagerUsername]})]})]}),"GIG_WORKER"===T&&(0,a.jsxs)("section",{className:"".concat(_().gigDetailsSection," ").concat(_().workerSection),children:[(0,a.jsx)(x.default,{src:g.workerAvatarUrl||"/images/worker-placeholder.png",className:_().workerAvatar,alt:g.workerName||"Worker",width:56,height:56}),(0,a.jsxs)("div",{className:_().workerDetailsContainer,children:[(0,a.jsxs)("div",{className:_().workerDetails,children:[(0,a.jsx)("span",{className:_().workerName,children:g.workerName||"Worker"}),Q.gigs," Able gigs, ",Q.experience," years experience"]}),Q.isStar&&(0,a.jsx)(x.default,{src:"/images/star.svg",alt:"Star",width:56,height:50})]})]}),"ACCEPTED"===g.status&&g.workerName&&(0,a.jsxs)("section",{className:"".concat(_().gigDetailsSection," ").concat(_().workerInfoSection),children:[(0,a.jsx)("div",{className:_().sectionHeader,children:(0,a.jsx)("h3",{className:_().sectionTitle,children:"Assigned Worker"})}),(0,a.jsxs)("div",{className:_().workerInfoContainer,children:[(0,a.jsx)(x.default,{src:g.workerAvatarUrl||"/images/worker-placeholder.png",className:_().workerAvatar,alt:g.workerName,width:48,height:48}),(0,a.jsxs)("div",{className:_().workerInfoDetails,children:[(0,a.jsx)("span",{className:_().workerName,children:g.workerName}),(0,a.jsxs)("span",{className:_().workerStats,children:[Q.gigs," Able gigs • ",Q.experience," years experience"]}),Q.isStar&&(0,a.jsxs)("div",{className:_().starBadge,children:[(0,a.jsx)(x.default,{src:"/images/star.svg",alt:"Star Worker",width:16,height:16}),(0,a.jsx)("span",{children:"Star Worker"})]})]})]})]}),("PENDING"===g.status||"IN_PROGRESS"===g.status||"ACCEPTED"===g.status)&&(0,a.jsx)("button",{className:_().negotiationButton,onClick:()=>ee("requestAmendment"),children:"Negotiate, cancel or change gig details"}),g.specialInstructions&&(0,a.jsxs)("section",{className:_().instructionsSection,children:[(0,a.jsxs)("h2",{className:_().specialInstTitle,children:[(0,a.jsx)(l.A,{size:18}),"Special Instructions"]}),(0,a.jsx)("p",{className:_().specialInstructions,children:g.specialInstructions})]}),(0,a.jsxs)("section",{className:"".concat(_().actionSection),children:[" ","ACCEPTED"===g.status&&(0,a.jsxs)("div",{className:_().statusMessage,children:[(0,a.jsxs)("div",{className:_().statusSuccess,children:[(0,a.jsx)(i.A,{size:20,color:"#10b981"}),(0,a.jsx)("span",{children:"Gig Accepted Successfully!"})]}),(0,a.jsx)("p",{className:_().statusDescription,children:"GIG_WORKER"===T?"You've accepted this gig. You can now start the gig when you're ready.":"A worker has accepted your gig offer. They can start the gig when ready."})]}),"IN_PROGRESS"===g.status&&(0,a.jsxs)("div",{className:_().statusMessage,children:[(0,a.jsxs)("div",{className:_().statusInProgress,children:[(0,a.jsx)(c.A,{size:20,color:"#f59e0b"}),(0,a.jsx)("span",{children:"Gig In Progress"})]}),(0,a.jsx)("p",{className:_().statusDescription,children:"GIG_WORKER"===T?"You've started the gig. Complete it when finished.":"The worker has started the gig. They will mark it complete when finished."})]}),"COMPLETED"===g.status&&(0,a.jsxs)("div",{className:_().statusMessage,children:[(0,a.jsxs)("div",{className:_().statusCompleted,children:[(0,a.jsx)(i.A,{size:20,color:"#10b981"}),(0,a.jsx)("span",{children:"Gig Completed"})]}),(0,a.jsx)("p",{className:_().statusDescription,children:"GIG_WORKER"===T?"You've completed the gig. Waiting for buyer confirmation and payment.":"The worker has completed the gig. Please confirm and process payment."})]}),"CANCELLED"===g.status&&(0,a.jsxs)("div",{className:_().statusMessage,children:[(0,a.jsxs)("div",{className:_().statusCancelled,children:[(0,a.jsx)(d,{size:20,color:"#ef4444"}),(0,a.jsx)("span",{children:"Gig Cancelled"})]}),(0,a.jsx)("p",{className:_().statusDescription,children:"This gig has been cancelled and is no longer active."})]}),"PENDING"===g.status&&(0,a.jsx)(w,{label:$("accept"),handleGigAction:()=>ee("accept"),isActive:"PENDING"===g.status,isDisabled:"GIG_WORKER"!==T||"PENDING"!==g.status}),"GIG_WORKER"===T&&"PENDING_WORKER_ACCEPTANCE"===g.statusInternal&&(0,a.jsx)(w,{label:"Decline Offer",handleGigAction:()=>ee("decline"),isActive:!0,isDisabled:!1}),"ACCEPTED"===g.status&&(0,a.jsx)(w,{label:$("start"),handleGigAction:()=>ee("start"),isActive:"ACCEPTED"===g.status,isDisabled:"ACCEPTED"!==g.status}),("IN_PROGRESS"===g.status||"COMPLETED"===g.status)&&(0,a.jsx)(w,{label:$("complete"),handleGigAction:()=>ee("complete"),isActive:("IN_PROGRESS"===g.status||"COMPLETED"===g.status||"CONFIRMED"===g.status||"AWAITING_BUYER_CONFIRMATION"===g.status)&&("GIG_WORKER"===T&&!g.isWorkerSubmittedFeedback||"BUYER"===T&&!g.isBuyerSubmittedFeedback),isDisabled:"GIG_WORKER"===T&&g.isWorkerSubmittedFeedback||"BUYER"===T&&g.isBuyerSubmittedFeedback}),(0,a.jsx)(I,{label:$("awaiting"),isActive:"GIG_WORKER"===T&&g.isWorkerSubmittedFeedback||"BUYER"===T&&g.isBuyerSubmittedFeedback,isDisabled:!0})]}),(0,a.jsxs)("section",{className:"".concat(_().secondaryActionsSection),children:[" ",(0,a.jsx)(G(),{href:"/terms-of-service",target:"_blank",rel:"noopener noreferrer",className:_().secondaryActionButton,children:"Terms of agreement"}),(0,a.jsx)("button",{onClick:()=>ee("reportIssue"),className:_().secondaryActionButton,disabled:R,children:"Report an Issue"}),"GIG_WORKER"===T&&"worker"===s&&(0,a.jsxs)(a.Fragment,{children:[("IN_PROGRESS"===g.status||"COMPLETED"===g.status)&&(0,a.jsx)(G(),{href:"/user/".concat(t,"/worker/gigs/").concat(g.id,"/complete"),className:_().secondaryActionButton,children:"Complete gig"}),("ACCEPTED"===g.status||"IN_PROGRESS"===g.status)&&(0,a.jsx)(G(),{href:"/user/".concat(t,"/worker/gigs/").concat(g.id,"/amend"),className:_().secondaryActionButton,children:"Amend gig"}),"ACCEPTED"===g.status&&(0,a.jsx)("button",{onClick:()=>ee("start"),className:_().secondaryActionButton,disabled:R,children:"Mark you have started your shift"}),"IN_PROGRESS"===g.status&&(0,a.jsx)("button",{onClick:()=>ee("complete"),className:_().secondaryActionButton,disabled:R,children:"Mark as complete"}),"COMPLETED"===g.status&&(0,a.jsx)("button",{onClick:()=>ee("paid"),className:_().secondaryActionButton,disabled:R,children:"Paid"})]})]})]})]})}}}]);