(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8466],{13052:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});let s=(0,n(19946).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},19946:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var s=n(12115);let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()),i=e=>{let t=r(e);return t.charAt(0).toUpperCase()+t.slice(1)},a=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>!!e&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()},l=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let g=(0,s.forwardRef)((e,t)=>{let{color:n="currentColor",size:o=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:g="",children:u,iconNode:d,...h}=e;return(0,s.createElement)("svg",{ref:t,...c,width:o,height:o,stroke:n,strokeWidth:i?24*Number(r)/Number(o):r,className:a("lucide",g),...!u&&!l(h)&&{"aria-hidden":"true"},...h},[...d.map(e=>{let[t,n]=e;return(0,s.createElement)(t,n)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let n=(0,s.forwardRef)((n,r)=>{let{className:l,...c}=n;return(0,s.createElement)(g,{ref:r,iconNode:t,className:a("lucide-".concat(o(i(e))),"lucide-".concat(e),l),...c})});return n.displayName=i(e),n}},24972:(e,t,n)=>{"use strict";n.d(t,{M:()=>c});var s=n(12115),o=n(72260),r=n(76294);let i=r.Sj.array({items:r.Sj.object({properties:{id:r.Sj.string({description:"A unique identifier for the suggestion, e.g., UUID."}),title:r.Sj.string({description:'A concise title for the suggestion (e.g., "Boost Your Profile!").'}),description:r.Sj.string({description:'The main text of the suggestion (e.g., "Adding more details to your profile can attract more offers.").'}),suggestedActions:r.Sj.array({items:r.Sj.object({properties:{text:r.Sj.string({description:'User-facing text for the action (e.g., "Complete your profile").'}),linkKey:r.Sj.string({description:'An optional key for a predefined in-app navigation link (e.g., "PROFILE_EDIT", "VIEW_OFFERS").'})},optionalProperties:["linkKey"]}),description:"An array of 1-4 suggested actions related to the suggestion. For use in AI chat."})},optionalProperties:["suggestedActions"]})});async function a(e,t,n){let s="You are an AI assistant for ".concat("buyer"===t?"buyers":"gig workers",". Given the following context (which is PII-free), suggest 1-3 actionable, privacy-safe tips. Return a JSON array of suggestions. Each suggestion object must have:\n1.  'id': A unique UUID (generate one, e.g., using a UUID v4 format if possible, or a random string).\n2.  'title': A concise title for the suggestion (e.g., \"Boost Your Profile!\").\n3.  'description': The main text of the suggestion (1-2 short sentences, e.g., \"Adding more details to your profile can attract more offers.\").\n4.  'suggestedActions': An array of 1 to 3 objects, each representing a follow-up action for the AI chat. Each action object must have:\n    a. 'text': User-facing text for the action (e.g., \"Complete your profile now\").\n    b. 'linkKey' (optional): If the action directly corresponds to an in-app function, use one of the known linkKeys provided below. Otherwise, omit 'linkKey'.\n\n").concat("\nKnown linkKeys and their purpose (use these if applicable for a suggested action):\n- PROFILE_EDIT: Takes the user to their profile editing page.\n- VIEW_OFFERS: Shows the user their current offers (for workers) or candidates (for buyers).\n- POST_GIG: Allows a buyer to post a new gig.\n- BROWSE_GIGS: Allows a worker to browse available gigs.\n- LEARN_SKILL_PHOTOGRAPHY: Directs to resources for learning photography.\n(Add more known linkKeys as your application evolves)\n","\n\nKeep descriptions and action texts concise. Ensure all output is privacy-safe.\n\nContext: ").concat(JSON.stringify(e)),r=o.qc[0],a=await (0,o.rL)(r,{prompt:s,responseSchema:i,isStream:!1,generationConfig:{responseMimeType:"application/json",responseSchema:i}},n);return a.ok?a.data:(console.error("Error generating suggestions:",a.error),[{id:crypto.randomUUID(),title:"Suggestion Generation Failed",description:"The AI could not generate specific suggestions at this time. Please try again.",suggestedActions:[]}])}var l=n(85004);function c(e){let{role:t,userId:n,context:o={},enabled:r=!0,defaultSuggestions:i=[]}=e,[c,g]=(0,s.useState)([]),[u,d]=(0,s.useState)(0),h=(0,s.useRef)(c),[f,m]=(0,s.useState)(!0),[p,S]=(0,s.useState)(null),{ai:_}=(0,l.D)(),A=(0,s.useCallback)(()=>"".concat("aiSuggestionDismissed_").concat(n,"_").concat(t),[n,t]),k=(0,s.useCallback)(()=>"".concat("suggestionBatch_").concat(n,"_").concat(t),[n,t]),v=(0,s.useCallback)(()=>"".concat("suggestionBatchIndex_").concat(n,"_").concat(t),[n,t]);(0,s.useEffect)(()=>{h.current=c},[c]);let[y,I]=(0,s.useState)(()=>"true"===localStorage.getItem(A())),b=(0,s.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!y&&r&&n){if(!e&&h.current.length>0)return void m(!1);m(!0),S(null);try{let e=await a(o,t,_);e&&0!==e.length||(e=i.map(e=>({...e,id:crypto.randomUUID(),suggestedActions:[]})));let n=e.map(e=>({title:e.title,description:e.description,id:e.id||crypto.randomUUID(),suggestedActions:e.suggestedActions||[]}));g(n),d(0),n.length>0?(sessionStorage.setItem(k(),JSON.stringify(n)),sessionStorage.setItem(v(),"0")):(sessionStorage.removeItem(k()),sessionStorage.removeItem(v()))}catch(t){console.error("Failed to fetch AI suggestions:",t),S("Failed to load suggestions.");let e=i.map(e=>({...e,id:crypto.randomUUID(),suggestedActions:[]}));g(e),d(0),e.length>0?(sessionStorage.setItem(k(),JSON.stringify(e)),sessionStorage.setItem(v(),"0")):(sessionStorage.removeItem(k()),sessionStorage.removeItem(v()))}m(!1)}},[y,r,n,o,t,i,k,v,m,S,g,d]);(0,s.useEffect)(()=>{if(!r||!n||y){!y&&r&&n||m(!1);return}let e=sessionStorage.getItem(k());if(e)try{let t=JSON.parse(e);if(Array.isArray(t)&&t.length>0){let e=sessionStorage.getItem(v());g(t);let n=e?parseInt(e,10):0;d(Math.min(Math.max(0,n),t.length-1)),m(!1);return}}catch(e){console.error("Failed to parse suggestion batch from session storage:",e),sessionStorage.removeItem(k()),sessionStorage.removeItem(v())}console.log("No valid batch in session, proceeding to fetchSuggestions from initial useEffect."),b()},[r,n,y]),(0,s.useEffect)(()=>{I("true"===localStorage.getItem(A()))},[A]);let C=(0,s.useCallback)(()=>{localStorage.setItem(A(),"true"),sessionStorage.removeItem(k()),sessionStorage.removeItem(v()),I(!0),g([]),d(0)},[A,k,v]),B=(0,s.useCallback)(()=>{localStorage.removeItem(A()),sessionStorage.removeItem(k()),sessionStorage.removeItem(v()),I(!1),g([]),d(0),S(null),b(!0)},[A,k,v,b]),x=(0,s.useCallback)(()=>{d(e=>{let t=e===c.length-1?0:e+1;return sessionStorage.setItem(v(),t.toString()),t})},[c.length,v]),j=(0,s.useCallback)(()=>{d(e=>{let t=0===e?c.length-1:e-1;return sessionStorage.setItem(v(),t.toString()),t})},[c.length,v]);return{suggestions:c,currentIndex:u,isLoading:f,error:p,dismissed:y,dismiss:C,refresh:B,goToNext:x,goToPrev:j}}},34477:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{callServer:function(){return s.callServer},createServerReference:function(){return r},findSourceMapURL:function(){return o.findSourceMapURL}});let s=n(53806),o=n(31818),r=n(34979).createServerReference},35169:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});let s=(0,n(19946).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},42355:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});let s=(0,n(19946).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},47703:(e,t,n)=>{"use strict";n.d(t,{A:()=>d});var s=n(95155),o=n(12115),r=n(53904),i=n(54416),a=n(42355),l=n(13052),c=n(35695),g=n(54679),u=n.n(g);function d(e){let{suggestions:t,currentIndex:n,isLoading:g,error:d,dismissed:h,onDismiss:f,onRefresh:m,goToNext:p,goToPrev:S,userId:_,className:A=""}=e,k=(0,c.useRouter)(),v=t&&t.length>0&&n<t.length?t[n]:null,y=(0,o.useCallback)(()=>{if(!_||!v)return;let e={...v,timestamp:new Date().toISOString()};localStorage.setItem("lastAISuggestion",JSON.stringify(e));let t=encodeURIComponent(JSON.stringify(e));k.push("/user/".concat(_,"/able-ai?suggestion=").concat(t))},[_,v,k]),I=(0,o.useCallback)(e=>{("Enter"===e.key||" "===e.key)&&y()},[y]),b=(0,o.useCallback)(e=>{e.stopPropagation(),S()},[S]),C=(0,o.useCallback)(e=>{e.stopPropagation(),p()},[p]);return h?(0,s.jsxs)("div",{className:"".concat(u().suggestionBanner," ").concat(u().suggestionTextContainer," ").concat(A),children:[(0,s.jsx)("p",{className:u().dismissedText,children:"AI suggestions are hidden."}),(0,s.jsx)("button",{onClick:m,children:"Show Ideas"})]}):g?(0,s.jsxs)("div",{className:"".concat(u().suggestionTextContainer," ").concat(A," ").concat(u().suggestionBanner),children:[(0,s.jsx)("div",{className:"".concat(u().skeletonLine," ").concat(u().skeletonLineLong),children:"..."}),(0,s.jsx)("div",{className:"".concat(u().skeletonLine," ").concat(u().skeletonLineShort),children:"..."}),(0,s.jsx)("div",{className:"".concat(u().skeletonLine," ").concat(u().skeletonLineLong),children:"..."})]}):d?(0,s.jsxs)("div",{className:"".concat(u().suggestionBanner," ").concat(u().error," ").concat(A),children:["Error: ",d,(0,s.jsx)("button",{onClick:m,className:u().refreshButtonIcon,"aria-label":"Refresh suggestions",children:(0,s.jsx)(r.A,{size:18})})]}):v?(0,s.jsxs)("div",{className:"".concat(u().suggestionBanner," ").concat(A),role:"region","aria-labelledby":"ai-suggestion-banner-heading",children:[(0,s.jsx)("div",{className:u().topRowContainer,children:(0,s.jsx)("div",{className:u().suggestionTextContainer,onClick:y,onKeyDown:I,role:"button",tabIndex:0,"aria-live":"polite",children:(0,s.jsx)("p",{className:u().suggestionDescription,children:v.description})})}),(0,s.jsxs)("div",{className:u().bottomControlsContainer,children:[(0,s.jsx)("button",{onClick:f,className:u().dismissButton,"aria-label":"Dismiss suggestions",children:(0,s.jsx)(i.A,{size:18})}),(0,s.jsx)("button",{onClick:m,className:u().refreshButtonIcon,"aria-label":"Refresh suggestions",children:(0,s.jsx)(r.A,{size:18})}),t.length>1&&(0,s.jsxs)("div",{className:u().inlineCarouselControls,children:[(0,s.jsx)("button",{onClick:b,className:u().navButton,"aria-label":"Previous suggestion",children:(0,s.jsx)(a.A,{size:20})}),(0,s.jsxs)("span",{className:u().suggestionCounter,"aria-label":"Suggestion ".concat(n+1," of ").concat(t.length),children:[n+1," / ",t.length]}),(0,s.jsx)("button",{onClick:C,className:u().navButton,"aria-label":"Next suggestion",children:(0,s.jsx)(l.A,{size:20})})]})]})]}):null}},51154:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});let s=(0,n(19946).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},53904:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});let s=(0,n(19946).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},54416:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});let s=(0,n(19946).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},54679:e=>{e.exports={suggestionBanner:"AiSuggestionBanner_suggestionBanner__GaHhl",error:"AiSuggestionBanner_error__AsUTs",suggestionHeader:"AiSuggestionBanner_suggestionHeader___6TZV",suggestionTextContainer:"AiSuggestionBanner_suggestionTextContainer__agMgJ",suggestionIconContainer:"AiSuggestionBanner_suggestionIconContainer__JaFok",suggestionIcon:"AiSuggestionBanner_suggestionIcon__9OEMG",suggestionTitle:"AiSuggestionBanner_suggestionTitle__QeUfh",suggestionDescription:"AiSuggestionBanner_suggestionDescription__i0CPi",suggestionText:"AiSuggestionBanner_suggestionText__7vJXC",navButton:"AiSuggestionBanner_navButton__rs_7f",closeButton:"AiSuggestionBanner_closeButton__aixXz",chatButton:"AiSuggestionBanner_chatButton__OmEBq",counter:"AiSuggestionBanner_counter__7lqc6",refreshButton:"AiSuggestionBanner_refreshButton__yYutW",topRowContainer:"AiSuggestionBanner_topRowContainer__oD67C",bottomControlsContainer:"AiSuggestionBanner_bottomControlsContainer__0KlBh",inlineCarouselControls:"AiSuggestionBanner_inlineCarouselControls__PZc1M",skeletonBanner:"AiSuggestionBanner_skeletonBanner__tPp82",skeletonLine:"AiSuggestionBanner_skeletonLine__JqpA1",shimmer:"AiSuggestionBanner_shimmer__ffz_1",skeletonLineShort:"AiSuggestionBanner_skeletonLineShort__FUK2c",skeletonLineLong:"AiSuggestionBanner_skeletonLineLong__D9YKC",dismissButton:"AiSuggestionBanner_dismissButton__U6j7B",refreshButtonIcon:"AiSuggestionBanner_refreshButtonIcon__eETlt"}},66766:(e,t,n)=>{"use strict";n.d(t,{default:()=>o.a});var s=n(71469),o=n.n(s)},71469:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{default:function(){return l},getImageProps:function(){return a}});let s=n(88229),o=n(38883),r=n(33063),i=s._(n(51193));function a(e){let{props:t}=(0,o.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,n]of Object.entries(t))void 0===n&&delete t[e];return{props:t}}let l=r.Image},86325:(e,t,n)=>{"use strict";async function s(e){try{return localStorage.setItem("lastRoleUsed",e),null}catch(e){console.log("Error updating last role used:",e)}}function o(){try{return window.localStorage.getItem("lastRoleUsed")}catch(e){return console.log("Error retrieving last role used:",e),null}}n.d(t,{C:()=>s,K:()=>o})}}]);