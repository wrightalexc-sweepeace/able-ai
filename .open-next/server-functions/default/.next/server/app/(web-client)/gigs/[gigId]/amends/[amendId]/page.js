(()=>{var e={};e.id=3118,e.ids=[3118],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6475:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{callServer:function(){return i.callServer},createServerReference:function(){return r},findSourceMapURL:function(){return s.findSourceMapURL}});let i=a(11264),s=a(11448),r=a(19357).createServerReference},7879:e=>{"use strict";e.exports=import("firebase-admin/firestore")},7961:e=>{e.exports={viewContainer:"CancelOrAmendGigDetailsPage_viewContainer__0ospI",contentWrapper:"CancelOrAmendGigDetailsPage_contentWrapper__0xixX",header:"CancelOrAmendGigDetailsPage_header__xjOkY",headerTitle:"CancelOrAmendGigDetailsPage_headerTitle__bsWgR",card:"CancelOrAmendGigDetailsPage_card__kNpQv",instructionBlock:"CancelOrAmendGigDetailsPage_instructionBlock__YBg3F",instructionText:"CancelOrAmendGigDetailsPage_instructionText__t7mAB",botCard:"CancelOrAmendGigDetailsPage_botCard__n528a",textInputBlockLabel:"CancelOrAmendGigDetailsPage_textInputBlockLabel__qYVvq",textareaInput:"CancelOrAmendGigDetailsPage_textareaInput__yLBRx",submitButton:"CancelOrAmendGigDetailsPage_submitButton__i03A3",cancelButton:"CancelOrAmendGigDetailsPage_cancelButton__OJU03",workerBtn:"CancelOrAmendGigDetailsPage_workerBtn__GG5w4",buyerBtn:"CancelOrAmendGigDetailsPage_buyerBtn__cWhhx",cancelBtn:"CancelOrAmendGigDetailsPage_cancelBtn__beysi",cancelBtnText:"CancelOrAmendGigDetailsPage_cancelBtnText__X2luM",loadingCancelSubmit:"CancelOrAmendGigDetailsPage_loadingCancelSubmit__a0zVU",actionBtnContainer:"CancelOrAmendGigDetailsPage_actionBtnContainer__r80CY"}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14276:e=>{"use strict";e.exports=import("firebase-admin/auth")},14985:e=>{"use strict";e.exports=require("dns")},16269:(e,t,a)=>{"use strict";a.d(t,{A:()=>x});var i=a(60687);a(43210);var s=a(28559),r=a(17917),n=a.n(r),l=a(85814),d=a.n(l),o=a(21295),c=a(79563),u=a(16189),m=a(30474),p=a(40477),g=a.n(p);let h=({uid:e,handleClick:t,unreadCount:a,unreadNotifications:s})=>(0,i.jsxs)(d(),{href:`/user/${e}/notifications`,passHref:!0,onClick:t,children:[(0,i.jsx)("button",{className:g().notificationButton,"aria-label":"Notifications",children:(0,i.jsx)(m.default,{src:"/images/notifications.svg",alt:"Notifications",width:40,height:40})}),a>0||s>0?(0,i.jsx)("span",{className:g().notificationBadge,children:a>0?a:s}):null]}),x=e=>{let{user:t}=(0,o.A)(),a=(0,u.usePathname)(),{isHomePage:r,title:l,onBackClick:p,handleClick:g,unreadCount:x,unreadNotifications:b}=e,_=a.includes("/able-ai");return(0,i.jsxs)("header",{className:n().header,children:[r?(0,i.jsx)(m.default,{src:"/images/home.svg",alt:"Back",width:40,height:40}):(0,i.jsx)("button",{onClick:p,className:n().backButton,"aria-label":"Go back",children:(0,i.jsx)(s.A,{size:20})}),l&&(0,i.jsx)("h1",{className:n().title,children:l}),(0,i.jsx)(d(),{href:`/user/${t?.uid}/able-ai`,className:n().chat,children:_?(0,i.jsx)(c.A,{width:40,height:40}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("span",{children:"Chat with Able"}),(0,i.jsx)(c.A,{width:30,height:30})]})}),r&&(0,i.jsx)(h,{uid:t?.uid,handleClick:g,unreadCount:x,unreadNotifications:b})]})}},17917:e=>{e.exports={header:"ScreenHeaderWithBack_header__mx1Ch",backButton:"ScreenHeaderWithBack_backButton__0EIlD",title:"ScreenHeaderWithBack_title__Un97C",chat:"ScreenHeaderWithBack_chat__WpLse"}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21169:e=>{e.exports={logo:"Logo_logo__aLQuM"}},21820:e=>{"use strict";e.exports=require("os")},24940:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>o});var i=a(65239),s=a(48088),r=a(88170),n=a.n(r),l=a(30893),d={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>l[e]);a.d(t,d);let o={children:["",{children:["(web-client)",{children:["gigs",{children:["[gigId]",{children:["amends",{children:["[amendId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,65309)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/gigs/[gigId]/amends/[amendId]/page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,14866)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,58014)),"/home/israel/personal/code/alex/able-ai/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/israel/personal/code/alex/able-ai/app/(web-client)/gigs/[gigId]/amends/[amendId]/page.tsx"],u={require:a,loadChunk:()=>Promise.resolve()},m=new i.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/(web-client)/gigs/[gigId]/amends/[amendId]/page",pathname:"/gigs/[gigId]/amends/[amendId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},27557:(e,t,a)=>{"use strict";a.a(e,async(e,i)=>{try{a.r(t),a.d(t,{"400cd1fa767ef5281508e93e3ca1d7a0d11ad8371f":()=>s.qM,"404660310a5e0f58f816c762a9f12b9b33702d2493":()=>s.OH,"406285e4a5b3e01ac696468e89531313be16ecb429":()=>r.Z,"40bcfd414a2446406921fe5bddeb7f04b82b554661":()=>s.Rz,"60976633aa90a3960f31dd64f4fd8496ccbdb52456":()=>s.a6,"60e7f34a33097c37a8e1219f48e58834e6fa037656":()=>s.r2,"7fad076ff87a53fb2dc1878d8dc87b650c1a1b2caa":()=>s.gL});var s=a(29034),r=a(32699),n=e([s,r]);[s,r]=n.then?(await n)():n,i()}catch(e){i(e)}})},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30642:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var i=a(6475);let s=(0,i.createServerReference)("406285e4a5b3e01ac696468e89531313be16ecb429",i.callServer,void 0,i.findSourceMapURL,"updateGigOfferStatus")},32699:(e,t,a)=>{"use strict";a.a(e,async(e,i)=>{try{a.d(t,{Z:()=>c});var s=a(91199);a(42087);var r=a(30298),n=a(18839),l=a(60444),d=a(33331),o=e([r]);r=(o.then?(await o)():o)[0];let u=l.gigStatusEnum.enumValues[2],m=l.gigStatusEnum.enumValues[10],p=l.gigStatusEnum.enumValues[11],g=(e,t)=>"accept"===e?u:"buyer"===t?m:p;async function c({gigId:e,userId:t,role:a,action:i}){try{let s=await r.db.query.UsersTable.findFirst({where:(0,n.eq)(l.UsersTable.firebaseUid,t),columns:{id:!0}});if(!s)return{error:"User is not found",status:404};let d=g(i,a);if("cancel"===i&&"worker"===a)await r.db.update(l.GigsTable).set({statusInternal:d}).where((0,n.eq)(l.GigsTable.id,e));else{let t="buyer"===a?l.GigsTable.buyerUserId:l.GigsTable.workerUserId;await r.db.update(l.GigsTable).set({statusInternal:d}).where((0,n.Uo)((0,n.eq)(l.GigsTable.id,e),(0,n.eq)(t,s.id)))}return{status:200}}catch(e){return console.error("Error updating gig:",e),{error:e.message,status:500}}}(0,d.D)([c]),(0,s.A)(c,"406285e4a5b3e01ac696468e89531313be16ecb429",null),i()}catch(e){i(e)}})},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},36125:(e,t,a)=>{"use strict";async function i(e){try{return localStorage.setItem("lastRoleUsed",e),null}catch(e){console.log("Error updating last role used:",e)}}function s(){try{return window.localStorage.getItem("lastRoleUsed")}catch(e){return console.log("Error retrieving last role used:",e),null}}a.d(t,{C:()=>i,K:()=>s})},37365:e=>{e.exports={card:"UpdateGig_card__zlf6q",textareaInput:"UpdateGig_textareaInput___OmD1",detailsHeader:"UpdateGig_detailsHeader__RyPtq",detailsTitle:"UpdateGig_detailsTitle__V0dxb",editIcon:"UpdateGig_editIcon__Dhwnl",detailsList:"UpdateGig_detailsList__94vk9",detailItem:"UpdateGig_detailItem__eDP_C",detailItemLabel:"UpdateGig_detailItemLabel__ZUDmJ",detailItemValue:"UpdateGig_detailItemValue__M8_o3",detailsSummaryText:"UpdateGig_detailsSummaryText__BP1yX"}},40477:e=>{e.exports={notificationButton:"Notification_notificationButton__NL740",notificationBadge:"Notification_notificationBadge__ZxPNU"}},46675:e=>{"use strict";e.exports=require("firebase-admin")},49105:(e,t,a)=>{"use strict";a.d(t,{A:()=>m});var i=a(60687),s=a(57175),r=a(11860),n=a(37365),l=a.n(n),d=a(36125),o=a(36248),c=a.n(o);function u(e){let t=e.split(" - ");if(2!==t.length)throw Error("Invalid time range format. Expected 'h:mm A - h:mm A'.");let a=t[0],i=t[1],s="h:mm A",r=c()(a,s),n=c()(i,s);if(!r.isValid()||!n.isValid())throw Error("Invalid time format. Make sure the times are correct (e.g., '6:00 PM').");return n.isBefore(r)&&(n=n.add(1,"day")),c().duration(n.diff(r)).asHours()}let m=({gigDetailsData:e,editedGigDetails:t,handleEditDetails:a,isEditingDetails:n,setEditedGigDetails:o,isOnConfirm:c,title:m})=>{let p=(0,d.K)(),g=e=>{let{name:a,value:i}=e.target;o(e=>({...e,[a]:i,..."payPerHour"===a?{totalPay:(u(t.time)*Number(i)).toString()}:{},..."time"===a?{totalPay:(u(i)*Number(t.payPerHour)).toString()}:{}}))};return(0,i.jsxs)("div",{className:l().card,children:[(0,i.jsxs)("div",{className:l().detailsHeader,children:[(0,i.jsx)("h2",{className:l().detailsTitle,children:m}),n?(0,i.jsx)(r.A,{className:l().editIcon,onClick:a}):(0,i.jsx)(s.A,{className:l().editIcon,onClick:a})]}),n?(0,i.jsxs)("div",{className:l().detailsList,children:[(0,i.jsxs)("div",{className:l().detailItem,children:[(0,i.jsx)("span",{className:l().detailItemLabel,children:"Location:"}),(0,i.jsx)("input",{type:"text",name:"location",value:t.location,onChange:g,className:l().textareaInput,disabled:"GIG_WORKER"===p})]}),(0,i.jsxs)("div",{className:l().detailItem,children:[(0,i.jsx)("span",{className:l().detailItemLabel,children:"Date:"}),(0,i.jsx)("input",{type:"text",name:"date",value:t.date,onChange:g,className:l().textareaInput,disabled:"GIG_WORKER"===p})]}),(0,i.jsxs)("div",{className:l().detailItem,children:[(0,i.jsx)("span",{className:l().detailItemLabel,children:"Time:"}),(0,i.jsx)("input",{type:"text",name:"time",value:t.time,onChange:g,className:l().textareaInput})]}),(0,i.jsxs)("div",{className:l().detailItem,children:[(0,i.jsx)("span",{className:l().detailItemLabel,children:"Pay per hour:"}),(0,i.jsx)("input",{type:"text",name:"payPerHour",value:t.payPerHour,onChange:g,className:l().textareaInput,disabled:"GIG_WORKER"===p})]}),(0,i.jsxs)("div",{className:l().detailItem,children:[(0,i.jsx)("span",{className:l().detailItemLabel,children:"BUYER"===p?"Total Cost:":"Total Pay:"}),(0,i.jsx)("input",{type:"text",name:"totalPay",value:t.totalPay,onChange:g,className:l().textareaInput,disabled:!0})]})]}):(0,i.jsxs)("div",{className:l().detailsList,children:[(0,i.jsxs)("div",{className:l().detailItem,children:[(0,i.jsx)("span",{className:l().detailItemLabel,children:"Location:"}),(0,i.jsx)("span",{className:l().detailItemValue,children:e.location})]}),(0,i.jsxs)("div",{className:l().detailItem,children:[(0,i.jsx)("span",{className:l().detailItemLabel,children:"Date:"}),(0,i.jsx)("span",{className:l().detailItemValue,children:e.date})]}),(0,i.jsxs)("div",{className:l().detailItem,children:[(0,i.jsx)("span",{className:l().detailItemLabel,children:"Time:"}),(0,i.jsx)("span",{className:l().detailItemValue,children:e.time})]}),(0,i.jsxs)("div",{className:l().detailItem,children:[(0,i.jsx)("span",{className:l().detailItemLabel,children:"Pay per hour:"}),(0,i.jsxs)("span",{className:l().detailItemValue,children:["\xa3",e.payPerHour]})]}),(0,i.jsxs)("div",{className:l().detailItem,children:[(0,i.jsx)("span",{className:l().detailItemLabel,children:"BUYER"===p?"Total Cost:":"Total Pay:"}),(0,i.jsxs)("span",{className:l().detailItemValue,children:["€",e.totalPay]})]})]}),!n&&!c&&(0,i.jsx)("p",{className:l().detailsSummaryText,children:e.summary})]})}},55511:e=>{"use strict";e.exports=require("crypto")},57175:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});let i=(0,a(62688).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},61062:(e,t,a)=>{Promise.resolve().then(a.bind(a,63879))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63879:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var i=a(60687),s=a(43210),r=a(7961),n=a.n(r),l=a(21295),d=a(36125),o=a(49105),c=a(16189),u=a(30642),m=a(16269);let p={location:"The Green Tavern, Main Street, Springfield",date:"Saturday, 12th November 2023",time:"6:00 PM - 1:00 AM",payPerHour:"20",totalPay:"140",summary:"Add one more hour. Total gig value is now 140, with Able and payment provider fees of 14."};function g(){let e=(0,c.useRouter)(),t=(0,c.usePathname)(),a=(0,c.useParams)().gigId,{user:r}=(0,l.A)(),[g,h]=(0,s.useState)(""),[x,b]=(0,s.useState)(!1),[_,f]=(0,s.useState)(p),[v,I]=(0,s.useState)(!1),y=(0,d.K)(),j=async()=>{if(!r?.uid||!a||!y)return;I(!0);let e=y.includes("BUYER")?"buyer":"worker";await (0,u.Z)({gigId:a,role:e,userId:r?.uid,action:"cancel"}),I(!1)};return(0,i.jsxs)("div",{className:n().viewContainer,children:[(0,i.jsx)(m.A,{title:"Cancel or Amend",onBackClick:()=>e.back()}),(0,i.jsxs)("main",{className:n().contentWrapper,children:[(0,i.jsx)("section",{className:`${n().card} ${n().instructionBlock}`,children:(0,i.jsxs)("p",{className:n().instructionText,children:["What changes would you like to make to the gig?"," ","Tell me or edit using the icon below."]})}),(0,i.jsx)(o.A,{title:"Gig Details",gigDetailsData:p,editedGigDetails:_,handleEditDetails:()=>{console.log("Edit details clicked"),b(!x)},setEditedGigDetails:f,isEditingDetails:x}),(0,i.jsxs)("div",{className:`${n().actionBtnContainer}`,children:[(0,i.jsx)("button",{type:"button",className:`${n().submitButton} ${"GIG_WORKER"===y?n().workerBtn:n().buyerBtn}`,onClick:()=>{console.log("Submit for Confirmation clicked. Message:",g),console.log("Edited Gig Details:",_),localStorage.setItem("amendedGig",JSON.stringify({..._,hourlyRate:_.payPerHour,estimatedEarnings:_.totalPay})),e.push(`${t}/review`)},children:"Submit for Confirmation"}),(0,i.jsxs)("button",{type:"button",className:`${n().cancelButton}`,onClick:j,disabled:v,children:["Cancel Gig",(0,i.jsx)("p",{children:"This might incur charges or penalties"})]})]})]})]})}},64939:e=>{"use strict";e.exports=import("pg")},65309:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>i});let i=(0,a(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/israel/personal/code/alex/able-ai/app/(web-client)/gigs/[gigId]/amends/[amendId]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/israel/personal/code/alex/able-ai/app/(web-client)/gigs/[gigId]/amends/[amendId]/page.tsx","default")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},79563:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});var i=a(60687);a(43210);var s=a(30474),r=a(21169),n=a.n(r);let l=({width:e=260,height:t=260})=>(0,i.jsx)(s.default,{src:"/images/ableai.png",alt:"App Logo",width:e,height:t,className:n().logo})},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},92602:e=>{"use strict";e.exports=import("firebase-admin/messaging")},94718:(e,t,a)=>{Promise.resolve().then(a.bind(a,65309))},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),i=t.X(0,[4447,9558,1658,6533,2002,7715,5841,6637,683],()=>a(24940));module.exports=i})();