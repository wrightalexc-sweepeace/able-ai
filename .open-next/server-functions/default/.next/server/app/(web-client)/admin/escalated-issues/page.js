(()=>{var e={};e.id=8584,e.ids=[8584],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7879:e=>{"use strict";e.exports=import("firebase-admin/firestore")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14276:e=>{"use strict";e.exports=import("firebase-admin/auth")},14985:e=>{"use strict";e.exports=require("dns")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},23536:(e,t,s)=>{Promise.resolve().then(s.bind(s,60723))},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30474:(e,t,s)=>{"use strict";s.d(t,{default:()=>a.a});var r=s(31261),a=s.n(r)},31261:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{default:function(){return d},getImageProps:function(){return o}});let r=s(37366),a=s(44953),i=s(46533),n=r._(s(1933));function o(e){let{props:t}=(0,a.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,s]of Object.entries(t))void 0===s&&delete t[e];return{props:t}}let d=i.Image},33264:(e,t,s)=>{Promise.resolve().then(s.bind(s,98432))},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},46675:e=>{"use strict";e.exports=require("firebase-admin")},55511:e=>{"use strict";e.exports=require("crypto")},60723:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/israel/personal/code/alex/able-ai/app/(web-client)/admin/escalated-issues/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/israel/personal/code/alex/able-ai/app/(web-client)/admin/escalated-issues/page.tsx","default")},61944:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>l});var r=s(65239),a=s(48088),i=s(88170),n=s.n(i),o=s(30893),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);s.d(t,d);let l={children:["",{children:["(web-client)",{children:["admin",{children:["escalated-issues",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,60723)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/admin/escalated-issues/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,14866)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,58014)),"/home/israel/personal/code/alex/able-ai/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/israel/personal/code/alex/able-ai/app/(web-client)/admin/escalated-issues/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(web-client)/admin/escalated-issues/page",pathname:"/admin/escalated-issues",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64939:e=>{"use strict";e.exports=import("pg")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},91902:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{"400cd1fa767ef5281508e93e3ca1d7a0d11ad8371f":()=>a.qM,"404660310a5e0f58f816c762a9f12b9b33702d2493":()=>a.OH,"40bcfd414a2446406921fe5bddeb7f04b82b554661":()=>a.Rz,"60976633aa90a3960f31dd64f4fd8496ccbdb52456":()=>a.a6,"60e7f34a33097c37a8e1219f48e58834e6fa037656":()=>a.r2,"7fad076ff87a53fb2dc1878d8dc87b650c1a1b2caa":()=>a.gL});var a=s(29034),i=e([a]);a=(i.then?(await i)():i)[0],r()}catch(e){r(e)}})},92602:e=>{"use strict";e.exports=import("firebase-admin/messaging")},94735:e=>{"use strict";e.exports=require("events")},98432:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(60687),a=s(43210),i=s(58709);function n({isAdmin:e=!1}){let[t,s]=(0,a.useState)([]),[n,o]=(0,a.useState)(!0),[d,l]=(0,a.useState)(null),[c,u]=(0,a.useState)("OPEN"),p=async()=>{try{o(!0);let e=await fetch(`/api/escalation?action=by-status&status=${c}`),t=await e.json();t.success?s(t.issues):l(t.error||"Failed to fetch escalated issues")}catch(e){l("Failed to fetch escalated issues"),console.error("Error fetching escalated issues:",e)}finally{o(!1)}},x=async(e,t,s)=>{try{let r=await fetch("/api/escalation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"update",id:e,status:t,resolutionNotes:s})}),a=await r.json();a.success?p():l(a.error||"Failed to update issue")}catch(e){l("Failed to update issue"),console.error("Error updating issue:",e)}},m=e=>{switch(e){case"OPEN":return"bg-red-100 text-red-800";case"IN_PROGRESS":return"bg-yellow-100 text-yellow-800";case"RESOLVED":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}},h=e=>{switch(e){case"payment_issue":return"bg-purple-100 text-purple-800";case"technical_problem":return"bg-blue-100 text-blue-800";case"user_frustration":return"bg-orange-100 text-orange-800";case"safety_concern":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e?(0,r.jsxs)("div",{className:"p-6 max-w-7xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Escalated Issues Dashboard"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Monitor and manage issues escalated from AI chat interactions"})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Status"}),(0,r.jsxs)("select",{id:"status-filter",value:c,onChange:e=>u(e.target.value),className:"block w-full max-w-xs rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm",children:[(0,r.jsx)("option",{value:"OPEN",children:"Open"}),(0,r.jsx)("option",{value:"IN_PROGRESS",children:"In Progress"}),(0,r.jsx)("option",{value:"RESOLVED",children:"Resolved"}),(0,r.jsx)("option",{value:"CLOSED",children:"Closed"})]})]}),d&&(0,r.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsx)("p",{className:"text-red-800",children:d})}),n&&(0,r.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})}),!n&&0===t.length&&(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsxs)("p",{className:"text-gray-500",children:['No escalated issues found with status "',c,'"']})}),!n&&t.length>0&&(0,r.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6 shadow-sm",children:[(0,r.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,r.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m(e.status)}`,children:e.status}),(0,r.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${h(e.issueType)}`,children:e.issueType.replace("_"," ")})]}),(0,r.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:["Issue #",e.id.slice(0,8)]}),(0,r.jsx)("p",{className:"text-gray-600 mb-2",children:e.description}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,r.jsxs)("p",{children:["User ID: ",e.userId]}),e.gigId&&(0,r.jsxs)("p",{children:["Gig ID: ",e.gigId]}),(0,r.jsxs)("p",{children:["Created: ",(0,i.GP)(new Date(e.createdAt),"PPP p")]}),(0,r.jsxs)("p",{children:["Updated: ",(0,i.GP)(new Date(e.updatedAt),"PPP p")]})]})]})}),e.resolutionNotes&&(0,r.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 rounded-md",children:[(0,r.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Resolution Notes"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:e.resolutionNotes})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:["OPEN"===e.status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>x(e.id,"IN_PROGRESS"),className:"px-3 py-1 text-sm bg-yellow-600 text-white rounded hover:bg-yellow-700",children:"Start Working"}),(0,r.jsx)("button",{onClick:()=>x(e.id,"RESOLVED"),className:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700",children:"Mark Resolved"})]}),"IN_PROGRESS"===e.status&&(0,r.jsx)("button",{onClick:()=>x(e.id,"RESOLVED"),className:"px-3 py-1 text-sm bg-green-600 text-white rounded hover:bg-green-700",children:"Mark Resolved"}),"RESOLVED"===e.status&&(0,r.jsx)("button",{onClick:()=>x(e.id,"CLOSED"),className:"px-3 py-1 text-sm bg-gray-600 text-white rounded hover:bg-gray-700",children:"Close Issue"})]})]},e.id))}),(0,r.jsx)("div",{className:"mt-6",children:(0,r.jsx)("button",{onClick:p,className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Refresh"})})]}):(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[(0,r.jsx)("h3",{className:"text-red-800 font-medium",children:"Access Denied"}),(0,r.jsx)("p",{className:"text-red-600",children:"You don't have permission to view this dashboard."})]})})}function o(){return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsx)("div",{className:"max-w-7xl mx-auto py-6",children:(0,r.jsx)(n,{isAdmin:!0})})})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[4447,9558,1658,6533,2002,8709,6637,683],()=>s(61944));module.exports=r})();