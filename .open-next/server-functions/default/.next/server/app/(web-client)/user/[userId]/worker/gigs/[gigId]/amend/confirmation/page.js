(()=>{var e={};e.id=9208,e.ids=[9208],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7879:e=>{"use strict";e.exports=import("firebase-admin/firestore")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14276:e=>{"use strict";e.exports=import("firebase-admin/auth")},14596:(e,r,t)=>{Promise.resolve().then(t.bind(t,67125))},14985:e=>{"use strict";e.exports=require("dns")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30474:(e,r,t)=>{"use strict";t.d(r,{default:()=>i.a});var n=t(31261),i=t.n(n)},31261:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{default:function(){return d},getImageProps:function(){return o}});let n=t(37366),i=t(44953),s=t(46533),a=n._(t(1933));function o(e){let{props:r}=(0,i.getImgProps)(e,{defaultLoader:a.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,t]of Object.entries(r))void 0===t&&delete r[e];return{props:r}}let d=s.Image},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},43672:e=>{e.exports={container:"AmendGigConfirmationPage_container__K0voX",header:"AmendGigConfirmationPage_header___62b9",infoIcon:"AmendGigConfirmationPage_infoIcon__2hJhO",confirmationMessage:"AmendGigConfirmationPage_confirmationMessage__Wk5cS",aiIcon:"AmendGigConfirmationPage_aiIcon__fXRQo",updatedDetailsSection:"AmendGigConfirmationPage_updatedDetailsSection__r7FHO",detailsGrid:"AmendGigConfirmationPage_detailsGrid__74eD5",detailRow:"AmendGigConfirmationPage_detailRow__v7wLx",label:"AmendGigConfirmationPage_label__s6ZCS",value:"AmendGigConfirmationPage_value__8S_hQ",changesSummary:"AmendGigConfirmationPage_changesSummary__kFISP",actionButtons:"AmendGigConfirmationPage_actionButtons__nabmy",confirmButton:"AmendGigConfirmationPage_confirmButton__o5dzU",declineButton:"AmendGigConfirmationPage_declineButton__b_Jy7",loading:"AmendGigConfirmationPage_loading__5WCZn",error:"AmendGigConfirmationPage_error__S7xQy"}},43747:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>n});let n=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/gigs/[gigId]/amend/confirmation/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/gigs/[gigId]/amend/confirmation/page.tsx","default")},46675:e=>{"use strict";e.exports=require("firebase-admin")},55511:e=>{"use strict";e.exports=require("crypto")},56512:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>l});var n=t(65239),i=t(48088),s=t(88170),a=t.n(s),o=t(30893),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);t.d(r,d);let l={children:["",{children:["(web-client)",{children:["user",{children:["[userId]",{children:["worker",{children:["gigs",{children:["[gigId]",{children:["amend",{children:["confirmation",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,43747)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/gigs/[gigId]/amend/confirmation/page.tsx"]}]},{}]},{}]},{}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,14866)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,58014)),"/home/israel/personal/code/alex/able-ai/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/gigs/[gigId]/amend/confirmation/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},m=new n.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/(web-client)/user/[userId]/worker/gigs/[gigId]/amend/confirmation/page",pathname:"/user/[userId]/worker/gigs/[gigId]/amend/confirmation",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64939:e=>{"use strict";e.exports=import("pg")},67125:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var n=t(60687),i=t(43210),s=t(16189),a=t(21295),o=t(43672),d=t.n(o);function l(){let e=(0,s.useParams)(),r=(0,s.useRouter)(),{user:t}=(0,a.A)(),[o,l]=(0,i.useState)(null),[c,u]=(0,i.useState)(null),[m,p]=(0,i.useState)(!0),[g,h]=(0,i.useState)(!1),f=e.gigId,x=e.userId,b=e=>new Date(e).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"}),_=async()=>{if(o&&c&&t){h(!0);try{(await fetch(`/api/gigs/${f}/confirm-amendment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amendmentId:c.id,confirmedBy:"worker",confirmedAt:new Date().toISOString()})})).ok?r.push(`/user/${x}/worker/gigs/${f}`):console.error("Failed to confirm amendment")}catch(e){console.error("Error confirming amendment:",e)}finally{h(!1)}}},v=async()=>{if(o&&c&&t&&window.confirm("Are you sure you want to decline these changes?"))try{(await fetch(`/api/gigs/${f}/decline-amendment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amendmentId:c.id,declinedBy:"worker",declinedAt:new Date().toISOString()})})).ok?r.push(`/user/${x}/worker/gigs/${f}`):console.error("Failed to decline amendment")}catch(e){console.error("Error declining amendment:",e)}};if(m)return(0,n.jsx)("div",{className:d().container,children:(0,n.jsx)("div",{className:d().loading,children:"Loading..."})});if(!o||!c)return(0,n.jsx)("div",{className:d().container,children:(0,n.jsx)("div",{className:d().error,children:"Amendment request not found"})});let j=(e=>{let r=e.match(/(\d{1,2}):(\d{2})\s*-\s*(\d{1,2}):(\d{2})/);if(r){let e=parseInt(r[1]);return Math.max(parseInt(r[3])-e,1)}return 4})(o.gigTime),P=(o.hourlyRate*j).toFixed(2);return(0,n.jsxs)("div",{className:d().container,children:[(0,n.jsxs)("div",{className:d().header,children:[(0,n.jsx)("h1",{children:"Confirm amended Gig Details"}),(0,n.jsx)("span",{className:d().infoIcon,children:"ℹ️"})]}),(0,n.jsxs)("div",{className:d().confirmationMessage,children:[(0,n.jsx)("div",{className:d().aiIcon,children:"\uD83E\uDD16"}),(0,n.jsx)("p",{children:"Sue has added one hour to the gig, the update details are below. Please accept to confirm these changes"})]}),(0,n.jsxs)("div",{className:d().updatedDetailsSection,children:[(0,n.jsx)("h3",{children:"Updated gig details:"}),(0,n.jsxs)("div",{className:d().detailsGrid,children:[(0,n.jsxs)("div",{className:d().detailRow,children:[(0,n.jsx)("span",{className:d().label,children:"Location:"}),(0,n.jsx)("span",{className:d().value,children:o.location})]}),(0,n.jsxs)("div",{className:d().detailRow,children:[(0,n.jsx)("span",{className:d().label,children:"Date:"}),(0,n.jsx)("span",{className:d().value,children:b(o.gigDate)})]}),(0,n.jsxs)("div",{className:d().detailRow,children:[(0,n.jsx)("span",{className:d().label,children:"Time:"}),(0,n.jsx)("span",{className:d().value,children:(e=>{let r=e.match(/(\d{1,2}):(\d{2})\s*-\s*(\d{1,2}):(\d{2})/);if(r){let e=parseInt(r[1]),t=r[2],n=parseInt(r[3]),i=r[4];return`${e>12?e-12:0===e?12:e}:${t} ${e>=12?"PM":"AM"} - ${n>12?n-12:0===n?12:n}:${i} ${n>=12?"PM":"AM"}`}return e})(o.gigTime)})]}),(0,n.jsxs)("div",{className:d().detailRow,children:[(0,n.jsx)("span",{className:d().label,children:"Pay per hour:"}),(0,n.jsxs)("span",{className:d().value,children:["\xa3",o.hourlyRate]})]}),(0,n.jsxs)("div",{className:d().detailRow,children:[(0,n.jsx)("span",{className:d().label,children:"Total Pay:"}),(0,n.jsxs)("span",{className:d().value,children:["\xa3",P]})]})]}),(0,n.jsxs)("div",{className:d().changesSummary,children:[(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Requested Changes:"})," ",c.changes]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Requested by:"})," ","buyer"===c.requestedBy?"Buyer":"Worker"]}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"Requested on:"})," ",b(c.requestedAt)]})]})]}),(0,n.jsxs)("div",{className:d().actionButtons,children:[(0,n.jsx)("button",{className:d().confirmButton,onClick:_,disabled:g,children:g?"Confirming...":"Confirm changes"}),(0,n.jsx)("button",{className:d().declineButton,onClick:v,disabled:g,children:"Decline changes"})]})]})}},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},84599:(e,r,t)=>{Promise.resolve().then(t.bind(t,43747))},91645:e=>{"use strict";e.exports=require("net")},91902:(e,r,t)=>{"use strict";t.a(e,async(e,n)=>{try{t.r(r),t.d(r,{"400cd1fa767ef5281508e93e3ca1d7a0d11ad8371f":()=>i.qM,"404660310a5e0f58f816c762a9f12b9b33702d2493":()=>i.OH,"40bcfd414a2446406921fe5bddeb7f04b82b554661":()=>i.Rz,"60976633aa90a3960f31dd64f4fd8496ccbdb52456":()=>i.a6,"60e7f34a33097c37a8e1219f48e58834e6fa037656":()=>i.r2,"7fad076ff87a53fb2dc1878d8dc87b650c1a1b2caa":()=>i.gL});var i=t(29034),s=e([i]);i=(s.then?(await s)():s)[0],n()}catch(e){n(e)}})},92602:e=>{"use strict";e.exports=import("firebase-admin/messaging")},94735:e=>{"use strict";e.exports=require("events")}};var r=require("../../../../../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),n=r.X(0,[4447,9558,1658,6533,2002,6637,683],()=>t(56512));module.exports=n})();