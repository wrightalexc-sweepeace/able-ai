(()=>{var e={};e.id=1384,e.ids=[1384],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7879:e=>{"use strict";e.exports=import("firebase-admin/firestore")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14276:e=>{"use strict";e.exports=import("firebase-admin/auth")},14985:e=>{"use strict";e.exports=require("dns")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30474:(e,r,t)=>{"use strict";t.d(r,{default:()=>a.a});var s=t(31261),a=t.n(s)},30924:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>g,tree:()=>l});var s=t(65239),a=t(48088),i=t(88170),n=t.n(i),o=t(30893),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);t.d(r,d);let l={children:["",{children:["(web-client)",{children:["user",{children:["[userId]",{children:["worker",{children:["gigs",{children:["[gigId]",{children:["amend",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,55355)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/gigs/[gigId]/amend/page.tsx"]}]},{}]},{}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,14866)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,58014)),"/home/israel/personal/code/alex/able-ai/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/gigs/[gigId]/amend/page.tsx"],u={require:t,loadChunk:()=>Promise.resolve()},g=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(web-client)/user/[userId]/worker/gigs/[gigId]/amend/page",pathname:"/user/[userId]/worker/gigs/[gigId]/amend",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},31261:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{default:function(){return d},getImageProps:function(){return o}});let s=t(37366),a=t(44953),i=t(46533),n=s._(t(1933));function o(e){let{props:r}=(0,a.getImgProps)(e,{defaultLoader:n.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,t]of Object.entries(r))void 0===t&&delete r[e];return{props:r}}let d=i.Image},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},38737:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>l});var s=t(60687),a=t(43210),i=t(16189),n=t(21295),o=t(91048),d=t.n(o);function l(){let e=(0,i.useParams)(),r=(0,i.useRouter)(),{user:t}=(0,n.A)(),[o,l]=(0,a.useState)(null),[c,u]=(0,a.useState)(!0),[g,m]=(0,a.useState)(""),[p,h]=(0,a.useState)(null),[x,f]=(0,a.useState)(!1),_=e.gigId,b=e.userId,v=async()=>{if(o&&t&&g.trim()){f(!0);try{let e={gigId:o.id,changes:g.trim(),requestedBy:"worker",requestedAt:new Date().toISOString()};(await fetch("/api/gigs/amend-request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?r.push(`/user/${b}/worker/gigs/${_}/amend/confirmation`):console.error("Failed to submit amendment request")}catch(e){console.error("Error submitting amendment request:",e)}finally{f(!1)}}},w=async()=>{if(o&&t&&window.confirm("Are you sure you want to cancel this gig? This might incur charges or penalties."))try{(await fetch(`/api/gigs/${_}/cancel`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cancelledBy:"worker",reason:"Worker requested cancellation"})})).ok?r.push(`/user/${b}/worker/gigs`):console.error("Failed to cancel gig")}catch(e){console.error("Error cancelling gig:",e)}};if(c)return(0,s.jsx)("div",{className:d().container,children:(0,s.jsx)("div",{className:d().loading,children:"Loading..."})});if(!o)return(0,s.jsx)("div",{className:d().container,children:(0,s.jsx)("div",{className:d().error,children:"Gig not found"})});let P=(e=>{let r=e.match(/(\d{1,2}):(\d{2})\s*-\s*(\d{1,2}):(\d{2})/);if(r){let e=parseInt(r[1]);return Math.max(parseInt(r[3])-e,1)}return 4})(o.gigTime),y=(o.hourlyRate*P).toFixed(2);return(0,s.jsxs)("div",{className:d().container,children:[(0,s.jsx)("div",{className:d().header,children:(0,s.jsx)("h1",{children:"Cancel or Amend Gig Details"})}),(0,s.jsxs)("div",{className:d().changesSection,children:[(0,s.jsx)("div",{className:d().aiIcon,children:"\uD83E\uDD16"}),(0,s.jsx)("p",{children:"What changes would you like to make to the gig? Tell me or edit using the icon below"}),(0,s.jsx)("textarea",{className:d().changesInput,placeholder:"e.g., Add one more hour to the gig or pay \xa322ph",value:g,onChange:e=>m(e.target.value),rows:4})]}),(0,s.jsxs)("div",{className:d().updatedDetailsSection,children:[(0,s.jsxs)("div",{className:d().sectionHeader,children:[(0,s.jsx)("h3",{children:"Updated gig details:"}),(0,s.jsx)("span",{className:d().editIcon,children:"✏️"})]}),(0,s.jsxs)("div",{className:d().detailsGrid,children:[(0,s.jsxs)("div",{className:d().detailRow,children:[(0,s.jsx)("span",{className:d().label,children:"Location:"}),(0,s.jsx)("span",{className:d().value,children:o.location})]}),(0,s.jsxs)("div",{className:d().detailRow,children:[(0,s.jsx)("span",{className:d().label,children:"Date:"}),(0,s.jsx)("span",{className:d().value,children:new Date(o.gigDate).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})})]}),(0,s.jsxs)("div",{className:d().detailRow,children:[(0,s.jsx)("span",{className:d().label,children:"Time:"}),(0,s.jsx)("span",{className:d().value,children:(e=>{let r=e.match(/(\d{1,2}):(\d{2})\s*-\s*(\d{1,2}):(\d{2})/);if(r){let e=parseInt(r[1]),t=r[2],s=parseInt(r[3]),a=r[4];return`${e>12?e-12:0===e?12:e}:${t} ${e>=12?"PM":"AM"} - ${s>12?s-12:0===s?12:s}:${a} ${s>=12?"PM":"AM"}`}return e})(o.gigTime)})]}),(0,s.jsxs)("div",{className:d().detailRow,children:[(0,s.jsx)("span",{className:d().label,children:"Pay per hour:"}),(0,s.jsxs)("span",{className:d().value,children:["\xa3",o.hourlyRate]})]}),(0,s.jsxs)("div",{className:d().detailRow,children:[(0,s.jsx)("span",{className:d().label,children:"Total Pay:"}),(0,s.jsxs)("span",{className:d().value,children:["\xa3",y]})]})]}),g.trim()&&(0,s.jsx)("div",{className:d().changesSummary,children:(0,s.jsxs)("p",{children:["Add one more hour. Total gig value is now \xa3",(o.hourlyRate*(P+1)).toFixed(2),", with Able and payment provider fees of \xa3",(o.hourlyRate*(P+1)*.1).toFixed(2),"."]})})]}),(0,s.jsxs)("div",{className:d().actionButtons,children:[(0,s.jsx)("button",{className:d().submitButton,onClick:v,disabled:x||!g.trim(),children:x?"Submitting...":"Submit for Confirmation"}),(0,s.jsxs)("button",{className:d().cancelButton,onClick:w,children:["Cancel gig",(0,s.jsx)("span",{className:d().cancelWarning,children:"(this might incur charges or penalties)"})]})]})]})}},46675:e=>{"use strict";e.exports=require("firebase-admin")},50526:(e,r,t)=>{Promise.resolve().then(t.bind(t,38737))},55254:(e,r,t)=>{Promise.resolve().then(t.bind(t,55355))},55355:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>s});let s=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/gigs/[gigId]/amend/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/gigs/[gigId]/amend/page.tsx","default")},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64939:e=>{"use strict";e.exports=import("pg")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91048:e=>{e.exports={container:"AmendGigPage_container__E0FNx",header:"AmendGigPage_header__0H0gN",changesSection:"AmendGigPage_changesSection__6Tv20",aiIcon:"AmendGigPage_aiIcon__A_5qu",changesInput:"AmendGigPage_changesInput__B0Q5F",updatedDetailsSection:"AmendGigPage_updatedDetailsSection___AW_Q",sectionHeader:"AmendGigPage_sectionHeader__LvTKb",editIcon:"AmendGigPage_editIcon__L6VFx",detailsGrid:"AmendGigPage_detailsGrid__2kV_h",detailRow:"AmendGigPage_detailRow__Z6gG1",label:"AmendGigPage_label__QKnUL",value:"AmendGigPage_value__aw3c7",changesSummary:"AmendGigPage_changesSummary__aMa2s",actionButtons:"AmendGigPage_actionButtons__nhyk5",submitButton:"AmendGigPage_submitButton__tzmBq",cancelButton:"AmendGigPage_cancelButton__3c7ow",cancelWarning:"AmendGigPage_cancelWarning__y3ll9",loading:"AmendGigPage_loading__8l_Nd",error:"AmendGigPage_error__Gy4sz"}},91645:e=>{"use strict";e.exports=require("net")},91902:(e,r,t)=>{"use strict";t.a(e,async(e,s)=>{try{t.r(r),t.d(r,{"400cd1fa767ef5281508e93e3ca1d7a0d11ad8371f":()=>a.qM,"404660310a5e0f58f816c762a9f12b9b33702d2493":()=>a.OH,"40bcfd414a2446406921fe5bddeb7f04b82b554661":()=>a.Rz,"60976633aa90a3960f31dd64f4fd8496ccbdb52456":()=>a.a6,"60e7f34a33097c37a8e1219f48e58834e6fa037656":()=>a.r2,"7fad076ff87a53fb2dc1878d8dc87b650c1a1b2caa":()=>a.gL});var a=t(29034),i=e([a]);a=(i.then?(await i)():i)[0],s()}catch(e){s(e)}})},92602:e=>{"use strict";e.exports=import("firebase-admin/messaging")},94735:e=>{"use strict";e.exports=require("events")}};var r=require("../../../../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[4447,9558,1658,6533,2002,6637,683],()=>t(30924));module.exports=s})();