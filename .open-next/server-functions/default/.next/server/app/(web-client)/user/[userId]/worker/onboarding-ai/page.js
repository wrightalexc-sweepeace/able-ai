(()=>{var e={};e.id=6275,e.ids=[6275],e.modules={2977:e=>{e.exports={modalOverlay:"SetupChoiceModal_modalOverlay__3HKeL",fadeIn:"SetupChoiceModal_fadeIn__2KHxr",modalContent:"SetupChoiceModal_modalContent__ASktd",slideUp:"SetupChoiceModal_slideUp__lHI1r",modalHeader:"SetupChoiceModal_modalHeader__IrkZ5",modalTitle:"SetupChoiceModal_modalTitle__rFlqk",modalSubtitle:"SetupChoiceModal_modalSubtitle__AN7l2",choiceContainer:"SetupChoiceModal_choiceContainer__7gVEq",choiceCard:"SetupChoiceModal_choiceCard__W67YB",choiceIcon:"SetupChoiceModal_choiceIcon__05s4h",choiceContent:"SetupChoiceModal_choiceContent__Ysg2P",choiceTitle:"SetupChoiceModal_choiceTitle__h1L1l",choiceDescription:"SetupChoiceModal_choiceDescription__BX_f3",choiceFeatures:"SetupChoiceModal_choiceFeatures__WaUm0",feature:"SetupChoiceModal_feature__AQa__",choiceArrow:"SetupChoiceModal_choiceArrow__dpKoH",modalFooter:"SetupChoiceModal_modalFooter__1ADp1",footerNote:"SetupChoiceModal_footerNote__fIZeO"}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},5336:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});let r=(0,i(62688).A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},7879:e=>{"use strict";e.exports=import("firebase-admin/firestore")},10501:e=>{e.exports={shareLinkBubbleWrapper:"ShareLinkBubble_shareLinkBubbleWrapper__AcCQu",shareLinkBubbleContent:"ShareLinkBubble_shareLinkBubbleContent__e3k7p",label:"ShareLinkBubble_label__smxS1",linkContainer:"ShareLinkBubble_linkContainer__uf1b7",linkIcon:"ShareLinkBubble_linkIcon__7Nu_k",shareLink:"ShareLinkBubble_shareLink__e4KPv",disabledLink:"ShareLinkBubble_disabledLink__VlT9I",noLinkText:"ShareLinkBubble_noLinkText__rQ7hc",copyButton:"ShareLinkBubble_copyButton___tlMe",copiedIcon:"ShareLinkBubble_copiedIcon__rB_DV"}},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14276:e=>{"use strict";e.exports=import("firebase-admin/auth")},14985:e=>{"use strict";e.exports=require("dns")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21049:e=>{e.exports={formContainer:"ManualProfileForm_formContainer__ox5ms",formHeader:"ManualProfileForm_formHeader__nEDpc",formTitle:"ManualProfileForm_formTitle__XxJoP",formSubtitle:"ManualProfileForm_formSubtitle__nSu9k",progressContainer:"ManualProfileForm_progressContainer__BB6Az",progressBar:"ManualProfileForm_progressBar__CEiHh",progressFill:"ManualProfileForm_progressFill__95gxN",progressText:"ManualProfileForm_progressText__oouRy",switchButton:"ManualProfileForm_switchButton__Q_B6m",form:"ManualProfileForm_form__AKDhz",formSection:"ManualProfileForm_formSection__DGVFT",sectionTitle:"ManualProfileForm_sectionTitle__GO2_g",formGroup:"ManualProfileForm_formGroup__s_sNz",label:"ManualProfileForm_label__CvYAw",input:"ManualProfileForm_input__kf4uP",textarea:"ManualProfileForm_textarea__c7s_z",error:"ManualProfileForm_error___UUND",inputWrapper:"ManualProfileForm_inputWrapper__CUu4b",currencySymbol:"ManualProfileForm_currencySymbol__bT8qZ",rateInput:"ManualProfileForm_rateInput__wfGRK",helpText:"ManualProfileForm_helpText__CSDCL",errorText:"ManualProfileForm_errorText__XvqFK",fileUpload:"ManualProfileForm_fileUpload__RCmBn",fileInput:"ManualProfileForm_fileInput__aA1vy",fileLabel:"ManualProfileForm_fileLabel__xA0Tr",formActions:"ManualProfileForm_formActions__sjeqj",submitButton:"ManualProfileForm_submitButton__wTOwu",spinner:"ManualProfileForm_spinner___zVz8",spin:"ManualProfileForm_spin__BIKHB",completionNote:"ManualProfileForm_completionNote__s4Hot",availabilityDays:"ManualProfileForm_availabilityDays__c3Roo",dayButton:"ManualProfileForm_dayButton__HjFnZ",dayButtonActive:"ManualProfileForm_dayButtonActive__F2FA9",timeRangeContainer:"ManualProfileForm_timeRangeContainer__Cza45",timeInputGroup:"ManualProfileForm_timeInputGroup__saBGv",timeLabel:"ManualProfileForm_timeLabel__WSP_C",referencesContainer:"ManualProfileForm_referencesContainer__BeEFh",referencesInfo:"ManualProfileForm_referencesInfo__4Rhax",referencesDescription:"ManualProfileForm_referencesDescription__oZYWL",referencesLinkContainer:"ManualProfileForm_referencesLinkContainer__6vqcA",referencesLink:"ManualProfileForm_referencesLink__ifW8b",copyButton:"ManualProfileForm_copyButton__Mwk9k"}},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},46675:e=>{"use strict";e.exports=require("firebase-admin")},51541:(e,t,i)=>{Promise.resolve().then(i.bind(i,97868))},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64939:e=>{"use strict";e.exports=import("pg")},70615:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});let r=(0,i(62688).A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},73036:(e,t,i)=>{"use strict";i.r(t),i.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var r=i(65239),a=i(48088),o=i(88170),n=i.n(o),s=i(30893),l={};for(let e in s)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>s[e]);i.d(t,l);let c={children:["",{children:["(web-client)",{children:["user",{children:["[userId]",{children:["worker",{children:["onboarding-ai",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(i.bind(i,97868)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/onboarding-ai/page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(i.bind(i,14866)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/layout.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(i.t.bind(i,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(i.t.bind(i,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(i.bind(i,58014)),"/home/israel/personal/code/alex/able-ai/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(i.t.bind(i,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(i.t.bind(i,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(i.t.bind(i,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(i.bind(i,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,d=["/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/onboarding-ai/page.tsx"],u={require:i,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(web-client)/user/[userId]/worker/onboarding-ai/page",pathname:"/user/[userId]/worker/onboarding-ai",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81620:(e,t,i)=>{"use strict";i.d(t,{A:()=>r});let r=(0,i(62688).A)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]])},81630:e=>{"use strict";e.exports=require("http")},86246:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>eb});var r=i(60687),a=i(43210),o=i(16189),n=i(30474),s=i(33521),l=i(49114),c=i(33983),d=i(98987),u=i.n(d),p=i(92475),m=i.n(p),f=i(39233),y=i(65319);let h=({onVideoRecorded:e,prompt:t,setIsEditingVideo:i,isCancelButtonVisible:o=!0,isInline:n=!0})=>{let s=(0,a.useRef)(null),l=(0,a.useRef)(null),[c,d]=(0,a.useState)(!1),[p,h]=(0,a.useState)(null),[g,x]=(0,a.useState)(!1),[b,v]=(0,a.useState)(null),[k,w]=(0,a.useState)([]),[j,S]=(0,a.useState)(null),[N,C]=(0,a.useState)(null),[T,I]=(0,a.useState)(!1),_=(0,a.useCallback)(()=>{let e=s.current?.getScreenshot();e&&S(e)},[]),A=()=>{h(null),d(!1),w([]),v(null),S(null),h(null)},R=()=>{l.current&&"inactive"!==l.current.state&&(l.current.stop(),d(!1))},P=async()=>{b&&(console.log("Video URL:",URL.createObjectURL(b)),e&&e(b),I(!0),setTimeout(()=>{x(!1),I(!1)},300))};return(0,a.useEffect)(()=>{if(!c&&k.length>0){let e=new Blob(k,{type:"video/webm"});v(e),h(URL.createObjectURL(e)),console.log("Captured image:",j)}},[c,k]),(0,r.jsxs)("div",{className:m().container,children:[t&&(0,r.jsx)("div",{className:m().prompt,children:t}),g?(0,r.jsx)(r.Fragment,{children:N?(0,r.jsx)("div",{className:m().error,children:N}):p?(0,r.jsx)("div",{className:`${m().overlay} ${T?m().fadeOut:""}`,children:(0,r.jsxs)("div",{className:m().preview,children:[(0,r.jsx)("video",{controls:!0,src:p,className:m().video}),(0,r.jsxs)("div",{className:m().actions,children:[(0,r.jsx)("button",{onClick:P,className:`${m().actionButton} ${m().saveButton}`,children:"Save Video"}),(0,r.jsx)("button",{onClick:()=>{h(null),w([]),v(null)},className:`${m().actionButton} ${m().rerecordButton}`,children:"Re-record"})]})]})}):(0,r.jsx)("div",{className:m().overlay,children:(0,r.jsxs)("div",{className:m().recorder,children:[(0,r.jsx)(u(),{ref:s,audio:!0,mirrored:!0,screenshotFormat:"image/jpeg",videoConstraints:!0,className:m().webcam,onUserMedia:()=>{C(null),console.log("Webcam stream started")},onUserMediaError:e=>{C("Camera access denied or not available. Please allow camera access and refresh the page."),console.error("Webcam error",e)}}),(0,r.jsx)("button",{onClick:c?R:()=>{A();let e=s.current?.stream;if(!e)return;let t=new MediaRecorder(e,{mimeType:"video/webm"});l.current=t,t.ondataavailable=e=>{e.data.size>0&&w(t=>[...t,e.data])},t.start(),d(!0),setTimeout(()=>_(),15e3),setTimeout(()=>R(),3e4)},className:m().controlButton,children:c?"Stop Recording":"Start Recording"}),(0,r.jsx)(y.A,{handleCancel:()=>{x(!1)}}),(0,r.jsx)("p",{className:m().note,children:"Max duration: 30 seconds"})]})})}):(0,r.jsxs)("div",{className:m().initial,children:[p?(0,r.jsx)("div",{className:m().videoPreview,children:(0,r.jsx)("video",{controls:!0,src:p,className:m().video})}):(0,r.jsxs)("button",{onClick:()=>{A(),x(!0)},className:`${m().recordButton} ${n?m().inline:m().column}`,children:[(0,r.jsx)(f.A,{color:"#fff",className:m().monitorPlay}),(0,r.jsx)("span",{children:"RECORD VIDEO"})]}),o&&i&&(0,r.jsx)(y.A,{handleCancel:()=>i(!1)})]})]})};var g=i(93400),x=i(10501),b=i.n(x),v=i(5336),k=i(70615),w=i(81620);let j=({linkUrl:e,linkText:t,disabled:i,onCopy:o})=>{let[n,s]=(0,a.useState)(!1),l=t||e,c=async()=>{if(!i&&e&&navigator.clipboard)try{await navigator.clipboard.writeText(e),s(!0),o&&o(e),setTimeout(()=>s(!1),2e3)}catch(e){console.error("Failed to copy link: ",e)}};return(0,r.jsx)("div",{className:`${b().shareLinkBubbleWrapper} ${b().alignUser}`,children:(0,r.jsx)("div",{className:b().shareLinkBubbleContent,children:(0,r.jsxs)("div",{className:b().linkContainer,children:[e&&l?(0,r.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:`${b().shareLink} ${i?b().disabledLink:""}`,onClick:e=>i&&e.preventDefault(),title:e,children:l}):(0,r.jsx)("span",{className:b().noLinkText,children:e?l:"No link available"}),e&&navigator.clipboard&&(0,r.jsx)("button",{type:"button",onClick:c,disabled:i,className:b().copyButton,title:"Copy link",children:n?(0,r.jsx)(v.A,{size:16,className:b().copiedIcon}):(0,r.jsx)(k.A,{size:16})}),(0,r.jsx)(w.A,{color:"#41a1e8"})]})})})};var S=i(2977),N=i.n(S);let C=({isOpen:e,onChoice:t,onClose:i})=>e?(0,r.jsx)("div",{className:N().modalOverlay,onClick:i,children:(0,r.jsxs)("div",{className:N().modalContent,onClick:e=>e.stopPropagation(),children:[(0,r.jsxs)("div",{className:N().modalHeader,children:[(0,r.jsx)("h2",{className:N().modalTitle,children:"How would you like to set up your profile?"}),(0,r.jsx)("p",{className:N().modalSubtitle,children:"Choose the method that works best for you"})]}),(0,r.jsxs)("div",{className:N().choiceContainer,children:[(0,r.jsxs)("div",{className:N().choiceCard,onClick:()=>t("ai"),children:[(0,r.jsx)("div",{className:N().choiceIcon,children:(0,r.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z",fill:"currentColor"})})}),(0,r.jsxs)("div",{className:N().choiceContent,children:[(0,r.jsx)("h3",{className:N().choiceTitle,children:"AI-Assisted Setup"}),(0,r.jsx)("p",{className:N().choiceDescription,children:"Let our AI guide you through profile creation with a conversational chat experience"}),(0,r.jsxs)("div",{className:N().choiceFeatures,children:[(0,r.jsx)("span",{className:N().feature,children:"• Interactive chat experience"}),(0,r.jsx)("span",{className:N().feature,children:"• Smart suggestions and guidance"}),(0,r.jsx)("span",{className:N().feature,children:"• Estimated time: 5-10 minutes"})]})]}),(0,r.jsx)("div",{className:N().choiceArrow,children:(0,r.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z",fill:"currentColor"})})})]}),(0,r.jsxs)("div",{className:N().choiceCard,onClick:()=>t("manual"),children:[(0,r.jsx)("div",{className:N().choiceIcon,children:(0,r.jsx)("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z",fill:"currentColor"})})}),(0,r.jsxs)("div",{className:N().choiceContent,children:[(0,r.jsx)("h3",{className:N().choiceTitle,children:"Manual Form Input"}),(0,r.jsx)("p",{className:N().choiceDescription,children:"Fill out the form directly with full control over your profile information"}),(0,r.jsxs)("div",{className:N().choiceFeatures,children:[(0,r.jsx)("span",{className:N().feature,children:"• Direct form control"}),(0,r.jsx)("span",{className:N().feature,children:"• See all fields at once"}),(0,r.jsx)("span",{className:N().feature,children:"• Estimated time: 3-5 minutes"})]})]}),(0,r.jsx)("div",{className:N().choiceArrow,children:(0,r.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z",fill:"currentColor"})})})]})]}),(0,r.jsx)("div",{className:N().modalFooter,children:(0,r.jsx)("p",{className:N().footerNote,children:"\uD83D\uDCA1 You can switch between methods at any time during setup"})})]})}):null;var T=i(41723),I=i(21295);let _={WORKER:{MIN_HOURLY_RATE:12.21,MIN_ABOUT_LENGTH:10,MIN_EXPERIENCE_LENGTH:10,MIN_SKILLS_LENGTH:5,MIN_EQUIPMENT_LENGTH:5}};var A=i(21049),R=i.n(A);function P(e){if(!e)throw Error("Worker profile ID is required to build recommendation link");return`http://localhost:3000/worker/${e}/recommendation`}let M=({onSubmit:e,onSwitchToAI:t,initialData:i={},workerProfileId:o=null})=>{let{user:n}=(0,I.A)(),[s,l]=(0,a.useState)({about:"",experience:"",skills:"",equipment:"",hourlyRate:0,location:null,availability:{days:[],startTime:"09:00",endTime:"17:00"},videoIntro:null,references:o?P(o):"",...i}),[c,d]=(0,a.useState)({}),[u,p]=(0,a.useState)(!1),[m,f]=(0,a.useState)(0),y=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}];(0,a.useEffect)(()=>{o&&!s.references&&l(e=>({...e,references:P(o)}))},[o,s.references]),(0,a.useEffect)(()=>{(async()=>{if(n?.claims?.role==="GIG_WORKER"&&n?.token&&!s.references)try{let e=await (0,T.l)(n.token);e.success&&e.data?.id&&l(t=>({...t,references:P(e.data.id)}))}catch(e){console.error("Failed to fetch existing worker profile:",e),l(e=>({...e,references:"Recommendation link will be generated after profile creation"}))}})()},[n?.claims?.role,n?.token,s.references]),(0,a.useEffect)(()=>{let e=["about","experience","skills","equipment","hourlyRate","location","availability","videoIntro"];f(e.filter(e=>{let t=s[e];return"location"===e?t&&"object"==typeof t&&"lat"in t&&"lng"in t:"availability"===e?t&&Array.isArray(t.days)&&t.days.length>0:"videoIntro"===e?t&&t instanceof File:t&&("string"==typeof t?""!==t.trim():t>0)}).length/e.length*100)},[s]);let x=(e,t)=>{switch(e){case"about":return t.trim().length<_.WORKER.MIN_ABOUT_LENGTH?`Please provide at least ${_.WORKER.MIN_ABOUT_LENGTH} characters about yourself`:"";case"experience":return t.trim().length<_.WORKER.MIN_EXPERIENCE_LENGTH?`Please describe your years of experience (at least ${_.WORKER.MIN_EXPERIENCE_LENGTH} characters)`:"";case"skills":return t.trim().length<_.WORKER.MIN_SKILLS_LENGTH?`Please list your skills (at least ${_.WORKER.MIN_SKILLS_LENGTH} characters)`:"";case"equipment":return!t||t.trim().length<_.WORKER.MIN_EQUIPMENT_LENGTH?`Please list your equipment (at least ${_.WORKER.MIN_EQUIPMENT_LENGTH} characters)`:"";case"hourlyRate":return!t||t<_.WORKER.MIN_HOURLY_RATE?`Please enter a valid hourly rate (minimum \xa3${_.WORKER.MIN_HOURLY_RATE})`:"";case"location":return t&&t.lat&&t.lng?"":"Please select your location";case"availability":return t.days&&0!==t.days.length?"":"Please select at least one day of availability";case"videoIntro":return t&&t instanceof File?"":"Please record a video introduction";default:return""}},b=(e,t)=>{l(i=>({...i,[e]:t})),c[e]&&d(t=>({...t,[e]:""}))},v=e=>{l(t=>({...t,availability:{...t.availability,days:t.availability.days.includes(e)?t.availability.days.filter(t=>t!==e):[...t.availability.days,e]}}))},k=()=>{let e={},t=!0;return["about","experience","skills","equipment","hourlyRate","location","availability","videoIntro"].forEach(i=>{let r=s[i],a=x(i,r);a&&(e[i]=a,t=!1)}),d(e),t},w=async t=>{if(t.preventDefault(),!n)return void console.error("User not authenticated");if(k()){p(!0);try{await e(s)}catch(e){console.error("Form submission error:",e)}finally{p(!1)}}};return(0,r.jsxs)("div",{className:R().formContainer,children:[(0,r.jsxs)("div",{className:R().formHeader,children:[(0,r.jsx)("h2",{className:R().formTitle,children:"Create Your Worker Profile"}),(0,r.jsx)("p",{className:R().formSubtitle,children:"Fill out the form below to complete your profile setup"}),(0,r.jsxs)("div",{className:R().progressContainer,children:[(0,r.jsx)("div",{className:R().progressBar,children:(0,r.jsx)("div",{className:R().progressFill,style:{width:`${m}%`}})}),(0,r.jsxs)("span",{className:R().progressText,children:[Math.round(m),"% Complete"]})]}),(0,r.jsxs)("button",{type:"button",className:R().switchButton,onClick:t,children:[(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z",fill:"currentColor"})}),"Switch to AI-Assisted Setup"]})]}),(0,r.jsxs)("form",{onSubmit:w,onKeyDown:e=>{if("Enter"!==e.key)return;let t=e.target;if(!t)return;let i=t.tagName?.toLowerCase(),r="button"===i&&"submit"===t.type;"textarea"===i||r||e.preventDefault()},className:R().form,children:[(0,r.jsxs)("div",{className:R().formSection,children:[(0,r.jsx)("h3",{className:R().sectionTitle,children:"About You"}),(0,r.jsxs)("div",{className:R().formGroup,children:[(0,r.jsx)("label",{className:R().label,children:"Tell us about yourself *"}),(0,r.jsx)("textarea",{className:`${R().textarea} ${c.about?R().error:""}`,value:s.about,onChange:e=>b("about",e.target.value),placeholder:"Tell us about yourself and your background...",rows:4}),c.about&&(0,r.jsx)("span",{className:R().errorText,children:c.about})]}),(0,r.jsxs)("div",{className:R().formGroup,children:[(0,r.jsx)("label",{className:R().label,children:"Years of Experience *"}),(0,r.jsx)("textarea",{className:`${R().textarea} ${c.experience?R().error:""}`,value:s.experience,onChange:e=>b("experience",e.target.value),placeholder:"How many years of experience do you have in your field? (e.g., 5 years in construction, 3 years in plumbing...)",rows:3}),c.experience&&(0,r.jsx)("span",{className:R().errorText,children:c.experience})]}),(0,r.jsxs)("div",{className:R().formGroup,children:[(0,r.jsx)("label",{className:R().label,children:"Skills & Certifications *"}),(0,r.jsx)("textarea",{className:`${R().textarea} ${c.skills?R().error:""}`,value:s.skills,onChange:e=>b("skills",e.target.value),placeholder:"List your skills, certifications, and qualifications...",rows:3}),c.skills&&(0,r.jsx)("span",{className:R().errorText,children:c.skills})]}),(0,r.jsxs)("div",{className:R().formGroup,children:[(0,r.jsx)("label",{className:R().label,children:"Equipment *"}),(0,r.jsx)("textarea",{className:`${R().textarea} ${c.equipment?R().error:""}`,value:s.equipment,onChange:e=>b("equipment",e.target.value),placeholder:"List any equipment you have that you can use for your work...",rows:3}),c.equipment&&(0,r.jsx)("span",{className:R().errorText,children:c.equipment})]})]}),(0,r.jsxs)("div",{className:R().formSection,children:[(0,r.jsx)("h3",{className:R().sectionTitle,children:"Pricing & Location"}),(0,r.jsxs)("div",{className:R().formGroup,children:[(0,r.jsx)("label",{className:R().label,children:"Hourly Rate (\xa3) *"}),(0,r.jsxs)("div",{className:R().inputWrapper,children:[(0,r.jsx)("span",{className:R().currencySymbol,children:"\xa3"}),(0,r.jsx)("input",{type:"number",className:`${R().input} ${R().rateInput} ${c.hourlyRate?R().error:""}`,value:s.hourlyRate||"",onChange:e=>b("hourlyRate",parseFloat(e.target.value)||0),placeholder:"15",min:_.WORKER.MIN_HOURLY_RATE,step:"0.01"})]}),c.hourlyRate&&(0,r.jsx)("span",{className:R().errorText,children:c.hourlyRate})]}),(0,r.jsxs)("div",{className:R().formGroup,children:[(0,r.jsx)("label",{className:R().label,children:"Your Location *"}),(0,r.jsx)(g.A,{value:s.location,onChange:e=>{l(t=>({...t,location:e})),c.location&&d(e=>({...e,location:""}))},role:"GIG_WORKER"}),c.location&&(0,r.jsx)("span",{className:R().errorText,children:c.location})]})]}),(0,r.jsxs)("div",{className:R().formSection,children:[(0,r.jsx)("h3",{className:R().sectionTitle,children:"Weekly Availability"}),(0,r.jsx)("p",{className:R().helpText,children:"Set your recurring weekly availability schedule"}),(0,r.jsxs)("div",{className:R().formGroup,children:[(0,r.jsx)("label",{className:R().label,children:"Available Days *"}),(0,r.jsx)("div",{className:R().availabilityDays,children:y.map(e=>(0,r.jsx)("button",{type:"button",className:`${R().dayButton} ${s.availability.days.includes(e.value)?R().dayButtonActive:""}`,onClick:()=>v(e.value),children:e.label},e.value))}),c.availability&&(0,r.jsx)("span",{className:R().errorText,children:c.availability})]}),(0,r.jsxs)("div",{className:R().formGroup,children:[(0,r.jsx)("label",{className:R().label,children:"Available Hours *"}),(0,r.jsxs)("div",{className:R().timeRangeContainer,children:[(0,r.jsxs)("div",{className:R().timeInputGroup,children:[(0,r.jsx)("label",{className:R().timeLabel,children:"From:"}),(0,r.jsx)("input",{type:"time",className:R().input,value:s.availability.startTime,onChange:e=>b("availability",{...s.availability,startTime:e.target.value})})]}),(0,r.jsxs)("div",{className:R().timeInputGroup,children:[(0,r.jsx)("label",{className:R().timeLabel,children:"To:"}),(0,r.jsx)("input",{type:"time",className:R().input,value:s.availability.endTime,onChange:e=>b("availability",{...s.availability,endTime:e.target.value})})]})]}),(0,r.jsxs)("p",{className:R().helpText,children:["Your availability will be set as: ",s.availability.days.length>0?`${s.availability.days.map(e=>y.find(t=>t.value===e)?.label).join(", ")} ${s.availability.startTime} - ${s.availability.endTime}`:"Please select days and times"]})]})]}),(0,r.jsxs)("div",{className:R().formSection,children:[(0,r.jsx)("h3",{className:R().sectionTitle,children:"Media & References"}),(0,r.jsxs)("div",{className:R().formGroup,children:[(0,r.jsx)("label",{className:R().label,children:"Video Introduction *"}),(0,r.jsx)(h,{onVideoRecorded:e=>{let t=new File([e],"video-intro.webm",{type:"video/webm"});l(e=>({...e,videoIntro:t}))},prompt:"Record a 30-second introduction video to help clients get to know you"}),s.videoIntro&&(0,r.jsxs)("p",{className:R().helpText,children:["Video recorded: ",s.videoIntro.name]}),c.videoIntro&&(0,r.jsx)("span",{className:R().errorText,children:c.videoIntro})]}),(0,r.jsxs)("div",{className:R().formGroup,children:[(0,r.jsx)("label",{className:R().label,children:"References Link"}),(0,r.jsx)("div",{className:R().referencesContainer,children:(0,r.jsxs)("div",{className:R().referencesInfo,children:[(0,r.jsx)("p",{className:R().referencesDescription,children:"Share this link with your previous employers, colleagues, or clients to collect references:"}),(0,r.jsxs)("div",{className:R().referencesLinkContainer,children:[(0,r.jsx)("input",{type:"text",className:R().referencesLink,value:s.references,readOnly:!0,placeholder:"Generating reference link..."}),(0,r.jsx)("button",{type:"button",className:R().copyButton,onClick:()=>{navigator.clipboard.writeText(s.references)},title:"Copy link to clipboard",children:(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z",fill:"currentColor"})})})]}),(0,r.jsx)("p",{className:R().helpText,children:"Send this link to people who can provide references for your work. They'll be able to submit recommendations directly through our platform."})]})})]})]}),(0,r.jsxs)("div",{className:R().formActions,children:[(0,r.jsx)("button",{type:"submit",className:R().submitButton,disabled:u||m<100,children:u?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:R().spinner}),"Creating Profile..."]}):"Complete Profile Setup"}),m<100&&(0,r.jsx)("p",{className:R().completionNote,children:"Please fill in all required fields to complete your profile"})]})]})]})};var E=i(65456),D=i(97680),L=i.n(D),$=i(36864),F=i(12665),O=i(7958);async function B(e){try{let t=await fetch("/api/escalation",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"create",...e})});return await t.json()}catch(e){return console.error("❌ Failed to create escalated issue via API:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}let z={human_support:{keywords:["talk to human","speak to human","human support","real person","talk to someone","speak to someone","human agent","live agent","customer service","support team","help desk","service desk"],issueType:"general_support",priority:"high"},frustration:{keywords:["frustrated","angry","upset","annoyed","irritated","fed up","not working","broken","useless","terrible","awful","horrible","waste of time","ridiculous","stupid","idiot","useless"],issueType:"user_frustration",priority:"high"},technical_issues:{keywords:["error","bug","crash","broken","not working","failed","technical problem","system error","app error","website error","loading","slow","freeze","stuck","can't access","won't load"],issueType:"technical_problem",priority:"medium"},payment_issues:{keywords:["payment","billing","charge","refund","money","cost","expensive","overcharged","wrong amount","didn't pay","payment failed","transaction failed","card declined"],issueType:"payment_issue",priority:"high"},safety_concerns:{keywords:["unsafe","dangerous","threat","harassment","abuse","inappropriate","scam","fraud","fake","suspicious"],issueType:"safety_concern",priority:"high"},urgent_requests:{keywords:["urgent","emergency","asap","immediately","right now","critical","important","need help now","desperate"],issueType:"urgent_request",priority:"high"}};function q(e,t){let i=e.toLowerCase(),r=0,a="general_support",o="";for(let[e,t]of Object.entries(z))for(let e of t.keywords)if(i.includes(e.toLowerCase())){let i="high"===t.priority?.9:.7;i>r&&(r=i,a=t.issueType,o=`Keyword match: "${e}"`)}return t?.retryCount&&t.retryCount>=3&&.8>r&&(r=.8,a="ai_limitation",o=`Multiple retries (${t.retryCount})`),t?.conversationLength&&t.conversationLength>20&&.6>r&&(r=.6,a="complex_issue",o=`Long conversation (${t.conversationLength} messages)`),(i.includes("escalate")||i.includes("escalation"))&&(r=1,a="explicit_escalation",o="Explicit escalation request"),{shouldEscalate:r>=.7,reason:o,issueType:a,confidence:r}}function W(e,t,i){let r=`Escalation triggered: ${e.reason}`;return i?.gigId&&(r+=` | Related to gig: ${i.gigId}`),i?.userRole&&(r+=` | User role: ${i.userRole}`),i?.conversationLength&&(r+=` | Conversation length: ${i.conversationLength} messages`),r+=` | User input: "${t.substring(0,200)}${t.length>200?"...":""}"`}let G=[{id:"cashier",title:"Cashier",category:"Food & Beverage Service",synonyms:["cashier","till operator","point of sale operator","pos operator","checkout operator","sales assistant","retail assistant"],description:"Handles customer transactions, processes payments, and provides customer service at point of sale",skillLevel:"entry",requiredSkills:["customer service","cash handling","basic math","communication"],optionalSkills:["pos systems","inventory management","upselling"]},{id:"server",title:"Server",category:"Food & Beverage Service",synonyms:["server","waiter","waitress","food server","dining room attendant","restaurant staff","food service worker"],description:"Takes orders, serves food and beverages, and ensures customer satisfaction in dining establishments",skillLevel:"entry",requiredSkills:["customer service","food safety","communication","multitasking"],optionalSkills:["wine knowledge","upselling","table service","pos systems"]},{id:"bartender",title:"Bartender",category:"Food & Beverage Service",synonyms:["bartender","bar staff","mixologist","bar tender","cocktail maker","bar worker"],description:"Prepares and serves alcoholic and non-alcoholic beverages, manages bar operations",skillLevel:"intermediate",requiredSkills:["alcohol knowledge","customer service","cash handling","food safety"],optionalSkills:["cocktail making","wine knowledge","bar management","inventory control"]},{id:"barista",title:"Barista",category:"Food & Beverage Service",synonyms:["barista","coffee maker","coffee barista","espresso maker","coffee server","cafe staff"],description:"Prepares and serves coffee beverages, operates espresso machines, provides customer service",skillLevel:"entry",requiredSkills:["coffee knowledge","customer service","food safety","machine operation"],optionalSkills:["latte art","coffee roasting","inventory management","upselling"]},{id:"kitchen_porter",title:"Kitchen Porter",category:"Food & Beverage Service",synonyms:["kitchen porter","dishwasher","kitchen assistant","kitchen helper","dish washer","kitchen staff"],description:"Maintains kitchen cleanliness, washes dishes, assists with food preparation",skillLevel:"entry",requiredSkills:["cleaning","food safety","teamwork","physical stamina"],optionalSkills:["food preparation","kitchen equipment","inventory management"]},{id:"chef",title:"Chef",category:"Food & Beverage Service",synonyms:["chef","cook","head chef","sous chef","line cook","kitchen chef","food preparer"],description:"Prepares and cooks food, manages kitchen operations, creates menus",skillLevel:"intermediate",requiredSkills:["cooking skills","food safety","kitchen management","menu planning"],optionalSkills:["culinary arts","food costing","staff training","inventory control"]},{id:"baker",title:"Baker",category:"Food & Beverage Service",synonyms:["baker","cake maker","pastry chef","dessert maker","bread maker","patisserie","cake decorator","pastry baker"],description:"Prepares and bakes bread, pastries, cakes, and other baked goods",skillLevel:"intermediate",requiredSkills:["baking skills","food safety","recipe following","attention to detail"],optionalSkills:["cake decoration","pastry making","bread making","inventory management","food costing"]},{id:"event_coordinator",title:"Event Coordinator",category:"Event Management",synonyms:["event coordinator","event planner","event organizer","event manager","event staff","event assistant"],description:"Plans, coordinates, and manages events, liaises with clients and vendors",skillLevel:"intermediate",requiredSkills:["event planning","project management","communication","organization"],optionalSkills:["vendor management","budgeting","marketing","client relations"]},{id:"event_staff",title:"Event Staff",category:"Event Management",synonyms:["event staff","event worker","event assistant","event helper","event crew","event team member"],description:"Provides support during events, assists with setup, operations, and breakdown",skillLevel:"entry",requiredSkills:["customer service","teamwork","communication","physical stamina"],optionalSkills:["event setup","customer assistance","problem solving","multitasking"]},{id:"receptionist",title:"Receptionist",category:"Hospitality Management",synonyms:["receptionist","front desk","front office","reception","guest services","concierge","hotel staff"],description:"Welcomes guests, handles check-ins/check-outs, provides information and assistance",skillLevel:"entry",requiredSkills:["customer service","communication","computer skills","organization"],optionalSkills:["booking systems","multilingual","problem solving","upselling"]},{id:"housekeeper",title:"Housekeeper",category:"Hospitality Management",synonyms:["housekeeper","room attendant","housekeeping","cleaner","maid","room cleaner","hotel cleaner"],description:"Maintains cleanliness of rooms and public areas, ensures guest comfort",skillLevel:"entry",requiredSkills:["cleaning","attention to detail","physical stamina","time management"],optionalSkills:["laundry service","inventory management","customer service","safety protocols"]},{id:"security_guard",title:"Security Guard",category:"Security & Safety",synonyms:["security guard","security officer","security staff","guard","security","safety officer"],description:"Maintains security, monitors premises, responds to incidents, ensures safety",skillLevel:"entry",requiredSkills:["security awareness","communication","observation","emergency response"],optionalSkills:["cctv operation","first aid","conflict resolution","report writing"]},{id:"audio_visual_technician",title:"Audio Visual Technician",category:"Technical Support",synonyms:["audio visual technician","av technician","sound technician","lighting technician","technical support","av staff"],description:"Sets up and operates audio, visual, and lighting equipment for events",skillLevel:"intermediate",requiredSkills:["av equipment","technical troubleshooting","setup and teardown","communication"],optionalSkills:["sound mixing","lighting design","video production","equipment maintenance"]}],H=[{id:"stage_hand",title:"Stage Hand",category:"Event Production",synonyms:["stage hand","stage crew","backstage worker","stage worker","production assistant","stage staff"],description:"Assists with stage setup, equipment handling, and production support",skillLevel:"entry",requiredSkills:["physical stamina","teamwork","safety awareness","equipment handling"],optionalSkills:["rigging","lighting","sound","stage management"]},{id:"production_assistant",title:"Production Assistant",category:"Event Production",synonyms:["production assistant","pa","production staff","event assistant","production helper"],description:"Supports production team, assists with logistics, coordinates activities",skillLevel:"entry",requiredSkills:["organization","communication","multitasking","problem solving"],optionalSkills:["scheduling","vendor coordination","documentation","logistics"]}],U=[...G,...H];async function V(e,t){let i=function(e){let t=e.toLowerCase().trim(),i=null,r=0,a=[];for(let e of U){let o=0,n=[];for(let i of(t.includes(e.title.toLowerCase())&&(o+=100,n.push(e.title)),e.synonyms))t.includes(i.toLowerCase())&&(o+=80,n.push(i));for(let i of(t.includes(e.category.toLowerCase().replace(" & "," "))&&(o+=30),e.requiredSkills))t.includes(i.toLowerCase())&&(o+=20,n.push(i));for(let i of e.description.toLowerCase().split(" "))i.length>3&&t.includes(i)&&(o+=5);o>r&&(r=o,i=e,a=[...new Set(n)])}return i&&r>=30?{jobTitle:i,confidence:Math.min(r,100),matchedTerms:a}:null}(e);if(i&&i.confidence>=30)return{...i,isAISuggested:!1};if(t)try{let i=`You are a job title standardization assistant for a hospitality and events platform. 

The user provided this job title/description: "${e}"

Available standardized job titles in our taxonomy:
${U.map(e=>`- ${e.title} (${e.category}): ${e.description}`).join("\n")}

Your task is to provide a standardized job title for the user's input. 

Rules:
1. FIRST, check if the user's input matches any existing job title in our taxonomy above
2. If there's a good match in our taxonomy, return that existing title
3. If the user's input is completely outside our taxonomy (e.g., "computer fixer", "plumber", "web developer"), create a NEW, appropriate standardized job title
4. For new titles, follow these guidelines:
   - Use professional, industry-standard terminology
   - Make it clear and descriptive
   - Consider the context of a hospitality/events platform
   - Examples: "Computer Technician" for "computer fixer", "Plumber" for "plumber", "Web Developer" for "web developer"
5. Return confidence as a number between 0-100
6. Include matched terms as a comma-separated string (or relevant keywords for new titles)
7. Provide reasoning for your choice

Please analyze the user's input and provide either an existing standardized job title or create a new appropriate one.`,r=await (0,F.rL)("gemini-2.0-flash",{prompt:i,responseSchema:O.Sj.object({properties:{jobTitle:O.Sj.string(),confidence:O.Sj.number(),matchedTerms:O.Sj.string(),reasoning:O.Sj.string(),isNewTitle:O.Sj.boolean()}}),isStream:!1},t);if(r.ok&&r.data){let t=r.data,i=t.jobTitle,a=t.confidence,o=t.matchedTerms,n=t.isNewTitle,s=o?o.split(",").map(e=>e.trim()):[];if(n)return{jobTitle:{id:`ai_generated_${Date.now()}`,title:i,category:"Other Services",description:`AI-generated standardized title for: ${e}`,synonyms:[e.toLowerCase()],requiredSkills:s,optionalSkills:[],skillLevel:"intermediate"},confidence:Math.min(a,100),matchedTerms:s,isAISuggested:!0};{let e=U.find(e=>e.title.toLowerCase()===i.toLowerCase());if(e)return{jobTitle:e,confidence:Math.min(a,100),matchedTerms:s,isAISuggested:!0}}}}catch(e){console.error("AI job title standardization failed:",e)}return i?{...i,isAISuggested:!1}:null}G.filter(e=>"Food & Beverage Service"===e.category),H.filter(e=>"Event Management"===e.category),G.filter(e=>"Hospitality Management"===e.category),G.filter(e=>"Security & Safety"===e.category),G.filter(e=>"Technical Support"===e.category),H.filter(e=>"Event Production"===e.category);let K=`ONBOARDING "GIGFOLIO COACH" – SYSTEM PROMPT & DEVELOPER GUIDE

ROLE: Gigfolio Coach AI Assistant
PURPOSE: Guide new workers through onboarding process

ONBOARDING FLOW:
1. Welcome & Introduction
2. Profile Creation
3. Skills Assessment
4. Experience Documentation
5. Verification Setup
6. Platform Orientation

COACHING PRINCIPLES:
- Be encouraging and supportive
- Provide clear, step-by-step guidance
- Celebrate progress and achievements
- Address concerns promptly
- Build confidence in new users

KEY ONBOARDING AREAS:
- Personal Information: Name, contact, location, availability
- Professional Background: Work history, education, certifications
- Skills & Expertise: Core competencies, specializations, languages
- Portfolio Building: Photos, videos, testimonials, work samples
- Platform Navigation: App usage, gig browsing, application process

SUCCESS METRICS:
- Profile completion rate
- Skills assessment accuracy
- User confidence levels
- Time to first gig application
- User satisfaction scores

PROFILE OPTIMIZATION:
- Professional photo guidelines
- Skills presentation best practices
- Experience highlighting techniques
- Availability scheduling tips
- Rate setting recommendations

PLATFORM INTEGRATION:
- App navigation assistance
- Gig search optimization
- Application process guidance
- Communication protocols
- Payment setup support`,Y=`SHIFT CONCIERGE AI AGENT – SYSTEM PROMPT & DEVELOPER GUIDE

ROLE: Shift Concierge AI Assistant
PURPOSE: Assist with gig creation, management, and worker matching

GIG CREATION ASSISTANCE:
- Event type identification
- Skill requirements definition
- Rate range recommendations
- Location and timing optimization
- Worker qualification matching

EVENT PLANNING SUPPORT:
- Venue requirements assessment
- Staffing level recommendations
- Timeline and schedule planning
- Equipment and resource needs
- Contingency planning

WORKER MATCHING CRITERIA:
- Skills and experience alignment
- Availability and location matching
- Rate expectations compatibility
- Professional reputation assessment
- Cultural fit considerations

GIG MANAGEMENT:
- Shift scheduling optimization
- Communication protocols
- Quality assurance standards
- Issue resolution procedures
- Performance feedback systems

OPERATIONAL BEST PRACTICES:
- Safety protocol implementation
- Emergency response procedures
- Quality control measures
- Customer service standards
- Compliance requirements

INDUSTRY STANDARDS:
- Hospitality service protocols
- Event industry best practices
- Labor law compliance
- Insurance and liability coverage
- Professional certification requirements

PERFORMANCE OPTIMIZATION:
- Worker productivity metrics
- Customer satisfaction tracking
- Cost efficiency analysis
- Quality improvement initiatives
- Continuous learning programs`,J=`You are an AI assistant for Able AI, a gig platform connecting hospitality and event workers with opportunities. You have access to Able AI guidelines and system prompts to ensure consistent, ethical, and platform-specific responses.

Please provide responses that align with Able AI's guidelines, ethical standards, and system prompts. Ensure all responses are consistent with the platform's values and operational procedures.`,Q={onboarding:"You are the Gigfolio Coach AI assistant. Help users complete their onboarding process following Able AI's guidelines. Be encouraging, professional, and ensure all responses align with the platform's standards.",gigCreation:"You are the Shift Concierge AI assistant. Help users create gigs following Able AI's guidelines. Ensure gig descriptions are clear, professional, and follow platform standards.",support:"You are an Able AI support assistant. Help users with their issues following the platform's guidelines and ethical standards. Be helpful, professional, and escalate when necessary.",general:"You are an Able AI assistant. Help users with their questions following the platform's guidelines and ethical standards. Be professional, accurate, and ensure all responses align with platform values."},Z={profileCreation:"Help users create compelling worker profiles that highlight their skills, experience, and professionalism. Follow Able AI's profile optimization guidelines and encourage complete, accurate information.",skillsAssessment:"Assist users in identifying and documenting their skills according to Able AI's skills taxonomy. Help them understand skill levels and provide guidance on skill presentation.",gigOptimization:"Help users optimize their gig postings for better worker matching. Provide guidance on clear descriptions, skill requirements, and competitive pricing.",workerMatching:"Assist in matching workers to gigs based on skills, experience, availability, and cultural fit. Follow Able AI's matching criteria and ensure quality matches.",qualityAssurance:"Help maintain high service quality standards by providing guidance on best practices, safety protocols, and professional conduct.",videoIntroduction:"Help users create compelling video introductions that showcase their personality, skills, and professionalism. Provide guidance on script creation, presentation tips, and best practices for video content.",jobTitleInterpretation:"Help users interpret their work experience and match it to standardized job titles in the hospitality and events industry. Use semantic matching to find the closest standardized job title based on user descriptions, skills, and experience."},X={gigfolioCoach:{welcome:"Welcome to Able AI! I'm your Gigfolio Coach, here to guide you through creating an amazing worker profile.",profileBuilding:"Let's build your profile step by step to showcase your skills and experience.",skillsAssessment:"I'll help you identify and document your skills according to industry standards.",experienceDocumentation:"Let's document your work experience to build credibility.",portfolioGuidance:"I'll guide you in creating a compelling portfolio that stands out.",videoIntroduction:"I'll help you create a compelling video introduction that showcases your personality and professionalism.",jobTitleInterpretation:"I'll help you match your work experience to standardized job titles in our industry taxonomy."}},ee=(e,t,i)=>{let r=Q[e]||Q.general,a=`${J}

${r}`;return i&&(a+=`

Additional Context: ${i}`),t&&(a+=`

User Query: ${t}`),a},et=(e,t,i)=>`${J}

${"gigfolioCoach"===e?K:Y}

Context: ${t}

${i?`User Query: ${i}`:""}

Please respond according to your role and the provided context.`,ei=(e,t,i)=>{let r=Z[e];return r?`${J}

${r}

User Context: ${t}

User Query: ${i}

Please provide specialized assistance in this area.`:ee("general",i,t)};var er=i(70146),ea=i(1610),eo=i(6475);eo.callServer,eo.findSourceMapURL;let en=(0,eo.createServerReference)("7f9f7e73e378181dd0d16c77220da0f031b421e8db",eo.callServer,void 0,eo.findSourceMapURL,"saveWorkerProfileFromOnboardingAction");var es=i(28507);let el=()=>(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",padding:"12px 16px",color:"var(--primary-color)",fontWeight:600,animation:"slideIn 0.3s ease-out",opacity:0,animationFillMode:"forwards"},children:[(0,r.jsxs)("div",{style:{display:"flex",gap:"4px",background:"rgba(37, 99, 235, 0.1)",padding:"8px 12px",borderRadius:"20px",border:"1px solid rgba(37, 99, 235, 0.2)"},children:[(0,r.jsx)("span",{className:"typing-dot",style:{animation:"typingBounce 1.4s infinite ease-in-out",fontSize:"18px",lineHeight:"1"},children:"●"}),(0,r.jsx)("span",{className:"typing-dot",style:{animation:"typingBounce 1.4s infinite ease-in-out 0.2s",fontSize:"18px",lineHeight:"1"},children:"●"}),(0,r.jsx)("span",{className:"typing-dot",style:{animation:"typingBounce 1.4s infinite ease-in-out 0.4s",fontSize:"18px",lineHeight:"1"},children:"●"})]}),(0,r.jsx)("style",{children:`
      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      @keyframes typingBounce {
        0%, 60%, 100% {
          transform: translateY(0);
          opacity: 0.4;
        }
        30% {
          transform: translateY(-8px);
          opacity: 1;
        }
      }
    `})]});el.displayName="TypingIndicator";let ec=O.Sj,ed=[{name:"about",type:"text",placeholder:"Tell us about yourself and your background...",defaultPrompt:"Tell me about yourself and what kind of work you can offer!",rows:3},{name:"experience",type:"text",placeholder:"Tell us about your experience...",defaultPrompt:"What experience do you have in your field?",rows:3},{name:"skills",type:"text",placeholder:"List your skills and certifications...",defaultPrompt:"What skills and certifications do you have?",rows:3},{name:"equipment",type:"text",placeholder:"List any equipment you have...",defaultPrompt:"What equipment do you have that you can use for your work?",rows:3},{name:"hourlyRate",type:"number",placeholder:"\xa315",defaultPrompt:"What's your preferred hourly rate?"},{name:"location",type:"location",defaultPrompt:"Where are you based? This helps us find gigs near you!"},{name:"availability",type:"availability",defaultPrompt:"When are you available to work? Let's set up your weekly schedule!"},{name:"videoIntro",type:"video",defaultPrompt:"Record a short video introduction to help clients get to know you!"},{name:"references",type:"text",placeholder:"Provide your references...",defaultPrompt:"Do you have any references or testimonials?",rows:3}];function eu(e){return!!e&&"object"==typeof e&&"lat"in e&&"lng"in e&&"number"==typeof e.lat&&"number"==typeof e.lng&&!isNaN(e.lat)&&!isNaN(e.lng)}async function ep(e,t){try{if(!t)return"Hi my name is [Name] I am a [job title]. I love [skills] and bring a sense of fun to every shift. I trained at [experience] and my favourite [skill] is [specific skill]. I am great with [strengths] - i hope we can work together";let i=et("gigfolioCoach","portfolioGuidance","Create a personalized video introduction script"),r=ee("onboarding","Profile creation for video introduction"),a=ei("profileCreation","Video introduction script creation","Generate a 30-second video script"),o=`${i}

${r}

${a}

Based on the following form data, create a personalized 30-second video introduction script that includes:
- Their first name (if available)
- Their job title/role (inferred from skills/experience)
- Their key skills and strengths
- Their experience background
- Their personality/approach to work
- A natural closing

Form Data:
${JSON.stringify(e,null,2)}

Rules:
1. Keep it around 30 seconds when spoken (about 2-3 sentences)
2. Be conversational and natural - like how someone would actually speak
3. Infer job titles from skills/experience if not explicitly stated
4. Include specific details from their profile
5. Make it sound enthusiastic and professional
6. Use their actual name if provided
7. Reference their specific skills and experience
8. End with a positive note about working together
9. Make it sound authentic and personal

Example format:
"Hi my name is [Name] I am a [job title]. I love [skills] and bring a sense of fun to every shift. I trained at [experience] and my favourite [skill] is [specific skill]. I am great with [strengths] - i hope we can work together"

Create a natural, engaging script that showcases their unique profile.`,n=await (0,F.rL)("gemini-2.0-flash",{prompt:o,responseSchema:ec.object({properties:{script:ec.string()}}),isStream:!1},t);if(n.ok&&n.data){let t=n.data.script;return e.firstName&&(t=(t=t.replace(/\[Name\]/gi,e.firstName)).replace(/\[name\]/gi,e.firstName)),e.location&&"string"==typeof e.location&&(t=(t=t.replace(/\[location\]/gi,e.location)).replace(/\[Location\]/gi,e.location)),e.jobTitle&&(t=(t=t.replace(/\[job title\]/gi,e.jobTitle)).replace(/\[Job title\]/gi,e.jobTitle)),e.skills&&(t=(t=t.replace(/\[skills\]/gi,e.skills)).replace(/\[Skills\]/gi,e.skills)),e.experience&&(t=(t=t.replace(/\[experience\]/gi,e.experience)).replace(/\[Experience\]/gi,e.experience)),t}}catch(e){console.error("AI video script generation failed:",e)}return"Hi my name is [Name] I am a [job title]. I love [skills] and bring a sense of fun to every shift. I trained at [experience] and my favourite [skill] is [specific skill]. I am great with [strengths] - i hope we can work together"}async function em(e,t){try{let i=await V(e,t);if(i)return{jobTitle:i.jobTitle.title,confidence:i.confidence,matchedTerms:i.matchedTerms,isAISuggested:i.isAISuggested}}catch(e){console.error("Job title interpretation failed:",e)}return null}async function ef(e,t,i){try{let t=e?.userId;if(!t)return console.error("No user ID provided for escalation"),`ERROR-${Date.now()}`;let r=await B({userId:t,issueType:"onboarding_difficulty",description:`Onboarding escalation: ${i}. User struggling with AI onboarding process.`,contextType:"onboarding"});if(r.success&&r.issueId)return r.issueId;return console.error("❌ Failed to create escalated issue:",r.error),`SUPPORT-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}catch(e){return console.error("Failed to save support case to database:",e),`SUPPORT-${Date.now()}-${Math.random().toString(36).substr(2,9)}`}}async function ey(e,t){try{if(!t)return`You are a ${e.about||"worker"} with ${e.experience||"experience"} with skills including ${e.skills||"various skills"}, charging \xa3${e.hourlyRate||"0"} per hour, stationed in ${e.location||"your location"}, and available ${e.availability?"during your specified times":"as needed"}.`;let i=et("gigfolioCoach","profileBuilding","Generate a natural profile summary"),r=ee("onboarding","Profile summary generation"),a=ei("profileCreation","Profile summary creation","Create a conversational profile summary"),o=`${i}

${r}

${a}

Based on the following form data, create a natural summary in this format:
"You are a [job title] with [experience] with [skills] charging [hourly rate] stationed in [location], you are available [availability]..."

Form Data:
${JSON.stringify(e,null,2)}

Rules:
1. Be conversational and natural - like talking to a friend
2. Infer job titles from skills/experience if not explicitly stated
3. Format rates with \xa3 symbol (e.g., "\xa315 per hour")
4. Make availability sound natural (e.g., "Monday to Friday 9-5")
5. Use extracted information intelligently
6. Keep it concise but comprehensive
7. Make it sound professional but friendly

Create a natural summary that flows well and sounds like a human describing the worker.`,n=await (0,F.rL)("gemini-2.0-flash",{prompt:o,responseSchema:O.Sj.object({properties:{summary:O.Sj.string()}}),isStream:!1},t);if(n.ok&&n.data)return n.data.summary}catch(e){console.error("AI profile summary generation failed:",e)}return`You are a ${e.about||"worker"} with ${e.experience||"experience"} with skills including ${e.skills||"various skills"}, charging \xa3${e.hourlyRate||"0"} per hour, stationed in ${e.location||"your location"}, and available ${e.availability?"during your specified times":"as needed"}.`}function eh(e){if(!e)throw Error("Worker profile ID is required to build recommendation link");return`http://localhost:3000/worker/${e}/recommendation`}async function eg(e,t,i){if(!e||!i)return console.error("Missing required parameters for prompt generation"),ei("profileCreation",`Field: ${e}`,`Tell me more about your ${e}`);try{let r=O.Sj.object({properties:{prompt:O.Sj.string()}}),a=et("gigfolioCoach","Profile Creation",`Generate a friendly, contextual prompt for the next question about: ${e}`),o=`Previous conversation context: About: "${t||"Not provided"}"
Next field to ask about: "${e}"

Field-specific guidance for WORKERS:
- experience: Ask about their work history, relevant experience, or professional background as a worker
- skills: Ask about their specific skills, certifications, or qualifications they can offer to clients
- hourlyRate: Ask about their preferred hourly rate for their services in British Pounds (\xa3)
- location: Ask about their location with context about finding nearby gig opportunities
- availability: Ask about when they are available to work for clients
- videoIntro: Ask about recording a video introduction to help clients get to know them
- references: Ask about references or testimonials from previous clients or employers

The prompt should:
1. Be conversational and natural - avoid repetitive phrases
2. Reference what they've already shared about themselves in a fresh way
3. Be specific to the field being asked about
4. Include relevant emojis to make it engaging
5. Provide helpful context or examples when appropriate
6. Vary your language - don't start every message the same way
7. ALWAYS stay focused on worker onboarding - this is for creating a worker profile

Be creative and natural in your responses. Don't repeat the same phrases or structure. Make each message feel fresh and conversational.`,n=`${a}

${o}`,s=await (0,F.rL)("gemini-2.0-flash",{prompt:n,responseSchema:r,isStream:!1},i);if(s.ok&&s.data)return s.data.prompt||ei("profileCreation",`Field: ${e}`,`Tell me more about your ${e}`)}catch(e){console.error("AI prompt generation failed:",e)}return ei("profileCreation",`Field: ${e}`,`Tell me more about your ${e}`)}let ex=({formData:e,ai:t})=>{let[i,o]=(0,a.useState)("Generating your personalized script..."),[n,s]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{try{s(!0);let i=await ep(e,t);o(i)}catch(e){o("Hi my name is [Name] I am a [job title]. I love [skills] and bring a sense of fun to every shift. I trained at [experience] and my favourite [skill] is [specific skill]. I am great with [strengths] - i hope we can work together")}finally{s(!1)}})()},[e,t]),(0,r.jsxs)("div",{style:{background:"#1a1a1a",border:"1px solid #333",borderRadius:"12px",padding:"20px",marginBottom:"16px"},children:[(0,r.jsx)("div",{style:{color:"var(--primary-color)",fontWeight:600,fontSize:"16px",marginBottom:"12px"},children:"\uD83C\uDFAC AI-Generated Video Script"}),(0,r.jsx)("div",{style:{color:"#e5e5e5",fontSize:"15px",lineHeight:"1.6",fontStyle:"italic",background:"#2a2a2a",padding:"16px",borderRadius:"8px",border:"1px solid #444"},children:n?(0,r.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[(0,r.jsx)("div",{style:{width:"16px",height:"16px",border:"2px solid #666",borderTop:"2px solid var(--primary-color)",borderRadius:"50%",animation:"spin 1s linear infinite"}}),i]}):i}),(0,r.jsx)("div",{style:{color:"#888",fontSize:"13px",marginTop:"12px",fontStyle:"italic"},children:"\uD83D\uDCA1 This script is personalized based on your profile. Feel free to modify it or use it as inspiration!"})]})};function eb(){let{user:e,loading:t}=(0,I.A)(),{ai:i}=(0,$.D)(),d=(0,o.useRouter)(),u=(0,a.useRef)(null),p=(0,a.useRef)(null),[m,f]=(0,a.useState)({}),[y,x]=(0,a.useState)(!1),[b,v]=(0,a.useState)(null),[k,w]=(0,a.useState)([{id:1,type:"bot",content:X.gigfolioCoach.welcome+" \uD83C\uDF89 I'm here to help you create the perfect worker profile so you can find gig opportunities! You're creating a profile to showcase your skills and availability to potential clients. Tell me about yourself and what kind of work you can offer - What's your background?"},{id:2,type:"input",inputConfig:{type:ed[0].type,name:ed[0].name,placeholder:ed[0].placeholder,rows:ed[0].rows},isComplete:!1}]),[S,N]=(0,a.useState)({}),[T,A]=(0,a.useState)(!1),[R,P]=(0,a.useState)(null),[D,B]=(0,a.useState)(!1),[z,G]=(0,a.useState)(null),[H,U]=(0,a.useState)(!1),[V,K]=(0,a.useState)(new Set),[Y,J]=(0,a.useState)(new Set),[Q,Z]=(0,a.useState)(0),[ee,ei]=(0,a.useState)(!1),[eo,ec]=(0,a.useState)(null),[ep,eb]=(0,a.useState)(!0),[ev,ek]=(0,a.useState)(null),[ew,ej]=(0,a.useState)({}),[eS,eN]=(0,a.useState)(null),eC=(0,a.useCallback)(e=>ed.find(t=>!e[t.name]),[]);(0,a.useCallback)((e,t)=>{let i=k.filter(e=>("input"===e.type||"calendar"===e.type||"location"===e.type)&&!e.isComplete).pop();return e.id===i?.id},[k]);let eT=(0,a.useCallback)(e=>{ek(e),eb(!1),"manual"===e&&ej(m)},[m]),eI=(0,a.useCallback)(()=>{ek("ai"),f(e=>({...e,...ew}))},[ew]),e_=(0,a.useCallback)(async t=>{if(!e?.token)return void G("Authentication required. Please sign in again.");x(!0);try{let i={about:t.about||"",experience:t.experience||"",skills:t.skills||"",equipment:"string"==typeof t.equipment&&t.equipment.trim().length>0?t.equipment.split(",").map(e=>({name:e.trim(),description:void 0})):[],hourlyRate:String(t.hourlyRate||""),location:t.location||"",availability:t.availability||{days:[],startTime:"09:00",endTime:"17:00"},videoIntro:t.videoIntro||"",time:t.time||"",jobTitle:t.jobTitle||""};(await en(i,e.token)).success?d.push(`/user/${e?.uid}/worker`):G("Failed to save profile. Please try again.")}catch(e){console.error("Manual form submission error:",e),G("Failed to save profile. Please try again.")}finally{x(!1)}},[d,e?.uid,e?.token]),eA=(0,a.useCallback)(()=>{eb(!0),ek(null),ej({})},[]),eR=(0,a.useCallback)(async(e,t,r)=>{if(!t)return{sufficient:!1,clarificationPrompt:"Please provide some information so I can help you create the perfect worker profile!"};let a=String(t).trim();try{if(!i)return console.error("AI service not available"),G("AI service temporarily unavailable. Please try again."),{sufficient:!0,sanitized:a};let o=O.Sj.object({properties:{isAppropriate:O.Sj.boolean(),isWorkerRelated:O.Sj.boolean(),isSufficient:O.Sj.boolean(),clarificationPrompt:O.Sj.string(),sanitizedValue:O.Sj.string(),naturalSummary:O.Sj.string(),extractedData:O.Sj.string()}}),n=et("gigfolioCoach","Profile Validation",`Validate and intelligently sanitize the following input for field: ${e}`),s=`Previous context from this conversation:
${Object.entries(m).filter(([t,i])=>i&&t!==e).map(([e,t])=>`${e}: ${t}`).join(", ")}

Current field being validated: "${e}"
User input: "${a}"
Input type: "${r}"

ENHANCED VALIDATION & SANITIZATION REQUIREMENTS:

1. **Basic Validation:**
   - isAppropriate: Check if content is appropriate for professional worker profile
   - isWorkerRelated: Check if content relates to worker skills/experience (be VERY lenient)
   - isSufficient: Check if content provides basic information

2. **Intelligent Sanitization & Data Extraction:**
   - naturalSummary: Create a natural, conversational summary for user confirmation
   - extractedData: Extract and structure key information as JSON string

3. **Field-Specific Intelligence:**
   - **experience**: Infer job title from context, extract duration, format naturally
     Example: "25 years of experience" → "Ah, so you have 25 years of experience as a cashier, right?"
   - **hourlyRate**: Convert to pounds (\xa3), format properly
     Example: "15" → "Got it, you're charging \xa315 per hour, correct?"
   - **location**: Extract coordinates, format address naturally
   - **availability**: Extract days, times, format as natural schedule
   - **skills**: Extract skill names, categorize, format naturally

4. **Natural Summary Examples:**
   - User: "25 years of experience" → AI: "Got it, you have 25 years of experience as a cashier, right?"
   - User: "15" → AI: "Perfect! You're charging \xa315 per hour for your services, correct?"
   - User: "Monday to Friday 9-5" → AI: "So you're available Monday to Friday from 9 AM to 5 PM, right?"

5. **Data Extraction Format (JSON string):**
   {
     "jobTitle": "cashier",
     "duration": "25 years",
     "rate": "\xa315",
     "location": "London",
     "skills": ["customer service", "cash handling"]
   }

IMPORTANT: Always provide a naturalSummary that asks for user confirmation in a conversational way. The user should feel like you're understanding and confirming their input, not just processing it.

If validation passes, respond with:
- isAppropriate: true
- isWorkerRelated: true
- isSufficient: true
- clarificationPrompt: ""
- sanitizedValue: string (cleaned version)
- naturalSummary: string (natural confirmation question)
- extractedData: string (JSON string of extracted data)

If validation fails, respond with:
- isAppropriate: boolean
- isWorkerRelated: boolean
- isSufficient: boolean
- clarificationPrompt: string (friendly guidance)
- sanitizedValue: string
- naturalSummary: string
- extractedData: string

WORKER ONBOARDING CONTEXT: Remember, this user is creating a worker profile to find gig opportunities. They are the worker/employee looking to be hired. Keep responses focused on worker onboarding only.

Be conversational, intelligent, and always ask for confirmation in natural language.`,l=`${n}

${s}`,c=await (0,F.rL)("gemini-2.0-flash",{prompt:l,responseSchema:o,isStream:!1},i);if(c.ok&&c.data){let i=c.data;if(!i.isAppropriate||!i.isWorkerRelated||!i.isSufficient)return{sufficient:!1,clarificationPrompt:i.clarificationPrompt||"Please provide appropriate worker-related information."};if(eu(t))return{sufficient:!0,sanitized:t};if("availability"===e)try{if("string"==typeof t&&t.match(/^\d{4}-\d{2}-\d{2}$/))return{sufficient:!0,sanitized:t};if("string"==typeof t&&t.includes("T"))return{sufficient:!0,sanitized:t.split("T")[0]};if(t instanceof Date)return{sufficient:!0,sanitized:t.toISOString().split("T")[0]}}catch(e){console.error("Date validation error:",e)}return{sufficient:!0,sanitized:i.sanitizedValue||a,naturalSummary:i.naturalSummary,extractedData:i.extractedData}}}catch(t){console.error("AI validation failed:",t),G("AI validation failed. Please try again.");let e=q("AI processing failed",{retryCount:1,conversationLength:k.length,userRole:"worker",gigId:void 0});e.shouldEscalate&&W(e,"AI validation failed",{userRole:"worker",conversationLength:k.length})}return{sufficient:!0,sanitized:a}},[m,i]),eP=(0,a.useCallback)(async(t,r,a)=>{let o=a??m[r];if(!o)return void console.warn("No value provided for input:",r);try{if("string"==typeof o){let t=q(o,{retryCount:0,conversationLength:k.length,userRole:"worker",gigId:void 0});if(t.shouldEscalate){let i=W(t,o,{userRole:"worker",conversationLength:k.length}),r=await ef({userId:e?.uid,formData:m},k,i);ec(r),ei(!0),w(e=>[...e,{id:Date.now()+1,type:"bot",content:`I understand you're having trouble with the AI onboarding process. I've created a support case (${r}) and our team will be in touch shortly.`,isNew:!0},{id:Date.now()+2,type:"support",isNew:!0}]);return}}let a=k.find(e=>e.id===t),n=k.findIndex(e=>e.id===t),s=k.slice(0,n).reverse().find(e=>"bot"===e.type&&e.content);if(s&&s.content&&function(e,t){let i=e.toLowerCase().trim(),r=t.toLowerCase(),a=["problem","broken","not working","error","speak to someone","talk to human","real person","fuck","shit","damn","bitch","ass","asshole","bastard","crap","piss","dick","pussy","cunt","whore","slut","fucker","motherfucker","fucking","shitty","damned","bloody","bugger","wanker","twat","bellend","knob","prick","tosser","arse","bollocks","wank","fanny","minge","gash","snatch","cooch","pussy","vagina","penis","dick","willy","johnson"].some(e=>!!(i.includes(e)||i.includes(`i ${e}`)||i.includes(`please ${e}`))),o=e.trim().length<15,n=(r.match(/\b\w+\b/g)||[]).filter(e=>e.length>3).some(e=>i.includes(e)),s=["developer","web developer","frontend developer","backend developer","full stack developer","designer","ui designer","ux designer","graphic designer","manager","project manager","event manager","sales manager","assistant","admin assistant","executive assistant","consultant","freelancer","contractor","chef","cook","bartender","server","waiter","waitress","receptionist","cashier","barista","baker","security","guard","technician","operator",/\d+/,/\d+\s*(pound|pounds|£|gbp|per\s*hour|hourly|rate)/i,"yes","no","ok","okay","sure","fine","good","great","london","manchester","birmingham","leeds","liverpool","sheffield","edinburgh","glasgow","cardiff","belfast","bristol","newcastle","leicester","coventry","nottingham","southampton"].some(e=>"string"==typeof e?i.includes(e):e instanceof RegExp&&e.test(i)),l={jobTitle:/(job|title|position|role|what\s*do\s*you\s*do|profession)/i.test(r),rate:/(rate|price|cost|hourly|per\s*hour|how\s*much|charge)/i.test(r),location:/(location|where|city|area|place)/i.test(r),availability:/(available|when|time|schedule|hours)/i.test(r),yesNo:/(yes|no|do\s*you|can\s*you|would\s*you|are\s*you)/i.test(r)},c=l.jobTitle||l.rate||l.location||l.yesNo;return a||o&&!n&&!s&&!c}(o,s.content)){let t=Q+1;if(Z(t),!(t>=3))return void w(e=>[...e,{id:Date.now()+1,type:"bot",content:`I notice your response might not be related to the current question. Please try to answer the specific question I asked. If you need help, you can ask me to clarify. (Unrelated response ${t}/3)`,isNew:!0}]);{let t=await ef({userId:e?.uid,formData:m},k,"Multiple unrelated responses - user struggling with AI onboarding");ec(t),ei(!0),w(e=>[...e,{id:Date.now()+1,type:"bot",content:`I understand you're having trouble with the AI onboarding process. I've created a support case (${t}) and our team will be in touch shortly.`,isNew:!0},{id:Date.now()+2,type:"support",isNew:!0}]);return}}let l=a?.inputConfig?.type||"text",c=R===r;w(e=>e.map(e=>e.id===t?{...e,isComplete:!0}:e)),w(e=>[...e,{id:Date.now()+1,type:"typing",isNew:!0}]);let d=await eR(r,o,l);if(w(e=>e.filter(e=>"typing"!==e.type).map(e=>e.id===t?{...e,isComplete:!0}:e)),!d.sufficient){w(e=>{let t=a?.type==="location"?"location":a?.type==="calendar"?"calendar":"input",i=a?.inputConfig??{type:"text",name:r,placeholder:""};return[...e,{id:Date.now()+2,type:"bot",content:d.clarificationPrompt,isNew:!0},{id:Date.now()+3,type:t,inputConfig:i,isComplete:!1,isNew:!0}]}),v(r);return}if(c){f(e=>({...e,[r]:d.sanitized})),B(!1),P(null);let e={...m,[r]:d.sanitized},t=eC(e);if(t){if("references"===t.name){if(!eS)return void console.error("Worker profile not yet created");let t=eh(eS),r={...e,references:t};f(r),w(e=>[...e,{id:Date.now()+3,type:"bot",content:`You need one reference per skill, from previous managers, colleagues or teachers.

If you do not have experience you can get a character reference from a friend or someone in your network. 

Share this link to get your reference

Send this link to get your reference: ${t}

Please check out your gigfolio and share with your network 

`,isNew:!0}]),setTimeout(()=>{w(e=>[...e,{id:Date.now()+4,type:"bot",content:"if your connections make a hire on Able you get \xa35!",isNew:!0}])},1500),setTimeout(()=>{w(e=>[...e,{id:Date.now()+5,type:"bot",content:"Watch out for notifications of your first shift offer! If you don't accept within 90 minutes we will offer the gig to someone else.",isNew:!0}])},1500),setTimeout(()=>{w(e=>[...e,{id:Date.now()+6,type:"bot",content:"We might offer you gigs outside of your defined skill area, watch out for those opportunities too!",isNew:!0}])},3e3),setTimeout(async()=>{let e=eC(r);if(e){let t=r.about||"",a=await eg(e.name,t,i),o={type:e.type,name:e.name,placeholder:e.placeholder,...e.rows&&{rows:e.rows}},n="input";"availability"===e.name?n="availability":"location"===e.name?n="location":"videoIntro"===e.name&&(n="video"),w(e=>[...e,{id:Date.now()+6,type:"bot",content:a,isNew:!0},{id:Date.now()+7,type:n,inputConfig:o,isComplete:!1,isNew:!0}])}else w(e=>[...e,{id:Date.now()+6,type:"summary",summaryData:r,isNew:!0}])},4500);return}let r=e.about||"",a=await eg(t.name,r,i),o={type:t.type,name:t.name,placeholder:t.placeholder,...t.rows&&{rows:t.rows}},n="input";"availability"===t.name?n="availability":"location"===t.name?n="location":"videoIntro"===t.name&&(n="video"),w(e=>[...e,{id:Date.now()+6,type:"bot",content:a,isNew:!0},{id:Date.now()+7,type:n,inputConfig:o,isComplete:!1,isNew:!0}])}else w(t=>[...t,{id:Date.now()+5,type:"summary",summaryData:e,isNew:!0}])}else if("experience"===r||"about"===r){let e=await em(o,i);e&&e.confidence>=50?w(t=>[...t,{id:Date.now()+3,type:"jobTitleConfirmation",fieldName:r,originalValue:o,suggestedJobTitle:e.jobTitle,confidence:e.confidence,matchedTerms:e.matchedTerms,isAISuggested:e.isAISuggested,isNew:!0}]):w(e=>[...e,{id:Date.now()+3,type:"sanitized",fieldName:r,sanitizedValue:d.sanitized,originalValue:o,naturalSummary:d.naturalSummary,extractedData:d.extractedData,isNew:!0}])}else w(e=>[...e,{id:Date.now()+3,type:"sanitized",fieldName:r,sanitizedValue:d.sanitized,originalValue:o,naturalSummary:d.naturalSummary,extractedData:d.extractedData,isNew:!0}])}catch(e){console.error("Error processing input:",e),G("Failed to process input. Please try again."),R===r&&(B(!1),P(null))}},[m,k,eR,R,eC,i]),eM=(0,a.useCallback)(async(e,t,r)=>{try{let r={...m,[e]:t};f(r),w(t=>t.map(t=>"jobTitleConfirmation"===t.type&&t.fieldName===e?{...t,isComplete:!0}:t));let a=eC(r);if(a){let e=await eg(a.name,a.defaultPrompt,i),t={type:a.type,name:a.name,placeholder:a.placeholder,...a.rows&&{rows:a.rows}},r="input";"availability"===a.name?r="availability":"location"===a.name?r="location":"videoIntro"===a.name&&(r="video"),w(i=>[...i,{id:Date.now()+6,type:"bot",content:e,isNew:!0},{id:Date.now()+7,type:r,inputConfig:t,isComplete:!1,isNew:!0}])}else w(e=>[...e,{id:Date.now()+5,type:"summary",summaryData:r,isNew:!0}])}catch(e){console.error("Error confirming job title:",e),G("Failed to confirm job title. Please try again.")}},[m,k,eC,i]),eE=(0,a.useCallback)(async(e,t)=>{try{let r={...m,[e]:t};f(r),w(t=>t.map(t=>"jobTitleConfirmation"===t.type&&t.fieldName===e?{...t,isComplete:!0}:t));let a=eC(r);if(a){let e=await eg(a.name,a.defaultPrompt,i),t={type:a.type,name:a.name,placeholder:a.placeholder,...a.rows&&{rows:a.rows}},r="input";"availability"===a.name?r="availability":"location"===a.name?r="location":"videoIntro"===a.name&&(r="video"),w(i=>[...i,{id:Date.now()+6,type:"bot",content:e,isNew:!0},{id:Date.now()+7,type:r,inputConfig:t,isComplete:!1,isNew:!0}])}else w(e=>[...e,{id:Date.now()+5,type:"summary",summaryData:r,isNew:!0}])}catch(e){console.error("Error rejecting job title:",e),G("Failed to process job title rejection. Please try again.")}},[m,k,eC,i]),eD=(0,a.useCallback)(async(e,t)=>{try{B(!1),P(null),J(t=>new Set([...t,`${e}-confirm`]));let r={...m,[e]:t};f(r),w(t=>t.map(t=>"sanitized"===t.type&&t.fieldName===e?{...t,isComplete:!0}:t));let a=eC(r);if(a){if("references"===a.name){if(!eS)return void console.error("Worker profile not yet created");let r=eh(eS),a={...m,[e]:t,references:r};f(a),w(e=>[...e,{id:Date.now()+2,type:"bot",content:`You need one reference per skill, from previous managers, colleagues or teachers. If you do not have experience you can get a character reference from a friend or someone in your network. Share this link to get your reference: ${r}

Please check out your gigfolio and share with your network 

`,isNew:!0}]),setTimeout(()=>{w(e=>[...e,{id:Date.now()+3,type:"bot",content:"if your connections make a hire on Able you get \xa35!",isNew:!0}])},1500),setTimeout(()=>{w(e=>[...e,{id:Date.now()+4,type:"bot",content:"Watch out for notifications of your first shift offer! If you don't accept within 90 minutes we will offer the gig to someone else.",isNew:!0}])},1500),setTimeout(()=>{w(e=>[...e,{id:Date.now()+5,type:"bot",content:"We might offer you gigs outside of your defined skill area, watch out for those opportunities too!",isNew:!0}])},3e3),setTimeout(async()=>{let e=eC(a);if(e){let t=a.about||"",r=await eg(e.name,t,i),o={type:e.type,name:e.name,placeholder:e.placeholder,...e.rows&&{rows:e.rows}};w(t=>[...t,{id:Date.now()+5,type:"bot",content:r,isNew:!0},{id:Date.now()+6,type:"location"===e.type?"location":"availability"===e.type?"availability":"date"===e.type?"calendar":"video"===e.type?"video":"input",inputConfig:o,isComplete:!1,isNew:!0}])}else w(e=>[...e,{id:Date.now()+4,type:"typing",isNew:!0}]),setTimeout(async()=>{let e=await ey(a,i);w(t=>[...t.filter(e=>"typing"!==e.type),{id:Date.now()+5,type:"bot",content:`Perfect! ${e}`,isNew:!0},{id:Date.now()+6,type:"summary",summaryData:a,isNew:!0}])},700)},4500);return}let o=r.about||("about"===e?"string"==typeof t?t:JSON.stringify(t):"");w(e=>[...e,{id:Date.now()+2,type:"typing",isNew:!0}]),setTimeout(async()=>{let e=await eg(a.name,o,i);w(t=>{let i=t.filter(e=>"typing"!==e.type),r={type:a.type,name:a.name,placeholder:a.placeholder,...a.rows&&{rows:a.rows}};return[...i,{id:Date.now()+3,type:"bot",content:e,isNew:!0},{id:Date.now()+4,type:"location"===a.type?"location":"date"===a.type?"calendar":"video"===a.type?"video":"input",inputConfig:r,isComplete:!1,isNew:!0}]})},700)}else w(e=>[...e,{id:Date.now()+4,type:"typing",isNew:!0}]),setTimeout(async()=>{w(e=>[...e.filter(e=>"typing"!==e.type),{id:Date.now()+5,type:"summary",summaryData:r,isNew:!0}])},700)}catch(e){console.error("Error in sanitized confirmation:",e),G("Failed to process confirmation. Please try again.")}},[m,eC,i]),eL=e=>{D||(P(e),J(t=>new Set([...t,`${e}-reformulate`])))},e$=(0,a.useCallback)(async(e,t)=>{U(!0),K(t=>new Set([...t,e])),w(t=>t.map(t=>t.id===e?{...t,isComplete:!0}:t)),w(e=>[...e,{id:Date.now()+1,type:"typing",isNew:!0}]);let r=m[t];f(e=>({...e,[t]:r}));let a=eC({...m,[t]:r});if(a){if("references"===a.name){if(!eS)return void console.error("Worker profile not yet created");let e=eh(eS),t={...m,references:e};f(t),w(t=>[...t,{id:Date.now()+2,type:"bot",content:`You need one reference per skill, from previous managers, colleagues or teachers.

If you do not have experience you can get a character reference from a friend or someone in your network.

Share this link to get your reference: ${e}

Please check out your gigfolio and share with your network 

if your connections make a hire on Able you get \xa35!`,isNew:!0}]);let r=eC(t);if(r){let e=await eg(r.name,m.about||"",i);setTimeout(()=>{w(t=>[...t.filter(e=>"typing"!==e.type),{id:Date.now()+4,type:"bot",content:e,isNew:!0},{id:Date.now()+5,type:"location"===r.type?"location":"availability"===r.type?"availability":"date"===r.type?"calendar":"video"===r.type?"video":"input",inputConfig:{type:r.type,name:r.name,placeholder:r.placeholder,rows:r.rows},isComplete:!1,isNew:!0}])},700)}else setTimeout(async()=>{w(e=>[...e.filter(e=>"typing"!==e.type),{id:Date.now()+6,type:"summary",summaryData:t,isNew:!0}])},700);return void U(!1)}let e=await eg(a.name,m.about||"",i);setTimeout(()=>{w(t=>[...t.filter(e=>"typing"!==e.type),{id:Date.now()+2,type:"bot",content:e,isNew:!0},{id:Date.now()+3,type:"location"===a.type?"location":"availability"===a.type?"availability":"date"===a.type?"calendar":"video"===a.type?"video":"input",inputConfig:{type:a.type,name:a.name,placeholder:a.placeholder,rows:a.rows},isComplete:!1}])},700)}else setTimeout(async()=>{w(e=>[...e.filter(e=>"typing"!==e.type),{id:Date.now()+2,type:"summary",summaryData:{...m,[t]:r},isNew:!0}])},700);U(!1)},[m,i,eC]),eF=(0,a.useCallback)((e,t)=>{try{"availability"===e?"object"==typeof t&&null!==t&&"days"in t?f(i=>({...i,[e]:t})):t?("string"==typeof t&&t.includes("T")&&t.split("T")[0],t instanceof Date&&t.toISOString().split("T")[0],f(t=>({...t,[e]:{days:[],startTime:"09:00",endTime:"17:00"}}))):f(t=>({...t,[e]:{days:[],startTime:"09:00",endTime:"17:00"}})):f(i=>({...i,[e]:t}))}catch(e){console.error("Error handling input change:",e),G("Failed to update input. Please try again.")}},[]),eO=(0,a.useCallback)(async(t,i,r)=>{if(!e||!i||void 0===r){console.error("Missing required parameters for video upload"),G("Failed to upload video. Please try again.");return}if(!t||0===t.size){console.error("Invalid file for video upload"),G("Invalid video file. Please try again.");return}if(t.size>0x3200000)return void G("Video file too large. Please use a file smaller than 50MB.");try{let r=`workers/${e.uid}/introVideo/introduction-${encodeURI(e.email??e.uid)}.webm`,a=(0,er.KR)((0,er.c7)(ea.xv),r),o=(0,er.bp)(a,t);o.on("state_changed",e=>{e.bytesTransferred,e.totalBytes},e=>{console.error("Upload failed:",e),G("Video upload failed. Please try again.")},()=>{(0,er.qk)(o.snapshot.ref).then(t=>{(0,es.$)(e.token,t),eF(i,t),w(e=>[...e,{id:Date.now()+1,type:"sanitized",fieldName:i,sanitizedValue:"Video introduction recorded successfully! \uD83C\uDFA5",originalValue:"Video uploaded",naturalSummary:"I saved the video introduction! \uD83C\uDFA5",extractedData:JSON.stringify({videoIntro:t}),isNew:!0}])}).catch(e=>{console.error("Failed to get download URL:",e),G("Failed to get video URL. Please try again.")})})}catch(e){console.error("Video upload error:",e),G("Failed to upload video. Please try again.")}},[e,eF,eP]);if(t)return(0,r.jsx)("div",{className:L().loadingContainer,children:(0,r.jsx)("p",{children:"Loading authentication..."})});if(!e)return(0,r.jsx)(E.A,{});let eB=(0,a.useCallback)(e=>{let t=k.find(e=>("input"===e.type||"calendar"===e.type||"location"===e.type)&&!e.isComplete);t&&(w(t=>[...t,{id:Date.now(),type:"user",content:e,isNew:!0}]),eF(t.inputConfig.name,e),eP(t.id,t.inputConfig.name,e))},[k,eF,eP]);return ep?(0,r.jsx)(C,{isOpen:ep,onChoice:eT}):"manual"===ev?(0,r.jsxs)("div",{className:L().container,children:[z&&(0,r.jsx)("div",{style:{background:"#ff4444",color:"white",padding:"8px 16px",margin:"8px 0",borderRadius:"4px",fontSize:"14px"},children:z}),(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",padding:"16px",borderBottom:"1px solid #444444",background:"#161616"},children:(0,r.jsxs)("button",{onClick:eA,style:{display:"flex",alignItems:"center",gap:"8px",padding:"8px 16px",background:"transparent",border:"1px solid #a0a0a0",borderRadius:"8px",color:"#a0a0a0",fontSize:"14px",fontWeight:"500",cursor:"pointer",transition:"all 0.2s ease"},onMouseOver:e=>{e.currentTarget.style.background="#a0a0a0",e.currentTarget.style.color="#161616"},onMouseOut:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.color="#a0a0a0"},children:[(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M12 5V1L7 6l5 5V7c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6H4c0 4.42 3.58 8 8 8s8-3.58 8-8-3.58-8-8-8z",fill:"currentColor"})}),"Change Setup Method"]})}),(0,r.jsx)(M,{onSubmit:e_,onSwitchToAI:eI,initialData:ew,workerProfileId:eS})]}):(0,r.jsxs)(s.A,{ref:u,className:L().container,role:"GIG_WORKER",showChatInput:!0,onSendMessage:eB,showOnboardingOptions:!0,onSwitchToManual:()=>{ek("manual"),ej(m)},onChangeSetupMethod:eA,children:[z&&(0,r.jsx)("div",{style:{background:"#ff4444",color:"white",padding:"8px 16px",margin:"8px 0",borderRadius:"4px",fontSize:"14px"},children:z}),k.map((t,a)=>{let o=`${t.id}-${a}`;if("support"===t.type)return(0,r.jsx)(l.A,{text:(0,r.jsxs)("div",{style:{background:"#222",color:"#fff",borderRadius:8,padding:16,margin:"16px 0",boxShadow:"0 2px 8px #0002"},children:[(0,r.jsx)("h3",{style:{marginTop:0,color:"var(--primary-color)"},children:"Need Human Support?"}),(0,r.jsx)("p",{style:{marginBottom:16,color:"#e5e5e5"},children:"I understand you're having trouble with the AI onboarding. Here are your options:"}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[(0,r.jsx)("button",{style:{background:"var(--primary-color)",color:"#fff",border:"none",borderRadius:8,padding:"12px 16px",fontWeight:600,cursor:"pointer",transition:"all 0.3s ease"},onClick:()=>{ek("manual"),eb(!1)},children:"Switch to Manual Form Input"}),(0,r.jsx)("button",{style:{background:"rgba(255, 255, 255, 0.1)",color:"#fff",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:8,padding:"12px 16px",fontWeight:600,cursor:"pointer",transition:"all 0.3s ease"},onClick:()=>{window.open("mailto:support@able-ai.com?subject=AI Onboarding Support Needed","_blank")},children:"Contact Support Team"})]}),eo&&(0,r.jsxs)("p",{style:{marginTop:16,fontSize:"14px",color:"#ccc",fontStyle:"italic"},children:["Support Case ID: ",eo]})]}),senderType:"bot"},o);if("summary"===t.type)return(0,r.jsx)(l.A,{text:(0,r.jsxs)("div",{style:{background:"#222",color:"#fff",borderRadius:8,padding:16,margin:"16px 0",boxShadow:"0 2px 8px #0002"},children:[(0,r.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"16px",borderRadius:"8px",marginBottom:"16px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,r.jsx)("p",{style:{margin:0,fontSize:"16px",lineHeight:"1.6",color:"#e5e5e5"},children:"All profile information collected! Ready to go to your dashboard?"})}),(0,r.jsxs)("button",{style:{marginTop:16,background:y?"#666":"var(--primary-color)",color:"#fff",border:"none",borderRadius:8,padding:"8px 16px",fontWeight:600,transition:"all 0.3s ease",transform:"scale(1)",animation:y?"none":"pulse 2s infinite",cursor:y?"not-allowed":"pointer"},disabled:y,onClick:async()=>{if(!e?.token)return void G("Authentication required. Please sign in again.");try{x(!0);let i={about:t.summaryData?.about||"",experience:t.summaryData?.experience||"",skills:t.summaryData?.skills||"",equipment:"string"==typeof t.summaryData?.equipment&&t.summaryData.equipment.trim().length>0?t.summaryData.equipment.split(",").map(e=>({name:e.trim(),description:void 0})):[],hourlyRate:String(t.summaryData?.hourlyRate||""),location:t.summaryData?.location||"",availability:t.summaryData?.availability||{days:[],startTime:"09:00",endTime:"17:00"},videoIntro:t.summaryData?.videoIntro||"",references:t.summaryData?.references||"",jobTitle:t.summaryData?.jobTitle||""};(await en(i,e.token)).success?d.push(`/user/${e?.uid}/worker`):G("Failed to save profile. Please try again.")}catch(e){console.error("Error saving profile:",e),G("Failed to save profile. Please try again.")}finally{x(!1)}},onMouseOver:e=>{e.currentTarget.style.transform="scale(1.05)",e.currentTarget.style.background="var(--primary-darker-color)"},onMouseOut:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.background="var(--primary-color)"},children:[(0,r.jsx)("style",{children:`
                      @keyframes pulse {
                        0% {
                          box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.7);
                        }
                        70% {
                          box-shadow: 0 0 0 10px rgba(37, 99, 235, 0);
                        }
                        100% {
                          box-shadow: 0 0 0 0 rgba(37, 99, 235, 0);
                        }
                      }
                    `}),y?"Saving Profile...":"Confirm & Go to Dashboard"]})]}),senderType:"bot"},o);if("sanitized"===t.type){let e=t.naturalSummary||"Is this correct?",i=((()=>{let e=t.sanitizedValue;if("videoIntro"===t.fieldName&&"string"==typeof e)return;if(e&&"object"==typeof e&&"lat"in e&&"lng"in e){let t=e.lat,i=e.lng,r="number"==typeof t?t.toFixed(6):String(t),a="number"==typeof i?i.toFixed(6):String(i);return}if("string"==typeof e){try{let t=JSON.parse(e);if(t&&"object"==typeof t&&"lat"in t&&"lng"in t){let e=t.lat,i=t.lng,r="number"==typeof e?e.toFixed(6):String(e),a="number"==typeof i?i.toFixed(6):String(i);return`Lat: ${r}, Lng: ${a}`}}catch(e){}return}return"object"==typeof e?JSON.stringify(e):String(e||"")})(),Y.has(`${t.fieldName}-confirm`)),a=Y.has(`${t.fieldName}-reformulate`),n=R===t.fieldName,s=t.isComplete||i||a;return(0,r.jsx)(l.A,{text:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{marginBottom:16,color:"var(--primary-color)",fontWeight:600,fontSize:"16px",lineHeight:"1.4"},children:e}),(0,r.jsxs)("div",{style:{display:"flex",gap:12},children:[(0,r.jsx)("button",{style:{background:s?"#555":"var(--primary-color)",color:"#fff",border:"none",borderRadius:8,padding:"8px 16px",fontWeight:600,fontSize:"14px",cursor:s?"not-allowed":"pointer",transition:"background-color 0.2s",opacity:s?.7:1},onClick:s?void 0:()=>eD(t.fieldName,t.sanitizedValue),disabled:s,onMouseOver:e=>{s||(e.currentTarget.style.background="var(--primary-darker-color)")},onMouseOut:e=>{s||(e.currentTarget.style.background=s?"#555":"var(--primary-color)")},children:i?"Confirmed":"Confirm"}),(0,r.jsx)("button",{style:{background:s?"#555":"transparent",color:s?"#999":"var(--primary-color)",border:"1px solid var(--primary-color)",borderRadius:8,padding:"8px 16px",fontWeight:600,fontSize:"14px",cursor:s?"not-allowed":"pointer",transition:"all 0.2s",opacity:s?.7:1},onClick:s?void 0:()=>eL(t.fieldName),disabled:s,onMouseOver:e=>{s||(e.currentTarget.style.background="var(--primary-color)",e.currentTarget.style.color="#fff")},onMouseOut:e=>{s||(e.currentTarget.style.background="transparent",e.currentTarget.style.color="var(--primary-color)")},children:a?"videoIntro"===t.fieldName?"Re-shot":"Edited":n?"videoIntro"===t.fieldName?"Re-shooting...":"Editing...":"videoIntro"===t.fieldName?"Re-shoot":"Edit message"})]})]}),senderType:"bot",role:"GIG_WORKER",showAvatar:!0},o)}if("typing"===t.type)return(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",marginBottom:"0.5rem"},children:(0,r.jsx)("div",{style:{flexShrink:0,marginTop:"0.25rem"},children:(0,r.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, var(--primary-color), var(--primary-darker-color))",boxShadow:"0 2px 8px rgba(37, 99, 235, 0.3)"},children:(0,r.jsx)("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"#000000",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid rgba(255, 255, 255, 0.2)"},children:(0,r.jsx)(n.default,{src:"/images/ableai.png",alt:"Able AI",width:24,height:24,style:{borderRadius:"50%",objectFit:"cover"}})})})})},`${o}-avatar`),(0,r.jsx)("div",{children:(0,r.jsx)(el,{})},`${o}-typing`)]},o);if("bot"===t.type){if(t.content&&"string"==typeof t.content&&(t.content.includes("You need one reference per skill")||t.content.includes("Watch out for notifications")||t.content.includes("We might offer you gigs")))return(0,r.jsxs)("div",{className:"messageWrapper alignBot","data-role":"GIG_WORKER",style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",marginBottom:"1rem"},children:[(0,r.jsx)("div",{style:{flexShrink:0,width:"32px"}})," ",(0,r.jsx)("div",{className:"bubble bubbleBot",style:{maxWidth:"70%",padding:"0.75rem 1rem",borderRadius:"18px",fontSize:"14px",lineHeight:"1.4",wordWrap:"break-word",backgroundColor:"#333",color:"#fff",borderBottomLeftRadius:"4px"},children:t.content.includes("You need one reference per skill")?t.content.split(/(https?:\/\/[^\s\n]+)/g).map((e,t)=>e.match(/(https?:\/\/[^\s\n]+)/g)?(0,r.jsxs)("div",{style:{display:"inline-flex",alignItems:"center",gap:"8px",flexWrap:"wrap",margin:"4px 0"},children:[(0,r.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",style:{color:"#41a1e8",textDecoration:"underline",wordBreak:"break-all"},children:"Send this link to your reference"}),(0,r.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(e),alert("Link copied to clipboard!")},style:{background:"transparent",border:"1px solid #41a1e8",borderRadius:"4px",padding:"6px",color:"#41a1e8",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",width:"28px",height:"28px"},onMouseOver:e=>{e.currentTarget.style.background="#41a1e8",e.currentTarget.style.color="white"},onMouseOut:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.color="#41a1e8"},title:"Copy link",children:(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"})})}),navigator.share&&(0,r.jsx)("button",{onClick:()=>{navigator.share({title:"Worker Reference Link",text:"Please use this link to provide a reference:",url:e})},style:{background:"transparent",border:"1px solid #41a1e8",borderRadius:"4px",padding:"6px",color:"#41a1e8",cursor:"pointer",transition:"all 0.2s ease",display:"flex",alignItems:"center",justifyContent:"center",width:"28px",height:"28px"},onMouseOver:e=>{e.currentTarget.style.background="#41a1e8",e.currentTarget.style.color="white"},onMouseOut:e=>{e.currentTarget.style.background="transparent",e.currentTarget.style.color="#41a1e8"},title:"Share link",children:(0,r.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:(0,r.jsx)("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"})})})]},`url-${t}-${e}`):(0,r.jsx)("span",{children:e},`text-${t}`)):t.content})]},o);if(t.content&&"string"==typeof t.content&&t.content.includes("{"))try{let i=t.content.match(/\{[\s\S]*\}/);if(i){let a=JSON.parse(i[0]);return(0,r.jsx)(l.A,{text:(0,r.jsxs)("div",{style:{background:"#222",color:"#fff",borderRadius:8,padding:16,margin:"16px 0",boxShadow:"0 2px 8px #0002"},children:[(0,r.jsx)("h3",{style:{marginTop:0},children:"Profile Information"}),(0,r.jsx)("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"16px",borderRadius:"8px",marginBottom:"16px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:(0,r.jsx)("p",{style:{margin:0,fontSize:"16px",lineHeight:"1.6",color:"#e5e5e5"},children:(()=>{if(t.content&&"string"==typeof t.content){let e=t.content.match(/Perfect! (.+)/);return e?e[1]:(0,r.jsx)("ul",{style:{listStyle:"none",padding:0},children:ed.map(e=>(0,r.jsxs)("li",{style:{marginBottom:8},children:[(0,r.jsxs)("strong",{style:{textTransform:"capitalize"},children:[e.name.replace(/([A-Z])/g," $1"),": "]}),(0,r.jsx)("span",{children:function(e,t){if(!e)return"Not provided";try{if("location"===t&&eu(e)){if("object"==typeof e&&"formatted_address"in e&&e.formatted_address)return e.formatted_address;return`Lat: ${e.lat.toFixed(6)}, Lng: ${e.lng.toFixed(6)}`}if("availability"===t){if("object"==typeof e&&null!==e&&"days"in e){let t=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}],i=e.days.map(e=>t.find(t=>t.value===e)?.label).join(", ");return`${i} ${e.startTime} - ${e.endTime}`}if(!e||!function(e){if(!e)return!1;try{let t=new Date(e);return!isNaN(t.getTime())}catch{return!1}}(e))return"";try{return new Date(e).toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(t){return console.error("Date formatting error:",t),String(e)}}if("hourlyRate"===t){let t="string"==typeof e?parseFloat(e):e;return isNaN(t)?String(e):`\xa3${t}`}if("equipment"===t){if("string"==typeof e)return e;if(Array.isArray(e))return e.map(e=>e.name||e).join(", ");return String(e)}if("videoIntro"===t&&"string"==typeof e&&e.startsWith("http"))return"Video uploaded ✓";return String(e)}catch(t){return console.error("Summary value formatting error:",t),String(e)}}(a[e.name],e.name)})]},e.name))})}return"Loading profile summary..."})()})}),(0,r.jsxs)("button",{style:{marginTop:16,background:y?"#666":"var(--primary-color)",color:"#fff",border:"none",borderRadius:8,padding:"8px 16px",fontWeight:600,transition:"all 0.3s ease",transform:"scale(1)",animation:y?"none":"pulse 2s infinite",cursor:y?"not-allowed":"pointer"},disabled:y,onClick:async()=>{if(!e?.token)return void G("Authentication required. Please sign in again.");try{if(x(!0),parseFloat(String(a.hourlyRate||"0"))<_.WORKER.MIN_HOURLY_RATE){G(`Hourly rate must be at least \xa3${_.WORKER.MIN_HOURLY_RATE}. Please update your rate and try again.`),x(!1);return}let t={about:a.about||"",experience:a.experience||"",skills:a.skills||"",equipment:a.equipment?a.equipment.split(",").map(e=>({name:e.trim(),description:void 0})):[],hourlyRate:String(a.hourlyRate||""),location:a.location||"",availability:a.availability||{days:[],startTime:"09:00",endTime:"17:00"},videoIntro:a.videoIntro||"",references:a.references||"",jobTitle:a.jobTitle||""};(await en(t,e.token)).success?d.push(`/user/${e?.uid}/worker`):G("Failed to save profile. Please try again.")}catch(e){console.error("Error saving profile:",e),G("Failed to save profile. Please try again.")}finally{x(!1)}},onMouseOver:e=>{e.currentTarget.style.transform="scale(1.05)",e.currentTarget.style.background="var(--primary-darker-color)"},onMouseOut:e=>{e.currentTarget.style.transform="scale(1)",e.currentTarget.style.background="var(--primary-color)"},children:[(0,r.jsx)("style",{children:`
                             @keyframes pulse {
                               0% {
                                 box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.7);
                               }
                               70% {
                                 box-shadow: 0 0 0 10px rgba(37, 99, 235, 0);
                               }
                               100% {
                                 box-shadow: 0 0 0 0 rgba(37, 99, 235, 0);
                               }
                             }
                           `}),y?"Saving Profile...":"Confirm & Go to Dashboard"]})]}),senderType:"bot",role:"GIG_WORKER"},o)}}catch(e){console.error("Failed to parse summary JSON:",e)}return(0,r.jsx)(l.A,{text:t.content,senderType:"bot",isNew:t.isNew,role:"GIG_WORKER"},o)}if("user"===t.type)return(0,r.jsx)(l.A,{text:"object"==typeof t.content&&null!==t.content?JSON.stringify(t.content):String(t.content||""),senderType:"user",showAvatar:!1,isNew:t.isNew,role:"GIG_WORKER"},o);if("input"===t.type)return null;if("shareLink"===t.type)return(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:(0,r.jsx)(j,{linkUrl:t.linkUrl,linkText:t.linkText})},o);if("calendar"===t.type)return(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,r.jsx)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",marginBottom:"0.5rem"},children:(0,r.jsx)("div",{style:{flexShrink:0,marginTop:"0.25rem"},children:(0,r.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, var(--primary-color), var(--primary-darker-color))",boxShadow:"0 2px 8px rgba(37, 99, 235, 0.3)"},children:(0,r.jsx)("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"#000000",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid rgba(255, 255, 255, 0.2)"},children:(0,r.jsx)(n.default,{src:"/images/ableai.png",alt:"Able AI",width:24,height:24,style:{borderRadius:"50%",objectFit:"cover"}})})})})}),(0,r.jsx)(c.A,{value:"string"==typeof m.availability&&m.availability?new Date(m.availability):null,onChange:e=>eF("availability",e?e.toISOString():"")}),!V.has(t.id)&&(0,r.jsx)("div",{style:{marginTop:"12px",display:"flex",justifyContent:"flex-end"},children:(0,r.jsx)("button",{style:{background:H?"#555":"var(--primary-color)",border:"none",borderRadius:"8px",padding:"8px 16px",fontWeight:600,fontSize:"14px",cursor:H?"not-allowed":"pointer",transition:"background-color 0.2s",opacity:H?.7:1},onClick:()=>e$(t.id,"availability"),onMouseOver:e=>{H||(e.currentTarget.style.background="var(--primary-darker-color)")},onMouseOut:e=>{H||(e.currentTarget.style.background="var(--primary-color)")},disabled:H,children:H?"Confirming...":"Confirm Date"})}),V.has(t.id)&&(0,r.jsx)("div",{style:{marginTop:"12px",display:"flex",justifyContent:"flex-end"},children:(0,r.jsxs)("div",{style:{background:"var(--primary-color)",border:"none",borderRadius:"8px",padding:"8px 16px",fontWeight:600,fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,r.jsx)("span",{children:"✓"}),"Date Confirmed"]})})]},o);if("availability"===t.type){let e=[{value:"monday",label:"Monday"},{value:"tuesday",label:"Tuesday"},{value:"wednesday",label:"Wednesday"},{value:"thursday",label:"Thursday"},{value:"friday",label:"Friday"},{value:"saturday",label:"Saturday"},{value:"sunday",label:"Sunday"}],i="object"==typeof m.availability?m.availability:{days:[],startTime:"09:00",endTime:"17:00",frequency:"never",ends:"never"},a=e=>{let t=i.days.includes(e)?i.days.filter(t=>t!==e):[...i.days,e];eF("availability",{...i,days:t})};return(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,r.jsx)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",marginBottom:"0.5rem"},children:(0,r.jsx)("div",{style:{flexShrink:0,marginTop:"0.25rem"},children:(0,r.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, var(--primary-color), var(--primary-darker-color))",boxShadow:"0 2px 8px rgba(37, 99, 235, 0.3)"},children:(0,r.jsx)("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"#000000",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid rgba(255, 255, 255, 0.2)"},children:(0,r.jsx)(n.default,{src:"/images/ableai.png",alt:"Able AI",width:24,height:24,style:{borderRadius:"50%",objectFit:"cover"}})})})})}),(0,r.jsxs)("div",{style:{background:"#2F2F2F",border:"2px solid #444444",borderRadius:"12px",padding:"20px",color:"#ffffff"},children:[(0,r.jsx)("h3",{style:{margin:"0 0 16px 0",fontSize:"18px",fontWeight:"600"},children:"Set Your Weekly Availability"}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Available Days *"}),(0,r.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))",gap:"8px"},children:e.map(e=>(0,r.jsx)("button",{type:"button",style:{padding:"8px 12px",border:`2px solid ${i.days.includes(e.value)?"#41a1e8":"#444444"}`,borderRadius:"8px",background:i.days.includes(e.value)?"#41a1e8":"transparent",color:i.days.includes(e.value)?"#ffffff":"#a0a0a0",cursor:"pointer",transition:"all 0.2s ease",fontSize:"14px",fontWeight:"500"},onClick:()=>a(e.value),onMouseOver:t=>{i.days.includes(e.value)||(t.currentTarget.style.borderColor="#41a1e8",t.currentTarget.style.color="#ffffff")},onMouseOut:t=>{i.days.includes(e.value)||(t.currentTarget.style.borderColor="#444444",t.currentTarget.style.color="#a0a0a0")},children:e.label},e.value))})]}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Available Hours *"}),(0,r.jsxs)("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},children:[(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,r.jsx)("label",{style:{fontSize:"12px",color:"#a0a0a0",fontWeight:"500"},children:"From:"}),(0,r.jsx)("input",{type:"time",style:{padding:"8px 12px",border:"2px solid #444444",borderRadius:"8px",background:"#1A1A1A",color:"#ffffff",fontSize:"14px"},value:i.startTime,onChange:e=>eF("availability",{...i,startTime:e.target.value})})]}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"4px"},children:[(0,r.jsx)("label",{style:{fontSize:"12px",color:"#a0a0a0",fontWeight:"500"},children:"To:"}),(0,r.jsx)("input",{type:"time",style:{padding:"8px 12px",border:"2px solid #444444",borderRadius:"8px",background:"#1A1A1A",color:"#ffffff",fontSize:"14px"},value:i.endTime,onChange:e=>eF("availability",{...i,endTime:e.target.value})})]})]})]}),(0,r.jsxs)("div",{style:{marginBottom:"20px"},children:[(0,r.jsx)("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500"},children:"Recurring Pattern"}),(0,r.jsxs)("div",{style:{display:"flex",gap:"12px",alignItems:"center",flexWrap:"wrap"},children:[(0,r.jsxs)("select",{style:{padding:"8px 12px",border:"2px solid #444444",borderRadius:"8px",background:"#1A1A1A",color:"#ffffff",fontSize:"14px",minWidth:"120px"},value:i.frequency||"never",onChange:e=>eF("availability",{...i,frequency:e.target.value}),children:[(0,r.jsx)("option",{value:"never",children:"No repeat"}),(0,r.jsx)("option",{value:"weekly",children:"Every week"}),(0,r.jsx)("option",{value:"biweekly",children:"Every 2 weeks"}),(0,r.jsx)("option",{value:"monthly",children:"Every month"})]}),(0,r.jsxs)("select",{style:{padding:"8px 12px",border:"2px solid #444444",borderRadius:"8px",background:"#1A1A1A",color:"#ffffff",fontSize:"14px",minWidth:"120px"},value:i.ends||"never",onChange:e=>eF("availability",{...i,ends:e.target.value,endDate:void 0,occurrences:void 0}),children:[(0,r.jsx)("option",{value:"never",children:"Never ends"}),(0,r.jsx)("option",{value:"on_date",children:"Until date"}),(0,r.jsx)("option",{value:"after_occurrences",children:"After number of times"})]}),"on_date"===i.ends&&(0,r.jsx)("input",{type:"date",style:{padding:"8px 12px",border:"2px solid #444444",borderRadius:"8px",background:"#1A1A1A",color:"#ffffff",fontSize:"14px"},value:i.endDate||"",min:new Date().toISOString().split("T")[0],onChange:e=>eF("availability",{...i,endDate:e.target.value})}),"after_occurrences"===i.ends&&(0,r.jsx)("input",{type:"number",min:"1",max:"100",placeholder:"Times",style:{padding:"8px 12px",border:"2px solid #444444",borderRadius:"8px",background:"#1A1A1A",color:"#ffffff",fontSize:"14px",width:"80px"},value:i.occurrences||"",onChange:e=>eF("availability",{...i,occurrences:parseInt(e.target.value)||1})})]})]}),(0,r.jsxs)("div",{style:{background:"#1A1A1A",padding:"12px",borderRadius:"8px",border:"1px solid #444444",fontSize:"14px",color:"#a0a0a0"},children:[(0,r.jsx)("strong",{children:"Preview:"})," ",i.days.length>0?`${i.days.map(t=>e.find(e=>e.value===t)?.label).join(", ")} ${i.startTime} - ${i.endTime}`+(i.frequency&&"never"!==i.frequency?` (${"weekly"===i.frequency?"Every week":"biweekly"===i.frequency?"Every 2 weeks":"monthly"===i.frequency?"Every month":""})`:"")+("on_date"===i.ends&&i.endDate?` until ${new Date(i.endDate).toLocaleDateString()}`:"")+("after_occurrences"===i.ends&&i.occurrences?` (${i.occurrences} times)`:""):"Please select days and times"]})]}),!V.has(t.id)&&(0,r.jsx)("div",{style:{marginTop:"12px",display:"flex",justifyContent:"flex-end"},children:(0,r.jsx)("button",{style:{background:H?"#555":"var(--primary-color)",border:"none",borderRadius:"8px",padding:"8px 16px",fontWeight:600,fontSize:"14px",cursor:H?"not-allowed":"pointer",transition:"background-color 0.2s",opacity:H?.7:1},onClick:()=>e$(t.id,"availability"),onMouseOver:e=>{H||(e.currentTarget.style.background="var(--primary-darker-color)")},onMouseOut:e=>{H||(e.currentTarget.style.background="var(--primary-color)")},disabled:H||0===i.days.length,children:H?"Confirming...":"Confirm Availability"})}),V.has(t.id)&&(0,r.jsx)("div",{style:{marginTop:"12px",display:"flex",justifyContent:"flex-end"},children:(0,r.jsxs)("div",{style:{background:"var(--primary-color)",border:"none",borderRadius:"8px",padding:"8px 16px",fontWeight:600,fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,r.jsx)("span",{children:"✓"}),"Availability Confirmed"]})})]},o)}return"location"===t.type?(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,r.jsx)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",marginBottom:"0.5rem"},children:(0,r.jsx)("div",{style:{flexShrink:0,marginTop:"0.25rem"},children:(0,r.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, var(--primary-color), var(--primary-darker-color))",boxShadow:"0 2px 8px rgba(37, 99, 235, 0.3)"},children:(0,r.jsx)("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"#000000",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid rgba(255, 255, 255, 0.2)"},children:(0,r.jsx)(n.default,{src:"/images/ableai.png",alt:"Able AI",width:24,height:24,style:{borderRadius:"50%",objectFit:"cover"}})})})})}),(0,r.jsx)(g.A,{value:m.location,onChange:e=>eF("location",e),showConfirm:!1,onConfirm:()=>e$(t.id,"location"),role:"GIG_WORKER"}),!V.has(t.id)&&(0,r.jsx)("div",{style:{marginTop:"12px",display:"flex",justifyContent:"flex-end"},children:(0,r.jsx)("button",{style:{background:H?"#555":"var(--primary-color)",border:"none",borderRadius:"8px",padding:"8px 16px",fontWeight:600,fontSize:"14px",cursor:H?"not-allowed":"pointer",transition:"background-color 0.2s",opacity:H?.7:1},onClick:()=>e$(t.id,"location"),onMouseOver:e=>{H||(e.currentTarget.style.background="var(--primary-darker-color)")},onMouseOut:e=>{H||(e.currentTarget.style.background="var(--primary-color)")},disabled:H,children:H?"Confirming...":"Confirm Location"})}),V.has(t.id)&&(0,r.jsx)("div",{style:{marginTop:"12px",display:"flex",justifyContent:"flex-end"},children:(0,r.jsxs)("div",{style:{background:"var(--primary-color)",border:"none",borderRadius:"8px",padding:"8px 16px",fontWeight:600,fontSize:"14px",display:"flex",alignItems:"center",gap:"8px"},children:[(0,r.jsx)("span",{children:"✓"}),"Location Confirmed"]})})]},o):"jobTitleConfirmation"===t.type?(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,r.jsx)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",marginBottom:"0.5rem"},children:(0,r.jsx)("div",{style:{flexShrink:0,marginTop:"0.25rem"},children:(0,r.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, var(--primary-color), var(--primary-darker-color))",boxShadow:"0 2px 8px rgba(37, 99, 235, 0.3)"},children:(0,r.jsx)("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"#000000",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid rgba(255, 255, 255, 0.2)"},children:(0,r.jsx)(n.default,{src:"/images/ableai.png",alt:"Able AI",width:24,height:24,style:{borderRadius:"50%",objectFit:"cover"}})})})})}),(0,r.jsxs)("div",{style:{background:"#1a1a1a",border:"1px solid #333",borderRadius:"12px",padding:"20px",marginBottom:"16px"},children:[(0,r.jsxs)("div",{style:{color:"var(--primary-color)",fontWeight:600,fontSize:"16px",marginBottom:"12px"},children:["\uD83C\uDFAF Suggested Standardized Job Title",t.isAISuggested&&(0,r.jsx)("span",{style:{color:"#10b981",fontSize:"14px",fontWeight:500,marginLeft:"8px"},children:"\uD83E\uDD16 AI Suggested"})]}),(0,r.jsxs)("div",{style:{color:"#e5e5e5",fontSize:"15px",lineHeight:"1.6",marginBottom:"16px"},children:['Based on your description "',t.originalValue,'", I suggest the standardized job title:',t.isAISuggested&&(0,r.jsx)("div",{style:{color:"#10b981",fontSize:"13px",marginTop:"8px",fontStyle:"italic"},children:"This title was AI-suggested as it wasn't in our standard taxonomy but closely matches your description."})]}),(0,r.jsxs)("div",{style:{background:"#2a2a2a",padding:"16px",borderRadius:"8px",border:"1px solid #444",marginBottom:"16px"},children:[(0,r.jsx)("div",{style:{color:"var(--primary-color)",fontWeight:600,fontSize:"18px",marginBottom:"8px"},children:t.suggestedJobTitle}),(0,r.jsxs)("div",{style:{color:"#888",fontSize:"13px"},children:["Matched: ",t.matchedTerms?.join(", ")]})]}),(0,r.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[(0,r.jsx)("button",{onClick:()=>eM(t.fieldName,t.suggestedJobTitle,t.originalValue),style:{background:"var(--primary-color)",color:"white",border:"none",borderRadius:"8px",padding:"10px 20px",fontWeight:600,cursor:"pointer",fontSize:"14px"},onMouseOver:e=>{e.currentTarget.style.background="var(--primary-darker-color)"},onMouseOut:e=>{e.currentTarget.style.background="var(--primary-color)"},children:"Use This Title"}),(0,r.jsx)("button",{onClick:()=>eE(t.fieldName,t.originalValue),style:{background:"#444",color:"white",border:"none",borderRadius:"8px",padding:"10px 20px",fontWeight:600,cursor:"pointer",fontSize:"14px"},onMouseOver:e=>{e.currentTarget.style.background="#555"},onMouseOut:e=>{e.currentTarget.style.background="#444"},children:"Keep Original"})]})]})]},o):"video"===t.type?(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[(0,r.jsx)("div",{style:{display:"flex",alignItems:"flex-start",gap:"0.5rem",marginBottom:"0.5rem"},children:(0,r.jsx)("div",{style:{flexShrink:0,marginTop:"0.25rem"},children:(0,r.jsx)("div",{style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(135deg, var(--primary-color), var(--primary-darker-color))",boxShadow:"0 2px 8px rgba(37, 255, 235, 0.3)"},children:(0,r.jsx)("div",{style:{width:"28px",height:"28px",borderRadius:"50%",background:"#000000",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid rgba(255, 255, 255, 0.2)"},children:(0,r.jsx)(n.default,{src:"/images/ableai.png",alt:"Able AI",width:24,height:24,style:{borderRadius:"50%",objectFit:"cover"}})})})})}),(0,r.jsx)(ex,{formData:m,ai:i}),(0,r.jsx)(h,{onVideoRecorded:e=>eO(e,t.inputConfig?.name,t.id)})]},o):null}),(0,r.jsx)("div",{ref:p})]})}},91645:e=>{"use strict";e.exports=require("net")},92602:e=>{"use strict";e.exports=import("firebase-admin/messaging")},93397:(e,t,i)=>{Promise.resolve().then(i.bind(i,86246))},94735:e=>{"use strict";e.exports=require("events")},97680:e=>{e.exports={}},97868:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>r});let r=(0,i(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/onboarding-ai/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/onboarding-ai/page.tsx","default")}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),r=t.X(0,[4447,9558,1658,6533,2002,7715,3132,8709,544,6637,683,8881,6844],()=>i(73036));module.exports=r})();