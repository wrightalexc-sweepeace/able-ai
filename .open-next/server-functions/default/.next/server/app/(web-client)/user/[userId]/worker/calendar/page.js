(()=>{var e={};e.id=8713,e.ids=[8713],e.modules={222:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addPathSuffix",{enumerable:!0,get:function(){return n}});let a=r(4e4);function n(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:i}=(0,a.parsePath)(e);return""+r+t+n+i}},1160:e=>{e.exports={overlay:"ClearAvailabilityAlert_overlay__atoUO",alertDialog:"ClearAvailabilityAlert_alertDialog__n_FJG",alertHeader:"ClearAvailabilityAlert_alertHeader__wREio",alertContent:"ClearAvailabilityAlert_alertContent__0WKZY",alertActions:"ClearAvailabilityAlert_alertActions__JE7rA",cancelButton:"ClearAvailabilityAlert_cancelButton__uno4W",clearButton:"ClearAvailabilityAlert_clearButton__SfZe2"}},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7879:e=>{"use strict";e.exports=import("firebase-admin/firestore")},7944:(e,t,r)=>{let a={unstable_cache:r(41220).e,revalidateTag:r(51851).revalidateTag,revalidatePath:r(51851).revalidatePath,unstable_expireTag:r(51851).unstable_expireTag,unstable_expirePath:r(51851).unstable_expirePath,unstable_noStore:r(18446).M,unstable_cacheLife:r(83409).F,unstable_cacheTag:r(10421).z};e.exports=a,t.unstable_cache=a.unstable_cache,t.revalidatePath=a.revalidatePath,t.revalidateTag=a.revalidateTag,t.unstable_expireTag=a.unstable_expireTag,t.unstable_expirePath=a.unstable_expirePath,t.unstable_noStore=a.unstable_noStore,t.unstable_cacheLife=a.unstable_cacheLife,t.unstable_cacheTag=a.unstable_cacheTag},9539:(e,t,r)=>{"use strict";r.d(t,{g:()=>n});var a=r(6475);let n=(0,a.createServerReference)("40a6088411db4989a2f014a668b13745b3cfee1afe",a.callServer,void 0,a.findSourceMapURL,"getWorkerOffers")},9835:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isDynamicRoute",{enumerable:!0,get:function(){return o}});let a=r(31666),n=/\/[^/]*\[[^/]+\][^/]*(?=\/|$)/,i=/\/\[[^/]+\](?=\/|$)/;function o(e,t){return(void 0===t&&(t=!0),(0,a.isInterceptionRouteAppPath)(e)&&(e=(0,a.extractInterceptionRouteInformation)(e).interceptedRoute),t)?i.test(e):n.test(e)}},9900:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{"400cd1fa767ef5281508e93e3ca1d7a0d11ad8371f":()=>n.qM,"402e2448f83fdc0f1b31fdff1de0016567c7fd3feb":()=>c.U,"4036dcb842d9aeecc172ee483ab65d207e7f190ce8":()=>i.Cj,"403f8cb45f5e5b474c81428620ebac15c27e362dc8":()=>s.O,"404660310a5e0f58f816c762a9f12b9b33702d2493":()=>n.OH,"406285e4a5b3e01ac696468e89531313be16ecb429":()=>u.Z,"4065d83c4d83b37b580f0b4dea60f265a115cab33f":()=>o.Q,"40a6088411db4989a2f014a668b13745b3cfee1afe":()=>l.g,"40bcfd414a2446406921fe5bddeb7f04b82b554661":()=>n.Rz,"40c90f51c0218da5778bfd271dd21f1e3242896133":()=>i.mt,"601708a8489638a525e9866148cf379839397520a2":()=>o.p,"60976633aa90a3960f31dd64f4fd8496ccbdb52456":()=>n.a6,"60c141735362d4faf5095ec886ca7f0ed74eccec21":()=>i.Lb,"60c8159956a4599f9e9a8543bfe7d8c1b38a042d33":()=>i.M8,"60e7f34a33097c37a8e1219f48e58834e6fa037656":()=>n.r2,"7081229772f4cf291c8c7f3e0520c53fab2f5c316b":()=>i.updateAvailabilitySlot,"7fad076ff87a53fb2dc1878d8dc87b650c1a1b2caa":()=>n.gL});var n=r(29034),i=r(50346),o=r(65793),s=r(9356),l=r(63659),c=r(43455),u=r(32699),d=e([n,i,o,s,l,c,u]);[n,i,o,s,l,c,u]=d.then?(await d)():d,a()}catch(e){a(e)}})},10421:(e,t,r)=>{"use strict";function a(...e){throw Object.defineProperty(Error("cacheTag() is only available with the experimental.useCache config."),"__NEXT_ERROR_CODE",{value:"E628",enumerable:!1,configurable:!0})}Object.defineProperty(t,"z",{enumerable:!0,get:function(){return a}}),r(63033),r(24624)},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},10920:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{NEXT_REQUEST_META:function(){return r},addRequestMeta:function(){return i},getRequestMeta:function(){return a},removeRequestMeta:function(){return o},setRequestMeta:function(){return n}});let r=Symbol.for("NextInternalRequestMeta");function a(e,t){let a=e[r]||{};return"string"==typeof t?a[t]:a}function n(e,t){return e[r]=t,t}function i(e,t,r){let i=a(e);return i[t]=r,n(e,i)}function o(e,t){let r=a(e);return delete r[t],n(e,r)}},14245:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{CachedRouteKind:function(){return r},IncrementalCacheKind:function(){return a}});var r=function(e){return e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.PAGES="PAGES",e.FETCH="FETCH",e.REDIRECT="REDIRECT",e.IMAGE="IMAGE",e}({}),a=function(e){return e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.PAGES="PAGES",e.FETCH="FETCH",e.IMAGE="IMAGE",e}({})},14276:e=>{"use strict";e.exports=import("firebase-admin/auth")},14659:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{RequestCookies:function(){return a.RequestCookies},ResponseCookies:function(){return a.ResponseCookies},stringifyCookie:function(){return a.stringifyCookie}});let a=r(90036)},14985:e=>{"use strict";e.exports=require("dns")},17529:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getSortedRouteObjects:function(){return a.getSortedRouteObjects},getSortedRoutes:function(){return a.getSortedRoutes},isDynamicRoute:function(){return n.isDynamicRoute}});let a=r(26343),n=r(9835)},18446:(e,t,r)=>{"use strict";Object.defineProperty(t,"M",{enumerable:!0,get:function(){return o}});let a=r(29294),n=r(63033),i=r(75124);function o(){let e=a.workAsyncStorage.getStore(),t=n.workUnitAsyncStorage.getStore();if(e)!e.forceStatic&&(e.isUnstableNoStore=!0,t&&"prerender"===t.type||(0,i.markCurrentScopeAsDynamic)(e,t,"unstable_noStore()"))}},18463:(e,t)=>{"use strict";function r(e,t){let r;if((null==t?void 0:t.host)&&!Array.isArray(t.host))r=t.host.toString().split(":",1)[0];else{if(!e.hostname)return;r=e.hostname}return r.toLowerCase()}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getHostname",{enumerable:!0,get:function(){return r}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19136:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isAbortError:function(){return l},pipeToNodeResponse:function(){return c}});let a=r(75738),n=r(13944),i=r(44334),o=r(2720),s=r(37317);function l(e){return(null==e?void 0:e.name)==="AbortError"||(null==e?void 0:e.name)===a.ResponseAbortedName}async function c(e,t,r){try{let{errored:l,destroyed:c}=t;if(l||c)return;let u=(0,a.createAbortController)(t),d=function(e,t){let r=!1,a=new n.DetachedPromise;function l(){a.resolve()}e.on("drain",l),e.once("close",()=>{e.off("drain",l),a.resolve()});let c=new n.DetachedPromise;return e.once("finish",()=>{c.resolve()}),new WritableStream({write:async t=>{if(!r){if(r=!0,"performance"in globalThis&&process.env.NEXT_OTEL_PERFORMANCE_PREFIX){let e=(0,s.getClientComponentLoaderMetrics)();e&&performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-client-component-loading`,{start:e.clientComponentLoadStart,end:e.clientComponentLoadStart+e.clientComponentLoadTimes})}e.flushHeaders(),(0,i.getTracer)().trace(o.NextNodeServerSpan.startResponse,{spanName:"start response"},()=>void 0)}try{let r=e.write(t);"flush"in e&&"function"==typeof e.flush&&e.flush(),r||(await a.promise,a=new n.DetachedPromise)}catch(t){throw e.end(),Object.defineProperty(Error("failed to write chunk to response",{cause:t}),"__NEXT_ERROR_CODE",{value:"E321",enumerable:!1,configurable:!0})}},abort:t=>{e.writableFinished||e.destroy(t)},close:async()=>{if(t&&await t,!e.writableFinished)return e.end(),c.promise}})}(t,r);await e.pipeTo(d,{signal:u.signal})}catch(e){if(l(e))return;throw Object.defineProperty(Error("failed to pipe response",{cause:e}),"__NEXT_ERROR_CODE",{value:"E180",enumerable:!1,configurable:!0})}}},19186:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"pathHasPrefix",{enumerable:!0,get:function(){return n}});let a=r(4e4);function n(e,t){if("string"!=typeof e)return!1;let{pathname:r}=(0,a.parsePath)(e);return r===t||r.startsWith(t+"/")}},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},24624:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{NEXT_PATCH_SYMBOL:function(){return f},createPatchedFetcher:function(){return g},patchFetch:function(){return m},validateRevalidate:function(){return h},validateTags:function(){return p}});let a=r(2720),n=r(44334),i=r(36376),o=r(75124),s=r(37461),l=r(98485),c=r(75626),u=r(97748),d=r(72150),f=Symbol.for("next-patch");function h(e,t){try{let r;if(!1===e)r=i.INFINITE_CACHE;else if("number"==typeof e&&!isNaN(e)&&e>-1)r=e;else if(void 0!==e)throw Object.defineProperty(Error(`Invalid revalidate value "${e}" on "${t}", must be a non-negative number or false`),"__NEXT_ERROR_CODE",{value:"E179",enumerable:!1,configurable:!0});return r}catch(e){if(e instanceof Error&&e.message.includes("Invalid revalidate"))throw e;return}}function p(e,t){let r=[],a=[];for(let n=0;n<e.length;n++){let o=e[n];if("string"!=typeof o?a.push({tag:o,reason:"invalid type, must be a string"}):o.length>i.NEXT_CACHE_TAG_MAX_LENGTH?a.push({tag:o,reason:`exceeded max length of ${i.NEXT_CACHE_TAG_MAX_LENGTH}`}):r.push(o),r.length>i.NEXT_CACHE_TAG_MAX_ITEMS){console.warn(`Warning: exceeded max tag count for ${t}, dropped tags:`,e.slice(n).join(", "));break}}if(a.length>0)for(let{tag:e,reason:r}of(console.warn(`Warning: invalid tags passed to ${t}: `),a))console.log(`tag: "${e}" ${r}`);return r}function y(e,t){var r;if(e&&(null==(r=e.requestEndedState)?!void 0:!r.ended))((process.env.NEXT_DEBUG_BUILD||"1"===process.env.NEXT_SSG_FETCH_METRICS)&&e.isStaticGeneration||0)&&(e.fetchMetrics??=[],e.fetchMetrics.push({...t,end:performance.timeOrigin+performance.now(),idx:e.nextFetchId||0}))}function g(e,{workAsyncStorage:t,workUnitAsyncStorage:r}){let l=async(l,f)=>{var g,m;let b;try{(b=new URL(l instanceof Request?l.url:l)).username="",b.password=""}catch{b=void 0}let v=(null==b?void 0:b.href)??"",_=(null==f||null==(g=f.method)?void 0:g.toUpperCase())||"GET",w=(null==f||null==(m=f.next)?void 0:m.internal)===!0,E="1"===process.env.NEXT_OTEL_FETCH_DISABLED,A=w?void 0:performance.timeOrigin+performance.now(),S=t.getStore(),D=r.getStore(),x=D&&"prerender"===D.type?D.cacheSignal:null;x&&x.beginRead();let T=(0,n.getTracer)().trace(w?a.NextNodeServerSpan.internalFetch:a.AppRenderSpan.fetch,{hideSpan:E,kind:n.SpanKind.CLIENT,spanName:["fetch",_,v].filter(Boolean).join(" "),attributes:{"http.url":v,"http.method":_,"net.peer.name":null==b?void 0:b.hostname,"net.peer.port":(null==b?void 0:b.port)||void 0}},async()=>{var t;let r,a,n,g;if(w||!S||S.isDraftMode)return e(l,f);let m=l&&"object"==typeof l&&"string"==typeof l.method,b=e=>(null==f?void 0:f[e])||(m?l[e]:null),_=e=>{var t,r,a;return void 0!==(null==f||null==(t=f.next)?void 0:t[e])?null==f||null==(r=f.next)?void 0:r[e]:m?null==(a=l.next)?void 0:a[e]:void 0},E=_("revalidate"),T=p(_("tags")||[],`fetch ${l.toString()}`),R=D&&("cache"===D.type||"prerender"===D.type||"prerender-ppr"===D.type||"prerender-legacy"===D.type)?D:void 0;if(R&&Array.isArray(T)){let e=R.tags??(R.tags=[]);for(let t of T)e.includes(t)||e.push(t)}let C=null==D?void 0:D.implicitTags,P=D&&"unstable-cache"===D.type?"force-no-store":S.fetchCache,N=!!S.isUnstableNoStore,O=b("cache"),k="";"string"==typeof O&&void 0!==E&&("force-cache"===O&&0===E||"no-store"===O&&(E>0||!1===E))&&(r=`Specified "cache: ${O}" and "revalidate: ${E}", only one should be specified.`,O=void 0,E=void 0);let j="no-cache"===O||"no-store"===O||"force-no-store"===P||"only-no-store"===P,I=!P&&!O&&!E&&S.forceDynamic;"force-cache"===O&&void 0===E?E=!1:(null==D?void 0:D.type)!=="cache"&&(j||I)&&(E=0),("no-cache"===O||"no-store"===O)&&(k=`cache: ${O}`),g=h(E,S.route);let M=b("headers"),L="function"==typeof(null==M?void 0:M.get)?M:new Headers(M||{}),U=L.get("authorization")||L.get("cookie"),q=!["get","head"].includes((null==(t=b("method"))?void 0:t.toLowerCase())||"get"),F=void 0==P&&(void 0==O||"default"===O)&&void 0==E,$=F&&!S.isPrerendering||(U||q)&&R&&0===R.revalidate;if(F&&void 0!==D&&"prerender"===D.type)return x&&(x.endRead(),x=null),(0,s.makeHangingPromise)(D.renderSignal,"fetch()");switch(P){case"force-no-store":k="fetchCache = force-no-store";break;case"only-no-store":if("force-cache"===O||void 0!==g&&g>0)throw Object.defineProperty(Error(`cache: 'force-cache' used on fetch for ${v} with 'export const fetchCache = 'only-no-store'`),"__NEXT_ERROR_CODE",{value:"E448",enumerable:!1,configurable:!0});k="fetchCache = only-no-store";break;case"only-cache":if("no-store"===O)throw Object.defineProperty(Error(`cache: 'no-store' used on fetch for ${v} with 'export const fetchCache = 'only-cache'`),"__NEXT_ERROR_CODE",{value:"E521",enumerable:!1,configurable:!0});break;case"force-cache":(void 0===E||0===E)&&(k="fetchCache = force-cache",g=i.INFINITE_CACHE)}if(void 0===g?"default-cache"!==P||N?"default-no-store"===P?(g=0,k="fetchCache = default-no-store"):N?(g=0,k="noStore call"):$?(g=0,k="auto no cache"):(k="auto cache",g=R?R.revalidate:i.INFINITE_CACHE):(g=i.INFINITE_CACHE,k="fetchCache = default-cache"):k||(k=`revalidate: ${g}`),!(S.forceStatic&&0===g)&&!$&&R&&g<R.revalidate){if(0===g)if(D&&"prerender"===D.type)return x&&(x.endRead(),x=null),(0,s.makeHangingPromise)(D.renderSignal,"fetch()");else(0,o.markCurrentScopeAsDynamic)(S,D,`revalidate: 0 fetch ${l} ${S.route}`);R&&E===g&&(R.revalidate=g)}let H="number"==typeof g&&g>0,{incrementalCache:G}=S,B=(null==D?void 0:D.type)==="request"||(null==D?void 0:D.type)==="cache"?D:void 0;if(G&&(H||(null==B?void 0:B.serverComponentsHmrCache)))try{a=await G.generateCacheKey(v,m?l:f)}catch(e){console.error("Failed to generate cache key for",l)}let W=S.nextFetchId??1;S.nextFetchId=W+1;let X=()=>Promise.resolve(),V=async(t,n)=>{let o=["cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","window","duplex",...t?[]:["signal"]];if(m){let e=l,t={body:e._ogBody||e.body};for(let r of o)t[r]=e[r];l=new Request(e.url,t)}else if(f){let{_ogBody:e,body:r,signal:a,...n}=f;f={...n,body:e||r,signal:t?void 0:a}}let s={...f,next:{...null==f?void 0:f.next,fetchType:"origin",fetchIdx:W}};return e(l,s).then(async e=>{if(!t&&A&&y(S,{start:A,url:v,cacheReason:n||k,cacheStatus:0===g||n?"skip":"miss",cacheWarning:r,status:e.status,method:s.method||"GET"}),200===e.status&&G&&a&&(H||(null==B?void 0:B.serverComponentsHmrCache))){let t=g>=i.INFINITE_CACHE?i.CACHE_ONE_YEAR:g;if(D&&"prerender"===D.type){let r=await e.arrayBuffer(),n={headers:Object.fromEntries(e.headers.entries()),body:Buffer.from(r).toString("base64"),status:e.status,url:e.url};return await G.set(a,{kind:c.CachedRouteKind.FETCH,data:n,revalidate:t},{fetchCache:!0,fetchUrl:v,fetchIdx:W,tags:T}),await X(),new Response(r,{headers:e.headers,status:e.status,statusText:e.statusText})}{let[r,n]=(0,d.cloneResponse)(e);return r.arrayBuffer().then(async e=>{var n;let i=Buffer.from(e),o={headers:Object.fromEntries(r.headers.entries()),body:i.toString("base64"),status:r.status,url:r.url};null==B||null==(n=B.serverComponentsHmrCache)||n.set(a,o),H&&await G.set(a,{kind:c.CachedRouteKind.FETCH,data:o,revalidate:t},{fetchCache:!0,fetchUrl:v,fetchIdx:W,tags:T})}).catch(e=>console.warn("Failed to set fetch cache",l,e)).finally(X),n}}return await X(),e}).catch(e=>{throw X(),e})},Y=!1,K=!1;if(a&&G){let e;if((null==B?void 0:B.isHmrRefresh)&&B.serverComponentsHmrCache&&(e=B.serverComponentsHmrCache.get(a),K=!0),H&&!e){X=await G.lock(a);let t=S.isOnDemandRevalidate?null:await G.get(a,{kind:c.IncrementalCacheKind.FETCH,revalidate:g,fetchUrl:v,fetchIdx:W,tags:T,softTags:null==C?void 0:C.tags});if(F&&D&&"prerender"===D.type&&await (0,u.waitAtLeastOneReactRenderTask)(),t?await X():n="cache-control: no-cache (hard refresh)",(null==t?void 0:t.value)&&t.value.kind===c.CachedRouteKind.FETCH)if(S.isRevalidate&&t.isStale)Y=!0;else{if(t.isStale&&(S.pendingRevalidates??={},!S.pendingRevalidates[a])){let e=V(!0).then(async e=>({body:await e.arrayBuffer(),headers:e.headers,status:e.status,statusText:e.statusText})).finally(()=>{S.pendingRevalidates??={},delete S.pendingRevalidates[a||""]});e.catch(console.error),S.pendingRevalidates[a]=e}e=t.value.data}}if(e){A&&y(S,{start:A,url:v,cacheReason:k,cacheStatus:K?"hmr":"hit",cacheWarning:r,status:e.status||200,method:(null==f?void 0:f.method)||"GET"});let t=new Response(Buffer.from(e.body,"base64"),{headers:e.headers,status:e.status});return Object.defineProperty(t,"url",{value:e.url}),t}}if(S.isStaticGeneration&&f&&"object"==typeof f){let{cache:e}=f;if("no-store"===e)if(D&&"prerender"===D.type)return x&&(x.endRead(),x=null),(0,s.makeHangingPromise)(D.renderSignal,"fetch()");else(0,o.markCurrentScopeAsDynamic)(S,D,`no-store fetch ${l} ${S.route}`);let t="next"in f,{next:r={}}=f;if("number"==typeof r.revalidate&&R&&r.revalidate<R.revalidate){if(0===r.revalidate)if(D&&"prerender"===D.type)return(0,s.makeHangingPromise)(D.renderSignal,"fetch()");else(0,o.markCurrentScopeAsDynamic)(S,D,`revalidate: 0 fetch ${l} ${S.route}`);S.forceStatic&&0===r.revalidate||(R.revalidate=r.revalidate)}t&&delete f.next}if(!a||!Y)return V(!1,n);{let e=a;S.pendingRevalidates??={};let t=S.pendingRevalidates[e];if(t){let e=await t;return new Response(e.body,{headers:e.headers,status:e.status,statusText:e.statusText})}let r=V(!0,n).then(d.cloneResponse);return(t=r.then(async e=>{let t=e[0];return{body:await t.arrayBuffer(),headers:t.headers,status:t.status,statusText:t.statusText}}).finally(()=>{var t;(null==(t=S.pendingRevalidates)?void 0:t[e])&&delete S.pendingRevalidates[e]})).catch(()=>{}),S.pendingRevalidates[e]=t,r.then(e=>e[1])}});if(x)try{return await T}finally{x&&x.endRead()}return T};return l.__nextPatched=!0,l.__nextGetStaticStore=()=>t,l._nextOriginalFetch=e,globalThis[f]=!0,l}function m(e){if(!0===globalThis[f])return;let t=(0,l.createDedupeFetch)(globalThis.fetch);globalThis.fetch=g(t,e)}},24909:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>K});var a=r(60687),n=r(43210),i=r.n(n),o=r(16189),s=r(28666),l=r(4252),c=r(46294),u=r(3763),d=r(21295),f=r(61401),h=r(6475);let p=(0,h.createServerReference)("4036dcb842d9aeecc172ee483ab65d207e7f190ce8",h.callServer,void 0,h.findSourceMapURL,"getWorkerAvailability");function y(e,t,r){let a=[];return Array.isArray(e)?e.forEach(e=>{let n=function(e,t,r){let a=[];console.log("generateEventsFromSlot called with:",{frequency:e.frequency,days:e.days,ends:e.ends,occurrences:e.occurrences,startDate:t.toDateString(),endDate:r.toDateString()});let n=e.startDate?new Date(e.startDate):t,i=new Date;i.setHours(0,0,0,0);let o=new Date(Math.max(n.getTime(),t.getTime(),i.getTime()));if("never"===e.frequency){if(e.endDate){let t=new Date(e.endDate);if(t>=o&&t<=r){let r=g(e,t);r&&a.push(r)}}return a}let s=0,l=new Date(o),c=null;if("biweekly"===e.frequency){let t=new Date(o);for(;t<=r;){let r=b(m(t));if(e.days.includes(r)){c=new Date(t);break}t=new Date(t.getTime()+864e5)}}for(;l<=r;){let t=b(m(l));if(e.days.includes(t)){let r=!1;if("weekly"===e.frequency)r=!0;else if("biweekly"===e.frequency)if(console.log(`Processing biweekly frequency for date: ${l.toDateString()}`),c){let e=Math.floor((l.getTime()-c.getTime())/864e5),t=Math.floor(e/7);r=t%2==0,console.log(`Biweekly: date=${l.toDateString()}, daysSinceFirst=${e}, weeksSinceFirst=${t}, shouldCreate=${r}`)}else console.log("No firstOccurrenceDate found for biweekly");else if("monthly"===e.frequency){let e=l.getMonth(),n=l.getFullYear();r=!a.find(r=>{let a=new Date(r.start),i=a.getMonth(),o=a.getFullYear(),s=b(m(a));return i===e&&o===n&&s===t})}if(r&&function(e,t,r=0){let a=new Date;a.setHours(0,0,0,0);let n=new Date(t);if(n.setHours(0,0,0,0),n<a)return!1;if("never"===e.frequency||"never"===e.ends)return!0;if("on_date"===e.ends&&e.endDate){let r=new Date(e.endDate);return r.setHours(23,59,59,999),t<=r}return!0}(e,l,s)){let t=g(e,l);if(t&&(a.push(t),s++,"after_occurrences"===e.ends&&e.occurrences)){let t=!1;if("weekly"===e.frequency)t=s>=e.occurrences;else if("biweekly"===e.frequency){let r=Math.ceil(s/e.days.length);t=r>=e.occurrences,console.log(`Biweekly occurrence check: occurrenceCount=${s}, days.length=${e.days.length}, weeksCompleted=${r}, shouldStop=${t}`)}else"monthly"===e.frequency&&(t=Math.ceil(s/e.days.length)>=e.occurrences);if(t){console.log(`Stopping due to occurrence limit: ${e.occurrences}`);break}}}}l=new Date(l.getTime()+864e5)}return a}(e,t,r);a.push(...n)}):console.warn("convertAvailabilitySlotsToEvents: slots is not an array:",e),a}function g(e,t){let r=new Date(t),a=new Date(t),[n,i]=e.startTime.split(":").map(Number);r.setHours(n,i,0,0);let[o,s]=e.endTime.split(":").map(Number);return a.setHours(o,s,0,0),console.log("createEventFromSlot:",{slotId:e.id,date:t.toDateString(),startTime:e.startTime,endTime:e.endTime,eventStart:r.toISOString(),eventEnd:a.toISOString(),startHour:n,startMinute:i,endHour:o,endMinute:s}),{id:`${e.id}-${t.toISOString().split("T")[0]}`,title:e.notes?`Available: ${e.notes}`:"Available",start:r,end:a,allDay:!1,status:"AVAILABLE",eventType:"availability",isRecurring:"never"!==e.frequency,recurrenceRule:function(e){if("never"===e.frequency)return"";let t="weekly"===e.frequency||"biweekly"===e.frequency?"WEEKLY":"monthly"===e.frequency?"MONTHLY":"DAILY",r="biweekly"===e.frequency?2:1,a=`FREQ=${t};INTERVAL=${r}`;if(e.days.length>0){let t=e.days.map(e=>e.toUpperCase().substring(0,2)).join(",");a+=`;BYDAY=${t}`}return"on_date"===e.ends&&e.endDate?a+=`;UNTIL=${e.endDate.replace(/-/g,"")}T235959Z`:"after_occurrences"===e.ends&&e.occurrences&&(a+=`;COUNT=${e.occurrences}`),a}(e),originalSlotId:e.id,notes:e.notes}}function m(e){return["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()]}function b(e){return({Mon:"monday",Tue:"tuesday",Wed:"wednesday",Thu:"thursday",Fri:"friday",Sat:"saturday",Sun:"sunday",monday:"monday",tuesday:"tuesday",wednesday:"wednesday",thursday:"thursday",friday:"friday",saturday:"saturday",sunday:"sunday"})[e]||e}var v=r(11860),_=r(32342),w=r.n(_);let E=({isOpen:e,onClose:t,formData:r,onSave:o})=>{let[s,l]=(0,n.useState)(r);i().useEffect(()=>{l(r)},[r]);let[c,u]=(0,n.useState)(!1),[d,f]=(0,n.useState)(!1),h=["M","Tu","W","Th","F","Sa","Su"],p=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],y=e=>{let t=p[h.indexOf(e)];l(e=>({...e,days:e.days.includes(t)?e.days.filter(e=>e!==t):[...e.days,t]}))};return e?(0,a.jsxs)("div",{className:w().overlay,onClick:t,children:[(0,a.jsxs)("div",{className:w().repeatSheet,onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:w().repeatHeader,children:(0,a.jsx)("h3",{children:"Repeat availability"})}),(0,a.jsxs)("div",{className:w().repeatContent,children:["never"===s.frequency?(0,a.jsxs)("div",{className:w().singleDateSection,children:[(0,a.jsx)("label",{className:w().sectionLabel,children:"Date"}),(0,a.jsx)("div",{className:w().dateInput,children:(0,a.jsx)("input",{type:"date",value:s.endDate||"",onChange:e=>l(t=>({...t,endDate:e.target.value})),className:w().datePicker})})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:w().startDateSection,children:[(0,a.jsx)("label",{className:w().sectionLabel,children:"Date"}),(0,a.jsx)("div",{className:w().dateInput,children:(0,a.jsx)("input",{type:"date",value:s.startDate||new Date().toISOString().split("T")[0],onChange:e=>l(t=>({...t,startDate:e.target.value})),className:w().datePicker})})]}),(0,a.jsxs)("div",{className:w().daysSection,children:[(0,a.jsx)("label",{className:w().sectionLabel,children:"Days"}),(0,a.jsx)("div",{className:w().daysGrid,children:h.map((e,t)=>{let r=p[t],n=s.days.includes(r);return(0,a.jsx)("button",{className:`${w().dayButton} ${n?w().dayButtonSelected:""}`,onClick:()=>y(e),children:e},e)})})]})]}),(0,a.jsxs)("div",{className:w().frequencySection,children:[(0,a.jsx)("label",{className:w().sectionLabel,children:"Frequency"}),(0,a.jsx)("div",{className:w().frequencyInput,onClick:()=>u(!0),children:(()=>{switch(s.frequency){case"never":default:return"No repeat";case"weekly":return"Every 1 week";case"biweekly":return"Every 2 weeks";case"monthly":return"Every 1 month"}})()})]}),(0,a.jsxs)("div",{className:w().endsSection,children:[(0,a.jsx)("label",{className:w().sectionLabel,children:"Ends"}),(0,a.jsx)("div",{className:w().endsInput,onClick:()=>f(!0),children:(()=>{switch(s.ends){case"never":default:return"Never";case"on_date":return s.endDate?`Until ${new Date(s.endDate).toLocaleDateString()}`:"Select end date";case"after_occurrences":return s.occurrences?`After ${s.occurrences} times`:"Select number of times"}})()})]})]}),(0,a.jsxs)("div",{className:w().repeatActions,children:[(0,a.jsx)("button",{className:w().cancelButton,onClick:t,children:"Cancel"}),(0,a.jsx)("button",{className:w().saveButton,onClick:()=>{o(s)},children:"Save"})]})]}),c&&(0,a.jsx)(A,{isOpen:c,onClose:()=>u(!1),title:"Select Frequency",options:[{label:"No repeat",value:"never"},{label:"Every Week",value:"weekly"},{label:"Every Two Weeks",value:"biweekly"},{label:"Every Month",value:"monthly"}],selectedValue:s.frequency,onSelect:e=>{l(t=>"never"===e?{...t,frequency:e,days:[],endDate:new Date().toISOString().split("T")[0],startDate:void 0,ends:"on_date"}:"never"===t.frequency&&"never"!==e?{...t,frequency:e,startDate:t.startDate||new Date().toISOString().split("T")[0],endDate:void 0,ends:"never"}:"never"===e||t.startDate?{...t,frequency:e}:{...t,frequency:e,startDate:t.startDate||new Date().toISOString().split("T")[0]}),u(!1)}}),d&&(0,a.jsx)(S,{isOpen:d,onClose:()=>f(!1),localData:s,onUpdate:e=>{l(e),f(!1)}})]}):null},A=({isOpen:e,onClose:t,title:r,options:n,selectedValue:i,onSelect:o})=>e?(0,a.jsx)("div",{className:w().overlay,onClick:t,children:(0,a.jsxs)("div",{className:w().optionModal,onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:w().optionHeader,children:(0,a.jsx)("h3",{children:r})}),(0,a.jsx)("div",{className:w().optionContent,children:n.map(e=>(0,a.jsxs)("button",{className:`${w().optionButton} ${i===e.value?w().optionSelected:""}`,onClick:()=>o(e.value),children:[(0,a.jsx)("div",{className:w().radioButton,children:i===e.value&&(0,a.jsx)("div",{className:w().radioSelected})}),(0,a.jsx)("span",{children:e.label})]},e.value))}),(0,a.jsx)("div",{className:w().optionActions,children:(0,a.jsx)("button",{className:w().confirmButton,onClick:t,children:"Confirm"})})]})}):null,S=({isOpen:e,onClose:t,localData:r,onUpdate:o})=>{let[s,l]=(0,n.useState)(r);i().useEffect(()=>{l(r)},[r]);let c=e=>{l(t=>({...t,ends:e}))};return e?(0,a.jsx)("div",{className:w().overlay,onClick:t,children:(0,a.jsxs)("div",{className:w().optionModal,onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:w().optionHeader,children:(0,a.jsx)("h3",{children:"When does this end?"})}),(0,a.jsxs)("div",{className:w().optionContent,children:[(0,a.jsxs)("button",{className:`${w().optionButton} ${"never"===s.ends?w().optionSelected:""}`,onClick:()=>c("never"),children:[(0,a.jsx)("div",{className:w().radioButton,children:"never"===s.ends&&(0,a.jsx)("div",{className:w().radioSelected})}),(0,a.jsx)("span",{children:"Never"})]}),(0,a.jsxs)("button",{className:`${w().optionButton} ${"on_date"===s.ends?w().optionSelected:""}`,onClick:()=>c("on_date"),children:[(0,a.jsx)("div",{className:w().radioButton,children:"on_date"===s.ends&&(0,a.jsx)("div",{className:w().radioSelected})}),(0,a.jsx)("span",{children:"On a specific date"})]}),"on_date"===s.ends&&(0,a.jsx)("div",{className:w().dateInputContainer,children:(0,a.jsx)("input",{type:"date",value:s.endDate||"",onChange:e=>l(t=>({...t,endDate:e.target.value})),className:w().dateInput,min:new Date().toISOString().split("T")[0]})}),(0,a.jsxs)("button",{className:`${w().optionButton} ${"after_occurrences"===s.ends?w().optionSelected:""}`,onClick:()=>c("after_occurrences"),children:[(0,a.jsx)("div",{className:w().radioButton,children:"after_occurrences"===s.ends&&(0,a.jsx)("div",{className:w().radioSelected})}),(0,a.jsx)("span",{children:"After a number of times"})]}),"after_occurrences"===s.ends&&(0,a.jsxs)("div",{className:w().occurrencesInputContainer,children:[(0,a.jsx)("input",{type:"number",value:s.occurrences||"",onChange:e=>l(t=>({...t,occurrences:parseInt(e.target.value)||1})),className:w().occurrencesInput,min:"1",max:"100",placeholder:"Number of times"}),(0,a.jsx)("span",{className:w().occurrencesLabel,children:"times"})]})]}),(0,a.jsxs)("div",{className:w().optionActions,children:[(0,a.jsx)("button",{className:w().cancelButton,onClick:t,children:"Cancel"}),(0,a.jsx)("button",{className:w().confirmButton,onClick:()=>{o(s)},children:"Save"})]})]})}):null},D=({isOpen:e,onClose:t,slot:r,onSave:i,onDelete:o,selectedDate:s,selectedTime:l,isEditingSingleOccurrence:c=!1})=>{let[u,d]=(0,n.useState)({startTime:"09:00",endTime:"19:00",days:[],frequency:"never",ends:"never"}),[f,h]=(0,n.useState)(!1),p=e=>{let[t,r]=e.split(":").map(Number);return`${((t+1)%24).toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`};return((0,n.useEffect)(()=>{if(r)c&&s?d({startTime:r.startTime,endTime:r.endTime,days:[],frequency:"never",ends:"on_date",endDate:s.toISOString().split("T")[0],occurrences:void 0}):d({startTime:r.startTime,endTime:r.endTime,days:r.days,frequency:r.frequency,ends:r.ends,endDate:r.endDate,occurrences:r.occurrences});else if(s){let e=s.toISOString().split("T")[0];d(t=>({...t,days:[],endDate:e,frequency:"never",startTime:l||"09:00",endTime:l?p(l):"19:00"}))}},[r,s,l,c]),e)?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:w().overlay,onClick:t,children:(0,a.jsxs)("div",{className:w().modal,onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:w().header,children:[(0,a.jsx)("h2",{className:w().title,children:r?"Edit availability":"New availability slot"}),(0,a.jsx)("button",{className:w().closeButton,onClick:t,children:(0,a.jsx)(v.A,{size:20})})]}),(0,a.jsxs)("div",{className:w().content,children:[(0,a.jsxs)("div",{className:w().formGroup,children:[(0,a.jsx)("label",{className:w().label,children:"Start time"}),(0,a.jsx)("input",{type:"time",value:u.startTime,onChange:e=>d(t=>({...t,startTime:e.target.value})),className:w().timeInput})]}),(0,a.jsxs)("div",{className:w().formGroup,children:[(0,a.jsx)("label",{className:w().label,children:"End time"}),(0,a.jsx)("input",{type:"time",value:u.endTime,onChange:e=>d(t=>({...t,endTime:e.target.value})),className:w().timeInput})]}),(0,a.jsxs)("div",{className:w().recurrenceRow,onClick:()=>h(!0),children:[(0,a.jsx)("span",{className:w().recurrenceText,children:(()=>{if("never"===u.frequency){if(u.endDate){let e=new Date(u.endDate);return`Single occurrence on ${e.toLocaleDateString("en-GB",{weekday:"long",day:"2-digit",month:"short",year:"numeric"})}`}return"Single occurrence (date not specified)"}if(0===u.days.length)return"No recurrence set";let e=u.days.join("-"),t="weekly"===u.frequency?"week":"biweekly"===u.frequency?"2 weeks":"month";return`Repeats ${e} every ${t}`})()}),(0,a.jsx)("span",{className:w().arrow,children:"›"})]})]}),(0,a.jsxs)("div",{className:w().actions,children:[(0,a.jsx)("button",{className:w().cancelButton,onClick:t,children:"Cancel"}),(0,a.jsx)("button",{className:w().saveButton,onClick:()=>{i(u),t()},children:"Save"}),r&&o&&(0,a.jsx)("button",{className:w().deleteButton,onClick:o,children:"Delete"})]})]})}),f&&(0,a.jsx)(E,{isOpen:f,onClose:()=>h(!1),formData:u,onSave:e=>{d(e),h(!1)}})]}):null};var x=r(1160),T=r.n(x);let R=({isOpen:e,onClose:t,onConfirm:r})=>e?(0,a.jsx)("div",{className:T().overlay,onClick:t,children:(0,a.jsxs)("div",{className:T().alertDialog,onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("div",{className:T().alertHeader,children:(0,a.jsx)("h3",{children:"Clear availability?"})}),(0,a.jsx)("div",{className:T().alertContent,children:(0,a.jsx)("p",{children:"This action cannot be undone."})}),(0,a.jsxs)("div",{className:T().alertActions,children:[(0,a.jsx)("button",{className:T().cancelButton,onClick:t,children:"Cancel"}),(0,a.jsx)("button",{className:T().clearButton,onClick:r,children:"Clear"})]})]})}):null;var C=r(36248),P=r.n(C),N=r(78781),O=r.n(N);let k=({events:e,availabilitySlots:t,currentDate:r,onEventClick:o,onDateSelect:s,onAvailabilityEdit:l,onAvailabilityDelete:c,onClearAll:u})=>{let[d,f]=(0,n.useState)(null);i().useEffect(()=>{let e=e=>{d&&f(null)};if(d)return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[d]);let h=P()(r).startOf("isoWeek"),p=Array.from({length:7},(e,t)=>P()(h).add(t,"days").toDate()),y=Array.from({length:18},(e,t)=>t+6),g=e=>Array.isArray(t)?t.filter(t=>{if("never"===t.frequency&&t.endDate)return new Date(t.endDate).toDateString()===e.toDateString();P()(e).format("ddd");let r=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][P()(e).isoWeekday()-1];if(!t.days.includes(r))return!1;let a=t.startDate?new Date(t.startDate):t.createdAt?new Date(t.createdAt):new Date;a.setHours(0,0,0,0);let n=new Date(e);if(n.setHours(0,0,0,0),n<a)return!1;if("on_date"===t.ends&&t.endDate){let e=new Date(t.endDate);if(e.setHours(23,59,59,999),n>e)return!1}if("after_occurrences"===t.ends&&t.occurrences){if("weekly"===t.frequency){let e=t.startDate?new Date(t.startDate):t.createdAt?new Date(t.createdAt):new Date;e.setHours(0,0,0,0);let r=null,a=new Date(e);for(;a<=n;){P()(a).format("ddd");let e=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][P()(a).isoWeekday()-1];if(t.days.includes(e)){r=new Date(a);break}a=new Date(a.getTime()+864e5)}if(r&&Math.floor(Math.floor((n.getTime()-r.getTime())/864e5)/7)>=t.occurrences)return!1}else if(m(t,e)>=t.occurrences)return!1}return!0}):(console.warn("WeeklyAvailabilityView: availabilitySlots is not an array:",t),[]),m=(e,t)=>{if("never"===e.frequency)return 0;let r=e.startDate?new Date(e.startDate):e.createdAt?new Date(e.createdAt):new Date;r.setHours(0,0,0,0);let a=new Date(t);a.setHours(23,59,59,999);let n=0,i=new Date(r);for(;i<=a;){P()(i).format("ddd");let t=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][P()(i).isoWeekday()-1];e.days.includes(t)&&n++,i=new Date(i.getTime()+864e5)}return n},b=e=>{s&&s(e)},v=(e,t,r)=>{e.preventDefault(),e.stopPropagation();let a=window.innerWidth,n=window.innerHeight,i=e.clientX,o=e.clientY;i+120>a&&(i=a-120-10),o+120>n&&(o=n-120-10),f({x:i=Math.max(10,i),y:o=Math.max(10,o),slot:t,clickedDay:r})},_=e=>{if(d){switch(e){case"edit":let t=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"][P()(d.clickedDay).isoWeekday()-1];l({...d.slot,days:[t],frequency:"never",ends:"never"});break;case"repeat":l(d.slot);break;case"delete":c(d.slot)}f(null)}},w=(e,t)=>{let r=`${t.toString().padStart(2,"0")}:00`,a=new Date(e);a.setHours(t,0,0,0),s(a,r)},E=(e,t)=>g(e).filter(e=>{let r=parseInt(e.startTime.split(":")[0]),a=parseInt(e.endTime.split(":")[0]);return t>=r&&t<a}),A=(e,t)=>{let r=parseInt(e.startTime.split(":")[0]),a=parseInt(e.endTime.split(":")[0]),n=parseInt(e.startTime.split(":")[1]);return{startHour:r,endHour:a,startPosition:n/60*100,endPosition:parseInt(e.endTime.split(":")[1])/60*100,totalHours:a-r+1}};return(0,a.jsxs)("div",{className:O().weekViewContainer,children:[(0,a.jsxs)("div",{className:O().header,children:[(0,a.jsx)("div",{className:O().timeColumn}),p.map(e=>(0,a.jsxs)("div",{className:O().dayHeader,onClick:()=>b(e),children:[(0,a.jsx)("div",{className:O().dayName,children:P()(e).format("ddd")}),(0,a.jsx)("div",{className:O().dayNumber,children:P()(e).format("D")})]},`day-${P()(e).format("YYYY-MM-DD")}`))]}),(0,a.jsx)("div",{className:O().timeGrid,children:y.map(e=>(0,a.jsxs)("div",{className:O().timeRow,children:[(0,a.jsx)("div",{className:O().timeLabel,children:P()().startOf("day").add(e,"hours").format("HH:mm")}),p.map(t=>{let r=E(t,e);return(0,a.jsx)("div",{className:O().timeSlot,onClick:()=>w(t,e),children:r.filter(t=>parseInt(t.startTime.split(":")[0])===e).map((e,r)=>{let n=A(e,t),i=60*n.totalHours,o=.6*n.startPosition,s=(100-n.endPosition)*.6;return(0,a.jsx)("div",{className:O().availabilityBlock,onClick:r=>v(r,e,t),style:{backgroundColor:"#10b981",height:`${Math.max(i-o-s,20)}px`,margin:"0",borderRadius:"4px",position:"absolute",top:`${o}px`,left:"0px",right:"0px",zIndex:1,cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",outline:"none",display:"flex",alignItems:"center",justifyContent:"center",gap:"5px",padding:"2px 6px",flexDirection:"column"},onMouseEnter:e=>{e.currentTarget.style.backgroundColor="#059669",e.currentTarget.style.transform="scale(1.02)",e.currentTarget.style.boxShadow="0 4px 12px rgba(16, 185, 129, 0.3)"},onMouseLeave:e=>{e.currentTarget.style.backgroundColor="#10b981",e.currentTarget.style.transform="scale(1)",e.currentTarget.style.boxShadow="0 2px 4px rgba(0, 0, 0, 0.1)"},children:(0,a.jsx)("span",{style:{fontSize:"2.5vw",color:"#ffffff",fontWeight:"600",whiteSpace:"nowrap"},children:"Available"})},`availability-${r}-${P()(t).format("YYYY-MM-DD-HH-mm")}`)})},`slot-${P()(t).format("YYYY-MM-DD")}-${e}`)})]},e))}),d&&(0,a.jsxs)("div",{className:O().contextMenu,style:{position:"fixed",left:d.x,top:d.y,zIndex:1e3,backgroundColor:"#ffffff",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 10px 25px rgba(0, 0, 0, 0.15)",padding:"8px 0",minWidth:"120px"},onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{onClick:()=>_("edit"),style:{display:"block",width:"100%",padding:"8px 16px",border:"none",background:"none",textAlign:"left",cursor:"pointer",fontSize:"14px",color:"#374151",transition:"background-color 0.2s"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#f3f4f6",onMouseLeave:e=>e.currentTarget.style.backgroundColor="transparent",children:"Edit This Day"}),(0,a.jsx)("button",{onClick:()=>_("repeat"),style:{display:"block",width:"100%",padding:"8px 16px",border:"none",background:"none",textAlign:"left",cursor:"pointer",fontSize:"14px",color:"#374151",transition:"background-color 0.2s"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#f3f4f6",onMouseLeave:e=>e.currentTarget.style.backgroundColor="transparent",children:"Edit Recurring"}),(0,a.jsx)("button",{onClick:()=>_("delete"),style:{display:"block",width:"100%",padding:"8px 16px",border:"none",background:"none",textAlign:"left",cursor:"pointer",fontSize:"14px",color:"#ef4444",transition:"background-color 0.2s"},onMouseEnter:e=>e.currentTarget.style.backgroundColor="#fef2f2",onMouseLeave:e=>e.currentTarget.style.backgroundColor="transparent",children:"Delete"})]}),(0,a.jsx)("button",{className:O().clearButton,onClick:u,title:"Clear all availability",children:"\uD83D\uDDD1️"})]})};var j=r(48869),I=r.n(j);let M=({events:e,availabilitySlots:t,currentDate:r,onEventClick:i,onDateSelect:o,onAvailabilityEdit:s,onAvailabilityDelete:l,onClearAll:c,selectedDate:u})=>{let[d,f]=(0,n.useState)(null),h=Array.from({length:18},(e,t)=>t+6),p=e=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()],y=(e,t)=>{if("never"===e.frequency)return 0;let r=e.startDate?new Date(e.startDate):e.createdAt?new Date(e.createdAt):new Date;r.setHours(0,0,0,0);let a=new Date(t);a.setHours(23,59,59,999);let n=0,i=new Date(r);for(;i<=a;){let t=g(p(i));e.days.includes(t)&&n++,i=new Date(i.getTime()+864e5)}return n},g=e=>({Mon:"monday",Tue:"tuesday",Wed:"wednesday",Thu:"thursday",Fri:"friday",Sat:"saturday",Sun:"sunday",monday:"monday",tuesday:"tuesday",wednesday:"wednesday",thursday:"thursday",friday:"friday",saturday:"saturday",sunday:"sunday"})[e]||e,m=e=>{let[t]=e.split(":").map(Number);return(t-6)/18*100},b=(e,t)=>{let[r,a]=e.split(":").map(Number),[n,i]=t.split(":").map(Number);return(60*n+i-(60*r+a))/60*(100/18)},v=(e,t)=>{e.preventDefault(),f({x:e.clientX,y:e.clientY,slot:t})},_=e=>{if(d){switch(e){case"edit":case"repeat":s(d.slot);break;case"delete":l(d.slot)}f(null)}},w=e=>{let t=new Date(u);t.setHours(e,0,0,0),o(t,`${e.toString().padStart(2,"0")}:00`)},E=(e=>Array.isArray(t)?t.filter(t=>{if("never"===t.frequency&&t.endDate)return new Date(t.endDate).toDateString()===e.toDateString();let r=p(e);if(!t.days.includes(r))return!1;let a=t.startDate?new Date(t.startDate):t.createdAt?new Date(t.createdAt):new Date;a.setHours(0,0,0,0);let n=new Date(e);if(n.setHours(0,0,0,0),n<a)return!1;if("on_date"===t.ends&&t.endDate){let e=new Date(t.endDate);if(e.setHours(23,59,59,999),n>e)return!1}if("after_occurrences"===t.ends&&t.occurrences){if("weekly"===t.frequency){let e=t.startDate?new Date(t.startDate):t.createdAt?new Date(t.createdAt):new Date;e.setHours(0,0,0,0);let r=null,a=new Date(e);for(;a<=n;){let e=g(p(a));if(t.days.map(e=>g(e)).includes(e)){r=new Date(a);break}a=new Date(a.getTime()+864e5)}if(r&&Math.floor(Math.floor((n.getTime()-r.getTime())/864e5)/7)>=t.occurrences)return!1}else if(y(t,e)>=t.occurrences)return!1}return!0}):(console.warn("DailyAvailabilityView: availabilitySlots is not an array:",t),[]))(u);return(0,a.jsxs)("div",{className:I().container,children:[(0,a.jsxs)("div",{className:I().header,children:[(0,a.jsx)("div",{className:I().timeHeader,children:(0,a.jsx)("span",{children:"TIME"})}),(0,a.jsxs)("div",{className:I().dayHeader,children:[(0,a.jsx)("div",{className:I().dayName,children:p(u)}),(0,a.jsx)("div",{className:I().dayNumber,children:u.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})})]})]}),(0,a.jsxs)("div",{className:I().timeGrid,children:[(0,a.jsx)("div",{className:I().timeColumn,children:h.map(e=>(0,a.jsx)("div",{className:I().timeLabel,children:12===e?"12 PM":e>12?`${e-12} PM`:`${e} AM`},e))}),(0,a.jsx)("div",{className:I().availabilityColumn,children:h.map((e,t)=>{let r=E.find(t=>{let r=parseInt(t.startTime.split(":")[0]),a=parseInt(t.endTime.split(":")[0]);return e>=r&&e<a});if(r){if(e===parseInt(r.startTime.split(":")[0])){let e=b(r.startTime,r.endTime);return(0,a.jsx)("div",{className:I().availabilityBlock,style:{top:`${m(r.startTime)}%`,height:`${e}%`},onClick:e=>v(e,r),children:(0,a.jsxs)("div",{className:I().availabilityContent,children:[(0,a.jsxs)("div",{className:I().availabilityTime,children:[r.startTime," - ",r.endTime]}),(0,a.jsx)("div",{className:I().availabilityStatus,children:"Available"})]})},t)}return null}return(0,a.jsx)("div",{className:I().emptySlot,onClick:()=>w(e)},t)})})]}),d&&(0,a.jsxs)("div",{className:I().contextMenu,style:{left:d.x,top:d.y},children:[(0,a.jsx)("button",{onClick:()=>_("edit"),children:"Edit This Day"}),(0,a.jsx)("button",{onClick:()=>_("repeat"),children:"Edit Recurring"}),(0,a.jsx)("button",{onClick:()=>_("delete"),className:I().deleteOption,children:"Delete"})]}),(0,a.jsx)("button",{className:I().clearButton,onClick:c,title:"Clear all availability",children:"\uD83D\uDDD1️"})]})};var L=r(39653),U=r.n(L);let q=({events:e,availabilitySlots:t,currentDate:r,onEventClick:i,onDateSelect:o,onAvailabilityEdit:s,onAvailabilityDelete:l,onClearAll:c,selectedDate:u})=>{let[d,f]=(0,n.useState)(u),h=e=>["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][e.getDay()],p=e=>{if(console.log("getAvailabilityForDay called for date:",e.toDateString()),console.log("Available slots:",t),!Array.isArray(t))return console.warn("MonthlyAvailabilityView: availabilitySlots is not an array:",t),[];console.log("Slot details:",t.map(e=>({id:e.id,frequency:e.frequency,days:e.days,ends:e.ends,occurrences:e.occurrences,createdAt:e.createdAt}))),console.log("Raw slot data:",JSON.stringify(t,null,2));let r=t.filter(t=>{if("never"===t.frequency&&t.endDate){let r=new Date(t.endDate),a=r.toDateString()===e.toDateString();return console.log("Single occurrence check:",{slotDate:r.toDateString(),date:e.toDateString(),matches:a}),a}let r=h(e),a=y(r),n=t.days.map(e=>y(e));if(!n.includes(a))return console.log("Recurring check - day not in slot:",{dayName:r,slotDays:t.days,matches:!1}),!1;if("biweekly"===t.frequency){let r=t.startDate?new Date(t.startDate):t.createdAt?new Date(t.createdAt):new Date;r.setHours(0,0,0,0);let a=null,i=new Date(r),o=new Date(e);for(o.setHours(0,0,0,0);i<=o;){let e=y(h(i));if(n.includes(e)){a=new Date(i);break}i=new Date(i.getTime()+864e5)}if(!a)return console.log("Bi-weekly display - no first occurrence found for date:",e.toDateString()),!1;{let t=Math.floor((o.getTime()-a.getTime())/864e5),r=Math.floor(t/7),n=r%2==0;if(console.log("Bi-weekly display check:",{date:e.toDateString(),firstOccurrence:a.toDateString(),weeksSinceFirst:r,shouldShowThisWeek:n,daysSinceFirst:t}),!n)return console.log("Bi-weekly display - skipping week:",{date:e.toDateString(),weeksSinceFirst:r}),!1}}let i=new Date;i.setHours(0,0,0,0);let o=new Date(e);if(o.setHours(0,0,0,0),o<i)return console.log("Recurring check - date in past:",{date:o.toDateString(),today:i.toDateString(),matches:!1}),!1;if("weekly"===t.frequency){let r=t.startDate?new Date(t.startDate):t.createdAt?new Date(t.createdAt):new Date;r.setHours(0,0,0,0);let a=null,i=new Date(r);for(;i<=o;){let e=y(h(i));if(n.includes(e)){a=new Date(i);break}i=new Date(i.getTime()+864e5)}if(!a)return console.log("Weekly display - no first occurrence found for date:",e.toDateString()),!1;{let r=Math.floor(Math.floor((o.getTime()-a.getTime())/864e5)/7);if(console.log("Weekly display check:",{date:e.toDateString(),firstOccurrence:a.toDateString(),weeksSinceFirst:r}),t.occurrences&&r>=t.occurrences)return console.log("Weekly display - occurrence limit reached:",{weeksSinceFirst:r,maxOccurrences:t.occurrences}),!1}}if("monthly"===t.frequency){let r=t.startDate?new Date(t.startDate):t.createdAt?new Date(t.createdAt):new Date;r.setHours(0,0,0,0);let a=null,i=new Date(r);for(;i<=o;){let e=y(h(i));if(n.includes(e)){a=new Date(i);break}i=new Date(i.getTime()+864e5)}if(!a)return console.log("Monthly display - no first occurrence found for date:",e.toDateString()),!1;{let r=(o.getFullYear()-a.getFullYear())*12+(o.getMonth()-a.getMonth());if(console.log("Monthly display check:",{date:e.toDateString(),firstOccurrence:a.toDateString(),monthsSinceFirst:r}),t.occurrences&&r>=t.occurrences)return console.log("Monthly display - occurrence limit reached:",{monthsSinceFirst:r,maxOccurrences:t.occurrences}),!1;let n=a.getDay(),i=o.getDay();if(n!==i)return console.log("Monthly display - day of week mismatch:",{firstOccurrenceDayOfWeek:n,currentDayOfWeek:i,date:e.toDateString()}),!1;if(r<0)return console.log("Monthly display - date before first occurrence:",{monthsSinceFirst:r}),!1;let s=a.getDate(),l=o.getDate(),c=Math.ceil(s/7),u=Math.ceil(l/7);if(c!==u)return console.log("Monthly display - week of month mismatch:",{firstOccurrenceWeekOfMonth:c,currentWeekOfMonth:u,firstOccurrenceDayOfMonth:a.getDate(),currentDayOfMonth:o.getDate(),date:e.toDateString()}),!1;console.log("Monthly display - valid date:",{date:e.toDateString(),monthsSinceFirst:r,dayOfWeek:i,dayOfMonth:l,weekOfMonth:u})}}if("on_date"===t.ends&&t.endDate){let e=new Date(t.endDate);if(e.setHours(23,59,59,999),o>e)return console.log("Recurring check - date after end date:",{date:o.toDateString(),endDate:e.toDateString(),matches:!1}),!1}if(console.log("Checking occurrence limit:",{ends:t.ends,occurrences:t.occurrences,endsType:typeof t.ends,occurrencesType:typeof t.occurrences,endsMatches:"after_occurrences"===t.ends,occurrencesTruthy:!!t.occurrences}),("after_occurrences"===t.ends||"never"===t.ends&&t.occurrences)&&t.occurrences&&"biweekly"===t.frequency){let r=t.startDate?new Date(t.startDate):t.createdAt?new Date(t.createdAt):new Date;r.setHours(0,0,0,0);let a=null,n=new Date(r),i=new Date(e);for(i.setHours(0,0,0,0);n<=i;){let e=y(h(n));if(t.days.map(e=>y(e)).includes(e)){a=new Date(n);break}n=new Date(n.getTime()+864e5)}if(a){let r=Math.floor(Math.floor((i.getTime()-a.getTime())/864e5)/7),n=Math.floor(r/2)+1;if(console.log("Bi-weekly occurrence check:",{date:e.toDateString(),firstOccurrence:a.toDateString(),weeksSinceFirst:r,biWeeklyPeriods:n,maxOccurrences:t.occurrences,shouldShow:n<=t.occurrences}),n>t.occurrences)return console.log("Bi-weekly occurrence limit reached:",{biWeeklyPeriods:n,maxOccurrences:t.occurrences}),!1}}return console.log("Recurring check - valid:",{dayName:r,slotDays:t.days,matches:!0}),!0});return console.log("Result for date",e.toDateString(),":",r),r},y=e=>({Mon:"monday",Tue:"tuesday",Wed:"wednesday",Thu:"thursday",Fri:"friday",Sat:"saturday",Sun:"sunday",monday:"monday",tuesday:"tuesday",wednesday:"wednesday",thursday:"thursday",friday:"friday",saturday:"saturday",sunday:"sunday"})[e]||e,g=e=>p(e).length>0,m=e=>e.getMonth()===d.getMonth()&&e.getFullYear()===d.getFullYear(),b=e=>{let t=new Date;return e.toDateString()===t.toDateString()},v=e=>e.toDateString()===u.toDateString(),_=e=>{o(e)},w=(e=>{let t=e.getFullYear(),r=e.getMonth(),a=new Date(t,r,1),n=new Date(t,r+1,0),i=new Date(a);i.setDate(i.getDate()-a.getDay());let o=[],s=new Date(i);for(;s<=n||o.length<42;)o.push(new Date(s)),s.setDate(s.getDate()+1);return o})(d);return(0,a.jsxs)("div",{className:U().container,children:[(0,a.jsxs)("div",{className:U().header,children:[(0,a.jsx)("div",{className:U().monthInfo,children:(0,a.jsx)("h2",{className:U().monthTitle,children:d.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}),(0,a.jsx)("button",{className:U().chooseDateButton,onClick:()=>o(u),children:"Choose a date"})]}),(0,a.jsxs)("div",{className:U().calendarGrid,children:[(0,a.jsx)("div",{className:U().dayHeaders,children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,a.jsx)("div",{className:U().dayHeader,children:e},e))}),(0,a.jsx)("div",{className:U().daysGrid,children:w.map((e,t)=>(0,a.jsxs)("button",{className:`${U().dayCell} ${!m(e)?U().otherMonth:""} ${b(e)?U().today:""} ${v(e)?U().selected:""} ${g(e)?U().hasAvailability:""}`,onClick:()=>_(e),children:[(0,a.jsx)("span",{className:U().dayNumber,children:e.getDate()}),g(e)&&(0,a.jsx)("div",{className:U().availabilityIndicator})]},t))})]}),(0,a.jsxs)("div",{className:U().navigation,children:[(0,a.jsx)("button",{className:U().navButton,onClick:()=>{let e=new Date(d);e.setMonth(e.getMonth()-1),f(e)},children:"‹"}),(0,a.jsx)("button",{className:U().navButton,onClick:()=>{let e=new Date(d);e.setMonth(e.getMonth()+1),f(e)},children:"›"})]}),(0,a.jsx)("button",{className:U().clearButton,onClick:c,title:"Clear all availability",children:"\uD83D\uDDD1️"})]})};var F=r(34223),$=r.n(F),H=r(16269),G=r(9539),B=r(74337),W=r(30642);let X=["Manage availability","Accepted gigs","See gig offers"];function V(e,t){switch(t){case"Manage availability":return e.filter(e=>"AVAILABLE"===e.status);case"Accepted gigs":return e.filter(e=>"ACCEPTED"===e.status);case"See gig offers":return e.filter(e=>"OFFER"===e.status);default:return e}}async function Y(e,t){console.log("Fetching worker data for workerId:",e,"with filters:",t);let r=await (0,G.g)(e);if(r.error)throw Error(r.error);if(!r.data)throw Error("No data received from server");return r.data}let K=()=>{let e=(0,o.usePathname)(),t=(0,o.useRouter)(),i=(0,o.useParams)().userId,{user:h,loading:g}=(0,d.A)(),m=h?.uid,[b,v]=(0,n.useState)(()=>"week"),[_,w]=(0,n.useState)(new Date),[E,A]=(0,n.useState)(X[2]),[S,x]=(0,n.useState)([]),[T,C]=(0,n.useState)([]),[P,N]=(0,n.useState)(null),[O,j]=(0,n.useState)(!1),[I,L]=(0,n.useState)(!1),[U,F]=(0,n.useState)([]),[G,K]=(0,n.useState)(!1),[z,J]=(0,n.useState)(null),[Q,Z]=(0,n.useState)(null),[ee,et]=(0,n.useState)(null),[er,ea]=(0,n.useState)(!1),[en,ei]=(0,n.useState)(!1),[eo,es]=(0,n.useState)(!1),[el,ec]=(0,n.useState)(null),[eu,ed]=(0,n.useState)(null),[ef,eh]=(0,n.useState)([]),[ep,ey]=(0,n.useState)([]);(0,n.useEffect)(()=>{if(!g){if(!h)return void t.push(`/signin?redirect=${e}`);if(m!==i)return void t.push("/signin?error=unauthorized")}},[g]),(0,n.useEffect)(()=>{(async()=>{if(h)try{let e=await (0,f.O)({userId:h.uid,role:"worker",isViewQA:!1});if(e.error)throw Error(e.error);let t=await p(h.uid);t.error&&console.error("Error fetching availability:",t.error),console.log("availabilityRes:",t),console.log("availabilityRes.availability:",t.availability),console.log("typeof availabilityRes.availability:",typeof t.availability),console.log("Array.isArray(availabilityRes.availability):",Array.isArray(t.availability)),console.log("availabilityRes:",t),console.log("availabilityRes.availability:",t.availability),console.log("typeof availabilityRes.availability:",typeof t.availability),console.log("Array.isArray(availabilityRes.availability):",Array.isArray(t.availability));let r=e.events.map(e=>({...e,start:new Date(e.start),end:new Date(e.end)})),a=y(t.availability||[],new Date(_.getFullYear(),_.getMonth(),1),new Date(_.getFullYear(),_.getMonth()+1,0)),n=[...r,...a];C(n);let i=Array.isArray(t.availability)?t.availability:t.availability?[t.availability]:[];F(i);let o=V(n,E);x(o)}catch(e){console.error("Error fetching events:",e)}})()},[h,E,_]),(0,n.useEffect)(()=>{!g&&h&&m===i&&(console.log("Debug - User authorized, fetching worker data..."),Y(i).then(e=>{console.log("Debug - offer received:",e),eh(e.offers),ey(e.acceptedGigs)}).catch(e=>{console.error("Error fetching worker data:",e),eh([]),ey([])}))},[h,g,m,i]);let eg=e=>{if("AVAILABLE"===e.status){let t=Array.isArray(U)?U.find(t=>t.id===e.originalSlotId):null;t&&"never"!==t.frequency?(J(t),Z(e.start),es(!0)):(J(t||null),ei(!1),K(!0))}else e.status,N(e),j(!0)},em=async e=>{if(console.log("handleAvailabilitySave called with data:",e),console.log("handleAvailabilitySave data type:",typeof e),console.log("handleAvailabilitySave data keys:",Object.keys(e||{})),console.log("isEditingSingleOccurrence:",en),!h)return void console.log("No user found");try{let{testAvailabilityAction:e}=await r.e(87).then(r.bind(r,87));console.log("Testing server action...");let t=await e(h.uid);console.log("Test result:",t)}catch(e){console.error("Test action failed:",e)}try{if(z)if(en){console.log("Creating new single occurrence slot");let{createAvailabilitySlot:t}=await r.e(3277).then(r.bind(r,33277)),a=await t(h.uid,e);if(console.log("Create single occurrence result:",a),a.error){console.error("Create single occurrence failed:",a.error),alert(`Failed to create single occurrence: ${a.error}`);return}console.log("Successfully created single occurrence slot")}else{console.log("Updating existing slot:",z.id);let{updateAvailabilitySlot:t}=await r.e(3277).then(r.bind(r,33277)),a=await t(h.uid,z.id,e);if(console.log("Update result:",a),a.error){console.error("Update failed:",a.error),alert(`Failed to update availability: ${a.error}`);return}console.log("Successfully updated availability slot")}else{console.log("Creating new slot");let{createAvailabilitySlot:t}=await r.e(3277).then(r.bind(r,33277));console.log("createAvailabilitySlot function imported:",typeof t),console.log("About to call createAvailabilitySlot with:",{userId:h.uid,data:e}),console.log("createAvailabilitySlot function imported:",typeof t),console.log("About to call createAvailabilitySlot with:",{userId:h.uid,data:e});let a=await t(h.uid,e);if(console.log("Create result:",a),console.log("Create result type:",typeof a),console.log("Create result keys:",Object.keys(a||{})),a.error){console.error("Create failed:",a.error),console.error("Full result object:",a),console.error("Error details:",a.details),console.error("Error type:",a.errorType),alert(`Failed to create availability: ${a.error}`);return}console.log("Successfully created availability slot")}ev(),(async()=>{let e=await (0,f.O)({userId:h.uid,role:"worker",isViewQA:!1}),t=await p(h.uid),r=(e.events||[]).map(e=>({...e,start:new Date(e.start),end:new Date(e.end)})),a=y(t.availability||[],new Date(_.getFullYear(),_.getMonth(),1),new Date(_.getFullYear(),_.getMonth()+1,0)),n=[...r,...a];C(n);let i=Array.isArray(t.availability)?t.availability:t.availability?[t.availability]:[];F(i),x(V(n,E))})()}catch(e){console.error("Error saving availability:",e),alert(`Error saving availability: ${e instanceof Error?e.message:"Unknown error"}`)}},eb=async()=>{if(h&&z)try{let{deleteAvailabilitySlot:e}=await r.e(3277).then(r.bind(r,33277));await e(h.uid,z.id),ev(),(async()=>{let e=await (0,f.O)({userId:h.uid,role:"worker",isViewQA:!1}),t=await p(h.uid),r=(e.events||[]).map(e=>({...e,start:new Date(e.start),end:new Date(e.end)})),a=y(t.availability||[],new Date(_.getFullYear(),_.getMonth(),1),new Date(_.getFullYear(),_.getMonth()+1,0)),n=[...r,...a];C(n);let i=Array.isArray(t.availability)?t.availability:t.availability?[t.availability]:[];F(i),x(V(n,E))})()}catch(e){console.error("Error deleting availability:",e)}},ev=()=>{K(!1),J(null),Z(null),ei(!1)},e_=()=>{es(!1),J(null),Z(null)},ew=(e,t)=>{console.log("handleDateSelect called with:",{slotInfo:e,selectedTime:t}),"object"==typeof e&&"start"in e?(console.log("Setting selected date from slotInfo.start:",e.start),Z(e.start),et(t||null),K(!0)):e instanceof Date&&(console.log("Setting selected date from Date:",e),Z(e),et(t||null),K(!0)),console.log("Modal should now be open")},eE=async()=>{if(h)try{let{clearAllAvailability:e}=await r.e(3277).then(r.bind(r,33277));await e(h.uid),(async()=>{let e=await (0,f.O)({userId:h.uid,role:"worker",isViewQA:!1}),t=await p(h.uid),r=(e.events||[]).map(e=>({...e,start:new Date(e.start),end:new Date(e.end)})),a=y(t.availability||[],new Date(_.getFullYear(),_.getMonth(),1),new Date(_.getFullYear(),_.getMonth()+1,0)),n=[...r,...a];C(n);let i=Array.isArray(t.availability)?t.availability:t.availability?[t.availability]:[];F(i),x(V(n,E))})(),ea(!1)}catch(e){console.error("Error clearing availability:",e)}},eA=e=>{J(e),K(!0)},eS=async e=>{if(m){ec(e),ed("accept");try{let t=await (0,B.U)({gigId:e,userId:m});if(t.error)throw Error(t.error);eh(t=>t.filter(t=>t.id!==e));let r=ef.find(t=>t.id===e);if(r){let e={...r,status:"ACCEPTED"};ey(t=>[...t,e])}}catch(e){console.error("Error accepting offer:",e)}finally{ec(null),ed(null)}}},eD=async e=>{if(m){ec(e),ed("decline");try{eh(t=>t.filter(t=>t.id!==e)),(0,W.Z)({gigId:e,userId:m,role:"worker",action:"cancel"})}catch(e){console.error("Error declining offer:",e)}finally{ec(null),ed(null)}}};return(0,a.jsxs)("div",{className:$().container,children:[(0,a.jsx)(H.A,{onBackClick:()=>t.back()}),(0,a.jsx)(l.A,{date:_,view:b,role:"worker",onViewChange:e=>{v(e)},onNavigate:e=>{let t=new Date(_);"TODAY"===e?w(new Date):"PREV"===e?("day"===b&&t.setDate(t.getDate()-1),"week"===b&&t.setDate(t.getDate()-7),"month"===b&&t.setMonth(t.getMonth()-1),w(t)):"NEXT"===e&&("day"===b&&t.setDate(t.getDate()+1),"week"===b&&t.setDate(t.getDate()+7),"month"===b&&t.setMonth(t.getMonth()+1),w(t))},filters:X,activeFilter:E,onFilterChange:e=>{L(!0),setTimeout(()=>{A(e),x(V(T,e)),L(!1)},150)},onDateSelect:"Manage availability"===E?e=>ew(e):void 0}),(0,a.jsx)("main",{className:`${$().mainContent} ${I?$().filterTransitioning:""}`,children:"Manage availability"===E?(0,a.jsxs)(a.Fragment,{children:["day"===b&&(0,a.jsx)(M,{events:S,availabilitySlots:U,currentDate:_,onEventClick:eg,onDateSelect:ew,onAvailabilityEdit:eA,onAvailabilityDelete:eb,onClearAll:()=>ea(!0),selectedDate:_}),"week"===b&&(0,a.jsx)(k,{events:S,availabilitySlots:U,currentDate:_,onEventClick:eg,onDateSelect:ew,onAvailabilityEdit:eA,onAvailabilityDelete:eb,onClearAll:()=>ea(!0)}),"month"===b&&(0,a.jsx)(q,{events:S,availabilitySlots:U,currentDate:_,onEventClick:eg,onDateSelect:ew,onAvailabilityEdit:eA,onAvailabilityDelete:eb,onClearAll:()=>ea(!0),selectedDate:_})]}):(0,a.jsx)(s.A,{date:_,events:S,view:b,onView:v,onNavigate:w,onSelectEvent:eg,onSelectSlot:ew,userRole:"worker",activeFilter:E,components:{event:e=>(0,a.jsx)(c.A,{...e,userRole:"worker",view:b,activeFilter:E})},hideToolbar:!0})}),(0,a.jsx)(u.A,{event:P,isOpen:O,onClose:()=>{j(!1),N(null)},userRole:"worker",onAccept:()=>P&&P.id&&eS(P.id),onDecline:()=>P&&P.id&&eD(P.id),isProcessingAccept:null!=P&&el===P.id&&"accept"===eu,isProcessingDecline:null!=P&&el===P.id&&"decline"===eu}),(0,a.jsx)(D,{isOpen:G,onClose:ev,slot:z,onSave:em,onDelete:eb,selectedDate:Q||void 0,selectedTime:ee||void 0,isEditingSingleOccurrence:en}),(0,a.jsx)(R,{isOpen:er,onClose:()=>ea(!1),onConfirm:eE}),eo&&z&&Q&&(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},onClick:e_,children:(0,a.jsxs)("div",{style:{backgroundColor:"#232323",borderRadius:"12px",padding:"20px",maxWidth:"400px",width:"90%",color:"#fff"},onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[(0,a.jsx)("h3",{style:{margin:0},children:"Edit Availability"}),(0,a.jsx)("button",{style:{background:"none",border:"none",color:"#fff",cursor:"pointer",fontSize:"20px"},onClick:e_,children:"\xd7"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{style:{marginBottom:"20px"},children:"This is a recurring availability pattern. What would you like to edit?"}),(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[(0,a.jsx)("button",{style:{background:"#41a1e8",border:"none",borderRadius:"8px",padding:"12px 16px",color:"#fff",cursor:"pointer",fontWeight:"600"},onClick:()=>{ei(!1),es(!1),K(!0)},children:"Edit recurring pattern"}),(0,a.jsx)("button",{style:{background:"#7eeef9",border:"none",borderRadius:"8px",padding:"12px 16px",color:"#000",cursor:"pointer",fontWeight:"600"},onClick:()=>{ei(!0),es(!1),K(!0)},children:"Edit just this occurrence"})]})]})]})})]})}},25104:(e,t)=>{"use strict";function r(e){return e.replace(/\/$/,"")||"/"}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"removeTrailingSlash",{enumerable:!0,get:function(){return r}})},25220:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{PageSignatureError:function(){return r},RemovedPageError:function(){return a},RemovedUAError:function(){return n}});class r extends Error{constructor({page:e}){super(`The middleware "${e}" accepts an async API directly with the form:
  
  export function middleware(request, event) {
    return NextResponse.redirect('/new-location')
  }
  
  Read more: https://nextjs.org/docs/messages/middleware-new-signature
  `)}}class a extends Error{constructor(){super(`The request.page has been deprecated in favour of \`URLPattern\`.
  Read more: https://nextjs.org/docs/messages/middleware-request-page
  `)}}class n extends Error{constructor(){super(`The request.ua has been removed in favour of \`userAgent\` function.
  Read more: https://nextjs.org/docs/messages/middleware-parse-user-agent
  `)}}},26343:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getSortedRouteObjects:function(){return n},getSortedRoutes:function(){return a}});class r{insert(e){this._insert(e.split("/").filter(Boolean),[],!1)}smoosh(){return this._smoosh()}_smoosh(e){void 0===e&&(e="/");let t=[...this.children.keys()].sort();null!==this.slugName&&t.splice(t.indexOf("[]"),1),null!==this.restSlugName&&t.splice(t.indexOf("[...]"),1),null!==this.optionalRestSlugName&&t.splice(t.indexOf("[[...]]"),1);let r=t.map(t=>this.children.get(t)._smoosh(""+e+t+"/")).reduce((e,t)=>[...e,...t],[]);if(null!==this.slugName&&r.push(...this.children.get("[]")._smoosh(e+"["+this.slugName+"]/")),!this.placeholder){let t="/"===e?"/":e.slice(0,-1);if(null!=this.optionalRestSlugName)throw Object.defineProperty(Error('You cannot define a route with the same specificity as a optional catch-all route ("'+t+'" and "'+t+"[[..."+this.optionalRestSlugName+']]").'),"__NEXT_ERROR_CODE",{value:"E458",enumerable:!1,configurable:!0});r.unshift(t)}return null!==this.restSlugName&&r.push(...this.children.get("[...]")._smoosh(e+"[..."+this.restSlugName+"]/")),null!==this.optionalRestSlugName&&r.push(...this.children.get("[[...]]")._smoosh(e+"[[..."+this.optionalRestSlugName+"]]/")),r}_insert(e,t,a){if(0===e.length){this.placeholder=!1;return}if(a)throw Object.defineProperty(Error("Catch-all must be the last part of the URL."),"__NEXT_ERROR_CODE",{value:"E392",enumerable:!1,configurable:!0});let n=e[0];if(n.startsWith("[")&&n.endsWith("]")){let r=n.slice(1,-1),o=!1;if(r.startsWith("[")&&r.endsWith("]")&&(r=r.slice(1,-1),o=!0),r.startsWith("…"))throw Object.defineProperty(Error("Detected a three-dot character ('…') at ('"+r+"'). Did you mean ('...')?"),"__NEXT_ERROR_CODE",{value:"E147",enumerable:!1,configurable:!0});if(r.startsWith("...")&&(r=r.substring(3),a=!0),r.startsWith("[")||r.endsWith("]"))throw Object.defineProperty(Error("Segment names may not start or end with extra brackets ('"+r+"')."),"__NEXT_ERROR_CODE",{value:"E421",enumerable:!1,configurable:!0});if(r.startsWith("."))throw Object.defineProperty(Error("Segment names may not start with erroneous periods ('"+r+"')."),"__NEXT_ERROR_CODE",{value:"E288",enumerable:!1,configurable:!0});function i(e,r){if(null!==e&&e!==r)throw Object.defineProperty(Error("You cannot use different slug names for the same dynamic path ('"+e+"' !== '"+r+"')."),"__NEXT_ERROR_CODE",{value:"E337",enumerable:!1,configurable:!0});t.forEach(e=>{if(e===r)throw Object.defineProperty(Error('You cannot have the same slug name "'+r+'" repeat within a single dynamic path'),"__NEXT_ERROR_CODE",{value:"E247",enumerable:!1,configurable:!0});if(e.replace(/\W/g,"")===n.replace(/\W/g,""))throw Object.defineProperty(Error('You cannot have the slug names "'+e+'" and "'+r+'" differ only by non-word symbols within a single dynamic path'),"__NEXT_ERROR_CODE",{value:"E499",enumerable:!1,configurable:!0})}),t.push(r)}if(a)if(o){if(null!=this.restSlugName)throw Object.defineProperty(Error('You cannot use both an required and optional catch-all route at the same level ("[...'+this.restSlugName+']" and "'+e[0]+'" ).'),"__NEXT_ERROR_CODE",{value:"E299",enumerable:!1,configurable:!0});i(this.optionalRestSlugName,r),this.optionalRestSlugName=r,n="[[...]]"}else{if(null!=this.optionalRestSlugName)throw Object.defineProperty(Error('You cannot use both an optional and required catch-all route at the same level ("[[...'+this.optionalRestSlugName+']]" and "'+e[0]+'").'),"__NEXT_ERROR_CODE",{value:"E300",enumerable:!1,configurable:!0});i(this.restSlugName,r),this.restSlugName=r,n="[...]"}else{if(o)throw Object.defineProperty(Error('Optional route parameters are not yet supported ("'+e[0]+'").'),"__NEXT_ERROR_CODE",{value:"E435",enumerable:!1,configurable:!0});i(this.slugName,r),this.slugName=r,n="[]"}}this.children.has(n)||this.children.set(n,new r),this.children.get(n)._insert(e.slice(1),t,a)}constructor(){this.placeholder=!0,this.children=new Map,this.slugName=null,this.restSlugName=null,this.optionalRestSlugName=null}}function a(e){let t=new r;return e.forEach(e=>t.insert(e)),t.smoosh()}function n(e,t){let r={},n=[];for(let a=0;a<e.length;a++){let i=t(e[a]);r[i]=a,n[a]=i}return a(n).map(t=>e[r[t]])}},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30642:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});var a=r(6475);let n=(0,a.createServerReference)("406285e4a5b3e01ac696468e89531313be16ecb429",a.callServer,void 0,a.findSourceMapURL,"updateGigOfferStatus")},31666:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{INTERCEPTION_ROUTE_MARKERS:function(){return n},extractInterceptionRouteInformation:function(){return o},isInterceptionRouteAppPath:function(){return i}});let a=r(79535),n=["(..)(..)","(.)","(..)","(...)"];function i(e){return void 0!==e.split("/").find(e=>n.find(t=>e.startsWith(t)))}function o(e){let t,r,i;for(let a of e.split("/"))if(r=n.find(e=>a.startsWith(e))){[t,i]=e.split(r,2);break}if(!t||!r||!i)throw Object.defineProperty(Error("Invalid interception route: "+e+". Must be in the format /<intercepting route>/(..|...|..)(..)/<intercepted route>"),"__NEXT_ERROR_CODE",{value:"E269",enumerable:!1,configurable:!0});switch(t=(0,a.normalizeAppPath)(t),r){case"(.)":i="/"===t?"/"+i:t+"/"+i;break;case"(..)":if("/"===t)throw Object.defineProperty(Error("Invalid interception route: "+e+". Cannot use (..) marker at the root level, use (.) instead."),"__NEXT_ERROR_CODE",{value:"E207",enumerable:!1,configurable:!0});i=t.split("/").slice(0,-1).concat(i).join("/");break;case"(...)":i="/"+i;break;case"(..)(..)":let o=t.split("/");if(o.length<=2)throw Object.defineProperty(Error("Invalid interception route: "+e+". Cannot use (..)(..) marker at the root level or one level up."),"__NEXT_ERROR_CODE",{value:"E486",enumerable:!1,configurable:!0});i=o.slice(0,-2).concat(i).join("/");break;default:throw Object.defineProperty(Error("Invariant: unexpected marker"),"__NEXT_ERROR_CODE",{value:"E112",enumerable:!1,configurable:!0})}return{interceptingRoute:t,interceptedRoute:i}}},32342:e=>{e.exports={overlay:"NewAvailabilityModal_overlay__vu73L",modal:"NewAvailabilityModal_modal__hL1c9",header:"NewAvailabilityModal_header__1WDIT",title:"NewAvailabilityModal_title__teE0v",closeButton:"NewAvailabilityModal_closeButton__CDuQT",content:"NewAvailabilityModal_content__RxXmP",formGroup:"NewAvailabilityModal_formGroup__u28_Q",label:"NewAvailabilityModal_label__rydgJ",timeInput:"NewAvailabilityModal_timeInput__uDbKR",recurrenceRow:"NewAvailabilityModal_recurrenceRow__3rGnd",recurrenceText:"NewAvailabilityModal_recurrenceText__U_erY",arrow:"NewAvailabilityModal_arrow__SkmNz",actions:"NewAvailabilityModal_actions__BpfFo",cancelButton:"NewAvailabilityModal_cancelButton__3G8m7",saveButton:"NewAvailabilityModal_saveButton__jTWzY",deleteButton:"NewAvailabilityModal_deleteButton__CZMC2",repeatSheet:"NewAvailabilityModal_repeatSheet__IBX13",repeatHeader:"NewAvailabilityModal_repeatHeader__cA7pU",repeatContent:"NewAvailabilityModal_repeatContent__IuDso",daysSection:"NewAvailabilityModal_daysSection__LWXGa",singleDateSection:"NewAvailabilityModal_singleDateSection__bcNJM",frequencySection:"NewAvailabilityModal_frequencySection__53L57",endsSection:"NewAvailabilityModal_endsSection__a3iyL",sectionLabel:"NewAvailabilityModal_sectionLabel__kBrrc",dateInput:"NewAvailabilityModal_dateInput__WAueH",datePicker:"NewAvailabilityModal_datePicker__jYG_i",daysGrid:"NewAvailabilityModal_daysGrid__wQg6_",dayButton:"NewAvailabilityModal_dayButton__yUIA_",dayButtonSelected:"NewAvailabilityModal_dayButtonSelected__YQPi7",frequencyInput:"NewAvailabilityModal_frequencyInput__TuvfW",endsInput:"NewAvailabilityModal_endsInput__PI1Hz",repeatActions:"NewAvailabilityModal_repeatActions__O3D4q",optionModal:"NewAvailabilityModal_optionModal__no0EK",optionHeader:"NewAvailabilityModal_optionHeader__OwQzU",optionContent:"NewAvailabilityModal_optionContent__icjOb",optionButton:"NewAvailabilityModal_optionButton__tGjeY",optionSelected:"NewAvailabilityModal_optionSelected__YRUWN",radioButton:"NewAvailabilityModal_radioButton__ya0yf",radioSelected:"NewAvailabilityModal_radioSelected__ec0AQ",optionActions:"NewAvailabilityModal_optionActions__DqOHz",confirmButton:"NewAvailabilityModal_confirmButton__YCqa_",dateInputContainer:"NewAvailabilityModal_dateInputContainer__p0uDp",occurrencesInputContainer:"NewAvailabilityModal_occurrencesInputContainer__vp2E0",occurrencesInput:"NewAvailabilityModal_occurrencesInput__z7Fy_",occurrencesLabel:"NewAvailabilityModal_occurrencesLabel__lb2fY"}},32699:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Z:()=>u});var n=r(91199);r(42087);var i=r(30298),o=r(18839),s=r(60444),l=r(33331),c=e([i]);i=(c.then?(await c)():c)[0];let d=s.gigStatusEnum.enumValues[2],f=s.gigStatusEnum.enumValues[10],h=s.gigStatusEnum.enumValues[11],p=(e,t)=>"accept"===e?d:"buyer"===t?f:h;async function u({gigId:e,userId:t,role:r,action:a}){try{let n=await i.db.query.UsersTable.findFirst({where:(0,o.eq)(s.UsersTable.firebaseUid,t),columns:{id:!0}});if(!n)return{error:"User is not found",status:404};let l=p(a,r);if("cancel"===a&&"worker"===r)await i.db.update(s.GigsTable).set({statusInternal:l}).where((0,o.eq)(s.GigsTable.id,e));else{let t="buyer"===r?s.GigsTable.buyerUserId:s.GigsTable.workerUserId;await i.db.update(s.GigsTable).set({statusInternal:l}).where((0,o.Uo)((0,o.eq)(s.GigsTable.id,e),(0,o.eq)(t,n.id)))}return{status:200}}catch(e){return console.error("Error updating gig:",e),{error:e.message,status:500}}}(0,l.D)([u]),(0,n.A)(u,"406285e4a5b3e01ac696468e89531313be16ecb429",null),a()}catch(e){a(e)}})},33873:e=>{"use strict";e.exports=require("path")},34223:e=>{e.exports={container:"WorkerCalendarPage_container__wFY2F",header:"WorkerCalendarPage_header__SrcYt",headerTop:"WorkerCalendarPage_headerTop__L9yDr",menuButton:"WorkerCalendarPage_menuButton__u6aiu",headerBottom:"WorkerCalendarPage_headerBottom__ZNxIq",filterPills:"WorkerCalendarPage_filterPills__2p2DR",filterPill:"WorkerCalendarPage_filterPill__iayln",activePill:"WorkerCalendarPage_activePill__IdHZi",mainContent:"WorkerCalendarPage_mainContent__xMM7m",filterTransitioning:"WorkerCalendarPage_filterTransitioning__qTnVo",footer:"WorkerCalendarPage_footer__MDaQO",homeButton:"WorkerCalendarPage_homeButton__awPbJ",dashboardButton:"WorkerCalendarPage_dashboardButton__L0rw_",clearButton:"WorkerCalendarPage_clearButton__GoZpn"}},34631:e=>{"use strict";e.exports=require("tls")},35333:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addPathPrefix",{enumerable:!0,get:function(){return n}});let a=r(4e4);function n(e,t){if(!e.startsWith("/")||!t)return e;let{pathname:r,query:n,hash:i}=(0,a.parsePath)(e);return""+t+r+n+i}},36376:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{ACTION_SUFFIX:function(){return d},APP_DIR_ALIAS:function(){return N},CACHE_ONE_YEAR:function(){return A},DOT_NEXT_ALIAS:function(){return C},ESLINT_DEFAULT_DIRS:function(){return z},GSP_NO_RETURNED_VALUE:function(){return B},GSSP_COMPONENT_MEMBER_ERROR:function(){return V},GSSP_NO_RETURNED_VALUE:function(){return W},INFINITE_CACHE:function(){return S},INSTRUMENTATION_HOOK_FILENAME:function(){return T},MATCHED_PATH_HEADER:function(){return n},MIDDLEWARE_FILENAME:function(){return D},MIDDLEWARE_LOCATION_REGEXP:function(){return x},NEXT_BODY_SUFFIX:function(){return p},NEXT_CACHE_IMPLICIT_TAG_ID:function(){return E},NEXT_CACHE_REVALIDATED_TAGS_HEADER:function(){return g},NEXT_CACHE_REVALIDATE_TAG_TOKEN_HEADER:function(){return m},NEXT_CACHE_SOFT_TAG_MAX_LENGTH:function(){return w},NEXT_CACHE_TAGS_HEADER:function(){return y},NEXT_CACHE_TAG_MAX_ITEMS:function(){return v},NEXT_CACHE_TAG_MAX_LENGTH:function(){return _},NEXT_DATA_SUFFIX:function(){return f},NEXT_INTERCEPTION_MARKER_PREFIX:function(){return a},NEXT_META_SUFFIX:function(){return h},NEXT_QUERY_PARAM_PREFIX:function(){return r},NEXT_RESUME_HEADER:function(){return b},NON_STANDARD_NODE_ENV:function(){return Y},PAGES_DIR_ALIAS:function(){return R},PRERENDER_REVALIDATE_HEADER:function(){return i},PRERENDER_REVALIDATE_ONLY_GENERATED_HEADER:function(){return o},PUBLIC_DIR_MIDDLEWARE_CONFLICT:function(){return U},ROOT_DIR_ALIAS:function(){return P},RSC_ACTION_CLIENT_WRAPPER_ALIAS:function(){return L},RSC_ACTION_ENCRYPTION_ALIAS:function(){return M},RSC_ACTION_PROXY_ALIAS:function(){return j},RSC_ACTION_VALIDATE_ALIAS:function(){return k},RSC_CACHE_WRAPPER_ALIAS:function(){return I},RSC_MOD_REF_PROXY_ALIAS:function(){return O},RSC_PREFETCH_SUFFIX:function(){return s},RSC_SEGMENTS_DIR_SUFFIX:function(){return l},RSC_SEGMENT_SUFFIX:function(){return c},RSC_SUFFIX:function(){return u},SERVER_PROPS_EXPORT_ERROR:function(){return G},SERVER_PROPS_GET_INIT_PROPS_CONFLICT:function(){return F},SERVER_PROPS_SSG_CONFLICT:function(){return $},SERVER_RUNTIME:function(){return J},SSG_FALLBACK_EXPORT_ERROR:function(){return K},SSG_GET_INITIAL_PROPS_CONFLICT:function(){return q},STATIC_STATUS_PAGE_GET_INITIAL_PROPS_ERROR:function(){return H},UNSTABLE_REVALIDATE_RENAME_ERROR:function(){return X},WEBPACK_LAYERS:function(){return Z},WEBPACK_RESOURCE_QUERIES:function(){return ee}});let r="nxtP",a="nxtI",n="x-matched-path",i="x-prerender-revalidate",o="x-prerender-revalidate-if-generated",s=".prefetch.rsc",l=".segments",c=".segment.rsc",u=".rsc",d=".action",f=".json",h=".meta",p=".body",y="x-next-cache-tags",g="x-next-revalidated-tags",m="x-next-revalidate-tag-token",b="next-resume",v=128,_=256,w=1024,E="_N_T_",A=31536e3,S=0xfffffffe,D="middleware",x=`(?:src/)?${D}`,T="instrumentation",R="private-next-pages",C="private-dot-next",P="private-next-root-dir",N="private-next-app-dir",O="next/dist/build/webpack/loaders/next-flight-loader/module-proxy",k="private-next-rsc-action-validate",j="private-next-rsc-server-reference",I="private-next-rsc-cache-wrapper",M="private-next-rsc-action-encryption",L="private-next-rsc-action-client-wrapper",U="You can not have a '_next' folder inside of your public folder. This conflicts with the internal '/_next' route. https://nextjs.org/docs/messages/public-next-folder-conflict",q="You can not use getInitialProps with getStaticProps. To use SSG, please remove your getInitialProps",F="You can not use getInitialProps with getServerSideProps. Please remove getInitialProps.",$="You can not use getStaticProps or getStaticPaths with getServerSideProps. To use SSG, please remove getServerSideProps",H="can not have getInitialProps/getServerSideProps, https://nextjs.org/docs/messages/404-get-initial-props",G="pages with `getServerSideProps` can not be exported. See more info here: https://nextjs.org/docs/messages/gssp-export",B="Your `getStaticProps` function did not return an object. Did you forget to add a `return`?",W="Your `getServerSideProps` function did not return an object. Did you forget to add a `return`?",X="The `unstable_revalidate` property is available for general use.\nPlease use `revalidate` instead.",V="can not be attached to a page's component and must be exported from the page. See more info here: https://nextjs.org/docs/messages/gssp-component-member",Y='You are using a non-standard "NODE_ENV" value in your environment. This creates inconsistencies in the project and is strongly advised against. Read more: https://nextjs.org/docs/messages/non-standard-node-env',K="Pages with `fallback` enabled in `getStaticPaths` can not be exported. See more info here: https://nextjs.org/docs/messages/ssg-fallback-true-export",z=["app","pages","components","lib","src"],J={edge:"edge",experimentalEdge:"experimental-edge",nodejs:"nodejs"},Q={shared:"shared",reactServerComponents:"rsc",serverSideRendering:"ssr",actionBrowser:"action-browser",apiNode:"api-node",apiEdge:"api-edge",middleware:"middleware",instrument:"instrument",edgeAsset:"edge-asset",appPagesBrowser:"app-pages-browser",pagesDirBrowser:"pages-dir-browser",pagesDirEdge:"pages-dir-edge",pagesDirNode:"pages-dir-node"},Z={...Q,GROUP:{builtinReact:[Q.reactServerComponents,Q.actionBrowser],serverOnly:[Q.reactServerComponents,Q.actionBrowser,Q.instrument,Q.middleware],neutralTarget:[Q.apiNode,Q.apiEdge],clientOnly:[Q.serverSideRendering,Q.appPagesBrowser],bundled:[Q.reactServerComponents,Q.actionBrowser,Q.serverSideRendering,Q.appPagesBrowser,Q.shared,Q.instrument,Q.middleware],appPages:[Q.reactServerComponents,Q.serverSideRendering,Q.appPagesBrowser,Q.actionBrowser]}},ee={edgeSSREntry:"__next_edge_ssr_entry__",metadata:"__next_metadata__",metadataRoute:"__next_metadata_route__",metadataImageMeta:"__next_metadata_image_meta__"}},37317:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getClientComponentLoaderMetrics:function(){return o},wrapClientComponentLoader:function(){return i}});let r=0,a=0,n=0;function i(e){return"performance"in globalThis?{require:(...t)=>{let i=performance.now();0===r&&(r=i);try{return n+=1,e.__next_app__.require(...t)}finally{a+=performance.now()-i}},loadChunk:(...t)=>{let r=performance.now(),n=e.__next_app__.loadChunk(...t);return n.finally(()=>{a+=performance.now()-r}),n}}:e.__next_app__}function o(e={}){let t=0===r?void 0:{clientComponentLoadStart:r,clientComponentLoadTimes:a,clientComponentLoadCount:n};return e.reset&&(r=0,a=0,n=0),t}},39653:e=>{e.exports={container:"MonthlyAvailabilityView_container__fxzlL",header:"MonthlyAvailabilityView_header__u_46e",monthInfo:"MonthlyAvailabilityView_monthInfo__P7eiY",monthTitle:"MonthlyAvailabilityView_monthTitle__8jGuX",chooseDateButton:"MonthlyAvailabilityView_chooseDateButton__5A8qq",calendarGrid:"MonthlyAvailabilityView_calendarGrid__OUVvr",dayHeaders:"MonthlyAvailabilityView_dayHeaders__sniM2",dayHeader:"MonthlyAvailabilityView_dayHeader__GfXoF",daysGrid:"MonthlyAvailabilityView_daysGrid__mglLp",dayCell:"MonthlyAvailabilityView_dayCell__fenqs",otherMonth:"MonthlyAvailabilityView_otherMonth__IECwJ",today:"MonthlyAvailabilityView_today___PkFx",selected:"MonthlyAvailabilityView_selected__jZCXi",hasAvailability:"MonthlyAvailabilityView_hasAvailability__8OQJ1",dayNumber:"MonthlyAvailabilityView_dayNumber__Bp2S2",availabilityIndicator:"MonthlyAvailabilityView_availabilityIndicator__fCHt9",navigation:"MonthlyAvailabilityView_navigation__54i0W",navButton:"MonthlyAvailabilityView_navButton__qSAR2",clearButton:"MonthlyAvailabilityView_clearButton__4Oc_T"}},4e4:(e,t)=>{"use strict";function r(e){let t=e.indexOf("#"),r=e.indexOf("?"),a=r>-1&&(t<0||r<t);return a||t>-1?{pathname:e.substring(0,a?r:t),query:a?e.substring(r,t>-1?t:void 0):"",hash:t>-1?e.slice(t):""}:{pathname:e,query:"",hash:""}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"parsePath",{enumerable:!0,get:function(){return r}})},40857:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{fromNodeOutgoingHttpHeaders:function(){return n},normalizeNextQueryParam:function(){return l},splitCookiesString:function(){return i},toNodeOutgoingHttpHeaders:function(){return o},validateURL:function(){return s}});let a=r(36376);function n(e){let t=new Headers;for(let[r,a]of Object.entries(e))for(let e of Array.isArray(a)?a:[a])void 0!==e&&("number"==typeof e&&(e=e.toString()),t.append(r,e));return t}function i(e){var t,r,a,n,i,o=[],s=0;function l(){for(;s<e.length&&/\s/.test(e.charAt(s));)s+=1;return s<e.length}for(;s<e.length;){for(t=s,i=!1;l();)if(","===(r=e.charAt(s))){for(a=s,s+=1,l(),n=s;s<e.length&&"="!==(r=e.charAt(s))&&";"!==r&&","!==r;)s+=1;s<e.length&&"="===e.charAt(s)?(i=!0,s=n,o.push(e.substring(t,a)),t=s):s=a+1}else s+=1;(!i||s>=e.length)&&o.push(e.substring(t,e.length))}return o}function o(e){let t={},r=[];if(e)for(let[a,n]of e.entries())"set-cookie"===a.toLowerCase()?(r.push(...i(n)),t[a]=1===r.length?r[0]:r):t[a]=n;return t}function s(e){try{return String(new URL(String(e)))}catch(t){throw Object.defineProperty(Error(`URL is malformed "${String(e)}". Please use only absolute URLs - https://nextjs.org/docs/messages/middleware-relative-urls`,{cause:t}),"__NEXT_ERROR_CODE",{value:"E61",enumerable:!1,configurable:!0})}}function l(e){for(let t of[a.NEXT_QUERY_PARAM_PREFIX,a.NEXT_INTERCEPTION_MARKER_PREFIX])if(e!==t&&e.startsWith(t))return e.substring(t.length);return null}},41220:(e,t,r)=>{"use strict";Object.defineProperty(t,"e",{enumerable:!0,get:function(){return u}});let a=r(36376),n=r(24624),i=r(29294),o=r(63033),s=r(75626),l=0;async function c(e,t,r,n,i,o,l){await t.set(r,{kind:s.CachedRouteKind.FETCH,data:{headers:{},body:JSON.stringify(e),status:200,url:""},revalidate:"number"!=typeof i?a.CACHE_ONE_YEAR:i},{fetchCache:!0,tags:n,fetchIdx:o,fetchUrl:l})}function u(e,t,r={}){if(0===r.revalidate)throw Object.defineProperty(Error(`Invariant revalidate: 0 can not be passed to unstable_cache(), must be "false" or "> 0" ${e.toString()}`),"__NEXT_ERROR_CODE",{value:"E57",enumerable:!1,configurable:!0});let a=r.tags?(0,n.validateTags)(r.tags,`unstable_cache ${e.toString()}`):[];(0,n.validateRevalidate)(r.revalidate,`unstable_cache ${e.name||e.toString()}`);let d=`${e.toString()}-${Array.isArray(t)&&t.join(",")}`;return async(...t)=>{let n=i.workAsyncStorage.getStore(),u=o.workUnitAsyncStorage.getStore(),f=(null==n?void 0:n.incrementalCache)||globalThis.__incrementalCache;if(!f)throw Object.defineProperty(Error(`Invariant: incrementalCache missing in unstable_cache ${e.toString()}`),"__NEXT_ERROR_CODE",{value:"E469",enumerable:!1,configurable:!0});let h=u&&"prerender"===u.type?u.cacheSignal:null;h&&h.beginRead();try{let i=u&&"request"===u.type?u:void 0,h=(null==i?void 0:i.url.pathname)??(null==n?void 0:n.route)??"",p=new URLSearchParams((null==i?void 0:i.url.search)??""),y=[...p.keys()].sort((e,t)=>e.localeCompare(t)).map(e=>`${e}=${p.get(e)}`).join("&"),g=`${d}-${JSON.stringify(t)}`,m=await f.generateCacheKey(g),b=`unstable_cache ${h}${y.length?"?":""}${y} ${e.name?` ${e.name}`:m}`,v=(n?n.nextFetchId:l)??1,_=null==u?void 0:u.implicitTags,w={type:"unstable-cache",phase:"render",implicitTags:_,draftMode:u&&n&&(0,o.getDraftModeProviderForCacheScope)(n,u)};if(n){if(n.nextFetchId=v+1,u&&("cache"===u.type||"prerender"===u.type||"prerender-ppr"===u.type||"prerender-legacy"===u.type)){"number"==typeof r.revalidate&&(u.revalidate<r.revalidate||(u.revalidate=r.revalidate));let e=u.tags;if(null===e)u.tags=a.slice();else for(let t of a)e.includes(t)||e.push(t)}if(!(u&&"unstable-cache"===u.type)&&"force-no-store"!==n.fetchCache&&!n.isOnDemandRevalidate&&!f.isOnDemandRevalidate&&!n.isDraftMode){let i=await f.get(m,{kind:s.IncrementalCacheKind.FETCH,revalidate:r.revalidate,tags:a,softTags:null==_?void 0:_.tags,fetchIdx:v,fetchUrl:b});if(i&&i.value)if(i.value.kind!==s.CachedRouteKind.FETCH)console.error(`Invariant invalid cacheEntry returned for ${g}`);else{let s=void 0!==i.value.data.body?JSON.parse(i.value.data.body):void 0;return i.isStale&&(n.pendingRevalidates||(n.pendingRevalidates={}),n.pendingRevalidates[g]=o.workUnitAsyncStorage.run(w,e,...t).then(e=>c(e,f,m,a,r.revalidate,v,b)).catch(e=>console.error(`revalidating cache with key: ${g}`,e))),s}}let i=await o.workUnitAsyncStorage.run(w,e,...t);return n.isDraftMode||c(i,f,m,a,r.revalidate,v,b),i}{if(l+=1,!f.isOnDemandRevalidate){let e=await f.get(m,{kind:s.IncrementalCacheKind.FETCH,revalidate:r.revalidate,tags:a,fetchIdx:v,fetchUrl:b,softTags:null==_?void 0:_.tags});if(e&&e.value){if(e.value.kind!==s.CachedRouteKind.FETCH)console.error(`Invariant invalid cacheEntry returned for ${g}`);else if(!e.isStale)return void 0!==e.value.data.body?JSON.parse(e.value.data.body):void 0}}let n=await o.workUnitAsyncStorage.run(w,e,...t);return c(n,f,m,a,r.revalidate,v,b),n}}finally{h&&h.endRead()}}}},42383:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getNextPathnameInfo",{enumerable:!0,get:function(){return o}});let a=r(62736),n=r(68002),i=r(19186);function o(e,t){var r,o;let{basePath:s,i18n:l,trailingSlash:c}=null!=(r=t.nextConfig)?r:{},u={pathname:e,trailingSlash:"/"!==e?e.endsWith("/"):c};s&&(0,i.pathHasPrefix)(u.pathname,s)&&(u.pathname=(0,n.removePathPrefix)(u.pathname,s),u.basePath=s);let d=u.pathname;if(u.pathname.startsWith("/_next/data/")&&u.pathname.endsWith(".json")){let e=u.pathname.replace(/^\/_next\/data\//,"").replace(/\.json$/,"").split("/");u.buildId=e[0],d="index"!==e[1]?"/"+e.slice(1).join("/"):"/",!0===t.parseData&&(u.pathname=d)}if(l){let e=t.i18nProvider?t.i18nProvider.analyze(u.pathname):(0,a.normalizeLocalePath)(u.pathname,l.locales);u.locale=e.detectedLocale,u.pathname=null!=(o=e.pathname)?o:u.pathname,!e.detectedLocale&&u.buildId&&(e=t.i18nProvider?t.i18nProvider.analyze(d):(0,a.normalizeLocalePath)(d,l.locales)).detectedLocale&&(u.locale=e.detectedLocale)}return u}},43408:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>d,pages:()=>u,routeModule:()=>f,tree:()=>c});var a=r(65239),n=r(48088),i=r(88170),o=r.n(i),s=r(30893),l={};for(let e in s)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>s[e]);r.d(t,l);let c={children:["",{children:["(web-client)",{children:["user",{children:["[userId]",{children:["worker",{children:["calendar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,47838)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/calendar/page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,14866)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,58014)),"/home/israel/personal/code/alex/able-ai/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,u=["/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/calendar/page.tsx"],d={require:r,loadChunk:()=>Promise.resolve()},f=new a.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/(web-client)/user/[userId]/worker/calendar/page",pathname:"/user/[userId]/worker/calendar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},43455:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{U:()=>u});var n=r(91199);r(42087);var i=r(30298),o=r(18839),s=r(60444),l=r(33331),c=e([i]);i=(c.then?(await c)():c)[0];let d=s.gigStatusEnum.enumValues[2];async function u({gigId:e,userId:t}){try{let r=await i.db.query.UsersTable.findFirst({where:(0,o.eq)(s.UsersTable.firebaseUid,t),columns:{id:!0}});if(!r)return{error:"User not found",status:404};if(!await i.db.query.GigsTable.findFirst({where:(0,o.Uo)((0,o.eq)(s.GigsTable.id,e),(0,o.eq)(s.GigsTable.statusInternal,s.gigStatusEnum.enumValues[0]),(0,o.kZ)(s.GigsTable.workerUserId))}))return{error:"Gig not found or not available for acceptance",status:404};return await i.db.update(s.GigsTable).set({workerUserId:r.id,statusInternal:d,updatedAt:new Date}).where((0,o.eq)(s.GigsTable.id,e)),{success:!0,status:200,message:"Gig offer accepted successfully"}}catch(e){return console.error("Error accepting gig offer:",e),{error:e.message||"Failed to accept gig offer",status:500}}}(0,l.D)([u]),(0,n.A)(u,"402e2448f83fdc0f1b31fdff1de0016567c7fd3feb",null),a()}catch(e){a(e)}})},44927:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{isNodeNextRequest:function(){return n},isNodeNextResponse:function(){return i},isWebNextRequest:function(){return r},isWebNextResponse:function(){return a}});let r=e=>!1,a=e=>!1,n=e=>!0,i=e=>!0},46675:e=>{"use strict";e.exports=require("firebase-admin")},46729:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouteKind",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},47838:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/calendar/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/calendar/page.tsx","default")},48869:e=>{e.exports={container:"DailyAvailabilityView_container__hcS1z",calendarFadeIn:"DailyAvailabilityView_calendarFadeIn___kvuo",header:"DailyAvailabilityView_header__T73At",headerSlideDown:"DailyAvailabilityView_headerSlideDown__5r0in",timeHeader:"DailyAvailabilityView_timeHeader__5ozL9",dayHeader:"DailyAvailabilityView_dayHeader__MNXg1",dayName:"DailyAvailabilityView_dayName__GAcRA",dayNumber:"DailyAvailabilityView_dayNumber__6j9eY",timeGrid:"DailyAvailabilityView_timeGrid__AqRdH",timeColumn:"DailyAvailabilityView_timeColumn__yWaau",timeLabel:"DailyAvailabilityView_timeLabel__Hsb3r",availabilityColumn:"DailyAvailabilityView_availabilityColumn__9C4Mf",emptySlot:"DailyAvailabilityView_emptySlot__33XJ1",availabilityBlock:"DailyAvailabilityView_availabilityBlock__YfYxv",availabilityContent:"DailyAvailabilityView_availabilityContent__EJDAV",availabilityTime:"DailyAvailabilityView_availabilityTime__9H0_P",availabilityStatus:"DailyAvailabilityView_availabilityStatus__fYhjP",contextMenu:"DailyAvailabilityView_contextMenu__ylZbg",deleteOption:"DailyAvailabilityView_deleteOption__17psr",clearButton:"DailyAvailabilityView_clearButton__a8DO4"}},49761:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"NextURL",{enumerable:!0,get:function(){return u}});let a=r(96197),n=r(71490),i=r(18463),o=r(42383),s=/(?!^https?:\/\/)(127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}|\[::1\]|localhost)/;function l(e,t){return new URL(String(e).replace(s,"localhost"),t&&String(t).replace(s,"localhost"))}let c=Symbol("NextURLInternal");class u{constructor(e,t,r){let a,n;"object"==typeof t&&"pathname"in t||"string"==typeof t?(a=t,n=r||{}):n=r||t||{},this[c]={url:l(e,a??n.base),options:n,basePath:""},this.analyze()}analyze(){var e,t,r,n,s;let l=(0,o.getNextPathnameInfo)(this[c].url.pathname,{nextConfig:this[c].options.nextConfig,parseData:!0,i18nProvider:this[c].options.i18nProvider}),u=(0,i.getHostname)(this[c].url,this[c].options.headers);this[c].domainLocale=this[c].options.i18nProvider?this[c].options.i18nProvider.detectDomainLocale(u):(0,a.detectDomainLocale)(null==(t=this[c].options.nextConfig)||null==(e=t.i18n)?void 0:e.domains,u);let d=(null==(r=this[c].domainLocale)?void 0:r.defaultLocale)||(null==(s=this[c].options.nextConfig)||null==(n=s.i18n)?void 0:n.defaultLocale);this[c].url.pathname=l.pathname,this[c].defaultLocale=d,this[c].basePath=l.basePath??"",this[c].buildId=l.buildId,this[c].locale=l.locale??d,this[c].trailingSlash=l.trailingSlash}formatPathname(){return(0,n.formatNextPathnameInfo)({basePath:this[c].basePath,buildId:this[c].buildId,defaultLocale:this[c].options.forceLocale?void 0:this[c].defaultLocale,locale:this[c].locale,pathname:this[c].url.pathname,trailingSlash:this[c].trailingSlash})}formatSearch(){return this[c].url.search}get buildId(){return this[c].buildId}set buildId(e){this[c].buildId=e}get locale(){return this[c].locale??""}set locale(e){var t,r;if(!this[c].locale||!(null==(r=this[c].options.nextConfig)||null==(t=r.i18n)?void 0:t.locales.includes(e)))throw Object.defineProperty(TypeError(`The NextURL configuration includes no locale "${e}"`),"__NEXT_ERROR_CODE",{value:"E597",enumerable:!1,configurable:!0});this[c].locale=e}get defaultLocale(){return this[c].defaultLocale}get domainLocale(){return this[c].domainLocale}get searchParams(){return this[c].url.searchParams}get host(){return this[c].url.host}set host(e){this[c].url.host=e}get hostname(){return this[c].url.hostname}set hostname(e){this[c].url.hostname=e}get port(){return this[c].url.port}set port(e){this[c].url.port=e}get protocol(){return this[c].url.protocol}set protocol(e){this[c].url.protocol=e}get href(){let e=this.formatPathname(),t=this.formatSearch();return`${this.protocol}//${this.host}${e}${t}${this.hash}`}set href(e){this[c].url=l(e),this.analyze()}get origin(){return this[c].url.origin}get pathname(){return this[c].url.pathname}set pathname(e){this[c].url.pathname=e}get hash(){return this[c].url.hash}set hash(e){this[c].url.hash=e}get search(){return this[c].url.search}set search(e){this[c].url.search=e}get password(){return this[c].url.password}set password(e){this[c].url.password=e}get username(){return this[c].url.username}set username(e){this[c].url.username=e}get basePath(){return this[c].basePath}set basePath(e){this[c].basePath=e.startsWith("/")?e:`/${e}`}toString(){return this.href}toJSON(){return this.href}[Symbol.for("edge-runtime.inspect.custom")](){return{href:this.href,origin:this.origin,protocol:this.protocol,username:this.username,password:this.password,host:this.host,hostname:this.hostname,port:this.port,pathname:this.pathname,search:this.search,searchParams:this.searchParams,hash:this.hash}}clone(){return new u(String(this),this[c].options)}}},50346:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Cj:()=>f,Lb:()=>y,M8:()=>h,mt:()=>g,updateAvailabilitySlot:()=>p});var n=r(91199);r(42087);var i=r(30298),o=r(15568),s=r(47253),l=r(18839),c=r(7944),u=r(33331),d=e([i]);async function f(e){try{let t=await i.db.query.UsersTable.findFirst({where:(0,l.eq)(o.Lh.firebaseUid,e)});if(!t)return console.log("getWorkerAvailability: User not found for userId:",e),{error:"User not found",availability:[]};let r=await i.db.query.WorkerAvailabilityTable.findMany({where:(0,l.eq)(s.u.userId,t.id)});console.log("getWorkerAvailability: availabilitySlots from WorkerAvailabilityTable:",r);let a=r.map(e=>({id:e.id,startTime:e.startTimeStr||"09:00",endTime:e.endTimeStr||"17:00",days:e.days||[],frequency:e.frequency||"never",ends:e.ends||"never",startDate:e.startDate||void 0,endDate:e.endDate||void 0,occurrences:e.occurrences||void 0,notes:e.notes||void 0,createdAt:e.createdAt,updatedAt:e.updatedAt}));return console.log("getWorkerAvailability: converted availability:",a),{availability:a}}catch(e){return console.error("Error fetching availability:",e),{error:"Failed to fetch availability",availability:[]}}}async function h(e,t){try{let r;if(console.log("createAvailabilitySlot called with userId:",e),console.log("createAvailabilitySlot called with data:",t),console.log("createAvailabilitySlot data structure:",{startTime:t.startTime,endTime:t.endTime,days:t.days,frequency:t.frequency,ends:t.ends,startDate:t.startDate,endDate:t.endDate,occurrences:t.occurrences,notes:t.notes}),!t.startTime||!t.endTime||!t.days||!t.frequency||!t.ends)return console.error("createAvailabilitySlot: Missing required fields:",{startTime:!!t.startTime,endTime:!!t.endTime,days:!!t.days,frequency:!!t.frequency,ends:!!t.ends}),{error:"Missing required fields"};if(!Array.isArray(t.days))return console.error("createAvailabilitySlot: days is not an array:",t.days),{error:"Days must be an array"};if(0===t.days.length)return console.error("createAvailabilitySlot: days array is empty"),{error:"At least one day must be selected"};console.log("createAvailabilitySlot: All validations passed, proceeding with database operations");let a=await i.db.query.UsersTable.findFirst({where:(0,l.eq)(o.Lh.firebaseUid,e)});if(!a)return console.log("createAvailabilitySlot: User not found for userId:",e),{error:"User not found"};console.log("createAvailabilitySlot: Found user:",a.id),console.log("createAvailabilitySlot: About to insert into WorkerAvailabilityTable with data:",{userId:a.id,days:t.days,frequency:t.frequency,startDate:t.startDate,startTimeStr:t.startTime,endTimeStr:t.endTime,ends:t.ends,occurrences:t.occurrences,endDate:t.endDate,notes:t.notes}),console.log("createAvailabilitySlot: Data types:",{startDate:typeof t.startDate,endDate:typeof t.endDate,startTime:typeof t.startTime,endTime:typeof t.endTime});try{let e=e=>{let[t,r]=e.split(":").map(Number),a=new Date;return a.setHours(t,r,0,0),a};[r]=await i.db.insert(s.u).values({userId:a.id,days:t.days,frequency:t.frequency,startDate:t.startDate,startTimeStr:t.startTime,endTimeStr:t.endTime,startTime:e(t.startTime),endTime:e(t.endTime),ends:t.ends,occurrences:t.occurrences,endDate:t.endDate||null,notes:t.notes,createdAt:new Date,updatedAt:new Date}).returning()}catch(e){return console.error("createAvailabilitySlot: Database insert error:",e),console.error("createAvailabilitySlot: Database error details:",{message:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:void 0,error:e}),{error:"Failed to create availability slot",details:e instanceof Error?e.message:"Unknown database error",errorType:"database_error"}}return console.log("createAvailabilitySlot: Created new slot in WorkerAvailabilityTable:",r),(0,c.revalidatePath)(`/user/${e}/worker/calendar`),{success:!0,slot:r}}catch(e){return console.error("Error creating availability slot:",e),console.error("Error details:",{message:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:void 0,error:e}),{error:"Failed to create availability slot",details:e instanceof Error?e.message:"Unknown error",errorType:"general_error"}}}async function p(e,t,r){try{if(console.log("updateAvailabilitySlot called with userId:",e),console.log("updateAvailabilitySlot called with slotId:",t),console.log("updateAvailabilitySlot called with data:",r),!r.startTime||!r.endTime)return console.error("updateAvailabilitySlot: Missing required time fields"),{error:"Missing required time fields"};let a=await i.db.query.UsersTable.findFirst({where:(0,l.eq)(o.Lh.firebaseUid,e)});if(!a)return console.log("updateAvailabilitySlot: User not found for userId:",e),{error:"User not found"};console.log("updateAvailabilitySlot: Found user:",a.id);let n=await i.db.query.WorkerAvailabilityTable.findFirst({where:(0,l.eq)(s.u.id,t)});if(!n)return console.log("updateAvailabilitySlot: Slot not found for slotId:",t),{error:"Availability slot not found"};if(n.userId!==a.id)return console.log("updateAvailabilitySlot: Slot does not belong to user"),{error:"Access denied"};let u=e=>{let[t,r]=e.split(":").map(Number),a=new Date;return a.setHours(t,r,0,0),a},d={days:r.days,frequency:r.frequency,startDate:r.startDate,startTimeStr:r.startTime,endTimeStr:r.endTime,startTime:u(r.startTime),endTime:u(r.endTime),ends:r.ends,occurrences:r.occurrences,endDate:r.endDate||null,notes:r.notes,updatedAt:new Date};console.log("updateAvailabilitySlot: About to update with data:",d);let[f]=await i.db.update(s.u).set(d).where((0,l.eq)(s.u.id,t)).returning();if(!f)return console.log("updateAvailabilitySlot: Failed to update slot"),{error:"Failed to update availability slot"};return console.log("updateAvailabilitySlot: Successfully updated slot:",f),(0,c.revalidatePath)(`/user/${e}/worker/calendar`),{success:!0,slot:f}}catch(e){return console.error("Error updating availability slot:",e),console.error("Error details:",{message:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:void 0,error:e}),{error:"Failed to update availability slot",details:e instanceof Error?e.message:"Unknown error",errorType:"update_error"}}}async function y(e,t){try{if(!await i.db.query.UsersTable.findFirst({where:(0,l.eq)(o.Lh.firebaseUid,e)}))return{error:"User not found"};let r=await i.db.delete(s.u).where((0,l.eq)(s.u.id,t)).returning();if(0===r.length)return{error:"Availability slot not found"};return(0,c.revalidatePath)(`/user/${e}/worker/calendar`),{success:!0}}catch(e){return console.error("Error deleting availability slot:",e),{error:"Failed to delete availability slot"}}}async function g(e){try{let t=await i.db.query.UsersTable.findFirst({where:(0,l.eq)(o.Lh.firebaseUid,e)});if(!t)return{error:"User not found"};return await i.db.delete(s.u).where((0,l.eq)(s.u.userId,t.id)),(0,c.revalidatePath)(`/user/${e}/worker/calendar`),{success:!0}}catch(e){return console.error("Error clearing availability:",e),{error:"Failed to clear availability"}}}i=(d.then?(await d)():d)[0],(0,u.D)([f,h,p,y,g]),(0,n.A)(f,"4036dcb842d9aeecc172ee483ab65d207e7f190ce8",null),(0,n.A)(h,"60c8159956a4599f9e9a8543bfe7d8c1b38a042d33",null),(0,n.A)(p,"7081229772f4cf291c8c7f3e0520c53fab2f5c316b",null),(0,n.A)(y,"60c141735362d4faf5095ec886ca7f0ed74eccec21",null),(0,n.A)(g,"40c90f51c0218da5778bfd271dd21f1e3242896133",null),a()}catch(e){a(e)}})},51851:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{revalidatePath:function(){return f},revalidateTag:function(){return c},unstable_expirePath:function(){return u},unstable_expireTag:function(){return d}});let a=r(75124),n=r(17529),i=r(36376),o=r(29294),s=r(63033),l=r(38248);function c(e){return h([e],`revalidateTag ${e}`)}function u(e,t){if(e.length>i.NEXT_CACHE_SOFT_TAG_MAX_LENGTH)return void console.warn(`Warning: expirePath received "${e}" which exceeded max length of ${i.NEXT_CACHE_SOFT_TAG_MAX_LENGTH}. See more info here https://nextjs.org/docs/app/api-reference/functions/unstable_expirePath`);let r=`${i.NEXT_CACHE_IMPLICIT_TAG_ID}${e}`;return t?r+=`${r.endsWith("/")?"":"/"}${t}`:(0,n.isDynamicRoute)(e)&&console.warn(`Warning: a dynamic page path "${e}" was passed to "expirePath", but the "type" parameter is missing. This has no effect by default, see more info here https://nextjs.org/docs/app/api-reference/functions/unstable_expirePath`),h([r],`unstable_expirePath ${e}`)}function d(...e){return h(e,`unstable_expireTag ${e.join(", ")}`)}function f(e,t){if(e.length>i.NEXT_CACHE_SOFT_TAG_MAX_LENGTH)return void console.warn(`Warning: revalidatePath received "${e}" which exceeded max length of ${i.NEXT_CACHE_SOFT_TAG_MAX_LENGTH}. See more info here https://nextjs.org/docs/app/api-reference/functions/revalidatePath`);let r=`${i.NEXT_CACHE_IMPLICIT_TAG_ID}${e}`;return t?r+=`${r.endsWith("/")?"":"/"}${t}`:(0,n.isDynamicRoute)(e)&&console.warn(`Warning: a dynamic page path "${e}" was passed to "revalidatePath", but the "type" parameter is missing. This has no effect by default, see more info here https://nextjs.org/docs/app/api-reference/functions/revalidatePath`),h([r],`revalidatePath ${e}`)}function h(e,t){let r=o.workAsyncStorage.getStore();if(!r||!r.incrementalCache)throw Object.defineProperty(Error(`Invariant: static generation store missing in ${t}`),"__NEXT_ERROR_CODE",{value:"E263",enumerable:!1,configurable:!0});let n=s.workUnitAsyncStorage.getStore();if(n){if("cache"===n.type)throw Object.defineProperty(Error(`Route ${r.route} used "${t}" inside a "use cache" which is unsupported. To ensure revalidation is performed consistently it must always happen outside of renders and cached functions. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E181",enumerable:!1,configurable:!0});if("unstable-cache"===n.type)throw Object.defineProperty(Error(`Route ${r.route} used "${t}" inside a function cached with "unstable_cache(...)" which is unsupported. To ensure revalidation is performed consistently it must always happen outside of renders and cached functions. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E306",enumerable:!1,configurable:!0});if("render"===n.phase)throw Object.defineProperty(Error(`Route ${r.route} used "${t}" during render which is unsupported. To ensure revalidation is performed consistently it must always happen outside of renders and cached functions. See more info here: https://nextjs.org/docs/app/building-your-application/rendering/static-and-dynamic#dynamic-rendering`),"__NEXT_ERROR_CODE",{value:"E7",enumerable:!1,configurable:!0});if("prerender"===n.type){let e=Object.defineProperty(Error(`Route ${r.route} used ${t} without first calling \`await connection()\`.`),"__NEXT_ERROR_CODE",{value:"E406",enumerable:!1,configurable:!0});(0,a.abortAndThrowOnSynchronousRequestDataAccess)(r.route,t,e,n)}else if("prerender-ppr"===n.type)(0,a.postponeWithTracking)(r.route,t,n.dynamicTracking);else if("prerender-legacy"===n.type){n.revalidate=0;let e=Object.defineProperty(new l.DynamicServerError(`Route ${r.route} couldn't be rendered statically because it used \`${t}\`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error`),"__NEXT_ERROR_CODE",{value:"E558",enumerable:!1,configurable:!0});throw r.dynamicUsageDescription=t,r.dynamicUsageStack=e.stack,e}}for(let t of(r.pendingRevalidatedTags||(r.pendingRevalidatedTags=[]),e))r.pendingRevalidatedTags.includes(t)||r.pendingRevalidatedTags.push(t);r.pathWasRevalidated=!0}},52779:(e,t,r)=>{Promise.resolve().then(r.bind(r,24909))},55511:e=>{"use strict";e.exports=require("crypto")},58355:(e,t,r)=>{Promise.resolve().then(r.bind(r,47838))},62736:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizeLocalePath",{enumerable:!0,get:function(){return a}});let r=new WeakMap;function a(e,t){let a;if(!t)return{pathname:e};let n=r.get(t);n||(n=t.map(e=>e.toLowerCase()),r.set(t,n));let i=e.split("/",2);if(!i[1])return{pathname:e};let o=i[1].toLowerCase(),s=n.indexOf(o);return s<0?{pathname:e}:(a=t[s],{pathname:e=e.slice(a.length+1)||"/",detectedLocale:a})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63659:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{g:()=>u});var n=r(91199);r(42087);var i=r(30298),o=r(18839),s=r(60444),l=r(33331),c=e([i]);i=(c.then?(await c)():c)[0];let d=s.gigStatusEnum.enumValues[0];s.gigStatusEnum.enumValues[1];let f=s.gigStatusEnum.enumValues[2],h=s.gigStatusEnum.enumValues[4],p=s.gigStatusEnum.enumValues[5],y=s.gigStatusEnum.enumValues[6],g=s.gigStatusEnum.enumValues[7],m=s.gigStatusEnum.enumValues[8],b=s.gigStatusEnum.enumValues[9];async function u(e){try{console.log("Debug - getWorkerOffers called with userId:",e);let t=await i.db.query.UsersTable.findFirst({where:(0,o.eq)(s.UsersTable.firebaseUid,e),columns:{id:!0}});if(console.log("Debug - User found:",t),!t)return{error:"User not found",status:404};console.log("Debug - Using simplified approach...");let r=await i.db.query.GigsTable.findMany({columns:{id:!0,titleInternal:!0,statusInternal:!0,workerUserId:!0,buyerUserId:!0,startTime:!0,endTime:!0,agreedRate:!0,fullDescription:!0,notesForWorker:!0,addressJson:!0,exactLocation:!0}});console.log("Debug - Total gigs fetched:",r.length);let a=r.filter(e=>e.statusInternal===d&&!e.workerUserId&&e.buyerUserId!==t.id);console.log("Debug - Current user ID:",t.id),console.log("Debug - Gigs created by current user:",r.filter(e=>e.buyerUserId===t.id).length),console.log("Debug - Gigs by other users:",r.filter(e=>e.buyerUserId!==t.id).length),console.log("Debug - Offer gigs after filtering:",a.length);let n=r.filter(e=>e.workerUserId===t.id&&[f,h,p,y,g,m,b].includes(e.statusInternal));console.log("Debug - Accepted gigs after filtering:",n.length);let l=a.map(t=>{let r=new Date(t.startTime),a=new Date(t.endTime),n=(a.getTime()-r.getTime())/36e5,i=Math.round(100*n)/100,o=Number(t.agreedRate)*i,s=r.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"}),l=`${r.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})} - ${a.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`,c="Location not specified";if(t.addressJson&&"object"==typeof t.addressJson){let e=t.addressJson;e.formatted_address?c=e.formatted_address:e.address?c=e.address:e.city&&e.country&&(c=`${e.city}, ${e.country}`)}else t.exactLocation&&(c=t.exactLocation);return{id:t.id,role:t.titleInternal,buyerName:"Buyer (Details not loaded)",locationSnippet:c,dateString:s,timeString:l,hourlyRate:Number(t.agreedRate),estimatedHours:i,totalPay:Math.round(100*o)/100,tipsExpected:!1,status:"pending",fullDescriptionLink:`/user/${e}/worker/gigs/${t.id}`,gigDescription:t.fullDescription||void 0,notesForWorker:t.notesForWorker||void 0}}),c=n.map(t=>{let r=new Date(t.startTime),a=new Date(t.endTime),n=(a.getTime()-r.getTime())/36e5,i=Math.round(100*n)/100,o=Number(t.agreedRate)*i,s=r.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"}),l=`${r.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})} - ${a.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`,c="Location not specified";if(t.addressJson&&"object"==typeof t.addressJson){let e=t.addressJson;e.formatted_address?c=e.formatted_address:e.address?c=e.address:e.city&&e.country&&(c=`${e.city}, ${e.country}`)}else t.exactLocation&&(c=t.exactLocation);return{id:t.id,role:t.titleInternal,buyerName:"Buyer (Details not loaded)",locationSnippet:c,dateString:s,timeString:l,hourlyRate:Number(t.agreedRate),estimatedHours:i,totalPay:Math.round(100*o)/100,tipsExpected:!1,status:t.statusInternal,fullDescriptionLink:`/user/${e}/worker/gigs/${t.id}`,gigDescription:t.fullDescription||void 0,notesForWorker:t.notesForWorker||void 0}});return console.log("Debug - Final result - offers:",l.length,"accepted:",c.length),console.log("Debug - Sample offer:",l[0]),{success:!0,data:{offers:l,acceptedGigs:c}}}catch(e){return console.error("Error fetching worker offers:",e),{error:e.message||"Failed to fetch worker offers",status:500}}}console.log("Debug - Enum values:",s.gigStatusEnum.enumValues),console.log("Debug - PENDING_WORKER_ACCEPTANCE:",d),console.log("Debug - ACCEPTED:",f),(0,l.D)([u]),(0,n.A)(u,"40a6088411db4989a2f014a668b13745b3cfee1afe",null),a()}catch(e){a(e)}})},64939:e=>{"use strict";e.exports=import("pg")},65793:(e,t,r)=>{"use strict";r.a(e,async(e,a)=>{try{r.d(t,{Q:()=>u,p:()=>d});var n=r(91199);r(42087);var i=r(30298),o=r(15568),s=r(18839),l=r(33331),c=e([i]);async function u(e){try{console.log("testAvailabilityAction called with userId:",e);let t=await i.db.query.UsersTable.findFirst({where:(0,s.eq)(o.Lh.firebaseUid,e)});if(!t)return console.log("testAvailabilityAction: User not found"),{error:"User not found"};if(console.log("testAvailabilityAction: User found:",t.id),!await i.db.query.UsersTable.findFirst({where:(0,s.eq)(o.Lh.id,t.id)}))return console.log("testAvailabilityAction: Database query failed"),{error:"Database query failed"};return console.log("testAvailabilityAction: Database connection successful"),{success:!0,message:"Database connection and user lookup successful"}}catch(e){return console.error("testAvailabilityAction error:",e),{error:"Test failed",details:e instanceof Error?e.message:"Unknown error"}}}async function d(e,t){try{console.log("testUpdateAvailabilityAction called with userId:",e,"slotId:",t);let a=await i.db.query.UsersTable.findFirst({where:(0,s.eq)(o.Lh.firebaseUid,e)});if(!a)return console.log("testUpdateAvailabilityAction: User not found"),{error:"User not found"};console.log("testUpdateAvailabilityAction: User found:",a.id);let{updateAvailabilitySlot:n}=await Promise.resolve().then(r.bind(r,50346)),l={startTime:"10:00",endTime:"18:00",days:["Mon","Tue","Wed"],frequency:"weekly",ends:"never",notes:"Test update"};console.log("testUpdateAvailabilityAction: Testing update with data:",l);let c=await n(e,t,l);return console.log("testUpdateAvailabilityAction: Update result:",c),c}catch(e){return console.error("testUpdateAvailabilityAction error:",e),{error:"Update test failed",details:e instanceof Error?e.message:"Unknown error"}}}i=(c.then?(await c)():c)[0],(0,l.D)([u,d]),(0,n.A)(u,"4065d83c4d83b37b580f0b4dea60f265a115cab33f",null),(0,n.A)(d,"601708a8489638a525e9866148cf379839397520a2",null),a()}catch(e){a(e)}})},66455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"addLocale",{enumerable:!0,get:function(){return i}});let a=r(35333),n=r(19186);function i(e,t,r,i){if(!t||t===r)return e;let o=e.toLowerCase();return!i&&((0,n.pathHasPrefix)(o,"/api")||(0,n.pathHasPrefix)(o,"/"+t.toLowerCase()))?e:(0,a.addPathPrefix)(e,"/"+t)}},68002:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"removePathPrefix",{enumerable:!0,get:function(){return n}});let a=r(19186);function n(e,t){if(!(0,a.pathHasPrefix)(e,t))return e;let r=e.slice(t.length);return r.startsWith("/")?r:"/"+r}},71490:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"formatNextPathnameInfo",{enumerable:!0,get:function(){return s}});let a=r(25104),n=r(35333),i=r(222),o=r(66455);function s(e){let t=(0,o.addLocale)(e.pathname,e.locale,e.buildId?void 0:e.defaultLocale,e.ignorePrefix);return(e.buildId||!e.trailingSlash)&&(t=(0,a.removeTrailingSlash)(t)),e.buildId&&(t=(0,i.addPathSuffix)((0,n.addPathPrefix)(t,"/_next/data/"+e.buildId),"/"===e.pathname?"index.json":".json")),t=(0,n.addPathPrefix)(t,e.basePath),!e.buildId&&e.trailingSlash?t.endsWith("/")?t:(0,i.addPathSuffix)(t,"/"):(0,a.removeTrailingSlash)(t)}},72150:(e,t)=>{"use strict";function r(e){if(!e.body)return[e,e];let[t,r]=e.body.tee(),a=new Response(t,{status:e.status,statusText:e.statusText,headers:e.headers});Object.defineProperty(a,"url",{value:e.url});let n=new Response(r,{status:e.status,statusText:e.statusText,headers:e.headers});return Object.defineProperty(n,"url",{value:e.url}),[a,n]}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"cloneResponse",{enumerable:!0,get:function(){return r}})},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},74337:(e,t,r)=>{"use strict";r.d(t,{U:()=>n});var a=r(6475);let n=(0,a.createServerReference)("402e2448f83fdc0f1b31fdff1de0016567c7fd3feb",a.callServer,void 0,a.findSourceMapURL,"acceptGigOffer")},75626:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let a=r(88870),n=r(97748),i=r(77777);!function(e,t){Object.keys(e).forEach(function(r){"default"===r||Object.prototype.hasOwnProperty.call(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[r]}})})}(r(14245),t);class o{constructor(e){this.batcher=a.Batcher.create({cacheKeyFn:({key:e,isOnDemandRevalidate:t})=>`${e}-${t?"1":"0"}`,schedulerFn:n.scheduleOnNextTick}),this.minimalMode=e}async get(e,t,r){if(!e)return t({hasResolved:!1,previousCacheEntry:null});let{incrementalCache:a,isOnDemandRevalidate:n=!1,isFallback:o=!1,isRoutePPREnabled:s=!1}=r,l=await this.batcher.batch({key:e,isOnDemandRevalidate:n},async(l,c)=>{var u;if(this.minimalMode&&(null==(u=this.previousCacheItem)?void 0:u.key)===l&&this.previousCacheItem.expiresAt>Date.now())return this.previousCacheItem.entry;let d=(0,i.routeKindToIncrementalCacheKind)(r.routeKind),f=!1,h=null;try{if((h=this.minimalMode?null:await a.get(e,{kind:d,isRoutePPREnabled:r.isRoutePPREnabled,isFallback:o}))&&!n&&(c(h),f=!0,!h.isStale||r.isPrefetch))return null;let u=await t({hasResolved:f,previousCacheEntry:h,isRevalidating:!0});if(!u)return this.minimalMode&&(this.previousCacheItem=void 0),null;let p=await (0,i.fromResponseCacheEntry)({...u,isMiss:!h});if(!p)return this.minimalMode&&(this.previousCacheItem=void 0),null;return n||f||(c(p),f=!0),p.cacheControl&&(this.minimalMode?this.previousCacheItem={key:l,entry:p,expiresAt:Date.now()+1e3}:await a.set(e,p.value,{cacheControl:p.cacheControl,isRoutePPREnabled:s,isFallback:o})),p}catch(t){if(null==h?void 0:h.cacheControl){let t=Math.min(Math.max(h.cacheControl.revalidate||3,3),30),r=void 0===h.cacheControl.expire?void 0:Math.max(t+3,h.cacheControl.expire);await a.set(e,h.value,{cacheControl:{revalidate:t,expire:r},isRoutePPREnabled:s,isFallback:o})}if(f)return console.error(t),null;throw t}});return(0,i.toResponseCacheEntry)(l)}}},75738:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{NextRequestAdapter:function(){return d},ResponseAborted:function(){return l},ResponseAbortedName:function(){return s},createAbortController:function(){return c},signalFromNodeResponse:function(){return u}});let a=r(10920),n=r(40857),i=r(81661),o=r(44927),s="ResponseAborted";class l extends Error{constructor(...e){super(...e),this.name=s}}function c(e){let t=new AbortController;return e.once("close",()=>{e.writableFinished||t.abort(new l)}),t}function u(e){let{errored:t,destroyed:r}=e;if(t||r)return AbortSignal.abort(t??new l);let{signal:a}=c(e);return a}class d{static fromBaseNextRequest(e,t){if((0,o.isNodeNextRequest)(e))return d.fromNodeNextRequest(e,t);throw Object.defineProperty(Error("Invariant: Unsupported NextRequest type"),"__NEXT_ERROR_CODE",{value:"E345",enumerable:!1,configurable:!0})}static fromNodeNextRequest(e,t){let r,o=null;if("GET"!==e.method&&"HEAD"!==e.method&&e.body&&(o=e.body),e.url.startsWith("http"))r=new URL(e.url);else{let t=(0,a.getRequestMeta)(e,"initURL");r=t&&t.startsWith("http")?new URL(e.url,t):new URL(e.url,"http://n")}return new i.NextRequest(r,{method:e.method,headers:(0,n.fromNodeOutgoingHttpHeaders)(e.headers),duplex:"half",signal:t,...t.aborted?{}:{body:o}})}static fromWebNextRequest(e){let t=null;return"GET"!==e.method&&"HEAD"!==e.method&&(t=e.body),new i.NextRequest(e.url,{method:e.method,headers:(0,n.fromNodeOutgoingHttpHeaders)(e.headers),duplex:"half",signal:e.request.signal,...e.request.signal.aborted?{}:{body:t}})}}},77777:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{fromResponseCacheEntry:function(){return o},routeKindToIncrementalCacheKind:function(){return l},toResponseCacheEntry:function(){return s}});let a=r(14245),n=function(e){return e&&e.__esModule?e:{default:e}}(r(95247)),i=r(46729);async function o(e){var t,r;return{...e,value:(null==(t=e.value)?void 0:t.kind)===a.CachedRouteKind.PAGES?{kind:a.CachedRouteKind.PAGES,html:await e.value.html.toUnchunkedString(!0),pageData:e.value.pageData,headers:e.value.headers,status:e.value.status}:(null==(r=e.value)?void 0:r.kind)===a.CachedRouteKind.APP_PAGE?{kind:a.CachedRouteKind.APP_PAGE,html:await e.value.html.toUnchunkedString(!0),postponed:e.value.postponed,rscData:e.value.rscData,headers:e.value.headers,status:e.value.status,segmentData:e.value.segmentData}:e.value}}async function s(e){var t,r;return e?{isMiss:e.isMiss,isStale:e.isStale,cacheControl:e.cacheControl,isFallback:e.isFallback,value:(null==(t=e.value)?void 0:t.kind)===a.CachedRouteKind.PAGES?{kind:a.CachedRouteKind.PAGES,html:n.default.fromStatic(e.value.html),pageData:e.value.pageData,headers:e.value.headers,status:e.value.status}:(null==(r=e.value)?void 0:r.kind)===a.CachedRouteKind.APP_PAGE?{kind:a.CachedRouteKind.APP_PAGE,html:n.default.fromStatic(e.value.html),rscData:e.value.rscData,headers:e.value.headers,status:e.value.status,postponed:e.value.postponed,segmentData:e.value.segmentData}:e.value}:null}function l(e){switch(e){case i.RouteKind.PAGES:return a.IncrementalCacheKind.PAGES;case i.RouteKind.APP_PAGE:return a.IncrementalCacheKind.APP_PAGE;case i.RouteKind.IMAGE:return a.IncrementalCacheKind.IMAGE;case i.RouteKind.APP_ROUTE:return a.IncrementalCacheKind.APP_ROUTE;default:throw Object.defineProperty(Error(`Unexpected route kind ${e}`),"__NEXT_ERROR_CODE",{value:"E64",enumerable:!1,configurable:!0})}}},78781:e=>{e.exports={weekViewContainer:"WeeklyAvailabilityView_weekViewContainer__2u5o0",header:"WeeklyAvailabilityView_header__ii73x",timeColumn:"WeeklyAvailabilityView_timeColumn__Cm9Lu",dayHeader:"WeeklyAvailabilityView_dayHeader__kStxY",dayName:"WeeklyAvailabilityView_dayName__P_phm",dayNumber:"WeeklyAvailabilityView_dayNumber__kyuNf",timeGrid:"WeeklyAvailabilityView_timeGrid__jP3DV",timeRow:"WeeklyAvailabilityView_timeRow__HIk_a",timeLabel:"WeeklyAvailabilityView_timeLabel__xuJjQ",timeSlot:"WeeklyAvailabilityView_timeSlot__rX3O9",availabilityBlock:"WeeklyAvailabilityView_availabilityBlock__chHAv",contextMenu:"WeeklyAvailabilityView_contextMenu__LUuUY",deleteOption:"WeeklyAvailabilityView_deleteOption__7PwxI",clearButton:"WeeklyAvailabilityView_clearButton__N9ukx"}},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},81661:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{INTERNALS:function(){return s},NextRequest:function(){return l}});let a=r(49761),n=r(40857),i=r(25220),o=r(14659),s=Symbol("internal request");class l extends Request{constructor(e,t={}){let r="string"!=typeof e&&"url"in e?e.url:String(e);(0,n.validateURL)(r),t.body&&"half"!==t.duplex&&(t.duplex="half"),e instanceof Request?super(e,t):super(r,t);let i=new a.NextURL(r,{headers:(0,n.toNodeOutgoingHttpHeaders)(this.headers),nextConfig:t.nextConfig});this[s]={cookies:new o.RequestCookies(this.headers),nextUrl:i,url:i.toString()}}[Symbol.for("edge-runtime.inspect.custom")](){return{cookies:this.cookies,nextUrl:this.nextUrl,url:this.url,bodyUsed:this.bodyUsed,cache:this.cache,credentials:this.credentials,destination:this.destination,headers:Object.fromEntries(this.headers),integrity:this.integrity,keepalive:this.keepalive,method:this.method,mode:this.mode,redirect:this.redirect,referrer:this.referrer,referrerPolicy:this.referrerPolicy,signal:this.signal}}get cookies(){return this[s].cookies}get nextUrl(){return this[s].nextUrl}get page(){throw new i.RemovedPageError}get ua(){throw new i.RemovedUAError}get url(){return this[s].url}}},83409:(e,t,r)=>{"use strict";function a(e){throw Object.defineProperty(Error("cacheLife() is only available with the experimental.useCache config."),"__NEXT_ERROR_CODE",{value:"E627",enumerable:!1,configurable:!0})}Object.defineProperty(t,"F",{enumerable:!0,get:function(){return a}}),r(29294),r(63033)},88870:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Batcher",{enumerable:!0,get:function(){return n}});let a=r(13944);class n{constructor(e,t=e=>e()){this.cacheKeyFn=e,this.schedulerFn=t,this.pending=new Map}static create(e){return new n(null==e?void 0:e.cacheKeyFn,null==e?void 0:e.schedulerFn)}async batch(e,t){let r=this.cacheKeyFn?await this.cacheKeyFn(e):e;if(null===r)return t(r,Promise.resolve);let n=this.pending.get(r);if(n)return n;let{promise:i,resolve:o,reject:s}=new a.DetachedPromise;return this.pending.set(r,i),this.schedulerFn(async()=>{try{let e=await t(r,o);o(e)}catch(e){s(e)}finally{this.pending.delete(r)}}),i}}},90036:e=>{"use strict";var t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyNames,n=Object.prototype.hasOwnProperty,i={};function o(e){var t;let r=["path"in e&&e.path&&`Path=${e.path}`,"expires"in e&&(e.expires||0===e.expires)&&`Expires=${("number"==typeof e.expires?new Date(e.expires):e.expires).toUTCString()}`,"maxAge"in e&&"number"==typeof e.maxAge&&`Max-Age=${e.maxAge}`,"domain"in e&&e.domain&&`Domain=${e.domain}`,"secure"in e&&e.secure&&"Secure","httpOnly"in e&&e.httpOnly&&"HttpOnly","sameSite"in e&&e.sameSite&&`SameSite=${e.sameSite}`,"partitioned"in e&&e.partitioned&&"Partitioned","priority"in e&&e.priority&&`Priority=${e.priority}`].filter(Boolean),a=`${e.name}=${encodeURIComponent(null!=(t=e.value)?t:"")}`;return 0===r.length?a:`${a}; ${r.join("; ")}`}function s(e){let t=new Map;for(let r of e.split(/; */)){if(!r)continue;let e=r.indexOf("=");if(-1===e){t.set(r,"true");continue}let[a,n]=[r.slice(0,e),r.slice(e+1)];try{t.set(a,decodeURIComponent(null!=n?n:"true"))}catch{}}return t}function l(e){if(!e)return;let[[t,r],...a]=s(e),{domain:n,expires:i,httponly:o,maxage:l,path:d,samesite:f,secure:h,partitioned:p,priority:y}=Object.fromEntries(a.map(([e,t])=>[e.toLowerCase().replace(/-/g,""),t]));{var g,m,b={name:t,value:decodeURIComponent(r),domain:n,...i&&{expires:new Date(i)},...o&&{httpOnly:!0},..."string"==typeof l&&{maxAge:Number(l)},path:d,...f&&{sameSite:c.includes(g=(g=f).toLowerCase())?g:void 0},...h&&{secure:!0},...y&&{priority:u.includes(m=(m=y).toLowerCase())?m:void 0},...p&&{partitioned:!0}};let e={};for(let t in b)b[t]&&(e[t]=b[t]);return e}}((e,r)=>{for(var a in r)t(e,a,{get:r[a],enumerable:!0})})(i,{RequestCookies:()=>d,ResponseCookies:()=>f,parseCookie:()=>s,parseSetCookie:()=>l,stringifyCookie:()=>o}),e.exports=((e,i,o,s)=>{if(i&&"object"==typeof i||"function"==typeof i)for(let o of a(i))n.call(e,o)||void 0===o||t(e,o,{get:()=>i[o],enumerable:!(s=r(i,o))||s.enumerable});return e})(t({},"__esModule",{value:!0}),i);var c=["strict","lax","none"],u=["low","medium","high"],d=class{constructor(e){this._parsed=new Map,this._headers=e;let t=e.get("cookie");if(t)for(let[e,r]of s(t))this._parsed.set(e,{name:e,value:r})}[Symbol.iterator](){return this._parsed[Symbol.iterator]()}get size(){return this._parsed.size}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed);if(!e.length)return r.map(([e,t])=>t);let a="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(([e])=>e===a).map(([e,t])=>t)}has(e){return this._parsed.has(e)}set(...e){let[t,r]=1===e.length?[e[0].name,e[0].value]:e,a=this._parsed;return a.set(t,{name:t,value:r}),this._headers.set("cookie",Array.from(a).map(([e,t])=>o(t)).join("; ")),this}delete(e){let t=this._parsed,r=Array.isArray(e)?e.map(e=>t.delete(e)):t.delete(e);return this._headers.set("cookie",Array.from(t).map(([e,t])=>o(t)).join("; ")),r}clear(){return this.delete(Array.from(this._parsed.keys())),this}[Symbol.for("edge-runtime.inspect.custom")](){return`RequestCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(e=>`${e.name}=${encodeURIComponent(e.value)}`).join("; ")}},f=class{constructor(e){var t,r,a;this._parsed=new Map,this._headers=e;let n=null!=(a=null!=(r=null==(t=e.getSetCookie)?void 0:t.call(e))?r:e.get("set-cookie"))?a:[];for(let e of Array.isArray(n)?n:function(e){if(!e)return[];var t,r,a,n,i,o=[],s=0;function l(){for(;s<e.length&&/\s/.test(e.charAt(s));)s+=1;return s<e.length}for(;s<e.length;){for(t=s,i=!1;l();)if(","===(r=e.charAt(s))){for(a=s,s+=1,l(),n=s;s<e.length&&"="!==(r=e.charAt(s))&&";"!==r&&","!==r;)s+=1;s<e.length&&"="===e.charAt(s)?(i=!0,s=n,o.push(e.substring(t,a)),t=s):s=a+1}else s+=1;(!i||s>=e.length)&&o.push(e.substring(t,e.length))}return o}(n)){let t=l(e);t&&this._parsed.set(t.name,t)}}get(...e){let t="string"==typeof e[0]?e[0]:e[0].name;return this._parsed.get(t)}getAll(...e){var t;let r=Array.from(this._parsed.values());if(!e.length)return r;let a="string"==typeof e[0]?e[0]:null==(t=e[0])?void 0:t.name;return r.filter(e=>e.name===a)}has(e){return this._parsed.has(e)}set(...e){let[t,r,a]=1===e.length?[e[0].name,e[0].value,e[0]]:e,n=this._parsed;return n.set(t,function(e={name:"",value:""}){return"number"==typeof e.expires&&(e.expires=new Date(e.expires)),e.maxAge&&(e.expires=new Date(Date.now()+1e3*e.maxAge)),(null===e.path||void 0===e.path)&&(e.path="/"),e}({name:t,value:r,...a})),function(e,t){for(let[,r]of(t.delete("set-cookie"),e)){let e=o(r);t.append("set-cookie",e)}}(n,this._headers),this}delete(...e){let[t,r]="string"==typeof e[0]?[e[0]]:[e[0].name,e[0]];return this.set({...r,name:t,value:"",expires:new Date(0)})}[Symbol.for("edge-runtime.inspect.custom")](){return`ResponseCookies ${JSON.stringify(Object.fromEntries(this._parsed))}`}toString(){return[...this._parsed.values()].map(o).join("; ")}}},91645:e=>{"use strict";e.exports=require("net")},92602:e=>{"use strict";e.exports=import("firebase-admin/messaging")},94735:e=>{"use strict";e.exports=require("events")},95247:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let a=r(34360),n=r(19136);class i{static fromStatic(e){return new i(e,{metadata:{}})}constructor(e,{contentType:t,waitUntil:r,metadata:a}){this.response=e,this.contentType=t,this.metadata=a,this.waitUntil=r}assignMetadata(e){Object.assign(this.metadata,e)}get isNull(){return null===this.response}get isDynamic(){return"string"!=typeof this.response}toUnchunkedBuffer(e=!1){if(null===this.response)throw Object.defineProperty(Error("Invariant: null responses cannot be unchunked"),"__NEXT_ERROR_CODE",{value:"E274",enumerable:!1,configurable:!0});if("string"!=typeof this.response){if(!e)throw Object.defineProperty(Error("Invariant: dynamic responses cannot be unchunked. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E81",enumerable:!1,configurable:!0});return(0,a.streamToBuffer)(this.readable)}return Buffer.from(this.response)}toUnchunkedString(e=!1){if(null===this.response)throw Object.defineProperty(Error("Invariant: null responses cannot be unchunked"),"__NEXT_ERROR_CODE",{value:"E274",enumerable:!1,configurable:!0});if("string"!=typeof this.response){if(!e)throw Object.defineProperty(Error("Invariant: dynamic responses cannot be unchunked. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E81",enumerable:!1,configurable:!0});return(0,a.streamToString)(this.readable)}return this.response}get readable(){if(null===this.response)throw Object.defineProperty(Error("Invariant: null responses cannot be streamed"),"__NEXT_ERROR_CODE",{value:"E14",enumerable:!1,configurable:!0});if("string"==typeof this.response)throw Object.defineProperty(Error("Invariant: static responses cannot be streamed"),"__NEXT_ERROR_CODE",{value:"E151",enumerable:!1,configurable:!0});return Buffer.isBuffer(this.response)?(0,a.streamFromBuffer)(this.response):Array.isArray(this.response)?(0,a.chainStreams)(...this.response):this.response}chain(e){let t;if(null===this.response)throw Object.defineProperty(Error("Invariant: response is null. This is a bug in Next.js"),"__NEXT_ERROR_CODE",{value:"E258",enumerable:!1,configurable:!0});(t="string"==typeof this.response?[(0,a.streamFromString)(this.response)]:Array.isArray(this.response)?this.response:Buffer.isBuffer(this.response)?[(0,a.streamFromBuffer)(this.response)]:[this.response]).push(e),this.response=t}async pipeTo(e){try{await this.readable.pipeTo(e,{preventClose:!0}),this.waitUntil&&await this.waitUntil,await e.close()}catch(t){if((0,n.isAbortError)(t))return void await e.abort(t);throw t}}async pipeToNodeResponse(e){await (0,n.pipeToNodeResponse)(this.readable,e,this.waitUntil)}}},96197:(e,t)=>{"use strict";function r(e,t,r){if(e)for(let i of(r&&(r=r.toLowerCase()),e)){var a,n;if(t===(null==(a=i.domain)?void 0:a.split(":",1)[0].toLowerCase())||r===i.defaultLocale.toLowerCase()||(null==(n=i.locales)?void 0:n.some(e=>e.toLowerCase()===r)))return i}}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"detectDomainLocale",{enumerable:!0,get:function(){return r}})},98485:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"createDedupeFetch",{enumerable:!0,get:function(){return s}});let a=function(e,t){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=o(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var s=n?Object.getOwnPropertyDescriptor(e,i):null;s&&(s.get||s.set)?Object.defineProperty(a,i,s):a[i]=e[i]}return a.default=e,r&&r.set(e,a),a}(r(7153)),n=r(72150),i=r(23302);function o(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(o=function(e){return e?r:t})(e)}function s(e){let t=a.cache(e=>[]);return function(r,a){let o,s;if(a&&a.signal)return e(r,a);if("string"!=typeof r||a){let t="string"==typeof r||r instanceof URL?new Request(r,a):r;if("GET"!==t.method&&"HEAD"!==t.method||t.keepalive)return e(r,a);s=JSON.stringify([t.method,Array.from(t.headers.entries()),t.mode,t.redirect,t.credentials,t.referrer,t.referrerPolicy,t.integrity]),o=t.url}else s='["GET",[],null,"follow",null,null,null,null]',o=r;let l=t(o);for(let e=0,t=l.length;e<t;e+=1){let[t,r]=l[e];if(t===s)return r.then(()=>{let t=l[e][2];if(!t)throw Object.defineProperty(new i.InvariantError("No cached response"),"__NEXT_ERROR_CODE",{value:"E579",enumerable:!1,configurable:!0});let[r,a]=(0,n.cloneResponse)(t);return l[e][2]=a,r})}let c=e(r,a),u=[s,c,null];return l.push(u),c.then(e=>{let[t,r]=(0,n.cloneResponse)(e);return u[2]=r,t})}}}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[4447,9558,1658,6533,2002,7715,5841,1158,1480,6637,683,9168],()=>r(43408));module.exports=a})();