(()=>{var e={};e.id=5596,e.ids=[5596],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6475:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{callServer:function(){return s.callServer},createServerReference:function(){return a},findSourceMapURL:function(){return n.findSourceMapURL}});let s=r(11264),n=r(11448),a=r(19357).createServerReference},7879:e=>{"use strict";e.exports=import("firebase-admin/firestore")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14276:e=>{"use strict";e.exports=import("firebase-admin/auth")},14985:e=>{"use strict";e.exports=require("dns")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27234:(e,t,r)=>{Promise.resolve().then(r.bind(r,58746))},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30474:(e,t,r)=>{"use strict";r.d(t,{default:()=>n.a});var s=r(31261),n=r.n(s)},31261:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return d},getImageProps:function(){return o}});let s=r(37366),n=r(44953),a=r(46533),i=s._(r(1933));function o(e){let{props:t}=(0,n.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let d=a.Image},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},43335:(e,t,r)=>{"use strict";let s;r.d(t,{A:()=>d});var n=r(60687);r(43210);var a=r(46299),i=r(39010);let o=async()=>{if(!process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY)throw Error("Missing Stripe Public Key");return s||(s=(0,i.c)(process.env.NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY)),s},d=({children:e,options:t})=>(0,n.jsx)(a.S8,{stripe:o(),options:t,children:e})},46675:e=>{"use strict";e.exports=require("firebase-admin")},53724:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>l,pages:()=>u,routeModule:()=>p,tree:()=>c});var s=r(65239),n=r(48088),a=r(88170),i=r.n(a),o=r(30893),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(t,d);let c={children:["",{children:["(web-client)",{children:["user",{children:["[userId]",{children:["settings",{children:["payment-method-setup-success",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,87967)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/settings/payment-method-setup-success/page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,14866)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,58014)),"/home/israel/personal/code/alex/able-ai/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,u=["/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/settings/payment-method-setup-success/page.tsx"],l={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:n.RouteKind.APP_PAGE,page:"/(web-client)/user/[userId]/settings/payment-method-setup-success/page",pathname:"/user/[userId]/settings/payment-method-setup-success",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},55511:e=>{"use strict";e.exports=require("crypto")},58746:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>_});var s=r(60687),n=r(43210),a=r(16189),i=r(43335),o=r(46299),d=r(6475);let c=(0,d.createServerReference)("78fc8a25fbe5adb6fffd743a661a897bd5709f9c05",d.callServer,void 0,d.findSourceMapURL,"paymentMethodSaved");var u=r(69788),l=r.n(u);let p=({customerId:e,setupIntentClientSecret:t,userId:r})=>{let i=(0,o.t2)(),d=(0,a.useRouter)(),[u,p]=(0,n.useState)(null);return(0,n.useEffect)(()=>{async function s(){if(!i||!t||!e||!r)return;let{setupIntent:s}=await i.retrieveSetupIntent(t);if(!s)return void p("Error: Could not retrieve the SetupIntent.");switch(s.status){case"succeeded":p("\xa1Your primary payment method has been saved successfully.!"),await c(r,e,s.status,s.payment_method);break;case"processing":p("Your payment method is being processed...");break;case"requires_payment_method":p("Your payment method could not be saved. Please try again.");break;case"canceled":p("The payment method save operation was canceled.");break;default:p(`Unknown state of the SetupIntent: ${s.status}`)}setTimeout(()=>{d.push(`/user/${r}/settings`)},3e3)}t&&s()},[i,t,d,r]),(0,s.jsx)("div",{className:l().container,children:(0,s.jsx)("div",{className:l().card,children:(0,s.jsxs)("div",{style:{padding:"20px",textAlign:"center"},children:[(0,s.jsx)("header",{className:l().pageHeader,children:(0,s.jsx)("h1",{children:"Checking payment method status..."})}),(0,s.jsx)("p",{children:u||"Please, do not close this window."})]})})})},_=()=>{let{userId:e}=(0,a.useParams)(),t=(0,a.useSearchParams)(),r=t.get("customer_id"),n=t.get("setup_intent_client_secret");return(0,s.jsx)(i.A,{options:{},children:(0,s.jsx)(p,{customerId:r,setupIntentClientSecret:n,userId:e})})}},58778:(e,t,r)=>{Promise.resolve().then(r.bind(r,87967))},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64939:e=>{"use strict";e.exports=import("pg")},67827:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{h:()=>u});var n=r(91199);r(42087);var a=r(18839),i=r(30298),o=r(60444),d=r(33331),c=e([i]);async function u(e,t,r,s){if(!e||!s||!t||!r)return{error:"Missing required fields.",status:400};if("succeeded"!==r)return console.warn(`Payment method not saved successfully for user ${e}. Status: ${r}`),{error:`SetupIntent did not succeed. Status: ${r}`,status:400};try{return await i.db.update(o.UsersTable).set({stripeCustomerId:t,updatedAt:new Date}).where((0,a.eq)(o.UsersTable.firebaseUid,e)),console.log(`Payment method ${s} saved and confirmed for User ID: ${e}`),{message:"Payment method saved and confirmed in DB.",status:200}}catch(e){return console.error("Error confirming payment method saved:",e),{error:e.message||"internal server error",status:500}}}i=(c.then?(await c)():c)[0],(0,d.D)([u]),(0,n.A)(u,"78fc8a25fbe5adb6fffd743a661a897bd5709f9c05",null),s()}catch(e){s(e)}})},69788:e=>{e.exports={container:"SettingsPage_container__x7Ugk",card:"SettingsPage_card__RPA5a",pageWrapper:"SettingsPage_pageWrapper__jAv2v",pageHeader:"SettingsPage_pageHeader__IPiGF",section:"SettingsPage_section__53RKH",sectionTitle:"SettingsPage_sectionTitle__neP96",form:"SettingsPage_form__sbwBS",formGroup:"SettingsPage_formGroup__6o89j",label:"SettingsPage_label__7ReZn",inputField:"SettingsPage_inputField__ywxTh",actionButtons:"SettingsPage_actionButtons__Wpvj0",button:"SettingsPage_button__UO4k9",secondary:"SettingsPage_secondary__ifHfj",danger:"SettingsPage_danger__6o6Pv",errorMessage:"SettingsPage_errorMessage__TbRSe",successMessage:"SettingsPage_successMessage__oEpcO",verificationSection:"SettingsPage_verificationSection__enDg_",verificationHeader:"SettingsPage_verificationHeader__BM_6D",warningIcon:"SettingsPage_warningIcon__lJrub",verificationModalTitle:"SettingsPage_verificationModalTitle__Go0QF",verificationText:"SettingsPage_verificationText__kQWg8",verificationActions:"SettingsPage_verificationActions__S_Z8e",resendButton:"SettingsPage_resendButton__F7p0K",modalOverlay:"SettingsPage_modalOverlay__3E3Hd",modalContent:"SettingsPage_modalContent__SxHiM",modalTitle:"SettingsPage_modalTitle__EqqS9",modalActions:"SettingsPage_modalActions__GOE9o",closeButton:"SettingsPage_closeButton__HJ688",modalHeader:"SettingsPage_modalHeader__IXvxa",bottomNavSection:"SettingsPage_bottomNavSection__Fvvyt",bottomNav:"SettingsPage_bottomNav__YBsS_",bottomNavLink:"SettingsPage_bottomNavLink__4aE_x",dangerLink:"SettingsPage_dangerLink__xIS_c",pageDescription:"SettingsPage_pageDescription__dhnvR",profileInfo:"SettingsPage_profileInfo__VGWTF",linkList:"SettingsPage_linkList__OkGOY",passwordChangeSection:"SettingsPage_passwordChangeSection__57gx8",loadingContainer:"SettingsPage_loadingContainer__3uwln",stripePromptInline:"SettingsPage_stripePromptInline__1xf3_",stripePromptHeader:"SettingsPage_stripePromptHeader___PeiB",stripeIconWrapper:"SettingsPage_stripeIconWrapper__HPLJp",stripeButton:"SettingsPage_stripeButton__9mpfO",stripeStatus:"SettingsPage_stripeStatus__q3LlT",stripeStatusBannerConnected:"SettingsPage_stripeStatusBannerConnected__2y3qb",settingItem:"SettingsPage_settingItem__qzFsE",settingLabel:"SettingsPage_settingLabel__cpvHX"}},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},87967:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/settings/payment-method-setup-success/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/settings/payment-method-setup-success/page.tsx","default")},90121:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{"400cd1fa767ef5281508e93e3ca1d7a0d11ad8371f":()=>n.qM,"404660310a5e0f58f816c762a9f12b9b33702d2493":()=>n.OH,"40bcfd414a2446406921fe5bddeb7f04b82b554661":()=>n.Rz,"60976633aa90a3960f31dd64f4fd8496ccbdb52456":()=>n.a6,"60e7f34a33097c37a8e1219f48e58834e6fa037656":()=>n.r2,"78fc8a25fbe5adb6fffd743a661a897bd5709f9c05":()=>a.h,"7fad076ff87a53fb2dc1878d8dc87b650c1a1b2caa":()=>n.gL});var n=r(29034),a=r(67827),i=e([n,a]);[n,a]=i.then?(await i)():i,s()}catch(e){s(e)}})},91645:e=>{"use strict";e.exports=require("net")},92602:e=>{"use strict";e.exports=import("firebase-admin/messaging")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,9558,1658,6533,2002,7580,6637,683],()=>r(53724));module.exports=s})();