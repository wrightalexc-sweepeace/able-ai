(()=>{var e={};e.id=4370,e.ids=[4370],e.modules={760:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d});var s=r(65239),i=r(48088),a=r(88170),o=r.n(a),n=r(30893),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(t,l);let d={children:["",{children:["(web-client)",{children:["user",{children:["[userId]",{children:["worker",{children:["gigs",{children:["[gigId]",{children:["complete",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,96281)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/gigs/[gigId]/complete/page.tsx"]}]},{}]},{}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,14866)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,58014)),"/home/israel/personal/code/alex/able-ai/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/gigs/[gigId]/complete/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/(web-client)/user/[userId]/worker/gigs/[gigId]/complete/page",pathname:"/user/[userId]/worker/gigs/[gigId]/complete",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7879:e=>{"use strict";e.exports=import("firebase-admin/firestore")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14276:e=>{"use strict";e.exports=import("firebase-admin/auth")},14824:e=>{e.exports={container:"CompleteGigPage_container__SjEms",header:"CompleteGigPage_header__GAMNM",gigSummary:"CompleteGigPage_gigSummary__h4ia9",feedbackSection:"CompleteGigPage_feedbackSection__oHRC0",feedbackInput:"CompleteGigPage_feedbackInput___4qCM",workAgainSection:"CompleteGigPage_workAgainSection__syk8a",thumbsContainer:"CompleteGigPage_thumbsContainer__kWuFp",thumbsButton:"CompleteGigPage_thumbsButton__psiqj",active:"CompleteGigPage_active__BfISp",awardSection:"CompleteGigPage_awardSection__XK1Fq",awardButtons:"CompleteGigPage_awardButtons__GnW8q",awardButton:"CompleteGigPage_awardButton__PQejg",expensesSection:"CompleteGigPage_expensesSection__6jxv4",expensesInput:"CompleteGigPage_expensesInput__6yuID",paperclipIcon:"CompleteGigPage_paperclipIcon__eq_7t",actionButtons:"CompleteGigPage_actionButtons__bUGvO",amendButton:"CompleteGigPage_amendButton__Ny6EZ",submitButton:"CompleteGigPage_submitButton__o_EBF",loading:"CompleteGigPage_loading__YcN3v",error:"CompleteGigPage_error__rtIZa"}},14985:e=>{"use strict";e.exports=require("dns")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30474:(e,t,r)=>{"use strict";r.d(t,{default:()=>i.a});var s=r(31261),i=r.n(s)},31261:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{default:function(){return l},getImageProps:function(){return n}});let s=r(37366),i=r(44953),a=r(46533),o=s._(r(1933));function n(e){let{props:t}=(0,i.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}}let l=a.Image},31856:(e,t,r)=>{Promise.resolve().then(r.bind(r,59127))},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},46675:e=>{"use strict";e.exports=require("firebase-admin")},55511:e=>{"use strict";e.exports=require("crypto")},59127:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(60687),i=r(43210),a=r(16189),o=r(21295),n=r(14824),l=r.n(n);function d(){let e=(0,a.useParams)(),t=(0,a.useRouter)(),{user:r}=(0,o.A)(),[n,d]=(0,i.useState)(null),[c,u]=(0,i.useState)(!0),[p,m]=(0,i.useState)(""),[g,h]=(0,i.useState)(null),[x,b]=(0,i.useState)(""),[f,_]=(0,i.useState)(""),[v,j]=(0,i.useState)(!1),w=e.gigId,C=e.userId,P=async()=>{if(n&&r){j(!0);try{let e={gigId:n.id,feedback:p,wouldWorkAgain:g,awardBuyer:x,expenses:f.trim()||null,completedAt:new Date().toISOString()};(await fetch("/api/gigs/complete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})).ok?t.push(`/user/${C}/worker/gigs/${w}`):console.error("Failed to complete gig")}catch(e){console.error("Error completing gig:",e)}finally{j(!1)}}};if(c)return(0,s.jsx)("div",{className:l().container,children:(0,s.jsx)("div",{className:l().loading,children:"Loading..."})});if(!n)return(0,s.jsx)("div",{className:l().container,children:(0,s.jsx)("div",{className:l().error,children:"Gig not found"})});let y=(e=>{let t=e.match(/(\d{1,2}):(\d{2})\s*(am|pm)?\s*-\s*(\d{1,2}):(\d{2})\s*(am|pm)?/i);if(t){let e=parseInt(t[1]),r=parseInt(t[4]);return t[3]?.toLowerCase()==="pm"&&12!==e&&(e+=12),t[6]?.toLowerCase()==="pm"&&12!==r&&(r+=12),t[3]?.toLowerCase()==="am"&&12===e&&(e=0),t[6]?.toLowerCase()==="am"&&12===r&&(r=0),Math.max(r-e,1)}return 4})(n.gigTime),k=(n.hourlyRate*y).toFixed(2);return(0,s.jsxs)("div",{className:l().container,children:[(0,s.jsx)("div",{className:l().header,children:(0,s.jsx)("h1",{children:"Confirm Hours Worked & Feedback"})}),(0,s.jsxs)("div",{className:l().gigSummary,children:[(0,s.jsx)("h2",{children:n.gigDescription}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Duration:"})," ",y," hours"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Completed gig on:"})," ",new Date(n.gigDate).toLocaleDateString("en-GB",{weekday:"long",day:"numeric",month:"long",year:"numeric"})]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Location:"})," ",n.location]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"Earnings:"})," \xa3",k]})]}),(0,s.jsxs)("div",{className:l().feedbackSection,children:[(0,s.jsx)("h3",{children:"Share your experience..."}),(0,s.jsx)("p",{children:"Provide feedback to earn awards"}),(0,s.jsx)("textarea",{className:l().feedbackInput,placeholder:"Tell us about your experience working this gig...",value:p,onChange:e=>m(e.target.value),rows:4}),(0,s.jsxs)("div",{className:l().workAgainSection,children:[(0,s.jsx)("h4",{children:"Would you work with this buyer again?"}),(0,s.jsxs)("div",{className:l().thumbsContainer,children:[(0,s.jsx)("button",{className:`${l().thumbsButton} ${!0===g?l().active:""}`,onClick:()=>h(!0),children:"\uD83D\uDC4D"}),(0,s.jsx)("button",{className:`${l().thumbsButton} ${!1===g?l().active:""}`,onClick:()=>h(!1),children:"\uD83D\uDC4E"})]})]}),(0,s.jsxs)("div",{className:l().awardSection,children:[(0,s.jsx)("h4",{children:"Would you like to award the buyer?"}),(0,s.jsxs)("div",{className:l().awardButtons,children:[(0,s.jsx)("button",{className:`${l().awardButton} ${"top_communicator"===x?l().active:""}`,onClick:()=>b("top_communicator"===x?"":"top_communicator"),children:"\uD83C\uDFC6 Top communicator"}),(0,s.jsx)("button",{className:`${l().awardButton} ${"team_builder"===x?l().active:""}`,onClick:()=>b("team_builder"===x?"":"team_builder"),children:"\uD83D\uDC65 Team builder"})]})]})]}),(0,s.jsxs)("div",{className:l().expensesSection,children:[(0,s.jsx)("h3",{children:"Log any expenses you incurred here"}),(0,s.jsxs)("div",{className:l().expensesInput,children:[(0,s.jsx)("span",{className:l().paperclipIcon,children:"\uD83D\uDCCE"}),(0,s.jsx)("input",{type:"text",placeholder:"Note & upload images of costs incurred for your taxi",value:f,onChange:e=>_(e.target.value)})]})]}),(0,s.jsxs)("div",{className:l().actionButtons,children:[(0,s.jsx)("button",{className:l().amendButton,children:"Amend gig timing or add tips"}),(0,s.jsx)("button",{className:l().submitButton,onClick:P,disabled:v,children:v?"Submitting...":"Submit for payment"})]})]})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64939:e=>{"use strict";e.exports=import("pg")},73496:e=>{"use strict";e.exports=require("http2")},73712:(e,t,r)=>{Promise.resolve().then(r.bind(r,96281))},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},91902:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{"400cd1fa767ef5281508e93e3ca1d7a0d11ad8371f":()=>i.qM,"404660310a5e0f58f816c762a9f12b9b33702d2493":()=>i.OH,"40bcfd414a2446406921fe5bddeb7f04b82b554661":()=>i.Rz,"60976633aa90a3960f31dd64f4fd8496ccbdb52456":()=>i.a6,"60e7f34a33097c37a8e1219f48e58834e6fa037656":()=>i.r2,"7fad076ff87a53fb2dc1878d8dc87b650c1a1b2caa":()=>i.gL});var i=r(29034),a=e([i]);i=(a.then?(await a)():a)[0],s()}catch(e){s(e)}})},92602:e=>{"use strict";e.exports=import("firebase-admin/messaging")},94735:e=>{"use strict";e.exports=require("events")},96281:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/gigs/[gigId]/complete/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/gigs/[gigId]/complete/page.tsx","default")}};var t=require("../../../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,9558,1658,6533,2002,6637,683],()=>r(760));module.exports=s})();