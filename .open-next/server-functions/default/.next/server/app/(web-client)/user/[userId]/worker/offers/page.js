(()=>{var e={};e.id=1844,e.ids=[1844],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6642:e=>{e.exports={modalOverlay:"GigDetailsModal_modalOverlay__azDrE",fadeIn:"GigDetailsModal_fadeIn__sAeaR",modalContent:"GigDetailsModal_modalContent__8TUk6",slideUp:"GigDetailsModal_slideUp__tyLjt",closeButton:"GigDetailsModal_closeButton__lH5Zy",modalHeader:"GigDetailsModal_modalHeader__JomFI",gigTitle:"GigDetailsModal_gigTitle__i7ck1",statusBadge:"GigDetailsModal_statusBadge__warYW",gigDetails:"GigDetailsModal_gigDetails__V57WW",detailRow:"GigDetailsModal_detailRow__JZVTA",slideInLeft:"GigDetailsModal_slideInLeft__TdhxP",detailIcon:"GigDetailsModal_detailIcon__ipD8q",detailContent:"GigDetailsModal_detailContent__XH17e",detailLabel:"GigDetailsModal_detailLabel__LpHQx",detailValue:"GigDetailsModal_detailValue___4pir",descriptionSection:"GigDetailsModal_descriptionSection__dWDt3",notesSection:"GigDetailsModal_notesSection__yQOF4",sectionHeader:"GigDetailsModal_sectionHeader__bA_UO",sectionIcon:"GigDetailsModal_sectionIcon__JwSKT",sectionTitle:"GigDetailsModal_sectionTitle__Km7CF",descriptionText:"GigDetailsModal_descriptionText__nF3PY",notesText:"GigDetailsModal_notesText__nTmkS",actionButtons:"GigDetailsModal_actionButtons__qayki",slideInUp:"GigDetailsModal_slideInUp__ygBLz",actionButton:"GigDetailsModal_actionButton__zMGvL",acceptButton:"GigDetailsModal_acceptButton__Cr_CI",declineButton:"GigDetailsModal_declineButton__RfpGG"}},7879:e=>{"use strict";e.exports=import("firebase-admin/firestore")},9244:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>g,tree:()=>d});var a=s(65239),r=s(48088),i=s(88170),n=s.n(i),o=s(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);s.d(t,l);let d={children:["",{children:["(web-client)",{children:["user",{children:["[userId]",{children:["worker",{children:["offers",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,98287)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/offers/page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,14866)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,58014)),"/home/israel/personal/code/alex/able-ai/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/offers/page.tsx"],u={require:s,loadChunk:()=>Promise.resolve()},g=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/(web-client)/user/[userId]/worker/offers/page",pathname:"/user/[userId]/worker/offers",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},9539:(e,t,s)=>{"use strict";s.d(t,{g:()=>r});var a=s(6475);let r=(0,a.createServerReference)("40a6088411db4989a2f014a668b13745b3cfee1afe",a.callServer,void 0,a.findSourceMapURL,"getWorkerOffers")},10022:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14276:e=>{"use strict";e.exports=import("firebase-admin/auth")},14414:(e,t,s)=>{Promise.resolve().then(s.bind(s,34457))},14985:e=>{"use strict";e.exports=require("dns")},18911:e=>{e.exports={container:"OffersPage_container__hqNK7",pageWrapper:"OffersPage_pageWrapper__g9Nsf",header:"OffersPage_header__K_QVM",pageHeader:"OffersPage_pageHeader__PFPYt",fadeInUp:"OffersPage_fadeInUp__FlnBe",calendarNavButton:"OffersPage_calendarNavButton__03ucs",sectionTitle:"OffersPage_sectionTitle__lXM1q",sectionHeader:"OffersPage_sectionHeader__o5buX",offerList:"OffersPage_offerList__ozlyy",fadeIn:"OffersPage_fadeIn__GMcjN",infoBanner:"OffersPage_infoBanner__rxl7N",avatar:"OffersPage_avatar__0pYBS",footer:"OffersPage_footer__EciYs",homeButton:"OffersPage_homeButton__6TV0b",emptyState:"OffersPage_emptyState__5biya",loadingContainer:"OffersPage_loadingContainer__zYSe7",loadingContent:"OffersPage_loadingContent__bECzO",loadingSpinner:"OffersPage_loadingSpinner__Orb7S",spin:"OffersPage_spin__ws25J",loadingText:"OffersPage_loadingText__gCNOb",acceptedSection:"OffersPage_acceptedSection__isQcL",card:"OffersPage_card__VXaZ_",buttons:"OffersPage_buttons__jOAst",gigDetails:"OffersPage_gigDetails__Be89k",gigLocation:"OffersPage_gigLocation__GLbPB",gigTime:"OffersPage_gigTime__4e83j",gigPay:"OffersPage_gigPay__Zu_ON",timerContainer:"OffersPage_timerContainer__IYKdz",role:"OffersPage_role__5VIuA",gigDate:"OffersPage_gigDate__cmcM4",detailIcon:"OffersPage_detailIcon__3_UKR"}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},23928:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},27329:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.d(t,{y:()=>c});var r=s(91199);s(42087);var i=s(30298),n=s(18839),o=s(60444),l=s(33331),d=e([i]);async function c({gigId:e,userId:t}){try{if(!await i.db.query.UsersTable.findFirst({where:(0,n.eq)(o.UsersTable.firebaseUid,t),columns:{id:!0}}))return{error:"User not found",status:404};if(!await i.db.query.GigsTable.findFirst({where:(0,n.Uo)((0,n.eq)(o.GigsTable.id,e),(0,n.eq)(o.GigsTable.statusInternal,o.gigStatusEnum.enumValues[0]),(0,n.kZ)(o.GigsTable.workerUserId))}))return{error:"Gig not found or not available for declining",status:404};return await i.db.update(o.GigsTable).set({statusInternal:"DECLINED_BY_WORKER",updatedAt:new Date}).where((0,n.eq)(o.GigsTable.id,e)),{success:!0,status:200,message:"Gig offer declined successfully"}}catch(e){return console.error("Error declining gig offer:",e),{error:e.message||"Failed to decline gig offer",status:500}}}i=(d.then?(await d)():d)[0],(0,l.D)([c]),(0,r.A)(c,"40d24a1ec023788a7626d74ce5a28bddbb77869bf3",null),a()}catch(e){a(e)}})},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34457:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>U});var a=s(60687),r=s(43210),i=s(16189),n=s(85814),o=s.n(n),l=s(46061),d=s.n(l),c=s(48730),u=s(97992),g=s(92834),f=s(23928),p=s(43649),m=s(41862);let _=({offer:e,onAccept:t,onDecline:s,onViewDetails:i,isProcessingAccept:n=!1,isProcessingDecline:o=!1})=>{let[l,_]=(0,r.useState)("");(0,r.useEffect)(()=>{if(!e.expiresAt)return void _("");let t=()=>{let t=new Date(e.expiresAt),s=new Date,a=t.getTime()-s.getTime();if(a<=0)return void _("Expired");let r=Math.floor(a/1e3/60%60),i=Math.floor(a/1e3%60),n="";r>0&&(n+=`${r} mins `),_(n+=`${i} secs`)};t();let s=setInterval(t,1e3);return()=>clearInterval(s)},[e.expiresAt]);let h=e.totalPay?`\xa3${e.totalPay.toFixed(2)} + tips`:e.estimatedHours?`Est. \xa3${(e.hourlyRate*e.estimatedHours).toFixed(2)} + tips`:null,x="Expired"===l||"expired"===e.status;return(0,a.jsxs)("div",{role:"button",tabIndex:0,className:`${d().card} ${x?d().expired:""}`,onClick:()=>i(e.id),children:[(0,a.jsxs)("div",{className:d().cardHeader,children:[(0,a.jsx)("h3",{className:d().role,children:e.role}),l&&!x&&(0,a.jsxs)("div",{className:d().timerContainer,children:[(0,a.jsx)(c.A,{size:30,color:"#fff",className:d().timerIcon}),(0,a.jsxs)("span",{className:d().timerText,children:[l," ",(0,a.jsx)("br",{})," to accept"]})]})]}),(0,a.jsxs)("div",{className:d().gigDetails,children:[(0,a.jsxs)("p",{className:d().gigLocation,children:[(0,a.jsx)("span",{className:d().detailIcon,children:(0,a.jsx)(u.A,{size:12})}),e.locationSnippet]}),(0,a.jsxs)("p",{className:d().gigTime,children:[(0,a.jsx)("span",{className:d().detailIcon,children:(0,a.jsx)(c.A,{size:12})}),e.timeString]}),(0,a.jsxs)("p",{className:d().gigDate,children:[(0,a.jsx)("span",{className:d().detailIcon,children:(0,a.jsx)(g.A,{size:12})}),e.dateString]}),(0,a.jsxs)("p",{className:d().gigPay,children:[(0,a.jsx)("span",{className:d().detailIcon,children:(0,a.jsx)(f.A,{size:12})}),h||`\xa3${e.hourlyRate.toFixed(2)}/hr + tips`]})]}),(0,a.jsxs)("div",{className:d().buttons,children:[(0,a.jsx)("button",{onClick:s=>{s.stopPropagation(),t(e.id)},className:`${d().button} ${d().acceptButton} ${n?d().processing:""}`,disabled:n||o||x,children:n?(0,a.jsx)(m.A,{size:16,className:"animate-spin"}):"Accept"}),(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),s(e.id)},className:`${d().button} ${d().declineButton} ${o?d().processing:""}`,disabled:o||n||x,children:o?(0,a.jsx)(m.A,{size:16,className:"animate-spin"}):"Decline"})]}),x&&(0,a.jsxs)("div",{className:d().expiredOverlay,children:[(0,a.jsx)(p.A,{size:24,className:d().expiredIcon}),(0,a.jsx)("span",{className:d().expiredText,children:"Expired"})]})]})};var h=s(47740),x=s.n(h);let b=({gig:e,onViewDetails:t})=>(e.totalPay?e.totalPay.toFixed(2):e.estimatedHours&&(e.hourlyRate*e.estimatedHours).toFixed(2),(0,a.jsxs)("div",{className:x().card,onClick:()=>t(e.id),children:[(0,a.jsx)("h3",{className:x().role,children:e.role}),(0,a.jsx)("div",{className:x().gigDetails,children:(0,a.jsx)("p",{className:x().gigDate,children:e.dateString})})]}));var y=s(32605),v=s(11860),j=s(58869),N=s(10022),D=s(6642),k=s.n(D);let G=({gig:e,isOpen:t,onClose:s,onAccept:i,onDecline:n,isProcessingAccept:o=!1,isProcessingDecline:l=!1})=>{if((0,r.useEffect)(()=>{let e=e=>{"Escape"===e.key&&s()};return t&&(document.addEventListener("keydown",e),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",e),document.body.style.overflow="unset"}},[t,s]),!t||!e)return null;let d=e.totalPay?`\xa3${e.totalPay.toFixed(2)} + tips`:e.estimatedHours?`Est. \xa3${(e.hourlyRate*e.estimatedHours).toFixed(2)} + tips`:`\xa3${e.hourlyRate.toFixed(2)}/hr + tips`;return(0,a.jsx)("div",{className:k().modalOverlay,onClick:s,children:(0,a.jsxs)("div",{className:k().modalContent,onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{className:k().closeButton,onClick:s,children:(0,a.jsx)(v.A,{size:24})}),(0,a.jsxs)("div",{className:k().modalHeader,children:[(0,a.jsx)("h2",{className:k().gigTitle,children:e.role}),(0,a.jsx)("div",{className:k().statusBadge,children:(0,a.jsx)("span",{className:k().statusText,children:e.status})})]}),(0,a.jsxs)("div",{className:k().gigDetails,children:[(0,a.jsxs)("div",{className:k().detailRow,children:[(0,a.jsx)(u.A,{size:20,className:k().detailIcon}),(0,a.jsxs)("div",{className:k().detailContent,children:[(0,a.jsx)("span",{className:k().detailLabel,children:"Location"}),(0,a.jsx)("span",{className:k().detailValue,children:e.locationSnippet})]})]}),(0,a.jsxs)("div",{className:k().detailRow,children:[(0,a.jsx)(g.A,{size:20,className:k().detailIcon}),(0,a.jsxs)("div",{className:k().detailContent,children:[(0,a.jsx)("span",{className:k().detailLabel,children:"Date"}),(0,a.jsx)("span",{className:k().detailValue,children:e.dateString})]})]}),(0,a.jsxs)("div",{className:k().detailRow,children:[(0,a.jsx)(c.A,{size:20,className:k().detailIcon}),(0,a.jsxs)("div",{className:k().detailContent,children:[(0,a.jsx)("span",{className:k().detailLabel,children:"Time"}),(0,a.jsx)("span",{className:k().detailValue,children:e.timeString})]})]}),(0,a.jsxs)("div",{className:k().detailRow,children:[(0,a.jsx)(f.A,{size:20,className:k().detailIcon}),(0,a.jsxs)("div",{className:k().detailContent,children:[(0,a.jsx)("span",{className:k().detailLabel,children:"Payment"}),(0,a.jsx)("span",{className:k().detailValue,children:d})]})]}),e.estimatedHours&&(0,a.jsxs)("div",{className:k().detailRow,children:[(0,a.jsx)(c.A,{size:20,className:k().detailIcon}),(0,a.jsxs)("div",{className:k().detailContent,children:[(0,a.jsx)("span",{className:k().detailLabel,children:"Duration"}),(0,a.jsxs)("span",{className:k().detailValue,children:[e.estimatedHours," hours"]})]})]}),e.buyerName&&(0,a.jsxs)("div",{className:k().detailRow,children:[(0,a.jsx)(j.A,{size:20,className:k().detailIcon}),(0,a.jsxs)("div",{className:k().detailContent,children:[(0,a.jsx)("span",{className:k().detailLabel,children:"Posted by"}),(0,a.jsx)("span",{className:k().detailValue,children:e.buyerName})]})]})]}),e.gigDescription&&(0,a.jsxs)("div",{className:k().descriptionSection,children:[(0,a.jsxs)("div",{className:k().sectionHeader,children:[(0,a.jsx)(N.A,{size:20,className:k().sectionIcon}),(0,a.jsx)("h3",{className:k().sectionTitle,children:"Description"})]}),(0,a.jsx)("p",{className:k().descriptionText,children:e.gigDescription})]}),e.notesForWorker&&(0,a.jsxs)("div",{className:k().notesSection,children:[(0,a.jsxs)("div",{className:k().sectionHeader,children:[(0,a.jsx)(p.A,{size:20,className:k().sectionIcon}),(0,a.jsx)("h3",{className:k().sectionTitle,children:"Notes for Worker"})]}),(0,a.jsx)("p",{className:k().notesText,children:e.notesForWorker})]}),i&&n&&(0,a.jsxs)("div",{className:k().actionButtons,children:[(0,a.jsx)("button",{className:`${k().actionButton} ${k().acceptButton}`,onClick:()=>i(e.id),disabled:o||l,children:o?"Accepting...":"Accept Offer"}),(0,a.jsx)("button",{className:`${k().actionButton} ${k().declineButton}`,onClick:()=>n(e.id),disabled:o||l,children:l?"Declining...":"Decline"})]})]})})};var w=s(40228);let I=(0,s(62688).A)("inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);var P=s(18911),C=s.n(P),A=s(30474),T=s(21295),O=s(36125),S=s(96321),M=s(16269),L=(s(9539),s(74337)),E=s(89001);function U(){let e=(0,i.useRouter)(),t=(0,i.useParams)();(0,i.usePathname)();let s=t.userId;(0,O.K)();let{user:n,loading:l}=(0,T.A)(),d=n?.uid,[c,u]=(0,r.useState)([]),[g,f]=(0,r.useState)([]),[p,h]=(0,r.useState)(!0),[x,v]=(0,r.useState)(null),[j,N]=(0,r.useState)(null),[D,k]=(0,r.useState)(null),[P,U]=(0,r.useState)(null),[q,B]=(0,r.useState)(!1),{suggestions:R,currentIndex:z,isLoading:H,error:$,dismissed:F,dismiss:V,refresh:W,goToNext:J,goToPrev:K}=(0,S.M)({role:"worker",userId:d||"",context:{profileCompletion:.7,recentActivity:"applied for 2 gigs",platformTrends:["high demand for photographers","weekend shifts available"]},enabled:!!d}),Y=async e=>{if(!d)return void console.error("User not authenticated");console.log("Debug - handleAcceptOffer called with:",{offerId:e,uid:d,authUserId:d,pageUserId:s}),N(e),k("accept"),console.log("Accepting offer:",e);try{console.log("Debug - About to call acceptGigOffer with:",{gigId:e,userId:d});let t=await (0,L.U)({gigId:e,userId:d});if(console.log("Debug - acceptGigOffer result:",t),t.error)throw console.error("Debug - Server returned error:",t.error),Error(t.error);u(t=>t.filter(t=>t.id!==e));let s=c.find(t=>t.id===e);if(s){let e={...s,status:"ACCEPTED"};f(t=>[...t,e])}console.log("Offer accepted successfully!")}catch(e){console.error("Error accepting offer:",e)}finally{N(null),k(null)}},Q=async e=>{if(!d)return void console.error("User not authenticated");N(e),k("decline"),console.log("Declining offer:",e);try{let t=await (0,E.y)({gigId:e,userId:d});if(console.log("Debug - declineGigOffer result:",t),t.error)throw console.error("Debug - Server returned error:",t.error),Error(t.error);u(t=>t.filter(t=>t.id!==e)),console.log("Offer declined successfully!")}catch(e){console.error("Error declining offer:",e)}finally{N(null),k(null)}},Z=t=>{let a=c.find(e=>e.id===t);a&&(U(a),e.push(`/user/${s}/worker/gigs/${t}`))},X=()=>{B(!1),U(null)};return(0,a.jsxs)("div",{className:C().container,children:[(0,a.jsx)(M.A,{title:"Gig Offers",onBackClick:()=>e.back()}),d&&(0,a.jsx)(y.A,{suggestions:R,currentIndex:z,isLoading:H,error:$,dismissed:F,onDismiss:V,onRefresh:W,goToNext:J,goToPrev:K,userId:d}),(0,a.jsxs)("div",{className:C().pageWrapper,children:[c.filter(e=>"expired"!==e.status).length>0&&(0,a.jsxs)("div",{className:C().pageHeader,children:[(0,a.jsx)("h1",{className:C().sectionTitle,children:"Pending Gigs"}),(0,a.jsxs)("button",{onClick:()=>e.push(`/user/${s}/worker/calendar`),className:C().calendarNavButton,title:"View Calendar",children:[(0,a.jsx)(w.A,{size:24}),(0,a.jsx)("span",{children:"Calendar"})]})]}),p?(0,a.jsx)("div",{className:C().loadingContainer,children:(0,a.jsxs)("div",{className:C().loadingContent,children:[(0,a.jsx)(m.A,{className:C().loadingSpinner,size:32}),(0,a.jsx)("p",{className:C().loadingText,children:"Loading offers..."})]})}):x?(0,a.jsx)("div",{className:C().emptyState,children:x}):0===c.filter(e=>"expired"!==e.status).length&&0===g.length?(0,a.jsxs)("div",{className:C().emptyState,children:[" ",(0,a.jsx)(I,{size:48,style:{marginBottom:"1rem",color:"#525252"}}),"No new gig offers or upcoming accepted gigs available right now. Make sure your Gigfolio and availability are up to date!"]}):(0,a.jsxs)("div",{className:C().offerList,children:[" ",c.filter(e=>"expired"!==e.status).length>0&&(0,a.jsxs)("div",{className:C().offersSection,children:[" ",c.filter(e=>"expired"!==e.status).map(e=>(0,a.jsx)(_,{offer:e,onAccept:e=>Y(e),onDecline:e=>Q(e),onViewDetails:Z,isProcessingAccept:j===e.id&&"accept"===D,isProcessingDecline:j===e.id&&"decline"===D},e.id))]}),g.length>0&&(0,a.jsxs)("div",{className:C().acceptedSection,children:[(0,a.jsxs)("div",{className:C().sectionHeader,children:[(0,a.jsx)("h2",{className:C().sectionTitle,children:"Accepted Upcoming Gigs"})," ",(0,a.jsx)(o(),{href:`/user/${s}/worker/calendar`,passHref:!0,children:(0,a.jsx)(w.A,{size:24,color:"#ffffff"})})]}),g.map(e=>(0,a.jsx)(b,{gig:e,onViewDetails:Z},e.id))]})]}),(0,a.jsxs)("footer",{className:C().footer,children:[" ",(0,a.jsxs)(o(),{href:`/user/${s}/worker`,passHref:!0,children:[" ",(0,a.jsxs)("button",{className:C().homeButton,"aria-label":"Go to Home",onClick:()=>{e.push(`/user/${s}/worker`)},children:[" ",(0,a.jsx)(A.default,{src:"/images/home.svg",alt:"Home",width:40,height:40})]})]})]})]}),(0,a.jsx)(G,{gig:P,isOpen:q,onClose:X,onAccept:e=>{c.find(t=>t.id===e)&&(Y(e),X())},onDecline:e=>{c.find(t=>t.id===e)&&(Q(e),X())},isProcessingAccept:"accept"===D,isProcessingDecline:"decline"===D})]})}},34631:e=>{"use strict";e.exports=require("tls")},37498:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.r(t),s.d(t,{"400cd1fa767ef5281508e93e3ca1d7a0d11ad8371f":()=>r.qM,"402e2448f83fdc0f1b31fdff1de0016567c7fd3feb":()=>n.U,"404660310a5e0f58f816c762a9f12b9b33702d2493":()=>r.OH,"40a6088411db4989a2f014a668b13745b3cfee1afe":()=>i.g,"40bcfd414a2446406921fe5bddeb7f04b82b554661":()=>r.Rz,"40d24a1ec023788a7626d74ce5a28bddbb77869bf3":()=>o.y,"60976633aa90a3960f31dd64f4fd8496ccbdb52456":()=>r.a6,"60e7f34a33097c37a8e1219f48e58834e6fa037656":()=>r.r2,"7fad076ff87a53fb2dc1878d8dc87b650c1a1b2caa":()=>r.gL});var r=s(29034),i=s(63659),n=s(43455),o=s(27329),l=e([r,i,n,o]);[r,i,n,o]=l.then?(await l)():l,a()}catch(e){a(e)}})},40228:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},43455:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.d(t,{U:()=>c});var r=s(91199);s(42087);var i=s(30298),n=s(18839),o=s(60444),l=s(33331),d=e([i]);i=(d.then?(await d)():d)[0];let u=o.gigStatusEnum.enumValues[2];async function c({gigId:e,userId:t}){try{let s=await i.db.query.UsersTable.findFirst({where:(0,n.eq)(o.UsersTable.firebaseUid,t),columns:{id:!0}});if(!s)return{error:"User not found",status:404};if(!await i.db.query.GigsTable.findFirst({where:(0,n.Uo)((0,n.eq)(o.GigsTable.id,e),(0,n.eq)(o.GigsTable.statusInternal,o.gigStatusEnum.enumValues[0]),(0,n.kZ)(o.GigsTable.workerUserId))}))return{error:"Gig not found or not available for acceptance",status:404};return await i.db.update(o.GigsTable).set({workerUserId:s.id,statusInternal:u,updatedAt:new Date}).where((0,n.eq)(o.GigsTable.id,e)),{success:!0,status:200,message:"Gig offer accepted successfully"}}catch(e){return console.error("Error accepting gig offer:",e),{error:e.message||"Failed to accept gig offer",status:500}}}(0,l.D)([c]),(0,r.A)(c,"402e2448f83fdc0f1b31fdff1de0016567c7fd3feb",null),a()}catch(e){a(e)}})},43649:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},44678:(e,t,s)=>{Promise.resolve().then(s.bind(s,98287))},46061:e=>{e.exports={card:"GigOfferCard_card__7sQPx",slideInUp:"GigOfferCard_slideInUp__cra8k",expired:"GigOfferCard_expired__NRxM0",cardHeader:"GigOfferCard_cardHeader___5Yxc",role:"GigOfferCard_role__FDWl_",gigDetails:"GigOfferCard_gigDetails__1ZDn2",gigLocation:"GigOfferCard_gigLocation__mkcoQ",gigTime:"GigOfferCard_gigTime__6q_pU",gigDate:"GigOfferCard_gigDate__LAkON",gigPay:"GigOfferCard_gigPay__NZFI1",detailIcon:"GigOfferCard_detailIcon__8cWpA",timerContainer:"GigOfferCard_timerContainer__x6_lL",timerIcon:"GigOfferCard_timerIcon__RL1jh",timerText:"GigOfferCard_timerText__9b_jU",buttons:"GigOfferCard_buttons__b42Rq",button:"GigOfferCard_button__xUp4Q",acceptButton:"GigOfferCard_acceptButton__uL1qb",declineButton:"GigOfferCard_declineButton__Q_z3I",expiredOverlay:"GigOfferCard_expiredOverlay__xh49p",expiredText:"GigOfferCard_expiredText__dE_Em",expiredIcon:"GigOfferCard_expiredIcon__YHmcr"}},46675:e=>{"use strict";e.exports=require("firebase-admin")},47740:e=>{e.exports={card:"AcceptedGigCard_card__8p3fT",role:"AcceptedGigCard_role__E78cn",gigDetails:"AcceptedGigCard_gigDetails__H2FVP",detailIcon:"AcceptedGigCard_detailIcon__TQgJ4",gigLocation:"AcceptedGigCard_gigLocation__nELGr",gigTime:"AcceptedGigCard_gigTime__CzSva",gigPay:"AcceptedGigCard_gigPay__ge41U",gigDate:"AcceptedGigCard_gigDate__V3Rg5"}},48730:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},55511:e=>{"use strict";e.exports=require("crypto")},58869:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63659:(e,t,s)=>{"use strict";s.a(e,async(e,a)=>{try{s.d(t,{g:()=>c});var r=s(91199);s(42087);var i=s(30298),n=s(18839),o=s(60444),l=s(33331),d=e([i]);i=(d.then?(await d)():d)[0];let u=o.gigStatusEnum.enumValues[0];o.gigStatusEnum.enumValues[1];let g=o.gigStatusEnum.enumValues[2],f=o.gigStatusEnum.enumValues[4],p=o.gigStatusEnum.enumValues[5],m=o.gigStatusEnum.enumValues[6],_=o.gigStatusEnum.enumValues[7],h=o.gigStatusEnum.enumValues[8],x=o.gigStatusEnum.enumValues[9];async function c(e){try{console.log("Debug - getWorkerOffers called with userId:",e);let t=await i.db.query.UsersTable.findFirst({where:(0,n.eq)(o.UsersTable.firebaseUid,e),columns:{id:!0}});if(console.log("Debug - User found:",t),!t)return{error:"User not found",status:404};console.log("Debug - Using simplified approach...");let s=await i.db.query.GigsTable.findMany({columns:{id:!0,titleInternal:!0,statusInternal:!0,workerUserId:!0,buyerUserId:!0,startTime:!0,endTime:!0,agreedRate:!0,fullDescription:!0,notesForWorker:!0,addressJson:!0,exactLocation:!0}});console.log("Debug - Total gigs fetched:",s.length);let a=s.filter(e=>e.statusInternal===u&&!e.workerUserId&&e.buyerUserId!==t.id);console.log("Debug - Current user ID:",t.id),console.log("Debug - Gigs created by current user:",s.filter(e=>e.buyerUserId===t.id).length),console.log("Debug - Gigs by other users:",s.filter(e=>e.buyerUserId!==t.id).length),console.log("Debug - Offer gigs after filtering:",a.length);let r=s.filter(e=>e.workerUserId===t.id&&[g,f,p,m,_,h,x].includes(e.statusInternal));console.log("Debug - Accepted gigs after filtering:",r.length);let l=a.map(t=>{let s=new Date(t.startTime),a=new Date(t.endTime),r=(a.getTime()-s.getTime())/36e5,i=Math.round(100*r)/100,n=Number(t.agreedRate)*i,o=s.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"}),l=`${s.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})} - ${a.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`,d="Location not specified";if(t.addressJson&&"object"==typeof t.addressJson){let e=t.addressJson;e.formatted_address?d=e.formatted_address:e.address?d=e.address:e.city&&e.country&&(d=`${e.city}, ${e.country}`)}else t.exactLocation&&(d=t.exactLocation);return{id:t.id,role:t.titleInternal,buyerName:"Buyer (Details not loaded)",locationSnippet:d,dateString:o,timeString:l,hourlyRate:Number(t.agreedRate),estimatedHours:i,totalPay:Math.round(100*n)/100,tipsExpected:!1,status:"pending",fullDescriptionLink:`/user/${e}/worker/gigs/${t.id}`,gigDescription:t.fullDescription||void 0,notesForWorker:t.notesForWorker||void 0}}),d=r.map(t=>{let s=new Date(t.startTime),a=new Date(t.endTime),r=(a.getTime()-s.getTime())/36e5,i=Math.round(100*r)/100,n=Number(t.agreedRate)*i,o=s.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"}),l=`${s.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})} - ${a.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`,d="Location not specified";if(t.addressJson&&"object"==typeof t.addressJson){let e=t.addressJson;e.formatted_address?d=e.formatted_address:e.address?d=e.address:e.city&&e.country&&(d=`${e.city}, ${e.country}`)}else t.exactLocation&&(d=t.exactLocation);return{id:t.id,role:t.titleInternal,buyerName:"Buyer (Details not loaded)",locationSnippet:d,dateString:o,timeString:l,hourlyRate:Number(t.agreedRate),estimatedHours:i,totalPay:Math.round(100*n)/100,tipsExpected:!1,status:t.statusInternal,fullDescriptionLink:`/user/${e}/worker/gigs/${t.id}`,gigDescription:t.fullDescription||void 0,notesForWorker:t.notesForWorker||void 0}});return console.log("Debug - Final result - offers:",l.length,"accepted:",d.length),console.log("Debug - Sample offer:",l[0]),{success:!0,data:{offers:l,acceptedGigs:d}}}catch(e){return console.error("Error fetching worker offers:",e),{error:e.message||"Failed to fetch worker offers",status:500}}}console.log("Debug - Enum values:",o.gigStatusEnum.enumValues),console.log("Debug - PENDING_WORKER_ACCEPTANCE:",u),console.log("Debug - ACCEPTED:",g),(0,l.D)([c]),(0,r.A)(c,"40a6088411db4989a2f014a668b13745b3cfee1afe",null),a()}catch(e){a(e)}})},64939:e=>{"use strict";e.exports=import("pg")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},74337:(e,t,s)=>{"use strict";s.d(t,{U:()=>r});var a=s(6475);let r=(0,a.createServerReference)("402e2448f83fdc0f1b31fdff1de0016567c7fd3feb",a.callServer,void 0,a.findSourceMapURL,"acceptGigOffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},89001:(e,t,s)=>{"use strict";s.d(t,{y:()=>r});var a=s(6475);let r=(0,a.createServerReference)("40d24a1ec023788a7626d74ce5a28bddbb77869bf3",a.callServer,void 0,a.findSourceMapURL,"declineGigOffer")},91645:e=>{"use strict";e.exports=require("net")},92602:e=>{"use strict";e.exports=import("firebase-admin/messaging")},92834:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("calendar-days",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]])},94735:e=>{"use strict";e.exports=require("events")},97992:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(62688).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},98287:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/offers/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/offers/page.tsx","default")}};var t=require("../../../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[4447,9558,1658,6533,2002,7715,6637,683,427],()=>s(9244));module.exports=a})();