(()=>{var e={};e.id=5152,e.ids=[5152],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6507:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/gigs/[gigId]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/gigs/[gigId]/page.tsx","default")},7879:e=>{"use strict";e.exports=import("firebase-admin/firestore")},9539:(e,t,r)=>{"use strict";r.d(t,{g:()=>i});var s=r(6475);let i=(0,s.createServerReference)("40a6088411db4989a2f014a668b13745b3cfee1afe",s.callServer,void 0,s.findSourceMapURL,"getWorkerOffers")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14276:e=>{"use strict";e.exports=import("firebase-admin/auth")},14985:e=>{"use strict";e.exports=require("dns")},15800:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{"400cd1fa767ef5281508e93e3ca1d7a0d11ad8371f":()=>i.qM,"400e000ab33a7f5af2587925f175e4f793654b0f04":()=>l.Y,"402e2448f83fdc0f1b31fdff1de0016567c7fd3feb":()=>o.U,"404660310a5e0f58f816c762a9f12b9b33702d2493":()=>i.OH,"406285e4a5b3e01ac696468e89531313be16ecb429":()=>a.Z,"4084359704f71594f9310ab1931288fb6d27cb5814":()=>n.r,"40a6088411db4989a2f014a668b13745b3cfee1afe":()=>u.g,"40bcfd414a2446406921fe5bddeb7f04b82b554661":()=>i.Rz,"40d24a1ec023788a7626d74ce5a28bddbb77869bf3":()=>d.y,"60976633aa90a3960f31dd64f4fd8496ccbdb52456":()=>i.a6,"60e7f34a33097c37a8e1219f48e58834e6fa037656":()=>i.r2,"7fad076ff87a53fb2dc1878d8dc87b650c1a1b2caa":()=>i.gL});var i=r(29034),a=r(32699),n=r(73479),o=r(43455),d=r(27329),l=r(45071),u=r(63659),c=e([i,a,n,o,d,l,u]);[i,a,n,o,d,l,u]=c.then?(await c)():c,s()}catch(e){s(e)}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21308:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>c,pages:()=>u,routeModule:()=>g,tree:()=>l});var s=r(65239),i=r(48088),a=r(88170),n=r.n(a),o=r(30893),d={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(t,d);let l={children:["",{children:["(web-client)",{children:["user",{children:["[userId]",{children:["worker",{children:["gigs",{children:["[gigId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,6507)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/gigs/[gigId]/page.tsx"]}]},{}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,14866)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,58014)),"/home/israel/personal/code/alex/able-ai/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,u=["/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/gigs/[gigId]/page.tsx"],c={require:r,loadChunk:()=>Promise.resolve()},g=new s.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/(web-client)/user/[userId]/worker/gigs/[gigId]/page",pathname:"/user/[userId]/worker/gigs/[gigId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},21820:e=>{"use strict";e.exports=require("os")},26856:(e,t,r)=>{Promise.resolve().then(r.bind(r,6507))},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},35485:e=>{e.exports={loadingContainer:"GigDetailsPage_loadingContainer__6Oa5O",loadingContent:"GigDetailsPage_loadingContent__CXDwj",loadingSpinner:"GigDetailsPage_loadingSpinner__VjG5m",spin:"GigDetailsPage_spin__uGDQ8",container:"GigDetailsPage_container__s3nCn",pageWrapper:"GigDetailsPage_pageWrapper__Oiked",errorMessage:"GigDetailsPage_errorMessage___Pwy8",emptyState:"GigDetailsPage_emptyState__6GRVG"}},41862:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(62688).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},46675:e=>{"use strict";e.exports=require("firebase-admin")},55511:e=>{"use strict";e.exports=require("crypto")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63659:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{g:()=>u});var i=r(91199);r(42087);var a=r(30298),n=r(18839),o=r(60444),d=r(33331),l=e([a]);a=(l.then?(await l)():l)[0];let c=o.gigStatusEnum.enumValues[0];o.gigStatusEnum.enumValues[1];let g=o.gigStatusEnum.enumValues[2],p=o.gigStatusEnum.enumValues[4],f=o.gigStatusEnum.enumValues[5],m=o.gigStatusEnum.enumValues[6],b=o.gigStatusEnum.enumValues[7],h=o.gigStatusEnum.enumValues[8],x=o.gigStatusEnum.enumValues[9];async function u(e){try{console.log("Debug - getWorkerOffers called with userId:",e);let t=await a.db.query.UsersTable.findFirst({where:(0,n.eq)(o.UsersTable.firebaseUid,e),columns:{id:!0}});if(console.log("Debug - User found:",t),!t)return{error:"User not found",status:404};console.log("Debug - Using simplified approach...");let r=await a.db.query.GigsTable.findMany({columns:{id:!0,titleInternal:!0,statusInternal:!0,workerUserId:!0,buyerUserId:!0,startTime:!0,endTime:!0,agreedRate:!0,fullDescription:!0,notesForWorker:!0,addressJson:!0,exactLocation:!0}});console.log("Debug - Total gigs fetched:",r.length);let s=r.filter(e=>e.statusInternal===c&&!e.workerUserId&&e.buyerUserId!==t.id);console.log("Debug - Current user ID:",t.id),console.log("Debug - Gigs created by current user:",r.filter(e=>e.buyerUserId===t.id).length),console.log("Debug - Gigs by other users:",r.filter(e=>e.buyerUserId!==t.id).length),console.log("Debug - Offer gigs after filtering:",s.length);let i=r.filter(e=>e.workerUserId===t.id&&[g,p,f,m,b,h,x].includes(e.statusInternal));console.log("Debug - Accepted gigs after filtering:",i.length);let d=s.map(t=>{let r=new Date(t.startTime),s=new Date(t.endTime),i=(s.getTime()-r.getTime())/36e5,a=Math.round(100*i)/100,n=Number(t.agreedRate)*a,o=r.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"}),d=`${r.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})} - ${s.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`,l="Location not specified";if(t.addressJson&&"object"==typeof t.addressJson){let e=t.addressJson;e.formatted_address?l=e.formatted_address:e.address?l=e.address:e.city&&e.country&&(l=`${e.city}, ${e.country}`)}else t.exactLocation&&(l=t.exactLocation);return{id:t.id,role:t.titleInternal,buyerName:"Buyer (Details not loaded)",locationSnippet:l,dateString:o,timeString:d,hourlyRate:Number(t.agreedRate),estimatedHours:a,totalPay:Math.round(100*n)/100,tipsExpected:!1,status:"pending",fullDescriptionLink:`/user/${e}/worker/gigs/${t.id}`,gigDescription:t.fullDescription||void 0,notesForWorker:t.notesForWorker||void 0}}),l=i.map(t=>{let r=new Date(t.startTime),s=new Date(t.endTime),i=(s.getTime()-r.getTime())/36e5,a=Math.round(100*i)/100,n=Number(t.agreedRate)*a,o=r.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"2-digit"}),d=`${r.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})} - ${s.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`,l="Location not specified";if(t.addressJson&&"object"==typeof t.addressJson){let e=t.addressJson;e.formatted_address?l=e.formatted_address:e.address?l=e.address:e.city&&e.country&&(l=`${e.city}, ${e.country}`)}else t.exactLocation&&(l=t.exactLocation);return{id:t.id,role:t.titleInternal,buyerName:"Buyer (Details not loaded)",locationSnippet:l,dateString:o,timeString:d,hourlyRate:Number(t.agreedRate),estimatedHours:a,totalPay:Math.round(100*n)/100,tipsExpected:!1,status:t.statusInternal,fullDescriptionLink:`/user/${e}/worker/gigs/${t.id}`,gigDescription:t.fullDescription||void 0,notesForWorker:t.notesForWorker||void 0}});return console.log("Debug - Final result - offers:",d.length,"accepted:",l.length),console.log("Debug - Sample offer:",d[0]),{success:!0,data:{offers:d,acceptedGigs:l}}}catch(e){return console.error("Error fetching worker offers:",e),{error:e.message||"Failed to fetch worker offers",status:500}}}console.log("Debug - Enum values:",o.gigStatusEnum.enumValues),console.log("Debug - PENDING_WORKER_ACCEPTANCE:",c),console.log("Debug - ACCEPTED:",g),(0,d.D)([u]),(0,i.A)(u,"40a6088411db4989a2f014a668b13745b3cfee1afe",null),s()}catch(e){s(e)}})},64939:e=>{"use strict";e.exports=import("pg")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},82945:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var s=r(60687),i=r(43210),a=r(16189),n=r(21295),o=r(41862),d=r(35485),l=r.n(d),u=r(8762);function c(){let e=(0,a.useParams)(),t=e.userId;e.gigId;let{user:r,loading:d}=(0,n.A)();r?.uid;let[c,g]=(0,i.useState)(null),[p,f]=(0,i.useState)(!0),[m,b]=(0,i.useState)(null),[h,x]=(0,i.useState)(!1),[y,v]=(0,i.useState)(!1);return p?(console.log("Rendering loading screen, isLoadingGig:",p),(0,s.jsx)("div",{className:l().loadingContainer,style:{position:"fixed",top:0,left:0,width:"100vw",height:"100vh",backgroundColor:"#1A1A1A",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999},children:(0,s.jsx)("div",{className:l().loadingContent,children:(0,s.jsx)(o.A,{className:l().loadingSpinner,size:48,style:{color:"white",animation:"spin 1s linear infinite"}})})})):m?(0,s.jsx)("div",{className:l().container,children:(0,s.jsx)("div",{className:l().pageWrapper,children:(0,s.jsx)("p",{className:l().errorMessage,children:m})})}):c?(0,s.jsx)(u.A,{userId:t,role:"worker",gig:c,setGig:g,isAvailableOffer:h,isCheckingOffer:y}):(0,s.jsx)("div",{className:l().container,children:(0,s.jsx)("div",{className:l().pageWrapper,children:(0,s.jsx)("p",{className:l().emptyState,children:"Gig details not found."})})})}r(58202),r(9539)},90408:(e,t,r)=>{Promise.resolve().then(r.bind(r,82945))},91645:e=>{"use strict";e.exports=require("net")},92602:e=>{"use strict";e.exports=import("firebase-admin/messaging")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[4447,9558,1658,6533,2002,7715,9071,6637,683,4808,5466],()=>r(21308));module.exports=s})();