(()=>{var e={};e.id=9565,e.ids=[9565],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},7879:e=>{"use strict";e.exports=import("firebase-admin/firestore")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14276:e=>{"use strict";e.exports=import("firebase-admin/auth")},14985:e=>{"use strict";e.exports=require("dns")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21820:e=>{"use strict";e.exports=require("os")},25191:(e,a,r)=>{Promise.resolve().then(r.bind(r,46498))},27900:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});let s=(0,r(62688).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},30474:(e,a,r)=>{"use strict";r.d(a,{default:()=>t.a});var s=r(31261),t=r.n(s)},30696:(e,a,r)=>{"use strict";r.r(a),r.d(a,{GlobalError:()=>o.a,__next_app__:()=>h,pages:()=>c,routeModule:()=>g,tree:()=>d});var s=r(65239),t=r(48088),i=r(88170),o=r.n(i),n=r(30893),l={};for(let e in n)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>n[e]);r.d(a,l);let d={children:["",{children:["(web-client)",{children:["user",{children:["[userId]",{children:["worker",{children:["chat",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,46498)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/chat/page.tsx"]}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,14866)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,58014)),"/home/israel/personal/code/alex/able-ai/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/chat/page.tsx"],h={require:r,loadChunk:()=>Promise.resolve()},g=new s.AppPageRouteModule({definition:{kind:t.RouteKind.APP_PAGE,page:"/(web-client)/user/[userId]/worker/chat/page",pathname:"/user/[userId]/worker/chat",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},31261:(e,a,r)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),!function(e,a){for(var r in a)Object.defineProperty(e,r,{enumerable:!0,get:a[r]})}(a,{default:function(){return l},getImageProps:function(){return n}});let s=r(37366),t=r(44953),i=r(46533),o=s._(r(1933));function n(e){let{props:a}=(0,t.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(a))void 0===r&&delete a[e];return{props:a}}let l=i.Image},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},35627:e=>{e.exports={container:"WorkerChatPage_container__sptEh",fadeIn:"WorkerChatPage_fadeIn__Wi8bd",loadingContainer:"WorkerChatPage_loadingContainer__YFcC1",header:"WorkerChatPage_header__kLh8x",backButton:"WorkerChatPage_backButton__J7o_x",backIcon:"WorkerChatPage_backIcon__RAhYt",avatar:"WorkerChatPage_avatar__t4MDI",avatarImage:"WorkerChatPage_avatarImage__3Q1NW",currentUserAvatar:"WorkerChatPage_currentUserAvatar__HEOpW",avatarPlaceholder:"WorkerChatPage_avatarPlaceholder__2NFse",participantNames:"WorkerChatPage_participantNames__Jt1ii",participantRoleContainer:"WorkerChatPage_participantRoleContainer__BWJ_7",participantRole:"WorkerChatPage_participantRole__l8SQX",chatContent:"WorkerChatPage_chatContent__Xo6iu",messageWrapper:"WorkerChatPage_messageWrapper__lCuPO",slideInPrimary:"WorkerChatPage_slideInPrimary__Nu_CA",messageUser:"WorkerChatPage_messageUser__oEBpF",messageOther:"WorkerChatPage_messageOther__0K7Oj",messageContent:"WorkerChatPage_messageContent__W8QKH",messageBubble:"WorkerChatPage_messageBubble__eQTX4",bubbleUser:"WorkerChatPage_bubbleUser__y3rqd",bubbleOther:"WorkerChatPage_bubbleOther__NQf8o",messageText:"WorkerChatPage_messageText__GEaok",messageFooter:"WorkerChatPage_messageFooter__rRMtW",messageTime:"WorkerChatPage_messageTime__Ofj80",messageRole:"WorkerChatPage_messageRole__FPQ8h",typingIndicator:"WorkerChatPage_typingIndicator__fUaf8",typingBounce:"WorkerChatPage_typingBounce__jkCfu",chatInput:"WorkerChatPage_chatInput__VRhH7",inputWrapper:"WorkerChatPage_inputWrapper__f0oiU",input:"WorkerChatPage_input__pewyL",sendButton:"WorkerChatPage_sendButton__1YaPb",gigsSection:"WorkerChatPage_gigsSection__wexoS",gigsSectionTitle:"WorkerChatPage_gigsSectionTitle__cwzkt",gigsLoading:"WorkerChatPage_gigsLoading__jGfU7",noGigs:"WorkerChatPage_noGigs__32GXm",gigsGrid:"WorkerChatPage_gigsGrid__uGx6k",gigCard:"WorkerChatPage_gigCard__PuDdh",gigHeader:"WorkerChatPage_gigHeader__fTv_T",gigTitle:"WorkerChatPage_gigTitle__FT8A_",gigStatus:"WorkerChatPage_gigStatus__KqH_P",gigDetails:"WorkerChatPage_gigDetails__wOoTH",gigDetail:"WorkerChatPage_gigDetail__Kf4_f",gigTotal:"WorkerChatPage_gigTotal__E2aTg",modalOverlay:"WorkerChatPage_modalOverlay__JCu0h",modalContent:"WorkerChatPage_modalContent__VpZn5",slideIn:"WorkerChatPage_slideIn__nBq9N",modalHeader:"WorkerChatPage_modalHeader__UtWJC",closeButton:"WorkerChatPage_closeButton__qf2LJ",modalBody:"WorkerChatPage_modalBody__uGmv_",modalGigDetails:"WorkerChatPage_modalGigDetails__zTcpz",modalGigDetail:"WorkerChatPage_modalGigDetail__Dyn_G",modalDescription:"WorkerChatPage_modalDescription__OEfWQ",modalNotes:"WorkerChatPage_modalNotes___4HRn",modalFooter:"WorkerChatPage_modalFooter__Vz43G",goToOffersButton:"WorkerChatPage_goToOffersButton__aU1Kk"}},43800:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>k});var s=r(60687),t=r(43210),i=r(16189),o=r(30474),n=r(58869),l=r(57800),d=r(28559),c=r(97992),h=r(40228),g=r(48730),m=r(23928),u=r(27900),p=r(11860),_=r(65456),x=r(35627),v=r.n(x),j=r(21295);function k(){let{user:e,loading:a}=(0,j.A)(),r=(0,i.useRouter)(),x=(0,t.useRef)(null),k=(0,t.useRef)(null),[b,C]=(0,t.useState)([]),[P,f]=(0,t.useState)(!0),[W,N]=(0,t.useState)(null),[y,w]=(0,t.useState)(!1),[I]=(0,t.useState)([{id:"alex-123",name:"Benji",role:"WORKER",avatar:"/images/benji.jpeg"},{id:"maria-456",name:"Maria",role:"BUYER",avatar:"/images/jessica.jpeg"}]),[D,A]=(0,t.useState)([{id:"1",senderId:"maria-456",avatar:"/images/jessica.jpeg",senderName:"Maria",senderRole:"BUYER",content:"Hi Benji, I saw your profile and I'm interested in hiring you for a photography gig this weekend. Are you available?",timestamp:new Date(Date.now()-6e5)},{id:"2",senderId:"alex-123",senderName:"Alex",senderRole:"WORKER",content:"Hello Maria! Yes, I'm available this weekend. I'd love to hear more about your photography needs. What type of event is it?",timestamp:new Date(Date.now()-48e4)},{id:"3",senderId:"maria-456",senderName:"Maria",senderRole:"BUYER",content:"It's a small wedding ceremony in the park. I need someone to capture the ceremony and some portraits. What's your rate?",timestamp:new Date(Date.now()-48e4)},{id:"4",senderId:"alex-123",senderName:"Alex",senderRole:"WORKER",content:"That sounds lovely! For a wedding ceremony and portraits, my rate is \xa3150 for 3 hours. I'll provide edited photos within 48 hours. Does that work for you?",timestamp:new Date(Date.now()-12e4)}]),[R,G]=(0,t.useState)(""),[S,T]=(0,t.useState)(!1),B=I.find(a=>a.id===e?.uid)||I[0],O=I.find(e=>e.id!==B.id)||I[1],q=e=>e.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),z=e=>"BUYER"===e?(0,s.jsx)(n.A,{size:16}):(0,s.jsx)(l.A,{size:16}),U=(0,t.useCallback)(async e=>{if(!e.trim()||S)return;T(!0);let a={id:Date.now().toString(),senderId:B.id,senderName:B.name,senderRole:B.role,content:e.trim(),timestamp:new Date,isNew:!0};A(e=>[...e,a]),G(""),setTimeout(()=>{T(!1)},1e3)},[B,S]),E=e=>{N(e),w(!0)};return a?(0,s.jsx)("div",{className:v().loadingContainer,children:(0,s.jsx)("p",{children:"Loading authentication..."})}):e?(0,s.jsxs)("div",{className:v().container,children:[(0,s.jsxs)("header",{className:v().header,children:[(0,s.jsx)("button",{onClick:()=>r.back(),className:v().backButton,"aria-label":"Go back",children:(0,s.jsx)(d.A,{className:v().backIcon})}),(0,s.jsxs)("h2",{className:v().participantNames,children:["Chat between ",B.name," and ",O.name]})]}),(0,s.jsxs)("div",{className:v().gigsSection,children:[(0,s.jsx)("h3",{className:v().gigsSectionTitle,children:"Available Gigs"}),P?(0,s.jsx)("div",{className:v().gigsLoading,children:"Loading gigs..."}):b.length>0?(0,s.jsx)("div",{className:v().gigsGrid,children:b.map(e=>(0,s.jsxs)("div",{className:v().gigCard,onClick:()=>E(e),children:[(0,s.jsxs)("div",{className:v().gigHeader,children:[(0,s.jsx)("h4",{className:v().gigTitle,children:e.role}),(0,s.jsx)("span",{className:v().gigStatus,children:e.status})]}),(0,s.jsxs)("div",{className:v().gigDetails,children:[(0,s.jsxs)("div",{className:v().gigDetail,children:[(0,s.jsx)(c.A,{size:14}),(0,s.jsx)("span",{children:e.locationSnippet})]}),(0,s.jsxs)("div",{className:v().gigDetail,children:[(0,s.jsx)(h.A,{size:14}),(0,s.jsx)("span",{children:e.dateString})]}),(0,s.jsxs)("div",{className:v().gigDetail,children:[(0,s.jsx)(g.A,{size:14}),(0,s.jsx)("span",{children:e.timeString})]}),(0,s.jsxs)("div",{className:v().gigDetail,children:[(0,s.jsx)(m.A,{size:14}),(0,s.jsxs)("span",{children:["\xa3",e.hourlyRate,"/hr"]})]})]}),e.estimatedHours&&(0,s.jsx)("div",{className:v().gigTotal,children:(0,s.jsxs)("span",{children:["Total: \xa3",e.totalPay," (",e.estimatedHours,"h)"]})})]},e.id))}):(0,s.jsx)("div",{className:v().noGigs,children:"No gigs available at the moment"})]}),(0,s.jsxs)("div",{className:v().chatContent,ref:x,children:[D.map(e=>{let a=e.senderId===B.id,r=I.find(a=>a.id===e.senderId);return(0,s.jsxs)("div",{className:`${v().messageWrapper} ${a?v().messageUser:v().messageOther}`,children:[(0,s.jsx)("div",{className:`${v().avatar} ${a?v().currentUserAvatar:""}`,children:(0,s.jsx)("div",{className:v().avatarPlaceholder,children:r?.avatar?(0,s.jsx)(o.default,{src:r.avatar,alt:`${r.name}'s avatar`,width:40,height:40,className:v().avatarImage}):r?.name.charAt(0).toUpperCase()})}),(0,s.jsx)("div",{className:v().messageContent,children:(0,s.jsxs)("div",{className:`${v().messageBubble} ${a?v().bubbleUser:v().bubbleOther}`,children:[(0,s.jsx)("p",{className:v().messageText,children:e.content}),(0,s.jsxs)("div",{className:v().messageFooter,children:[(0,s.jsx)("span",{className:v().messageTime,children:q(e.timestamp)}),(0,s.jsx)("div",{className:v().messageRole,children:z(e.senderRole)})]})]})})]},e.id)}),S&&(0,s.jsxs)("div",{className:`${v().messageWrapper} ${v().messageOther}`,children:[(0,s.jsx)("div",{className:v().avatar,children:(0,s.jsx)("div",{className:v().avatarPlaceholder,children:O.name.charAt(0).toUpperCase()})}),(0,s.jsx)("div",{className:v().messageContent,children:(0,s.jsx)("div",{className:`${v().messageBubble} ${v().bubbleOther}`,children:(0,s.jsxs)("div",{className:v().typingIndicator,children:[(0,s.jsx)("span",{}),(0,s.jsx)("span",{}),(0,s.jsx)("span",{})]})})})]}),(0,s.jsx)("div",{ref:k})]}),(0,s.jsx)("div",{className:v().chatInput,children:(0,s.jsxs)("div",{className:v().inputWrapper,children:[(0,s.jsx)("textarea",{value:R,onChange:e=>G(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),U(R))},placeholder:"Type a message...",className:v().input,disabled:S}),(0,s.jsx)("button",{onClick:()=>U(R),disabled:!R.trim()||S,className:v().sendButton,"aria-label":"Send message",children:(0,s.jsx)(u.A,{size:18})})]})}),y&&W&&(0,s.jsx)("div",{className:v().modalOverlay,onClick:()=>w(!1),children:(0,s.jsxs)("div",{className:v().modalContent,onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:v().modalHeader,children:[(0,s.jsx)("h3",{children:W.role}),(0,s.jsx)("button",{className:v().closeButton,onClick:()=>w(!1),children:(0,s.jsx)(p.A,{size:20})})]}),(0,s.jsxs)("div",{className:v().modalBody,children:[(0,s.jsxs)("div",{className:v().modalGigDetails,children:[(0,s.jsxs)("div",{className:v().modalGigDetail,children:[(0,s.jsx)(c.A,{size:16}),(0,s.jsx)("span",{children:W.locationSnippet})]}),(0,s.jsxs)("div",{className:v().modalGigDetail,children:[(0,s.jsx)(h.A,{size:16}),(0,s.jsx)("span",{children:W.dateString})]}),(0,s.jsxs)("div",{className:v().modalGigDetail,children:[(0,s.jsx)(g.A,{size:16}),(0,s.jsx)("span",{children:W.timeString})]}),(0,s.jsxs)("div",{className:v().modalGigDetail,children:[(0,s.jsx)(m.A,{size:16}),(0,s.jsxs)("span",{children:["\xa3",W.hourlyRate,"/hr"]})]}),W.estimatedHours&&(0,s.jsx)("div",{className:v().modalGigDetail,children:(0,s.jsxs)("span",{children:["Total: \xa3",W.totalPay," (",W.estimatedHours,"h)"]})})]}),W.gigDescription&&(0,s.jsxs)("div",{className:v().modalDescription,children:[(0,s.jsx)("h4",{children:"Description"}),(0,s.jsx)("p",{children:W.gigDescription})]}),W.notesForWorker&&(0,s.jsxs)("div",{className:v().modalNotes,children:[(0,s.jsx)("h4",{children:"Notes for Worker"}),(0,s.jsx)("p",{children:W.notesForWorker})]})]}),(0,s.jsx)("div",{className:v().modalFooter,children:(0,s.jsx)("button",{className:v().goToOffersButton,onClick:()=>{e?.uid&&r.push(`/user/${e.uid}/worker/offers`),w(!1)},children:"Go to Gig Offers"})})]})})]}):(0,s.jsx)(_.A,{})}r(9539)},46498:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>s});let s=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/chat/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/chat/page.tsx","default")},46675:e=>{"use strict";e.exports=require("firebase-admin")},55455:(e,a,r)=>{Promise.resolve().then(r.bind(r,43800))},55511:e=>{"use strict";e.exports=require("crypto")},57800:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});let s=(0,r(62688).A)("briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]])},58869:(e,a,r)=>{"use strict";r.d(a,{A:()=>s});let s=(0,r(62688).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64939:e=>{"use strict";e.exports=import("pg")},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},92602:e=>{"use strict";e.exports=import("firebase-admin/messaging")},94735:e=>{"use strict";e.exports=require("events")}};var a=require("../../../../../../webpack-runtime.js");a.C(e);var r=e=>a(a.s=e),s=a.X(0,[4447,9558,1658,6533,2002,6637,683,4444],()=>r(30696));module.exports=s})();