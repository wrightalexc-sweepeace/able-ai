(()=>{var e={};e.id=6188,e.ids=[6188],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},6475:(e,r,t)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),!function(e,r){for(var t in r)Object.defineProperty(e,t,{enumerable:!0,get:r[t]})}(r,{callServer:function(){return a.callServer},createServerReference:function(){return n},findSourceMapURL:function(){return o.findSourceMapURL}});let a=t(11264),o=t(11448),n=t(19357).createServerReference},7879:e=>{"use strict";e.exports=import("firebase-admin/firestore")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},13503:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/[workerId]/recommendation/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/[workerId]/recommendation/page.tsx","default")},14276:e=>{"use strict";e.exports=import("firebase-admin/auth")},14985:e=>{"use strict";e.exports=require("dns")},16269:(e,r,t)=>{"use strict";t.d(r,{A:()=>b});var a=t(60687);t(43210);var o=t(28559),n=t(17917),s=t.n(n),i=t(85814),d=t.n(i),l=t(21295),c=t(79563),m=t(16189),u=t(30474),p=t(40477),h=t.n(p);let f=({uid:e,handleClick:r,unreadCount:t,unreadNotifications:o})=>(0,a.jsxs)(d(),{href:`/user/${e}/notifications`,passHref:!0,onClick:r,children:[(0,a.jsx)("button",{className:h().notificationButton,"aria-label":"Notifications",children:(0,a.jsx)(u.default,{src:"/images/notifications.svg",alt:"Notifications",width:40,height:40})}),t>0||o>0?(0,a.jsx)("span",{className:h().notificationBadge,children:t>0?t:o}):null]}),b=e=>{let{user:r}=(0,l.A)(),t=(0,m.usePathname)(),{isHomePage:n,title:i,onBackClick:p,handleClick:h,unreadCount:b,unreadNotifications:x}=e,g=t.includes("/able-ai");return(0,a.jsxs)("header",{className:s().header,children:[n?(0,a.jsx)(u.default,{src:"/images/home.svg",alt:"Back",width:40,height:40}):(0,a.jsx)("button",{onClick:p,className:s().backButton,"aria-label":"Go back",children:(0,a.jsx)(o.A,{size:20})}),i&&(0,a.jsx)("h1",{className:s().title,children:i}),(0,a.jsx)(d(),{href:`/user/${r?.uid}/able-ai`,className:s().chat,children:g?(0,a.jsx)(c.A,{width:40,height:40}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Chat with Able"}),(0,a.jsx)(c.A,{width:30,height:30})]})}),n&&(0,a.jsx)(f,{uid:r?.uid,handleClick:h,unreadCount:b,unreadNotifications:x})]})}},17430:e=>{e.exports={input:"InputField_input__NlH8Q"}},17917:e=>{e.exports={header:"ScreenHeaderWithBack_header__mx1Ch",backButton:"ScreenHeaderWithBack_backButton__0EIlD",title:"ScreenHeaderWithBack_title__Un97C",chat:"ScreenHeaderWithBack_chat__WpLse"}},18722:(e,r,t)=>{Promise.resolve().then(t.bind(t,98114))},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19771:e=>{"use strict";e.exports=require("process")},21169:e=>{e.exports={logo:"Logo_logo__aLQuM"}},21820:e=>{"use strict";e.exports=require("os")},27900:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(62688).A)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]])},27910:e=>{"use strict";e.exports=require("stream")},28354:e=>{"use strict";e.exports=require("util")},28559:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(62688).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},40385:e=>{e.exports={container:"RecommendationPage_container__qALV0",pageWrapper:"RecommendationPage_pageWrapper__tNeff",recommendationCard:"RecommendationPage_recommendationCard__dXQ_9",prompt:"RecommendationPage_prompt__Rjjk5",form:"RecommendationPage_form__9pYQV",inputGroup:"RecommendationPage_inputGroup__eqBce",label:"RecommendationPage_label__abuDu",input:"RecommendationPage_input__c3C4Q",textarea:"RecommendationPage_textarea__eFMIF",nameEmailGroup:"RecommendationPage_nameEmailGroup__BakhV",submitButton:"RecommendationPage_submitButton___r6zj",botMessageContainer:"RecommendationPage_botMessageContainer__2C3v4",botAvatar:"RecommendationPage_botAvatar__2R1yW",botText:"RecommendationPage_botText__93ICR",loadingMessage:"RecommendationPage_loadingMessage__Qg1R_",successMessage:"RecommendationPage_successMessage__rMa6Y",errorMessage:"RecommendationPage_errorMessage__vGmQf"}},40477:e=>{e.exports={notificationButton:"Notification_notificationButton__NL740",notificationBadge:"Notification_notificationBadge__ZxPNU"}},41862:(e,r,t)=>{"use strict";t.d(r,{A:()=>a});let a=(0,t(62688).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},42809:(e,r,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.d(r,{YV:()=>c,iE:()=>u,nP:()=>m});var o=t(91199);t(42087);var n=t(30298),s=t(60444),i=t(18839),d=t(33331),l=e([n]);n=(l.then?(await l)():l)[0];let c=async e=>{try{let r=`${e.workerId.substring(0,8)}-${Date.now().toString(36)}`,t=await n.db.insert(s.RecommendationsTable).values({workerUserId:e.workerId,recommendationCode:r,recommendationText:e.recommendationText,relationship:e.relationship,recommenderName:e.recommenderName,recommenderEmail:e.recommenderEmail,isVerified:!1,moderationStatus:"PENDING"}).returning();return{success:!0,data:"Recommendation submitted successfully",recommendationId:t[0].id}}catch(e){return console.error("Error submitting recommendation:",e),{success:!1,error:"Failed to submit recommendation"}}},m=async e=>{try{let r=await n.db.query.RecommendationsTable.findMany({where:(0,i.eq)(s.RecommendationsTable.workerUserId,e),orderBy:(e,{desc:r})=>[r(e.createdAt)]});return{success:!0,data:r}}catch(e){return console.error("Error fetching recommendations:",e),{success:!1,error:"Failed to fetch recommendations"}}},u=async e=>{try{let r=await n.db.query.RecommendationsTable.findFirst({where:(0,i.eq)(s.RecommendationsTable.recommendationCode,e),columns:{workerUserId:!0}});if(!r)return{success:!1,error:"Recommendation not found"};let{getWorkerDetailsAction:a}=await t.e(9045).then(t.bind(t,39045));return await a(r.workerUserId)}catch(e){return console.error("Error fetching worker details by recommendation code:",e),{success:!1,error:"Internal server error"}}};(0,d.D)([c,m,u]),(0,o.A)(c,"7fb08d3b8c35ad0b77807faac01ae2fa61dc878208",null),(0,o.A)(m,"7fa6200dd96a8f0ee5f394058b7106f11eb1d05d41",null),(0,o.A)(u,"7f28deba980d9549b600782323900323650f6ff980",null),a()}catch(e){a(e)}})},46675:e=>{"use strict";e.exports=require("firebase-admin")},55511:e=>{"use strict";e.exports=require("crypto")},62688:(e,r,t)=>{"use strict";t.d(r,{A:()=>m});var a=t(43210);let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,t)=>t?t.toUpperCase():r.toLowerCase()),s=e=>{let r=n(e);return r.charAt(0).toUpperCase()+r.slice(1)},i=(...e)=>e.filter((e,r,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===r).join(" ").trim(),d=e=>{for(let r in e)if(r.startsWith("aria-")||"role"===r||"title"===r)return!0};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,a.forwardRef)(({color:e="currentColor",size:r=24,strokeWidth:t=2,absoluteStrokeWidth:o,className:n="",children:s,iconNode:c,...m},u)=>(0,a.createElement)("svg",{ref:u,...l,width:r,height:r,stroke:e,strokeWidth:o?24*Number(t)/Number(r):t,className:i("lucide",n),...!s&&!d(m)&&{"aria-hidden":"true"},...m},[...c.map(([e,r])=>(0,a.createElement)(e,r)),...Array.isArray(s)?s:[s]])),m=(e,r)=>{let t=(0,a.forwardRef)(({className:t,...n},d)=>(0,a.createElement)(c,{ref:d,iconNode:r,className:i(`lucide-${o(s(e))}`,`lucide-${e}`,t),...n}));return t.displayName=s(e),t}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},64939:e=>{"use strict";e.exports=import("pg")},64961:(e,r,t)=>{"use strict";t.d(r,{A:()=>s});var a=t(60687);t(43210);var o=t(17430),n=t.n(o);let s=({id:e,name:r,placeholder:t,type:o="text",value:s,onChange:i,required:d=!1,...l})=>(0,a.jsx)("input",{id:e,name:r,className:n().input,type:o,placeholder:t,value:s,onChange:i,required:d,...l})},73496:e=>{"use strict";e.exports=require("http2")},74075:e=>{"use strict";e.exports=require("zlib")},78554:(e,r,t)=>{Promise.resolve().then(t.bind(t,13503))},79551:e=>{"use strict";e.exports=require("url")},79563:(e,r,t)=>{"use strict";t.d(r,{A:()=>i});var a=t(60687);t(43210);var o=t(30474),n=t(21169),s=t.n(n);let i=({width:e=260,height:r=260})=>(0,a.jsx)(o.default,{src:"/images/ableai.png",alt:"App Logo",width:e,height:r,className:s().logo})},81630:e=>{"use strict";e.exports=require("http")},83872:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>s.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>l});var a=t(65239),o=t(48088),n=t(88170),s=t.n(n),i=t(30893),d={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(r,d);let l={children:["",{children:["(web-client)",{children:["user",{children:["[userId]",{children:["worker",{children:["[workerId]",{children:["recommendation",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,13503)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/[workerId]/recommendation/page.tsx"]}]},{}]},{}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,14866)),"/home/israel/personal/code/alex/able-ai/app/(web-client)/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,58014)),"/home/israel/personal/code/alex/able-ai/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,65284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/israel/personal/code/alex/able-ai/app/(web-client)/user/[userId]/worker/[workerId]/recommendation/page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/(web-client)/user/[userId]/worker/[workerId]/recommendation/page",pathname:"/user/[userId]/worker/[workerId]/recommendation",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},85736:(e,r,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.r(r),t.d(r,{"400cd1fa767ef5281508e93e3ca1d7a0d11ad8371f":()=>o.qM,"404660310a5e0f58f816c762a9f12b9b33702d2493":()=>o.OH,"40bcfd414a2446406921fe5bddeb7f04b82b554661":()=>o.Rz,"60976633aa90a3960f31dd64f4fd8496ccbdb52456":()=>o.a6,"60e7f34a33097c37a8e1219f48e58834e6fa037656":()=>o.r2,"7f28deba980d9549b600782323900323650f6ff980":()=>n.iE,"7fa6200dd96a8f0ee5f394058b7106f11eb1d05d41":()=>n.nP,"7fad076ff87a53fb2dc1878d8dc87b650c1a1b2caa":()=>o.gL,"7fb08d3b8c35ad0b77807faac01ae2fa61dc878208":()=>n.YV});var o=t(29034),n=t(42809),s=e([o,n]);[o,n]=s.then?(await s)():s,a()}catch(e){a(e)}})},91645:e=>{"use strict";e.exports=require("net")},92602:e=>{"use strict";e.exports=import("firebase-admin/messaging")},94735:e=>{"use strict";e.exports=require("events")},98114:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>f});var a=t(60687),o=t(43210),n=t(16189),s=t(64961),i=t(41862),d=t(27900),l=t(40385),c=t.n(l),m=t(21295),u=t(16269),p=t(6475);let h=(0,p.createServerReference)("7fb08d3b8c35ad0b77807faac01ae2fa61dc878208",p.callServer,void 0,p.findSourceMapURL,"submitRecommendationAction");function f(){let e=(0,n.useRouter)(),r=(0,n.useParams)();(0,n.usePathname)(),r.userId;let t=r.workerId,{user:l,loading:p}=(0,m.A)();l?.uid;let[f,b]=(0,o.useState)(null),[x,g]=(0,o.useState)(!0),[_,v]=(0,o.useState)({recommendationText:"",relationship:"",recommenderName:"",recommenderEmail:""}),[w,k]=(0,o.useState)(!1),[j,y]=(0,o.useState)(null),[N,P]=(0,o.useState)(null),A=e=>{let{name:r,value:t}=e.target;v(e=>({...e,[r]:t})),y(null),P(null)},R=async e=>{if(e.preventDefault(),y(null),P(null),!_.recommendationText||!_.relationship||!_.recommenderName||!_.recommenderEmail)return void y("All fields are required.");k(!0);let r={workerId:t,recommenderUserId:l?.uid,..._};try{let e=await h(r);e.success?(P("Recommendation submitted successfully! Thank you."),v({recommendationText:"",relationship:"",recommenderName:l?.displayName||"",recommenderEmail:l?.email||""})):y(e.error||"Failed to submit recommendation. Please try again.")}catch(e){console.error("Submission error:",e),e instanceof Error?y(`An unexpected error occurred: ${e.message}. Please try again.`):y("An unexpected error occurred. Please try again.")}finally{k(!1)}};return x?(0,a.jsxs)("div",{className:c().loadingContainer,children:[(0,a.jsx)(i.A,{size:32,className:"animate-spin"})," Loading Worker Details..."]}):f?(0,a.jsxs)("div",{className:c().container,children:[(0,a.jsx)(u.A,{title:"Recommendation",onBackClick:()=>e.back()}),(0,a.jsx)("div",{className:c().pageWrapper,children:(0,a.jsxs)("div",{className:c().recommendationCard,children:[(0,a.jsxs)("p",{className:c().prompt,children:[f.name," is available for hire on Able! ",(0,a.jsx)("br",{})," Please provide a reference for ",f.name,"'s skills as a ",f.primarySkill,". Your feedback will be added to their public profile."]}),j&&(0,a.jsx)("p",{className:c().errorMessage,children:j}),N&&(0,a.jsx)("p",{className:c().successMessage,children:N}),(0,a.jsxs)("form",{onSubmit:R,className:c().form,children:[(0,a.jsxs)("div",{className:c().inputGroup,children:[(0,a.jsxs)("label",{htmlFor:"recommendationText",className:c().label,children:["Your Recommendation ",(0,a.jsx)("span",{style:{color:"var(--error-color)"},children:"*"})]}),(0,a.jsx)("textarea",{id:"recommendationText",name:"recommendationText",value:_.recommendationText,onChange:A,className:c().textarea,placeholder:`What makes ${f.name} great at ${f.primarySkill}?`,required:!0})]}),(0,a.jsxs)("div",{className:c().inputGroup,children:[(0,a.jsxs)("label",{htmlFor:"relationship",className:c().label,children:["Please describe how you know ",f.name,"? ",(0,a.jsx)("span",{style:{color:"var(--error-color)"},children:"*"})]}),(0,a.jsx)("textarea",{id:"relationship",name:"relationship",value:_.relationship,onChange:A,className:c().textarea,placeholder:"e.g., Worked together at [Company/Event], Supervised them, Hired them for a gig...",required:!0})]}),(0,a.jsxs)("div",{className:c().inputGroup,children:[(0,a.jsxs)("label",{htmlFor:"recommenderName",className:c().label,children:["Your Details (won't be public on their profile) ",(0,a.jsx)("span",{style:{color:"var(--error-color)"},children:"*"})]}),(0,a.jsxs)("div",{className:c().nameEmailGroup,children:[(0,a.jsx)(s.A,{id:"recommenderName",name:"recommenderName",type:"text",value:_.recommenderName,onChange:A,placeholder:"Your Full Name",required:!0}),(0,a.jsx)(s.A,{id:"recommenderEmail",name:"recommenderEmail",type:"email",value:_.recommenderEmail,onChange:A,placeholder:"Your Email Address",required:!0})]})]}),(0,a.jsxs)("button",{type:"submit",className:c().submitButton,disabled:w,children:[w?(0,a.jsx)(i.A,{size:20,className:"animate-spin"}):(0,a.jsx)(d.A,{size:18}),w?"Submitting...":"Submit"]})]})]})})]}):(0,a.jsx)("div",{className:c().container,children:(0,a.jsx)("p",{className:c().errorMessage,children:j||"Worker not found."})})}}};var r=require("../../../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[4447,9558,1658,6533,2002,7715,6637,683],()=>t(83872));module.exports=a})();