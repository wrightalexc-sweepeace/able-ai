exports.id=8161,exports.ids=[8161],exports.modules={1785:(e,t,i)=>{"use strict";i.d(t,{$R:()=>u,Am:()=>l,BX:()=>s,CO:()=>_,DA:()=>d,E1:()=>c,IS:()=>m,Lm:()=>g,Q1:()=>a,Ud:()=>f,dg:()=>n,kg:()=>o});var r=i(88544);let a=(0,r.rL)("user_app_role_enum",["USER","SUPER_ADMIN","ADMIN","QA"]),d=(0,r.rL)("active_role_context_enum",["BUYER","GIG_WORKER"]),l=(0,r.rL)("rtw_kyc_status_enum",["NOT_SUBMITTED","PENDING","VERIFIED","ACCEPTED","EXPIRED","NOT_FOUND","LOCKED","REJECTED"]),n=(0,r.rL)("gig_status_enum",["PENDING_WORKER_ACCEPTANCE","PAYMENT_HELD_PENDING_ACCEPTANCE","ACCEPTED","DECLINED_BY_WORKER","IN_PROGRESS","PENDING_COMPLETION_WORKER","PENDING_COMPLETION_BUYER","COMPLETED","AWAITING_PAYMENT","PAID","CANCELLED_BY_BUYER","CANCELLED_BY_WORKER","CANCELLED_BY_ADMIN","DISPUTED"]),s=(0,r.rL)("cancellation_party_enum",["BUYER","WORKER","ADMIN","SYSTEM"]),o=(0,r.rL)("payment_status_enum",["PENDING","PROCESSING","COMPLETED","FAILED","REFUNDED","REQUIRES_ACTION"]),u=(0,r.rL)("badge_type_enum",["SKILL","VALUE","PLATFORM_ACHIEVEMENT"]),_=(0,r.rL)("review_type_enum",["INTERNAL_PLATFORM","EXTERNAL_REQUESTED"]),m=(0,r.rL)("moderation_status_enum",["PENDING","APPROVED","REJECTED","AUTO_FLAGGED"]),c=(0,r.rL)("vector_entity_type_enum",["WORKER_PROFILE_BIO","WORKER_SKILL_DESCRIPTION","GIG_REQUIREMENT_DESCRIPTION","USER_REVIEW_TEXT"]),f=(0,r.rL)("stripe_account_status_enum",["connected","pending_verification","incomplete","restricted","disabled"]);(0,r.rL)("review_role",["BUYER","WORKER"]);let g=(0,r.rL)("discount_type_enum",["USER_REFERRAL","PLATFORM_DISCOUNT","ONE_TIME_DISCOUNT"])},14718:(e,t,i)=>{"use strict";i.r(t),i.d(t,{adminLogsRelations:()=>v,aiPromptsRelations:()=>L,badgeDefinitionsRelations:()=>I,buyerProfilesRelations:()=>c,chatMessagesRelations:()=>U,equipmentRelations:()=>E,escalatedIssuesRelations:()=>k,gigSkillsRequiredRelations:()=>p,gigWorkerProfilesRelations:()=>m,gigsRelations:()=>R,mockPaymentsRelations:()=>P,passwordRecoveryRequestsRelations:()=>g,paymentsRelations:()=>M,qualificationsRelations:()=>N,recommendationsRelations:()=>h,reviewsRelations:()=>y,skillsRelations:()=>T,teamMembersRelations:()=>f,userAiUsageRelations:()=>w,userBadgesLinkRelations:()=>A,usersRelations:()=>_,vectorEmbeddingsRelations:()=>b});var r=i(39783),a=i(75383),d=i(50837),l=i(85534),n=i(17352),s=i(29448),o=i(45584),u=i(20259);let _=(0,r.K1)(a.Lh,({one:e,many:t})=>({gigWorkerProfile:e(a._1,{fields:[a.Lh.id],references:[a._1.userId]}),buyerProfile:e(a.Gx,{fields:[a.Lh.id],references:[a.Gx.userId]}),gigsAsBuyer:t(d.fz,{relationName:"UserAsBuyerOfGig"}),gigsAsWorker:t(d.fz,{relationName:"UserAsWorkerOfGig"}),paymentsMade:t(n.G9,{relationName:"UserAsPayerOfPayment"}),paymentsReceived:t(n.G9,{relationName:"UserAsReceiverOfPayment"}),reviewsAuthored:t(l.UG,{relationName:"UserAsAuthorOfReview"}),reviewsTargeted:t(l.UG,{relationName:"UserAsTargetOfReview"}),recommendationsReceived:t(l.TD,{relationName:"UserAsWorkerOfRecommendation"}),userBadgeLinks:t(l.Bj,{relationName:"UserBadgesEarnedByThisUser"}),badgesAwardedByThisUser:t(l.Bj,{relationName:"BadgesAwardedByThisUser"}),adminLogs:t(s.v1,{relationName:"AdminUserWhoPerformedLogAction"}),aiPromptsLastUpdated:t(s.kK,{relationName:"UserWhoLastUpdatedPrompt"}),passwordRecoveryRequests:t(a.f2),teamMemberLinks:t(a.Ju,{relationName:"UserLinkedAsTeamMember"}),sentChatMessages:t(l.BM,{relationName:"UserAsSenderOfChatMessage"}),mockPaymentsAsWorker:t(n.gB,{relationName:"MockPaymentWorkerUser"}),mockPaymentsAsBuyer:t(n.gB,{relationName:"MockPaymentBuyerUser"}),userAiUsage:t(s.Ho),reportedIssues:t(s.DW,{relationName:"UserAsReporterOfIssue"}),assignedIssues:t(s.DW,{relationName:"UserAsAssignedAdminOfIssue"}),notificationPreferences:e(u.S,{fields:[a.Lh.id],references:[u.S.userId]})})),m=(0,r.K1)(a._1,({one:e,many:t})=>({user:e(a.Lh,{fields:[a._1.userId],references:[a.Lh.id]}),skills:t(d.L1),qualifications:t(d.rr),equipment:t(d.dK)})),c=(0,r.K1)(a.Gx,({one:e,many:t})=>({user:e(a.Lh,{fields:[a.Gx.userId],references:[a.Lh.id]}),teamMembers:t(a.Ju)})),f=(0,r.K1)(a.Ju,({one:e})=>({buyerProfile:e(a.Gx,{fields:[a.Ju.buyerProfileId],references:[a.Gx.id]}),user:e(a.Lh,{fields:[a.Ju.memberUserId],references:[a.Lh.id],relationName:"UserLinkedAsTeamMember"})})),g=(0,r.K1)(a.f2,({one:e})=>({user:e(a.Lh,{fields:[a.f2.userId],references:[a.Lh.id]})})),T=(0,r.K1)(d.L1,({one:e})=>({workerProfile:e(a._1,{fields:[d.L1.workerProfileId],references:[a._1.id]})})),N=(0,r.K1)(d.rr,({one:e})=>({workerProfile:e(a._1,{fields:[d.rr.workerProfileId],references:[a._1.id]})})),E=(0,r.K1)(d.dK,({one:e})=>({workerProfile:e(a._1,{fields:[d.dK.workerProfileId],references:[a._1.id]})})),R=(0,r.K1)(d.fz,({one:e,many:t})=>({buyer:e(a.Lh,{fields:[d.fz.buyerUserId],references:[a.Lh.id],relationName:"UserAsBuyerOfGig"}),worker:e(a.Lh,{fields:[d.fz.workerUserId],references:[a.Lh.id],relationName:"UserAsWorkerOfGig"}),skillsRequired:t(d.tF),payments:t(n.G9),reviews:t(l.UG),chatMessages:t(l.BM),badgesAwardedInContext:t(l.Bj,{relationName:"BadgesAwardedInGigContext"})})),p=(0,r.K1)(d.tF,({one:e})=>({gig:e(d.fz,{fields:[d.tF.gigId],references:[d.fz.id]})})),y=(0,r.K1)(l.UG,({one:e})=>({gig:e(d.fz,{fields:[l.UG.gigId],references:[d.fz.id]}),author:e(a.Lh,{fields:[l.UG.authorUserId],references:[a.Lh.id],relationName:"UserAsAuthorOfReview"}),target:e(a.Lh,{fields:[l.UG.targetUserId],references:[a.Lh.id],relationName:"UserAsTargetOfReview"})})),h=(0,r.K1)(l.TD,({one:e})=>({worker:e(a.Lh,{fields:[l.TD.workerUserId],references:[a.Lh.id],relationName:"UserAsWorkerOfRecommendation"})})),I=(0,r.K1)(l.kk,({many:e})=>({userBadgeLinks:e(l.Bj,{relationName:"BadgeDefinitionToUserLinks"})})),A=(0,r.K1)(l.Bj,({one:e})=>({user:e(a.Lh,{fields:[l.Bj.userId],references:[a.Lh.id],relationName:"UserBadgesEarnedByThisUser"}),badgeDefinition:e(l.kk,{fields:[l.Bj.badgeId],references:[l.kk.id]}),awardedByUser:e(a.Lh,{fields:[l.Bj.awardedByUserId],references:[a.Lh.id],relationName:"BadgesAwardedByThisUser"}),gig:e(d.fz,{fields:[l.Bj.gigId],references:[d.fz.id],relationName:"BadgesAwardedInGigContext"})})),U=(0,r.K1)(l.BM,({one:e})=>({gig:e(d.fz,{fields:[l.BM.gigId],references:[d.fz.id]}),sender:e(a.Lh,{fields:[l.BM.senderUserId],references:[a.Lh.id],relationName:"UserAsSenderOfChatMessage"})})),M=(0,r.K1)(n.G9,({one:e})=>({gig:e(d.fz,{fields:[n.G9.gigId],references:[d.fz.id]}),payer:e(a.Lh,{fields:[n.G9.payerUserId],references:[a.Lh.id],relationName:"UserAsPayerOfPayment"}),receiver:e(a.Lh,{fields:[n.G9.receiverUserId],references:[a.Lh.id],relationName:"UserAsReceiverOfPayment"})})),P=(0,r.K1)(n.gB,({one:e})=>({worker:e(a.Lh,{fields:[n.gB.workerUserId],references:[a.Lh.id],relationName:"MockPaymentWorkerUser"}),buyer:e(a.Lh,{fields:[n.gB.buyerUserId],references:[a.Lh.id],relationName:"MockPaymentBuyerUser"})})),v=(0,r.K1)(s.v1,({one:e})=>({adminUser:e(a.Lh,{fields:[s.v1.adminUserId],references:[a.Lh.id],relationName:"AdminUserWhoPerformedLogAction"})})),L=(0,r.K1)(s.kK,({one:e})=>({lastUpdatedByUser:e(a.Lh,{fields:[s.kK.lastUpdatedByUserId],references:[a.Lh.id],relationName:"UserWhoLastUpdatedPrompt"})})),w=(0,r.K1)(s.Ho,({one:e})=>({user:e(a.Lh,{fields:[s.Ho.userId],references:[a.Lh.id]})})),k=(0,r.K1)(s.DW,({one:e})=>({reporter:e(a.Lh,{fields:[s.DW.userId],references:[a.Lh.id],relationName:"UserAsReporterOfIssue"}),assignedAdmin:e(a.Lh,{fields:[s.DW.adminUserId],references:[a.Lh.id],relationName:"UserAsAssignedAdminOfIssue"})})),b=(0,r.K1)(o.g,({one:e})=>({sourceGig:e(d.fz,{fields:[o.g.entityPostgresId],references:[d.fz.id]})}))},17352:(e,t,i)=>{"use strict";i.d(t,{G9:()=>g,gB:()=>T,uu:()=>N});var r=i(59672),a=i(9594),d=i(72170),l=i(79252),n=i(29334),s=i(54693),o=i(34509),u=i(9253),_=i(42270),m=i(1785),c=i(75383),f=i(50837);let g=(0,r.cJ)("payments",{id:(0,a.uR)("id").primaryKey().default((0,_.ll)`gen_random_uuid()`),gigId:(0,a.uR)("gig_id").notNull().references(()=>f.fz.id,{onDelete:"restrict"}),payerUserId:(0,a.uR)("payer_user_id").notNull().references(()=>c.Lh.id,{onDelete:"restrict"}),receiverUserId:(0,a.uR)("receiver_user_id").notNull().references(()=>c.Lh.id,{onDelete:"restrict"}),amountGross:(0,d._)("amount_gross",{precision:10,scale:2}).notNull(),ableFeeAmount:(0,d._)("able_fee_amount",{precision:10,scale:2}).notNull(),stripeFeeAmount:(0,d._)("stripe_fee_amount",{precision:10,scale:2}).notNull(),amountNetToWorker:(0,d._)("amount_net_to_worker",{precision:10,scale:2}).notNull(),status:(0,m.kg)("status").default("PENDING").notNull(),stripePaymentIntentId:(0,l.yf)("stripe_payment_intent_id",{length:255}).unique(),stripeChargeId:(0,l.yf)("stripe_charge_id",{length:255}).unique(),stripeTransferIdToWorker:(0,l.yf)("stripe_transfer_id_to_worker",{length:255}),stripePayoutIdToWorker:(0,l.yf)("stripe_payout_id_to_worker",{length:255}),invoiceUrl:(0,n.Qq)("invoice_url"),isTesting:(0,s.zM)("is_testing").default(!1).notNull(),paymentMethodDetailsJson:(0,o.Fx)("payment_method_details_json"),paidAt:(0,u.vE)("paid_at",{mode:"date",withTimezone:!0}),refundedAt:(0,u.vE)("refunded_at",{mode:"date",withTimezone:!0}),refundReason:(0,n.Qq)("refund_reason"),internalNotes:(0,n.Qq)("internal_notes"),createdAt:(0,u.vE)("created_at",{mode:"date",withTimezone:!0}).default((0,_.ll)`CURRENT_TIMESTAMP`).notNull(),updatedAt:(0,u.vE)("updated_at",{mode:"date",withTimezone:!0}).default((0,_.ll)`CURRENT_TIMESTAMP`).notNull()}),T=(0,r.cJ)("mock_payments",{id:(0,a.uR)("id").primaryKey().default((0,_.ll)`gen_random_uuid()`),workerUserId:(0,a.uR)("worker_user_id").notNull().references(()=>c.Lh.id,{onDelete:"cascade"}),buyerUserId:(0,a.uR)("buyer_user_id").notNull().references(()=>c.Lh.id,{onDelete:"cascade"}),amount:(0,d._)("amount",{precision:10,scale:2}).notNull(),description:(0,n.Qq)("description"),scenario:(0,n.Qq)("scenario"),createdAt:(0,u.vE)("created_at",{mode:"date",withTimezone:!0}).default((0,_.ll)`CURRENT_TIMESTAMP`).notNull()}),N=(0,r.cJ)("discount_codes",{id:(0,a.uR)("id").primaryKey().default((0,_.ll)`gen_random_uuid()`),code:(0,l.yf)("code",{length:50}).notNull().unique(),discountAmount:(0,d._)("discount_amount",{precision:10,scale:2}),discountPercentage:(0,d._)("discount_percentage",{precision:5,scale:2}),type:(0,m.Lm)("type").notNull(),userId:(0,a.uR)("user_id").notNull().references(()=>c.Lh.id,{onDelete:"cascade"}),alreadyUsed:(0,s.zM)("already_used").default(!1).notNull(),createdAt:(0,u.vE)("created_at",{mode:"date",withTimezone:!0}).default((0,_.ll)`CURRENT_TIMESTAMP`).notNull(),updatedAt:(0,u.vE)("updated_at",{mode:"date",withTimezone:!0}).default((0,_.ll)`CURRENT_TIMESTAMP`).notNull()})},20259:(e,t,i)=>{"use strict";i.d(t,{S:()=>o});var r=i(59672),a=i(9594),d=i(54693),l=i(9253),n=i(42270),s=i(75383);let o=(0,r.cJ)("notification_preferences",{id:(0,a.uR)("id").primaryKey().default((0,n.ll)`gen_random_uuid()`),userId:(0,a.uR)("user_id").notNull().unique().references(()=>s.Lh.id,{onDelete:"cascade"}),emailGigUpdates:(0,d.zM)("email_gig_updates").default(!1).notNull(),emailPlatformAnnouncements:(0,d.zM)("email_platform_announcements").default(!1).notNull(),emailMarketing:(0,d.zM)("email_marketing").default(!1).notNull(),smsGigAlerts:(0,d.zM)("sms_gig_alerts").default(!1).notNull(),fcmUpdates:(0,d.zM)("fcm_updates").default(!0).notNull(),createdAt:(0,l.vE)("created_at",{mode:"date",withTimezone:!0}).default((0,n.ll)`CURRENT_TIMESTAMP`).notNull(),updatedAt:(0,l.vE)("updated_at",{mode:"date",withTimezone:!0}).default((0,n.ll)`CURRENT_TIMESTAMP`).notNull()})},29448:(e,t,i)=>{"use strict";i.d(t,{DW:()=>R,Ho:()=>E,jM:()=>N,kK:()=>T,v1:()=>g});var r=i(59672),a=i(50033),d=i(9594),l=i(79252),n=i(34509),s=i(9253),o=i(29334),u=i(63431),_=i(54693),m=i(37193),c=i(42270),f=i(75383);let g=(0,r.cJ)("admin_logs",{id:(0,a.vX)("id").primaryKey(),adminUserId:(0,d.uR)("admin_user_id").notNull().references(()=>f.Lh.id,{onDelete:"restrict"}),action:(0,l.yf)("action",{length:255}).notNull(),targetEntityType:(0,l.yf)("target_entity_type",{length:100}),targetEntityId:(0,l.yf)("target_entity_id",{length:255}),detailsJson:(0,n.Fx)("details_json"),ipAddress:(0,l.yf)("ip_address",{length:45}),timestamp:(0,s.vE)("timestamp",{mode:"date",withTimezone:!0}).default((0,c.ll)`CURRENT_TIMESTAMP`).notNull()}),T=(0,r.cJ)("ai_prompts",{id:(0,d.uR)("id").primaryKey().default((0,c.ll)`gen_random_uuid()`),promptKey:(0,l.yf)("prompt_key",{length:100}).unique().notNull(),promptText:(0,o.Qq)("prompt_text").notNull(),description:(0,o.Qq)("description"),version:(0,u.nd)("version").default(1).notNull(),isActive:(0,_.zM)("is_active").default(!0).notNull(),lastUpdatedByUserId:(0,d.uR)("last_updated_by_user_id").references(()=>f.Lh.id,{onDelete:"set null"}),createdAt:(0,s.vE)("created_at",{mode:"date",withTimezone:!0}).default((0,c.ll)`CURRENT_TIMESTAMP`).notNull(),updatedAt:(0,s.vE)("updated_at",{mode:"date",withTimezone:!0}).default((0,c.ll)`CURRENT_TIMESTAMP`).notNull()}),N=(0,r.cJ)("system_flags",{flag_key:(0,l.yf)("flag_key",{length:255}).notNull().unique(),flag_value:(0,n.Fx)("flag_value").notNull(),description:(0,o.Qq)("description"),createdAt:(0,s.vE)("created_at",{withTimezone:!0}).default((0,c.ll)`CURRENT_TIMESTAMP`).notNull(),updatedAt:(0,s.vE)("updated_at",{withTimezone:!0}).default((0,c.ll)`CURRENT_TIMESTAMP`).notNull()}),E=(0,r.cJ)("user_ai_usage",{id:(0,d.uR)("id").default((0,c.ll)`gen_random_uuid()`).notNull().primaryKey(),userId:(0,d.uR)("user_id").notNull().references(()=>f.Lh.id,{onDelete:"cascade"}),date:(0,m.p6)("date").notNull(),aiMessageCount:(0,u.nd)("ai_message_count").default(0).notNull(),lastInteractionTimestamp:(0,s.vE)("last_interaction_timestamp",{withTimezone:!0}),createdAt:(0,s.vE)("created_at",{withTimezone:!0}).default((0,c.ll)`CURRENT_TIMESTAMP`).notNull(),updatedAt:(0,s.vE)("updated_at",{withTimezone:!0}).default((0,c.ll)`CURRENT_TIMESTAMP`).notNull()}),R=(0,r.cJ)("escalated_issues",{id:(0,d.uR)("id").default((0,c.ll)`gen_random_uuid()`).notNull().primaryKey(),userId:(0,d.uR)("user_id").notNull().references(()=>f.Lh.id,{onDelete:"cascade"}),firestoreMessageId:(0,l.yf)("firestore_message_id",{length:255}),gigId:(0,l.yf)("gig_id",{length:255}),issueType:(0,l.yf)("issue_type",{length:100}),description:(0,o.Qq)("description"),status:(0,l.yf)("status",{length:50}).default("OPEN").notNull(),adminUserId:(0,d.uR)("admin_user_id").references(()=>f.Lh.id,{onDelete:"set null"}),resolutionNotes:(0,o.Qq)("resolution_notes"),createdAt:(0,s.vE)("created_at",{withTimezone:!0}).default((0,c.ll)`CURRENT_TIMESTAMP`).notNull(),updatedAt:(0,s.vE)("updated_at",{withTimezone:!0}).default((0,c.ll)`CURRENT_TIMESTAMP`).notNull()})},45584:(e,t,i)=>{"use strict";i.d(t,{g:()=>m});var r=i(59672),a=i(9594),d=i(29334),l=i(92248),n=i(79252),s=i(9253),o=i(89697),u=i(42270),_=i(1785);let m=(0,r.cJ)("vector_embeddings",{id:(0,a.uR)("id").primaryKey().default((0,u.ll)`gen_random_uuid()`),entityType:(0,_.E1)("entity_type").notNull(),entityPostgresId:(0,a.uR)("entity_postgres_id"),entityFirestoreId:(0,d.Qq)("entity_firestore_id"),embedding:(0,l.i1)("embedding",{dimensions:1536}).notNull(),sourceTextHash:(0,n.yf)("source_text_hash",{length:64}),embeddingModelUsed:(0,n.yf)("embedding_model_used",{length:100}).default("text-embedding-ada-002"),createdAt:(0,s.vE)("created_at",{mode:"date",withTimezone:!0}).default((0,u.ll)`CURRENT_TIMESTAMP`).notNull(),updatedAt:(0,s.vE)("updated_at",{mode:"date",withTimezone:!0}).default((0,u.ll)`CURRENT_TIMESTAMP`).notNull()},e=>[(0,o.Pe)("embedding_hnsw_cosine_idx").using("hnsw",e.embedding.op("vector_cosine_ops"))])},50837:(e,t,i)=>{"use strict";i.d(t,{L1:()=>N,dK:()=>R,fz:()=>p,rr:()=>E,tF:()=>y});var r=i(59672),a=i(9594),d=i(79252),l=i(63431),n=i(72170),s=i(29334),o=i(34509),u=i(9253),_=i(54693),m=i(89697),c=i(42270),f=i(1785),g=i(75383),T=i(17352);let N=(0,r.cJ)("skills",{id:(0,a.uR)("id").primaryKey().default((0,c.ll)`gen_random_uuid()`),workerProfileId:(0,a.uR)("worker_profile_id").notNull().references(()=>g._1.id,{onDelete:"cascade"}),name:(0,d.yf)("name",{length:100}).notNull(),experienceMonths:(0,l.nd)("experience_months").notNull(),experienceYears:(0,n._)("experience_years",{precision:4,scale:1}).$type().notNull(),agreedRate:(0,n._)("agreed_rate",{precision:10,scale:2}).notNull(),skillVideoUrl:(0,s.Qq)("skill_video_url"),adminTags:(0,s.Qq)("admin_tags").array(),ableGigs:(0,l.nd)("able_gigs"),images:(0,o.Fx)("images").$type().default((0,c.ll)`'[]'::jsonb`),createdAt:(0,u.vE)("created_at",{mode:"date",withTimezone:!0}).default((0,c.ll)`CURRENT_TIMESTAMP`).notNull(),updatedAt:(0,u.vE)("updated_at",{mode:"date",withTimezone:!0}).default((0,c.ll)`CURRENT_TIMESTAMP`).notNull()}),E=(0,r.cJ)("qualifications",{id:(0,a.uR)("id").primaryKey().default((0,c.ll)`gen_random_uuid()`),workerProfileId:(0,a.uR)("worker_profile_id").notNull().references(()=>g._1.id,{onDelete:"cascade"}),title:(0,d.yf)("title",{length:255}).notNull(),institution:(0,d.yf)("institution",{length:255}),yearAchieved:(0,l.nd)("year_achieved"),description:(0,s.Qq)("description"),documentUrl:(0,s.Qq)("document_url"),isVerifiedByAdmin:(0,_.zM)("is_verified_by_admin").default(!1),createdAt:(0,u.vE)("created_at",{mode:"date",withTimezone:!0}).default((0,c.ll)`CURRENT_TIMESTAMP`).notNull(),updatedAt:(0,u.vE)("updated_at",{mode:"date",withTimezone:!0}).default((0,c.ll)`CURRENT_TIMESTAMP`).notNull()}),R=(0,r.cJ)("equipment",{id:(0,a.uR)("id").primaryKey().default((0,c.ll)`gen_random_uuid()`),workerProfileId:(0,a.uR)("worker_profile_id").notNull().references(()=>g._1.id,{onDelete:"cascade"}),name:(0,d.yf)("name",{length:255}).notNull(),description:(0,s.Qq)("description"),isVerifiedByAdmin:(0,_.zM)("is_verified_by_admin").default(!1),createdAt:(0,u.vE)("created_at",{mode:"date",withTimezone:!0}).default((0,c.ll)`CURRENT_TIMESTAMP`).notNull(),updatedAt:(0,u.vE)("updated_at",{mode:"date",withTimezone:!0}).default((0,c.ll)`CURRENT_TIMESTAMP`).notNull()}),p=(0,r.cJ)("gigs",{id:(0,a.uR)("id").primaryKey().default((0,c.ll)`gen_random_uuid()`),buyerUserId:(0,a.uR)("buyer_user_id").notNull().references(()=>g.Lh.id,{onDelete:"restrict"}),workerUserId:(0,a.uR)("worker_user_id").references(()=>g.Lh.id,{onDelete:"restrict"}),titleInternal:(0,d.yf)("title_internal",{length:255}).notNull(),fullDescription:(0,s.Qq)("full_description"),exactLocation:(0,s.Qq)("exact_location"),addressJson:(0,o.Fx)("address_json"),startTime:(0,u.vE)("start_time",{withTimezone:!0}).notNull(),endTime:(0,u.vE)("end_time",{withTimezone:!0}).notNull(),agreedRate:(0,n._)("agreed_rate",{precision:10,scale:2}).notNull(),estimatedHours:(0,n._)("estimated_hours",{precision:5,scale:2}),totalAgreedPrice:(0,n._)("total_agreed_price",{precision:10,scale:2}),finalRate:(0,n._)("final_rate",{precision:10,scale:2}),finalHours:(0,n._)("final_hours",{precision:5,scale:2}),finalAgreedPrice:(0,n._)("final_agreed_price",{precision:10,scale:2}),statusInternal:(0,f.dg)("status_internal").default("PENDING_WORKER_ACCEPTANCE").notNull(),ableFeePercent:(0,n._)("able_fee_percent",{precision:5,scale:4}),stripeFeePercent:(0,n._)("stripe_fee_percent",{precision:5,scale:4}),stripeFeeFixed:(0,n._)("stripe_fee_fixed",{precision:10,scale:2}),promoCodeApplied:(0,d.yf)("promo_code_applied",{length:50}),moderationStatus:(0,f.IS)("moderation_status").default("PENDING").notNull(),cancellationReason:(0,s.Qq)("cancellation_reason"),cancellationParty:(0,f.BX)("cancellation_party"),notesForWorker:(0,s.Qq)("notes_for_worker"),notesForBuyer:(0,s.Qq)("notes_for_buyer"),adjustmentNotes:(0,s.Qq)("adjustment_notes"),adjustedAt:(0,u.vE)("adjusted_at",{mode:"date",withTimezone:!0}),createdAt:(0,u.vE)("created_at",{mode:"date",withTimezone:!0}).default((0,c.ll)`CURRENT_TIMESTAMP`).notNull(),updatedAt:(0,u.vE)("updated_at",{mode:"date",withTimezone:!0}).default((0,c.ll)`CURRENT_TIMESTAMP`).notNull(),discountCodeId:(0,a.uR)("discount_code_id").references(()=>T.uu.id)}),y=(0,r.cJ)("gig_skills_required",{id:(0,a.uR)("id").primaryKey().default((0,c.ll)`gen_random_uuid()`),gigId:(0,a.uR)("gig_id").notNull().references(()=>p.id,{onDelete:"cascade"}),skillId:(0,a.uR)("skill_id").references(()=>N.id,{onDelete:"no action"}),skillName:(0,d.yf)("skill_name",{length:100}).notNull(),isRequired:(0,_.zM)("is_required").default(!0),notes:(0,s.Qq)("notes")},e=>[(0,m.GL)("gig_id_skill_name_unique_idx").on(e.gigId,e.skillName)])},75383:(e,t,i)=>{"use strict";i.d(t,{Gx:()=>g,Ju:()=>T,Lh:()=>c,_1:()=>f,f2:()=>N});var r=i(59672),a=i(9594),d=i(79252),l=i(54693),n=i(29334),s=i(9253),o=i(72170),u=i(34509),_=i(42270),m=i(1785);let c=(0,r.cJ)("users",{id:(0,a.uR)("id").primaryKey().default((0,_.ll)`gen_random_uuid()`),firebaseUid:(0,d.yf)("firebase_uid",{length:128}).unique().notNull(),email:(0,d.yf)("email",{length:255}).unique().notNull(),fullName:(0,d.yf)("full_name",{length:255}).notNull(),phone:(0,d.yf)("phone",{length:30}),appRole:(0,m.Q1)("app_role").default("USER").notNull(),isGigWorker:(0,l.zM)("is_gig_worker").default(!1).notNull(),isBuyer:(0,l.zM)("is_buyer").default(!1).notNull(),lastRoleUsed:(0,m.DA)("last_role_used"),lastViewVisitedBuyer:(0,n.Qq)("last_view_visited_buyer"),lastViewVisitedWorker:(0,n.Qq)("last_view_visited_worker"),stripeCustomerId:(0,d.yf)("stripe_customer_id",{length:255}).unique(),stripeConnectAccountId:(0,d.yf)("stripe_connect_account_id",{length:255}).unique(),canReceivePayouts:(0,l.zM)("can_receive_payouts").default(!1).notNull(),stripeAccountStatus:(0,m.Ud)("stripe_account_status"),rtwStatus:(0,m.Am)("rtw_status").default("NOT_SUBMITTED"),rtwDocumentUrl:(0,n.Qq)("rtw_document_url"),kycStatus:(0,m.Am)("kyc_status").default("NOT_SUBMITTED"),kycDocumentUrl:(0,n.Qq)("kyc_document_url"),isBanned:(0,l.zM)("is_banned").default(!1).notNull(),isDisabled:(0,l.zM)("is_disabled").default(!1).notNull(),profileVisibility:(0,l.zM)("profile_visibility").default(!1).notNull(),createdAt:(0,s.vE)("created_at",{mode:"date",withTimezone:!0}).default((0,_.ll)`CURRENT_TIMESTAMP`).notNull(),updatedAt:(0,s.vE)("updated_at",{mode:"date",withTimezone:!0}).default((0,_.ll)`CURRENT_TIMESTAMP`).notNull()}),f=(0,r.cJ)("gig_worker_profiles",{id:(0,a.uR)("id").primaryKey().default((0,_.ll)`gen_random_uuid()`),userId:(0,a.uR)("user_id").notNull().references(()=>c.id,{onDelete:"cascade"}).unique(),fullBio:(0,n.Qq)("full_bio"),location:(0,n.Qq)("location"),address:(0,n.Qq)("address"),latitude:(0,o._)("latitude",{precision:10,scale:7}),longitude:(0,o._)("longitude",{precision:10,scale:7}),hashtags:(0,u.Fx)("hash_tags"),privateNotes:(0,n.Qq)("private_notes"),responseRateInternal:(0,o._)("response_rate_internal",{precision:5,scale:2}),availabilityJson:(0,u.Fx)("availability_json"),semanticProfileJson:(0,u.Fx)("semantic_profile_json"),videoUrl:(0,n.Qq)("video_url"),createdAt:(0,s.vE)("created_at",{mode:"date",withTimezone:!0}).default((0,_.ll)`CURRENT_TIMESTAMP`).notNull(),updatedAt:(0,s.vE)("updated_at",{mode:"date",withTimezone:!0}).default((0,_.ll)`CURRENT_TIMESTAMP`).notNull()}),g=(0,r.cJ)("buyer_profiles",{id:(0,a.uR)("id").primaryKey().default((0,_.ll)`gen_random_uuid()`),userId:(0,a.uR)("user_id").notNull().references(()=>c.id,{onDelete:"cascade"}).unique(),fullCompanyName:(0,d.yf)("full_company_name",{length:255}),vatNumber:(0,d.yf)("vat_number",{length:50}),businessRegistrationNumber:(0,d.yf)("business_registration_number",{length:100}),responseRateInternal:(0,o.sH)("response_rate_internal",{precision:5,scale:2}),billingAddressJson:(0,u.Fx)("billing_address_json"),videoUrl:(0,n.Qq)("video_url"),companyRole:(0,d.yf)("company_role",{length:100}),createdAt:(0,s.vE)("created_at",{mode:"date",withTimezone:!0}).default((0,_.ll)`CURRENT_TIMESTAMP`).notNull(),updatedAt:(0,s.vE)("updated_at",{mode:"date",withTimezone:!0}).default((0,_.ll)`CURRENT_TIMESTAMP`).notNull()}),T=(0,r.cJ)("team_members",{id:(0,a.uR)("id").primaryKey().default((0,_.ll)`gen_random_uuid()`),buyerProfileId:(0,a.uR)("buyer_profile_id").notNull().references(()=>g.id,{onDelete:"cascade"}),memberUserId:(0,a.uR)("member_user_id").references(()=>c.id,{onDelete:"set null"}),name:(0,d.yf)("name",{length:255}),email:(0,d.yf)("email",{length:255}),roleInTeam:(0,d.yf)("role_in_team",{length:100}),permissionsJson:(0,u.Fx)("permissions_json"),createdAt:(0,s.vE)("created_at",{mode:"date",withTimezone:!0}).default((0,_.ll)`CURRENT_TIMESTAMP`).notNull(),updatedAt:(0,s.vE)("updated_at",{mode:"date",withTimezone:!0}).default((0,_.ll)`CURRENT_TIMESTAMP`).notNull()}),N=(0,r.cJ)("password_recovery_requests",{id:(0,a.uR)("id").primaryKey().default((0,_.ll)`gen_random_uuid()`),userId:(0,a.uR)("user_id").notNull().references(()=>c.id,{onDelete:"cascade"}),tokenHash:(0,d.yf)("token_hash",{length:255}).unique().notNull(),expiresAt:(0,s.vE)("expires_at",{withTimezone:!0}).notNull(),isUsed:(0,l.zM)("is_used").default(!1).notNull(),createdAt:(0,s.vE)("created_at",{mode:"date",withTimezone:!0}).default((0,_.ll)`CURRENT_TIMESTAMP`).notNull()})},78335:()=>{},85534:(e,t,i)=>{"use strict";i.d(t,{BM:()=>p,Bj:()=>R,TD:()=>T,UG:()=>N,kk:()=>E});var r=i(59672),a=i(9594),d=i(79252),l=i(29334),n=i(54693),s=i(9253),o=i(63431),u=i(34509),_=i(89697),m=i(42270),c=i(1785),f=i(75383),g=i(50837);let T=(0,r.cJ)("recommendations",{id:(0,a.uR)("id").primaryKey().default((0,m.ll)`gen_random_uuid()`),workerUserId:(0,a.uR)("worker_user_id").notNull().references(()=>f.Lh.id,{onDelete:"cascade"}),recommendationCode:(0,d.yf)("recommendation_code",{length:50}).unique().notNull(),recommendationText:(0,l.Qq)("recommendation_text"),relationship:(0,l.Qq)("relationship"),recommenderName:(0,d.yf)("recommender_name",{length:100}),recommenderEmail:(0,d.yf)("recommender_email",{length:255}),isVerified:(0,n.zM)("is_verified").default(!1),moderationStatus:(0,c.IS)("moderation_status").default("PENDING").notNull(),createdAt:(0,s.vE)("created_at",{mode:"date",withTimezone:!0}).default((0,m.ll)`CURRENT_TIMESTAMP`).notNull(),updatedAt:(0,s.vE)("updated_at",{mode:"date",withTimezone:!0}).default((0,m.ll)`CURRENT_TIMESTAMP`).notNull()}),N=(0,r.cJ)("reviews",{id:(0,a.uR)("id").primaryKey().default((0,m.ll)`gen_random_uuid()`),gigId:(0,a.uR)("gig_id").references(()=>g.fz.id,{onDelete:"cascade"}),authorUserId:(0,a.uR)("author_user_id").references(()=>f.Lh.id,{onDelete:"cascade"}),targetUserId:(0,a.uR)("target_user_id").notNull().references(()=>f.Lh.id,{onDelete:"cascade"}),relationship:(0,l.Qq)("relationship"),recommenderName:(0,l.Qq)("recommender_name"),recommenderEmail:(0,l.Qq)("recommender_email"),rating:(0,o.nd)("rating").notNull(),comment:(0,l.Qq)("comment"),wouldWorkAgain:(0,n.zM)("would_work_again"),awardedBadgeNamesToTargetJson:(0,u.Fx)("awarded_badge_names_to_target_json"),isPublic:(0,n.zM)("is_public").default(!0).notNull(),type:(0,c.CO)("type").default("INTERNAL_PLATFORM").notNull(),moderationStatus:(0,c.IS)("moderation_status").default("PENDING").notNull(),targetRole:(0,c.DA)("target_role"),skillId:(0,a.uR)("skill_id").references(()=>g.L1.id,{onDelete:"cascade"}),createdAt:(0,s.vE)("created_at",{mode:"date",withTimezone:!0}).default((0,m.ll)`CURRENT_TIMESTAMP`).notNull(),updatedAt:(0,s.vE)("updated_at",{mode:"date",withTimezone:!0}).default((0,m.ll)`CURRENT_TIMESTAMP`).notNull()},e=>[(0,_.GL)("author_target_gig_unique_idx").on(e.authorUserId,e.targetUserId,e.gigId)]),E=(0,r.cJ)("badge_definitions",{id:(0,a.uR)("id").primaryKey().default((0,m.ll)`gen_random_uuid()`),name:(0,d.yf)("name",{length:100}).unique().notNull(),description:(0,l.Qq)("description").notNull(),iconUrlOrLucideName:(0,d.yf)("icon_url_or_lucide_name",{length:255}),type:(0,c.$R)("type").notNull(),criteriaJson:(0,u.Fx)("criteria_json"),createdAt:(0,s.vE)("created_at",{mode:"date",withTimezone:!0}).default((0,m.ll)`CURRENT_TIMESTAMP`).notNull(),updatedAt:(0,s.vE)("updated_at",{mode:"date",withTimezone:!0}).default((0,m.ll)`CURRENT_TIMESTAMP`).notNull()}),R=(0,r.cJ)("user_badges_link",{id:(0,a.uR)("id").primaryKey().default((0,m.ll)`gen_random_uuid()`),userId:(0,a.uR)("user_id").notNull().references(()=>f.Lh.id,{onDelete:"cascade"}),badgeId:(0,a.uR)("badge_id").notNull().references(()=>E.id,{onDelete:"cascade"}),awardedAt:(0,s.vE)("awarded_at",{mode:"date",withTimezone:!0}).default((0,m.ll)`CURRENT_TIMESTAMP`).notNull(),awardedBySystem:(0,n.zM)("awarded_by_system").default(!1),awardedByUserId:(0,a.uR)("awarded_by_user_id").references(()=>f.Lh.id,{onDelete:"set null"}),gigId:(0,a.uR)("gig_id").references(()=>g.fz.id,{onDelete:"set null"}),notes:(0,l.Qq)("notes")},e=>[(0,_.GL)("user_badge_unique_idx").on(e.userId,e.badgeId)]),p=(0,r.cJ)("chat_messages",{id:(0,a.uR)("id").primaryKey().default((0,m.ll)`gen_random_uuid()`),gigId:(0,a.uR)("gig_id").notNull().references(()=>g.fz.id,{onDelete:"cascade"}),senderUserId:(0,a.uR)("sender_user_id").notNull().references(()=>f.Lh.id,{onDelete:"cascade"}),text:(0,l.Qq)("text").notNull(),imageUrl:(0,l.Qq)("image_url"),isReadByReceiver:(0,n.zM)("is_read_by_receiver").default(!1).notNull(),moderationStatus:(0,c.IS)("moderation_status").default("PENDING").notNull(),sentAt:(0,s.vE)("sent_at",{mode:"date",withTimezone:!0}).default((0,m.ll)`CURRENT_TIMESTAMP`).notNull()})},88612:(e,t,i)=>{"use strict";i.r(t),i.d(t,{AdminLogsTable:()=>s.v1,AiPromptsTable:()=>s.kK,BadgeDefinitionsTable:()=>l.kk,BuyerProfilesTable:()=>a.Gx,ChatMessagesTable:()=>l.BM,DiscountCodesTable:()=>n.uu,EquipmentTable:()=>d.dK,GigSkillsRequiredTable:()=>d.tF,GigWorkerProfilesTable:()=>a._1,GigsTable:()=>d.fz,MockPaymentsTable:()=>n.gB,NotificationPreferencesTable:()=>u.S,PasswordRecoveryRequestsTable:()=>a.f2,PaymentsTable:()=>n.G9,QualificationsTable:()=>d.rr,RecommendationsTable:()=>l.TD,ReviewsTable:()=>l.UG,SkillsTable:()=>d.L1,TeamMembersTable:()=>a.Ju,UserBadgesLinkTable:()=>l.Bj,UsersTable:()=>a.Lh,VectorEmbeddingsTable:()=>o.g,WorkerAvailabilityTable:()=>p,activeRoleContextEnum:()=>r.DA,badgeTypeEnum:()=>r.$R,cancellationPartyEnum:()=>r.BX,discountTypeEnum:()=>r.Lm,escalatedIssues:()=>s.DW,gigStatusEnum:()=>r.dg,moderationStatusEnum:()=>r.IS,paymentStatusEnum:()=>r.kg,reviewTypeEnum:()=>r.CO,rtwKycStatusEnum:()=>r.Am,stripeAccountStatusEnum:()=>r.Ud,systemFlags:()=>s.jM,userAiUsage:()=>s.Ho,userAppRoleEnum:()=>r.Q1,vectorEntityTypeEnum:()=>r.E1});var r=i(1785),a=i(75383),d=i(50837),l=i(85534),n=i(17352),s=i(29448),o=i(45584),u=i(20259),_=i(59672),m=i(9594),c=i(34509),f=i(79252),g=i(63431),T=i(9253),N=i(29334),E=i(89697),R=i(42270);let p=(0,_.cJ)("worker_availability",{id:(0,m.uR)("id").primaryKey().default((0,R.ll)`gen_random_uuid()`),userId:(0,m.uR)("user_id").notNull().references(()=>a.Lh.id,{onDelete:"cascade"}),days:(0,c.Fx)("days"),frequency:(0,f.yf)("frequency",{length:50}),startDate:(0,f.yf)("start_date",{length:50}),startTimeStr:(0,f.yf)("start_time_str",{length:10}),endTimeStr:(0,f.yf)("end_time_str",{length:10}),ends:(0,f.yf)("ends",{length:50}),occurrences:(0,g.nd)("occurrences"),endDate:(0,f.yf)("end_date",{length:50}),startTime:(0,T.vE)("start_time",{withTimezone:!0}),endTime:(0,T.vE)("end_time",{withTimezone:!0}),notes:(0,N.Qq)("notes"),createdAt:(0,T.vE)("created_at",{mode:"date",withTimezone:!0}).default((0,R.ll)`CURRENT_TIMESTAMP`).notNull(),updatedAt:(0,T.vE)("updated_at",{mode:"date",withTimezone:!0}).default((0,R.ll)`CURRENT_TIMESTAMP`).notNull()},e=>({userTimeIndex:(0,E.Pe)("worker_availability_user_time_idx").on(e.userId,e.startTime,e.endTime),timeRangeIndex:(0,E.Pe)("worker_availability_time_range_idx").on(e.startTime,e.endTime),userPatternIndex:(0,E.Pe)("worker_availability_user_pattern_idx").on(e.userId,e.frequency,e.startDate)}))},96149:(e,t,i)=>{"use strict";i.a(e,async(e,r)=>{try{i.d(t,{db:()=>s});var a=i(72094),d=i(88612),l=i(14718),n=e([a]);a=(n.then?(await n)():n)[0];let s=(0,a.fd)({connection:{connectionString:process.env.NILEDB_URL,ssl:!0},schema:{...d,...l}});r()}catch(e){r(e)}})},96487:()=>{}};