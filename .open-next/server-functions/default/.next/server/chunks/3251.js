exports.id=3251,exports.ids=[3251],exports.modules={1610:(e,r,t)=>{"use strict";let a;t.d(r,{xv:()=>a,yK:()=>l});var i=t(67989),s=t(50227),o=t(75535),n=t(70146),c=t(5540);t(88906),a=(0,i.Dk)().length?(0,i.Sx)():(0,i.Wp)({apiKey:"AIzaSyBF7DIyylS8ByVbXxdmnmLkKpLyXSdEbQA",authDomain:"ableai-mvp.firebaseapp.com",projectId:"ableai-mvp",storageBucket:"ableai-mvp.firebasestorage.app",messagingSenderId:"697522507372",appId:"1:697522507372:web:7ce039897f0e597d4d9249"});let l=(0,s.xI)(a);(0,o.aU)(a),(0,n.c7)(a),(0,c.lS)(a,{backend:new c.C8})},6490:(e,r,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.d(r,{E8:()=>_,RH:()=>R,SH:()=>w,V0:()=>g,fk:()=>h,sK:()=>m});var i=t(91199);t(42087);var s=t(30298),o=t(60444),n=t(86745),c=t(19679),l=t(47695),d=t(18839),f=t(55511),u=t.n(f),b=t(33331),p=e([s,l]);[s,l]=p.then?(await p)():p;let g=async e=>{try{if(!e)throw"Token is required";let{data:r,uid:t}=await (0,l.xA)(e);if(!r)throw c.O.UNAUTHORIZED;let a=await s.db.query.UsersTable.findFirst({where:(0,d.eq)(o.UsersTable.firebaseUid,t),with:{notificationPreferences:!0}});return{success:!0,data:a}}catch(e){return console.error("Error retrieving user profile",e),{success:!1,error:e}}},_=async(e,r)=>{try{if(!r)throw"Token is required";let{data:t,uid:a}=await (0,l.xA)(r);if(!t)throw c.O.UNAUTHORIZED;let i=await s.db.update(o.UsersTable).set(e).where((0,d.eq)(o.UsersTable.firebaseUid,a)).returning();return{success:!0,data:i[0]||null}}catch(e){return console.error("Error updating user profile",e),{success:!1,error:e}}},h=async(e,r)=>{try{if(!r)throw"Token is required";let{data:t,uid:a}=await (0,l.xA)(r);if(!t)throw c.O.UNAUTHORIZED;let i=await s.db.update(o.UsersTable).set(e).where((0,d.eq)(o.UsersTable.firebaseUid,a)).returning();return{success:!0,data:i[0]?.profileVisibility}}catch(r){return console.error("Error updating profile visibility",r),{success:!1,error:r,data:!e.profileVisibility}}},R=async(e,r)=>{try{if(!r)throw"Token is required";let{data:t,uid:a}=await (0,l.xA)(r);if(!t)throw c.O.UNAUTHORIZED;let i=await s.db.query.UsersTable.findFirst({where:(0,d.eq)(o.UsersTable.firebaseUid,a),with:{notificationPreferences:!0}});if(!i)throw"Error retrieving user profile";let n=await s.db.update(o.NotificationPreferencesTable).set({emailGigUpdates:e.emailProferences}).where((0,d.eq)(o.NotificationPreferencesTable.userId,i.id)).returning();if(n[0]?.emailGigUpdates===e.emailProferences)return{success:!0,data:n[0]?.emailGigUpdates};throw"Error updating notification email preferences"}catch(r){return console.error("Error updating email preferences",r),{success:!1,error:r,data:!e.emailProferences}}},w=async(e,r)=>{try{if(!r)throw"Token is required";let{data:t,uid:a}=await (0,l.xA)(r);if(!t)throw c.O.UNAUTHORIZED;let i=await s.db.query.UsersTable.findFirst({where:(0,d.eq)(o.UsersTable.firebaseUid,a),with:{notificationPreferences:!0}});if(!i)throw"Error retrieving user profile";let n=await s.db.update(o.NotificationPreferencesTable).set({smsGigAlerts:e.smsGigAlerts}).where((0,d.eq)(o.NotificationPreferencesTable.userId,i.id)).returning();return{success:!0,data:n[0]?.smsGigAlerts}}catch(r){return console.error("Error updating SMS preferences",r),{success:!1,error:r,data:e.smsGigAlerts}}},m=async({firebaseUid:e})=>{try{let r=await s.db.select({code:n.uu.code,userId:o.UsersTable.id}).from(o.UsersTable).leftJoin(n.uu,(0,d.eq)(n.uu.userId,o.UsersTable.id)).where((0,d.eq)(o.UsersTable.firebaseUid,e));if(!r.length)throw Error("User not found for firebaseUid "+e);if(r[0].code)return{code:r[0].code};let t="REF-"+u().randomBytes(3).toString("hex").toUpperCase(),[a]=await s.db.insert(n.uu).values({code:t,type:"USER_REFERRAL",userId:r[0].userId,discountAmount:"5.00",alreadyUsed:!1}).returning({code:n.uu.code});return a}catch(e){return console.error("Error in getUserReferralCodeAction:",e),null}};(0,b.D)([g,_,h,R,w,m]),(0,i.A)(g,"7f9b448d512c6180059965a8ae30b38592af924acf",null),(0,i.A)(_,"7f8ca9fdff883a3c4676db6e04811fb45c2e8b4a5a",null),(0,i.A)(h,"7fdd3361df32ca0ce47c1fae11a37f969b2dc3f187",null),(0,i.A)(R,"7f0eb08353f179bb33f676482e234afde0687b7d2c",null),(0,i.A)(w,"7f70361382587ca02f49f003a74e18ab229f439f9a",null),(0,i.A)(m,"7febd407effd0bf8897393b517c555c17a8bb2313b",null),a()}catch(e){a(e)}})},19523:e=>{e.exports={settingsButton:"SettingsButton_settingsButton__QJQM3"}},24885:(e,r,t)=>{"use strict";t.d(r,{A:()=>u});var a=t(60687),i=t(43210),s=t.n(i),o=t(16189),n=t(52581),c=t(89830),l=t.n(c),d=t(36125),f=t(21295);let u=s().memo(({lastViewVisited:e})=>{let r=(0,o.useRouter)(),t=(0,d.K)(),{user:i}=(0,f.A)(),s=i?.claims?.role==="GIG_WORKER"||i?.claims?.role==="QA",c="BUYER"===t?"BUYER":s?"GIG_WORKER":"BUYER",u=async t=>{if(t!==c||e)try{if("GIG_WORKER"===t&&!s){n.oR.error("You cannot switch to worker mode, please complete onboarding first."),r.push(`/user/${i?.uid}/worker/onboarding-ai`);return}let a=`/user/${i?.uid}/${"GIG_WORKER"===t?"worker":"buyer"}`;await (0,d.C)(t),r.push(e||a)}catch(e){console.error("Failed to switch role:",e),n.oR.error("Failed to switch roles. Please try again.")}};return(0,a.jsxs)("div",{className:l().roleToggleContainer,children:[(0,a.jsx)("button",{type:"button",className:"GIG_WORKER"===c?l().activeRole:l().inactiveRole,disabled:"GIG_WORKER"===c,onClick:()=>u("GIG_WORKER"),"aria-pressed":"GIG_WORKER"===c,children:"GIGEE"}),(0,a.jsx)("button",{type:"button",className:"BUYER"===c?l().activeRole:l().inactiveRole,disabled:"BUYER"===c,onClick:()=>u("BUYER"),"aria-pressed":"BUYER"===c,children:"BUYER"})]})})},27189:(e,r,t)=>{"use strict";t.d(r,{q:()=>i});var a=t(6475);let i=(0,a.createServerReference)("400cd1fa767ef5281508e93e3ca1d7a0d11ad8371f",a.callServer,void 0,a.findSourceMapURL,"getAllNotificationsAction")},31403:(e,r,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.r(r),t.d(r,{"400cd1fa767ef5281508e93e3ca1d7a0d11ad8371f":()=>i.qM,"404660310a5e0f58f816c762a9f12b9b33702d2493":()=>i.OH,"40bcfd414a2446406921fe5bddeb7f04b82b554661":()=>i.Rz,"60976633aa90a3960f31dd64f4fd8496ccbdb52456":()=>i.a6,"60e7f34a33097c37a8e1219f48e58834e6fa037656":()=>i.r2,"7f0eb08353f179bb33f676482e234afde0687b7d2c":()=>s.RH,"7f70361382587ca02f49f003a74e18ab229f439f9a":()=>s.SH,"7f8ca9fdff883a3c4676db6e04811fb45c2e8b4a5a":()=>s.E8,"7f9b448d512c6180059965a8ae30b38592af924acf":()=>s.V0,"7fad076ff87a53fb2dc1878d8dc87b650c1a1b2caa":()=>i.gL,"7fdd3361df32ca0ce47c1fae11a37f969b2dc3f187":()=>s.fk,"7febd407effd0bf8897393b517c555c17a8bb2313b":()=>s.sK});var i=t(29034),s=t(6490),o=e([i,s]);[i,s]=o.then?(await o)():o,a()}catch(e){a(e)}})},44526:(e,r,t)=>{"use strict";t.d(r,{A:()=>u});var a=t(60687),i=t(43210),s=t(57781),o=t.n(s),n=t(41862);let c=(0,t(62688).A)("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);var l=t(1610),d=t(6475);let f=(0,d.createServerReference)("7febd407effd0bf8897393b517c555c17a8bb2313b",d.callServer,void 0,d.findSourceMapURL,"getUserReferralCodeAction"),u=({role:e})=>{let[r,t]=(0,i.useState)(""),[s,d]=(0,i.useState)(!1),[u,b]=(0,i.useState)(!1),p=(0,i.useRef)(null);(0,i.useEffect)(()=>()=>{p.current&&clearTimeout(p.current)},[]);let g=e=>navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(e):(_(e),Promise.resolve()),_=e=>{let r=document.createElement("input");r.value=e,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r)},h=async()=>{if(u)return;p.current&&clearTimeout(p.current),b(!0);let e=l.yK.currentUser;if(!e){t("Please log in to get your link"),d(!0),p.current=setTimeout(()=>d(!1),3e3),b(!1);return}try{let r=await f({firebaseUid:e.uid});if(!r||!r.code)throw Error("Discount code not found");let a=`${window.location.origin}/signin?code=${r.code}`;await g(a),t(`Referral link ready with discount code ${r.code}`),d(!0)}catch(e){console.error("Failed to copy referral link:",e),t("Could not get link. Try again."),d(!0)}finally{b(!1),p.current=setTimeout(()=>{d(!1)},3e3)}};return(0,a.jsxs)("button",{className:`${o().banner} ${o().button} ${"BUYER"===e?o().buyer:""} ${u?o().loading:""}`,onClick:h,disabled:u,"aria-describedby":"referral-tooltip",children:[(0,a.jsx)("div",{className:o().iconWrapper,children:u?(0,a.jsx)(n.A,{size:24,className:o().spinner}):(0,a.jsx)(c,{size:24})}),(0,a.jsx)("div",{className:o().textWrapper,children:(0,a.jsx)("h4",{className:o().title,children:"Refer a business and earn \xa35!"})}),(0,a.jsx)("span",{id:"referral-tooltip",role:"tooltip",className:`${o().tooltip} ${s?o().show:""}`,children:r})]})}},51442:(e,r,t)=>{"use strict";t.d(r,{A:()=>c});var a=t(60687);t(43210);var i=t(16189),s=t(19523),o=t.n(s),n=t(30474);let c=()=>{let e=(0,i.useRouter)();return(0,a.jsx)("button",{onClick:()=>{e.push("settings")},className:o().settingsButton,"aria-label":"Settings",children:(0,a.jsx)(n.default,{src:"/images/settings.svg",alt:"Settings",width:35,height:35})})}},57781:e=>{e.exports={banner:"ReferralBanner_banner___J_Yw",iconWrapper:"ReferralBanner_iconWrapper__Ry8Qm",title:"ReferralBanner_title__3B1P5",description:"ReferralBanner_description__dBgfd",button:"ReferralBanner_button__T5AfG",tooltip:"ReferralBanner_tooltip__wWCmf",show:"ReferralBanner_show__KfyAI",loading:"ReferralBanner_loading__F_el9",spinner:"ReferralBanner_spinner__DW9fN",spin:"ReferralBanner_spin__mNTpU"}},64455:e=>{e.exports={grid:"IconGrid_grid__ldRKk",card:"IconGrid_card__E9oa2",iconWrapper:"IconGrid_iconWrapper__uwa1q",label:"IconGrid_label__rBApp"}},65456:(e,r,t)=>{"use strict";t.d(r,{A:()=>o});var a=t(60687),i=t(89521),s=t.n(i);let o=({customClass:e,customStyle:r})=>(0,a.jsx)("div",{className:e||s().loadingContainer,style:r,children:(0,a.jsx)("div",{className:s().loader})})},81127:(e,r,t)=>{"use strict";t.d(r,{R:()=>o,v:()=>s});let a="notifications-db",i="counters";async function s(){return new Promise((e,r)=>{let t=indexedDB.open(a,5);t.onerror=()=>{r(t.error)},t.onupgradeneeded=()=>{let e=t.result;e.objectStoreNames.contains(i)||e.createObjectStore(i,{keyPath:"id"})},t.onsuccess=()=>{let a=t.result.transaction(i,"readonly").objectStore(i).get("unread");a.onsuccess=()=>{e(a.result?.count||0)},a.onerror=()=>{r(a.error)}}})}async function o(){return new Promise((e,r)=>{let t=indexedDB.open(a,5);t.onerror=()=>{r(t.error)},t.onupgradeneeded=()=>{let e=t.result;e.objectStoreNames.contains(i)||e.createObjectStore(i,{keyPath:"id"})},t.onsuccess=()=>{let a=t.result.transaction(i,"readwrite").objectStore(i).put({id:"unread",count:0});a.onsuccess=()=>{e()},a.onerror=()=>{r(a.error)}}})}},89521:e=>{e.exports={loadingContainer:"Loader_loadingContainer__p_FTp",loader:"Loader_loader__8pViD",l3:"Loader_l3__h_z0X"}},89830:e=>{e.exports={toggleContainer:"RoleToggle_toggleContainer__57oSU",switchLabel:"RoleToggle_switchLabel__pZoWj",switchInput:"RoleToggle_switchInput__DeKTX",switchSlider:"RoleToggle_switchSlider__ZxmL4",roleToggleContainer:"RoleToggle_roleToggleContainer__LMBDn",activeRole:"RoleToggle_activeRole__ybiWv",inactiveRole:"RoleToggle_inactiveRole__QynR1",separator:"RoleToggle_separator__kZnpd"}},94238:(e,r,t)=>{"use strict";t.d(r,{A:()=>c});var a=t(60687);t(43210);var i=t(85814),s=t.n(i),o=t(64455),n=t.n(o);let c=({items:e=[],color:r="#41a1e8"})=>(0,a.jsx)("div",{className:n().grid,children:e.map(e=>(0,a.jsxs)(s(),{href:e.to,className:n().card,children:[(0,a.jsx)("div",{className:n().iconWrapper,style:{backgroundColor:r},children:e.icon}),(0,a.jsx)("span",{className:n().label,children:e.label})]},e.label))})}};