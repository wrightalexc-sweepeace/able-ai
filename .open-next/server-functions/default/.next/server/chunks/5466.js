exports.id=5466,exports.ids=[5466],exports.modules={6475:(e,s,t)=>{"use strict";Object.defineProperty(s,"__esModule",{value:!0}),!function(e,s){for(var t in s)Object.defineProperty(e,t,{enumerable:!0,get:s[t]})}(s,{callServer:function(){return a.callServer},createServerReference:function(){return r},findSourceMapURL:function(){return i.findSourceMapURL}});let a=t(11264),i=t(11448),r=t(19357).createServerReference},8762:(e,s,t)=>{"use strict";t.d(s,{A:()=>W});var a=t(60687),i=t(13964),r=t(47033),o=t(58887),l=t(40228),n=t(96882),c=t(48730);let d=(0,t(62688).A)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);var u=t(79563),g=t(73430),_=t.n(g),m=t(16189),h=t(80863),k=t.n(h),w=t(36125);let f=({label:e,handleGigAction:s,isActive:t,isDisabled:i})=>{let r=(0,w.K)();return(0,a.jsx)("button",{type:"button",className:`${k().actionButton} ${t?"GIG_WORKER"===r?k().activeWorker:k().activeBuyer:""} ${i?k().disabled:""}`,onClick:s,disabled:i,children:e})};var p=t(85814),G=t.n(p),D=t(43210),b=t(30474),N=t(21295),x=t(30642),E=t(6475);let y=(0,E.createServerReference)("4084359704f71594f9310ab1931288fb6d27cb5814",E.callServer,void 0,E.findSourceMapURL,"deleteGig");var j=t(52581),R=t(16269),I=t(44306),A=t.n(I);let S=({label:e,isActive:s,isDisabled:t})=>{let i=(0,w.K)();return(0,a.jsx)("div",{className:`${A().statusIndicator} ${s?"GIG_WORKER"===i?A().activeWorker:A().activeBuyer:""} ${t?A().disabled:""}`,children:e})};var v=t(74337),C=t(89001);let T=e=>new Date(e).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),B=e=>new Date(e).toLocaleTimeString(void 0,{hour:"2-digit",minute:"2-digit",hour12:!0}),O=(e,s)=>{let t=new Date(e),a=new Date(s).getTime()-t.getTime();if(a<=0)return"N/A";let i=Math.floor(a/36e5),r=Math.floor(a%36e5/6e4),o="";return i>0&&(o+=`${i} hour${i>1?"s":""}`),r>0&&(o+=` ${r} minute${r>1?"s":""}`),o.trim()||"N/A"},W=({userId:e,role:s,gig:t,setGig:g,isAvailableOffer:h=!1,isCheckingOffer:k=!1})=>{let p=(0,m.useRouter)(),[E,I]=(0,D.useState)(!1),{user:A}=(0,N.A)(),W=(0,w.K)(),[P,M]=(0,D.useState)(!1),[$,U]=(0,D.useState)(!1),[L,K]=(0,D.useState)(!1),[F,q]=(0,D.useState)(!1),[V,H]=(0,D.useState)(!1),z=O(t.startTime,t.endTime),Y=t.buyerName.split(" ")[0],Z="GIG_WORKER"===W&&"worker"===s?A?.displayName?.split(" ")[0]||"Worker":t.workerName?t.workerName.split(" ")[0]:"Worker",X={gigs:t.workerGigs||0,experience:t.workerExperience||0,isStar:t.isWorkerStar||!1},J=e=>{let s=t.status;switch(e){case"accept":if("PENDING"===s)return"GIG_WORKER"===W?"Accept Gig":"Offer Sent - awaiting acceptance";return"Gig Accepted";case"start":if("PENDING"===s||"ACCEPTED"===s)return"GIG_WORKER"===W?"Mark you have started your shift":"Mark as started";return"GIG_WORKER"===W?"Gig Started":`${Z} has started the gig`;case"complete":if("PENDING"===s||"ACCEPTED"===s||"IN_PROGRESS"===s)return"GIG_WORKER"===W?"Mark as complete":`Mark as complete, pay ${Z}`;if(t.isWorkerSubmittedFeedback&&!t.isBuyerSubmittedFeedback)return"GIG_WORKER"===W?"Gig Completed":`ðŸ•’Confirm, pay and review ${Z}`;if(t.isBuyerSubmittedFeedback&&!t.isWorkerSubmittedFeedback)return"GIG_WORKER"===W?"Buyer confirmed & paid: leave feedback":`${Z} has completed the gig`;else return"GIG_WORKER"===W?"Gig Completed":`${Z} has completed the gig`;case"awaiting":if("GIG_WORKER"===W)return t.isBuyerSubmittedFeedback?(0,a.jsxs)("span",{className:_().awaitingText,children:[(0,a.jsx)(i.A,{color:"#000000"})," ",Y," Paid \xa3",t.estimatedEarnings]}):`Waiting for ${Y} to confirm and pay`;return t.isBuyerSubmittedFeedback?(0,a.jsxs)("span",{className:_().awaitingText,children:[(0,a.jsx)(i.A,{color:"#000000"})," Paid \xa3",t.estimatedEarnings]}):"Pay";default:return""}},Q=async a=>{if(t){I(!0),console.log(`Performing action: ${a} for gig: ${t.id}`);try{if("accept"===a&&"GIG_WORKER"===W&&"PENDING_WORKER_ACCEPTANCE"===t.statusInternal){let s=await (0,v.U)({gigId:t.id,userId:e});if(s.error)return void j.oR.error(s.error);g({...t,status:"ACCEPTED",statusInternal:"ACCEPTED"}),j.oR.success("Gig offer accepted successfully! You can now start the gig when ready."),setTimeout(()=>{p.push(`/user/${A?.uid}/worker`)},2e3);return}if("decline"===a&&"GIG_WORKER"===W&&"PENDING_WORKER_ACCEPTANCE"===t.statusInternal){let s=await (0,C.y)({gigId:t.id,userId:e});if(s.error)return void j.oR.error(s.error);g({...t,status:"CANCELLED",statusInternal:"DECLINED_BY_WORKER"}),j.oR.success("Gig offer declined successfully!"),setTimeout(()=>{p.push(`/user/${A?.uid}/worker/offers`)},1500);return}"accept"===a&&t&&"GIG_WORKER"===W?(g({...t,status:"ACCEPTED"}),await (0,x.Z)({gigId:t.id,userId:e,role:s,action:"accept"}),j.oR.success("Gig accepted successfully!")):"start"===a&&t?(g({...t,status:"IN_PROGRESS"}),await (0,x.Z)({gigId:t.id,userId:e,role:s,action:"start"}),j.oR.success("Gig started successfully!")):"complete"===a&&t?(g({...t,status:"COMPLETED"}),await (0,x.Z)({gigId:t.id,userId:e,role:s,action:"complete"}),j.oR.success("Gig completed successfully!"),"GIG_WORKER"===W?p.push(`/user/${A?.uid}/worker/gigs/${t.id}/feedback`):p.push(`/user/${A?.uid}/buyer/gigs/${t.id}/feedback`)):"confirmed"===a?(g({...t,status:"CONFIRMED"}),j.oR.success("Gig confirmed successfully!")):"requestAmendment"===a?(g({...t,status:"REQUESTED_AMENDMENT"}),p.push(`/gigs/${t.id}/amends/123/request`)):"reportIssue"===a?p.push(`/gigs/${t.id}/report-issue`):"delete"===a?(await y({gigId:t.id,userId:e}),j.oR.success("Gig deleted successfully!"),p.push(`/user/${A?.uid}/buyer`)):"paid"===a&&j.oR.success("Payment confirmed!")}catch(e){console.error("Error performing gig action:",e),j.oR.error("Failed to perform action. Please try again.")}finally{I(!1)}}};return"GIG_WORKER"===W&&"worker"===s?(0,a.jsxs)("div",{className:_().workerContainer,children:[(0,a.jsxs)("header",{className:_().workerHeader,children:[(0,a.jsxs)("div",{className:_().headerLeft,children:[(0,a.jsx)("button",{className:_().backButton,onClick:()=>p.back(),children:(0,a.jsx)(r.A,{size:20,color:"#ffffff"})}),(0,a.jsx)("div",{className:_().logoContainer,children:(0,a.jsx)(u.A,{width:50,height:50})}),(0,a.jsxs)("h1",{className:_().workerPageTitle,children:[t.role," Gig"]})]}),(0,a.jsx)("button",{className:_().workerChatButton,children:(0,a.jsx)(o.A,{size:30,color:"#ffffff"})})]}),(0,a.jsxs)("main",{className:_().workerMain,children:[(0,a.jsxs)("section",{className:_().workerGigDetailsSection,children:[(0,a.jsxs)("div",{className:_().workerGigDetailsHeader,children:[(0,a.jsx)("h2",{className:_().workerSectionTitle,children:"Gig Details"}),(0,a.jsx)(l.A,{size:20,color:"#ffffff"})]}),(0,a.jsxs)("div",{className:_().workerGigDetailsRow,children:[(0,a.jsx)("span",{className:_().workerLabel,children:"Location:"}),(0,a.jsx)("span",{className:_().workerDetailValue,children:t.location})]}),(0,a.jsxs)("div",{className:_().workerGigDetailsRow,children:[(0,a.jsx)("span",{className:_().workerLabel,children:"Date:"}),(0,a.jsx)("span",{className:_().workerDetailValue,children:T(t.date)})]}),(0,a.jsxs)("div",{className:_().workerGigDetailsRow,children:[(0,a.jsx)("span",{className:_().workerLabel,children:"Time:"}),(0,a.jsxs)("span",{className:_().workerDetailValue,children:[B(t.startTime)," - ",B(t.endTime)]})]}),(0,a.jsxs)("div",{className:_().workerGigDetailsRow,children:[(0,a.jsx)("span",{className:_().workerLabel,children:"Pay per hour:"}),(0,a.jsxs)("span",{className:_().workerDetailValue,children:["\xa3",t.hourlyRate.toFixed(2)]})]}),(0,a.jsxs)("div",{className:_().workerGigDetailsRow,children:[(0,a.jsx)("span",{className:_().workerLabel,children:"Total Pay:"}),(0,a.jsxs)("span",{className:_().workerDetailValue,children:["\xa3",t.estimatedEarnings.toFixed(2)]})]}),(0,a.jsxs)("div",{className:_().workerGigDetailsRow,children:[(0,a.jsx)("span",{className:_().workerLabel,children:"Hiring manager:"}),(0,a.jsxs)("span",{className:_().workerDetailValue,children:[t.buyerName," @",t.buyerName.toLowerCase().replace(/\s+/g,"")]})]})]}),(0,a.jsx)("button",{className:_().workerNegotiationButton,onClick:()=>{A?.uid&&t.id&&p.push(`/gigs/${t.id}/amends/123`)},disabled:$,children:$?"Opening...":"Negotiate, cancel or change gig details"}),t.specialInstructions&&(0,a.jsxs)("section",{className:_().workerInstructionsSection,children:[(0,a.jsx)("h2",{className:_().workerSpecialInstTitle,children:"Special Instructions"}),(0,a.jsx)("p",{className:_().workerSpecialInstructions,children:t.specialInstructions})]}),(0,a.jsxs)("section",{className:_().workerWorkflowSection,children:[(0,a.jsxs)("button",{className:`${_().workerWorkflowButton} ${"PENDING"===t.status?_().workerWorkflowButtonActive:_().workerWorkflowButtonInactive}`,onClick:()=>"PENDING"===t.status&&Q("accept"),disabled:"PENDING"!==t.status||E,children:[(0,a.jsx)("div",{className:_().workerWorkflowStep,children:"1"}),(0,a.jsx)("span",{children:"Accept gig"})]}),(0,a.jsxs)("button",{className:`${_().workerWorkflowButton} ${"ACCEPTED"===t.status?_().workerWorkflowButtonActive:_().workerWorkflowButtonInactive}`,onClick:()=>"ACCEPTED"===t.status&&Q("start"),disabled:"ACCEPTED"!==t.status||E,children:[(0,a.jsx)("div",{className:_().workerWorkflowStep,children:"2"}),(0,a.jsx)("span",{children:"Mark you have started your shift"})]}),(0,a.jsxs)("button",{className:`${_().workerWorkflowButton} ${"IN_PROGRESS"===t.status?_().workerWorkflowButtonActive:_().workerWorkflowButtonInactive}`,onClick:()=>"IN_PROGRESS"===t.status&&Q("complete"),disabled:"IN_PROGRESS"!==t.status||E,children:[(0,a.jsx)("div",{className:_().workerWorkflowStep,children:"3"}),(0,a.jsx)("span",{children:"Mark as complete"})]}),(0,a.jsxs)("button",{className:`${_().workerWorkflowButton} ${"COMPLETED"===t.status?_().workerWorkflowButtonActive:_().workerWorkflowButtonInactive}`,onClick:()=>"COMPLETED"===t.status&&Q("paid"),disabled:"COMPLETED"!==t.status||E,children:[(0,a.jsx)("div",{className:_().workerWorkflowStep,children:"4"}),(0,a.jsx)("span",{children:"Paid"})]})]}),(0,a.jsxs)("section",{className:_().workerAdditionalActions,children:[(0,a.jsx)("button",{className:_().workerAdditionalButton,onClick:()=>{A?.uid&&t.id&&p.push(`/gigs/${t.id}/report-issue`)},disabled:L,children:L?"Opening...":"Report an issue"}),(0,a.jsx)("button",{className:_().workerAdditionalButton,onClick:()=>{A?.uid&&t.id&&p.push(`/gigs/${t.id}/delegate`)},disabled:F,children:F?"Opening...":"Delegate gig"})]}),(0,a.jsx)("button",{className:_().workerTermsButton,onClick:()=>{p.push("/legal/terms")},disabled:V,children:V?"Opening...":"Terms of Agreement"})]})]}):(0,a.jsxs)("div",{className:_().container,children:[(0,a.jsx)(R.A,{title:`${t.role} Gig`,onBackClick:()=>p.back()}),(0,a.jsxs)("main",{className:_().gigDetailsMain,children:[(0,a.jsxs)("section",{className:_().gigDetailsSection,children:[(0,a.jsxs)("div",{className:_().gigDetailsHeader,children:[(0,a.jsx)("h2",{className:_().sectionTitle,children:"Gig Details"}),(0,a.jsx)(l.A,{size:26,color:"#ffffff"})]}),(0,a.jsxs)("div",{className:_().gigDetailsRow,children:[(0,a.jsx)("span",{className:_().label,children:"Location:"}),(0,a.jsxs)("span",{className:_().detailValue,children:[t.location,(0,a.jsx)("a",{href:`https://maps.google.com/?q=${encodeURIComponent(t.location)}`,target:"_blank",rel:"noopener noreferrer",style:{marginLeft:"0.5rem"},children:"(View Map)"})]})]}),(0,a.jsxs)("div",{className:_().gigDetailsRow,children:[(0,a.jsx)("span",{className:_().label,children:"Date:"}),(0,a.jsx)("span",{className:_().detailValue,children:T(t.date)})]}),(0,a.jsxs)("div",{className:_().gigDetailsRow,children:[(0,a.jsx)("span",{className:_().label,children:"Time:"}),(0,a.jsxs)("span",{className:_().detailValue,children:[B(t.startTime)," - ",B(t.endTime)," (",z,")"]})]}),(0,a.jsxs)("div",{className:_().gigDetailsRow,children:[(0,a.jsx)("span",{className:_().label,children:"Pay per hour:"}),(0,a.jsxs)("span",{className:_().detailValue,children:["\xa3",t.hourlyRate.toFixed(2),"/hr"]})]}),(0,a.jsxs)("div",{className:_().gigDetailsRow,children:[(0,a.jsx)("span",{className:_().label,children:"Total pay:"}),(0,a.jsxs)("span",{className:_().detailValue,children:["\xa3",t.estimatedEarnings.toFixed(2)," + tips"]})]}),"GIG_WORKER"===W&&(0,a.jsxs)("div",{className:_().gigDetailsRow,children:[(0,a.jsx)("span",{className:_().label,children:"Hiring manager:"}),(0,a.jsxs)("span",{className:_().detailValue,children:[t.hiringManager," ",(0,a.jsx)("br",{})," ",t.hiringManagerUsername]})]})]}),"GIG_WORKER"===W&&(0,a.jsxs)("section",{className:`${_().gigDetailsSection} ${_().workerSection}`,children:[(0,a.jsx)(b.default,{src:t.workerAvatarUrl||"/images/worker-placeholder.png",className:_().workerAvatar,alt:t.workerName||"Worker",width:56,height:56}),(0,a.jsxs)("div",{className:_().workerDetailsContainer,children:[(0,a.jsxs)("div",{className:_().workerDetails,children:[(0,a.jsx)("span",{className:_().workerName,children:t.workerName||"Worker"}),X.gigs," Able gigs, ",X.experience," years experience"]}),X.isStar&&(0,a.jsx)(b.default,{src:"/images/star.svg",alt:"Star",width:56,height:50})]})]}),"ACCEPTED"===t.status&&t.workerName&&(0,a.jsxs)("section",{className:`${_().gigDetailsSection} ${_().workerInfoSection}`,children:[(0,a.jsx)("div",{className:_().sectionHeader,children:(0,a.jsx)("h3",{className:_().sectionTitle,children:"Assigned Worker"})}),(0,a.jsxs)("div",{className:_().workerInfoContainer,children:[(0,a.jsx)(b.default,{src:t.workerAvatarUrl||"/images/worker-placeholder.png",className:_().workerAvatar,alt:t.workerName,width:48,height:48}),(0,a.jsxs)("div",{className:_().workerInfoDetails,children:[(0,a.jsx)("span",{className:_().workerName,children:t.workerName}),(0,a.jsxs)("span",{className:_().workerStats,children:[X.gigs," Able gigs â€¢ ",X.experience," years experience"]}),X.isStar&&(0,a.jsxs)("div",{className:_().starBadge,children:[(0,a.jsx)(b.default,{src:"/images/star.svg",alt:"Star Worker",width:16,height:16}),(0,a.jsx)("span",{children:"Star Worker"})]})]})]})]}),("PENDING"===t.status||"IN_PROGRESS"===t.status||"ACCEPTED"===t.status)&&(0,a.jsx)("button",{className:_().negotiationButton,onClick:()=>Q("requestAmendment"),children:"Negotiate, cancel or change gig details"}),t.specialInstructions&&(0,a.jsxs)("section",{className:_().instructionsSection,children:[(0,a.jsxs)("h2",{className:_().specialInstTitle,children:[(0,a.jsx)(n.A,{size:18}),"Special Instructions"]}),(0,a.jsx)("p",{className:_().specialInstructions,children:t.specialInstructions})]}),(0,a.jsxs)("section",{className:`${_().actionSection}`,children:[" ","ACCEPTED"===t.status&&(0,a.jsxs)("div",{className:_().statusMessage,children:[(0,a.jsxs)("div",{className:_().statusSuccess,children:[(0,a.jsx)(i.A,{size:20,color:"#10b981"}),(0,a.jsx)("span",{children:"Gig Accepted Successfully!"})]}),(0,a.jsx)("p",{className:_().statusDescription,children:"GIG_WORKER"===W?"You've accepted this gig. You can now start the gig when you're ready.":"A worker has accepted your gig offer. They can start the gig when ready."})]}),"IN_PROGRESS"===t.status&&(0,a.jsxs)("div",{className:_().statusMessage,children:[(0,a.jsxs)("div",{className:_().statusInProgress,children:[(0,a.jsx)(c.A,{size:20,color:"#f59e0b"}),(0,a.jsx)("span",{children:"Gig In Progress"})]}),(0,a.jsx)("p",{className:_().statusDescription,children:"GIG_WORKER"===W?"You've started the gig. Complete it when finished.":"The worker has started the gig. They will mark it complete when finished."})]}),"COMPLETED"===t.status&&(0,a.jsxs)("div",{className:_().statusMessage,children:[(0,a.jsxs)("div",{className:_().statusCompleted,children:[(0,a.jsx)(i.A,{size:20,color:"#10b981"}),(0,a.jsx)("span",{children:"Gig Completed"})]}),(0,a.jsx)("p",{className:_().statusDescription,children:"GIG_WORKER"===W?"You've completed the gig. Waiting for buyer confirmation and payment.":"The worker has completed the gig. Please confirm and process payment."})]}),"CANCELLED"===t.status&&(0,a.jsxs)("div",{className:_().statusMessage,children:[(0,a.jsxs)("div",{className:_().statusCancelled,children:[(0,a.jsx)(d,{size:20,color:"#ef4444"}),(0,a.jsx)("span",{children:"Gig Cancelled"})]}),(0,a.jsx)("p",{className:_().statusDescription,children:"This gig has been cancelled and is no longer active."})]}),"PENDING"===t.status&&(0,a.jsx)(f,{label:J("accept"),handleGigAction:()=>Q("accept"),isActive:"PENDING"===t.status,isDisabled:"GIG_WORKER"!==W||"PENDING"!==t.status}),"GIG_WORKER"===W&&"PENDING_WORKER_ACCEPTANCE"===t.statusInternal&&(0,a.jsx)(f,{label:"Decline Offer",handleGigAction:()=>Q("decline"),isActive:!0,isDisabled:!1}),"ACCEPTED"===t.status&&(0,a.jsx)(f,{label:J("start"),handleGigAction:()=>Q("start"),isActive:"ACCEPTED"===t.status,isDisabled:"ACCEPTED"!==t.status}),("IN_PROGRESS"===t.status||"COMPLETED"===t.status)&&(0,a.jsx)(f,{label:J("complete"),handleGigAction:()=>Q("complete"),isActive:("IN_PROGRESS"===t.status||"COMPLETED"===t.status||"CONFIRMED"===t.status||"AWAITING_BUYER_CONFIRMATION"===t.status)&&("GIG_WORKER"===W&&!t.isWorkerSubmittedFeedback||"BUYER"===W&&!t.isBuyerSubmittedFeedback),isDisabled:"GIG_WORKER"===W&&t.isWorkerSubmittedFeedback||"BUYER"===W&&t.isBuyerSubmittedFeedback}),(0,a.jsx)(S,{label:J("awaiting"),isActive:"GIG_WORKER"===W&&t.isWorkerSubmittedFeedback||"BUYER"===W&&t.isBuyerSubmittedFeedback,isDisabled:!0})]}),(0,a.jsxs)("section",{className:`${_().secondaryActionsSection}`,children:[" ",(0,a.jsx)(G(),{href:"/terms-of-service",target:"_blank",rel:"noopener noreferrer",className:_().secondaryActionButton,children:"Terms of agreement"}),(0,a.jsx)("button",{onClick:()=>Q("reportIssue"),className:_().secondaryActionButton,disabled:E,children:"Report an Issue"}),"GIG_WORKER"===W&&"worker"===s&&(0,a.jsxs)(a.Fragment,{children:[("IN_PROGRESS"===t.status||"COMPLETED"===t.status)&&(0,a.jsx)(G(),{href:`/user/${e}/worker/gigs/${t.id}/complete`,className:_().secondaryActionButton,children:"Complete gig"}),("ACCEPTED"===t.status||"IN_PROGRESS"===t.status)&&(0,a.jsx)(G(),{href:`/user/${e}/worker/gigs/${t.id}/amend`,className:_().secondaryActionButton,children:"Amend gig"}),"ACCEPTED"===t.status&&(0,a.jsx)("button",{onClick:()=>Q("start"),className:_().secondaryActionButton,disabled:E,children:"Mark you have started your shift"}),"IN_PROGRESS"===t.status&&(0,a.jsx)("button",{onClick:()=>Q("complete"),className:_().secondaryActionButton,disabled:E,children:"Mark as complete"}),"COMPLETED"===t.status&&(0,a.jsx)("button",{onClick:()=>Q("paid"),className:_().secondaryActionButton,disabled:E,children:"Paid"})]})]})]})]})}},13964:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},27329:(e,s,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.d(s,{y:()=>d});var i=t(91199);t(42087);var r=t(30298),o=t(18839),l=t(60444),n=t(33331),c=e([r]);async function d({gigId:e,userId:s}){try{if(!await r.db.query.UsersTable.findFirst({where:(0,o.eq)(l.UsersTable.firebaseUid,s),columns:{id:!0}}))return{error:"User not found",status:404};if(!await r.db.query.GigsTable.findFirst({where:(0,o.Uo)((0,o.eq)(l.GigsTable.id,e),(0,o.eq)(l.GigsTable.statusInternal,l.gigStatusEnum.enumValues[0]),(0,o.kZ)(l.GigsTable.workerUserId))}))return{error:"Gig not found or not available for declining",status:404};return await r.db.update(l.GigsTable).set({statusInternal:"DECLINED_BY_WORKER",updatedAt:new Date}).where((0,o.eq)(l.GigsTable.id,e)),{success:!0,status:200,message:"Gig offer declined successfully"}}catch(e){return console.error("Error declining gig offer:",e),{error:e.message||"Failed to decline gig offer",status:500}}}r=(c.then?(await c)():c)[0],(0,n.D)([d]),(0,i.A)(d,"40d24a1ec023788a7626d74ce5a28bddbb77869bf3",null),a()}catch(e){a(e)}})},28559:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},30642:(e,s,t)=>{"use strict";t.d(s,{Z:()=>i});var a=t(6475);let i=(0,a.createServerReference)("406285e4a5b3e01ac696468e89531313be16ecb429",a.callServer,void 0,a.findSourceMapURL,"updateGigOfferStatus")},32699:(e,s,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.d(s,{Z:()=>d});var i=t(91199);t(42087);var r=t(30298),o=t(18839),l=t(60444),n=t(33331),c=e([r]);r=(c.then?(await c)():c)[0];let u=l.gigStatusEnum.enumValues[2],g=l.gigStatusEnum.enumValues[10],_=l.gigStatusEnum.enumValues[11],m=(e,s)=>"accept"===e?u:"buyer"===s?g:_;async function d({gigId:e,userId:s,role:t,action:a}){try{let i=await r.db.query.UsersTable.findFirst({where:(0,o.eq)(l.UsersTable.firebaseUid,s),columns:{id:!0}});if(!i)return{error:"User is not found",status:404};let n=m(a,t);if("cancel"===a&&"worker"===t)await r.db.update(l.GigsTable).set({statusInternal:n}).where((0,o.eq)(l.GigsTable.id,e));else{let s="buyer"===t?l.GigsTable.buyerUserId:l.GigsTable.workerUserId;await r.db.update(l.GigsTable).set({statusInternal:n}).where((0,o.Uo)((0,o.eq)(l.GigsTable.id,e),(0,o.eq)(s,i.id)))}return{status:200}}catch(e){return console.error("Error updating gig:",e),{error:e.message,status:500}}}(0,n.D)([d]),(0,i.A)(d,"406285e4a5b3e01ac696468e89531313be16ecb429",null),a()}catch(e){a(e)}})},40228:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},43455:(e,s,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.d(s,{U:()=>d});var i=t(91199);t(42087);var r=t(30298),o=t(18839),l=t(60444),n=t(33331),c=e([r]);r=(c.then?(await c)():c)[0];let u=l.gigStatusEnum.enumValues[2];async function d({gigId:e,userId:s}){try{let t=await r.db.query.UsersTable.findFirst({where:(0,o.eq)(l.UsersTable.firebaseUid,s),columns:{id:!0}});if(!t)return{error:"User not found",status:404};if(!await r.db.query.GigsTable.findFirst({where:(0,o.Uo)((0,o.eq)(l.GigsTable.id,e),(0,o.eq)(l.GigsTable.statusInternal,l.gigStatusEnum.enumValues[0]),(0,o.kZ)(l.GigsTable.workerUserId))}))return{error:"Gig not found or not available for acceptance",status:404};return await r.db.update(l.GigsTable).set({workerUserId:t.id,statusInternal:u,updatedAt:new Date}).where((0,o.eq)(l.GigsTable.id,e)),{success:!0,status:200,message:"Gig offer accepted successfully"}}catch(e){return console.error("Error accepting gig offer:",e),{error:e.message||"Failed to accept gig offer",status:500}}}(0,n.D)([d]),(0,i.A)(d,"402e2448f83fdc0f1b31fdff1de0016567c7fd3feb",null),a()}catch(e){a(e)}})},44306:e=>{e.exports={statusIndicator:"GigStausIndicator_statusIndicator__uOEa5",activeWorker:"GigStausIndicator_activeWorker__thr2W",activeBuyer:"GigStausIndicator_activeBuyer__lY6xx",disabled:"GigStausIndicator_disabled__xnumP"}},47033:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},48730:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},58887:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},62688:(e,s,t)=>{"use strict";t.d(s,{A:()=>u});var a=t(43210);let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),r=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,s,t)=>t?t.toUpperCase():s.toLowerCase()),o=e=>{let s=r(e);return s.charAt(0).toUpperCase()+s.slice(1)},l=(...e)=>e.filter((e,s,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===s).join(" ").trim(),n=e=>{for(let s in e)if(s.startsWith("aria-")||"role"===s||"title"===s)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,a.forwardRef)(({color:e="currentColor",size:s=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:r="",children:o,iconNode:d,...u},g)=>(0,a.createElement)("svg",{ref:g,...c,width:s,height:s,stroke:e,strokeWidth:i?24*Number(t)/Number(s):t,className:l("lucide",r),...!o&&!n(u)&&{"aria-hidden":"true"},...u},[...d.map(([e,s])=>(0,a.createElement)(e,s)),...Array.isArray(o)?o:[o]])),u=(e,s)=>{let t=(0,a.forwardRef)(({className:t,...r},n)=>(0,a.createElement)(d,{ref:n,iconNode:s,className:l(`lucide-${i(o(e))}`,`lucide-${e}`,t),...r}));return t.displayName=o(e),t}},73430:e=>{e.exports={container:"GigDetails_container__cYCBA",workerContainer:"GigDetails_workerContainer__mRRMj",workerHeader:"GigDetails_workerHeader__EG1eE",headerLeft:"GigDetails_headerLeft__LmsjU",backButton:"GigDetails_backButton__62PWW",logoContainer:"GigDetails_logoContainer__EFFX2",workerPageTitle:"GigDetails_workerPageTitle___4zZp",workerChatButton:"GigDetails_workerChatButton__iODiu",workerMain:"GigDetails_workerMain__zkAjH",workerGigDetailsSection:"GigDetails_workerGigDetailsSection__XHzP_",workerGigDetailsHeader:"GigDetails_workerGigDetailsHeader__9nOOO",workerSectionTitle:"GigDetails_workerSectionTitle__cISKy",workerGigDetailsRow:"GigDetails_workerGigDetailsRow__8tMdP",workerLabel:"GigDetails_workerLabel__Dnt3D",workerDetailValue:"GigDetails_workerDetailValue__z_SGL",workerNegotiationButton:"GigDetails_workerNegotiationButton__aJ8My",workerInstructionsSection:"GigDetails_workerInstructionsSection___JuTN",workerSpecialInstTitle:"GigDetails_workerSpecialInstTitle__KoLsy",workerSpecialInstructions:"GigDetails_workerSpecialInstructions__kpEX3",workerWorkflowSection:"GigDetails_workerWorkflowSection__NrDOf",workerWorkflowButton:"GigDetails_workerWorkflowButton__KJ9iD",workerWorkflowButtonActive:"GigDetails_workerWorkflowButtonActive__N9CHX",workerWorkflowButtonInactive:"GigDetails_workerWorkflowButtonInactive__kJF64",workerWorkflowStep:"GigDetails_workerWorkflowStep__IX1pf",workerAdditionalActions:"GigDetails_workerAdditionalActions__UrrXF",workerAdditionalButton:"GigDetails_workerAdditionalButton__lIfVq",workerTermsButton:"GigDetails_workerTermsButton__qunU7",offerActionsSection:"GigDetails_offerActionsSection__86o4O",slideInUp:"GigDetails_slideInUp__Alb8m",offerHeader:"GigDetails_offerHeader__iP0yt",offerActionButtons:"GigDetails_offerActionButtons__KyMMp",acceptOfferButton:"GigDetails_acceptOfferButton__0CQNd",declineOfferButton:"GigDetails_declineOfferButton__zXk5O",float:"GigDetails_float__KESmL",shimmer:"GigDetails_shimmer__ppKsp",header:"GigDetails_header__DyYvG",headerActions:"GigDetails_headerActions__Dgdx9",calendarButton:"GigDetails_calendarButton__oAlMd",pageTitle:"GigDetails_pageTitle__RwlAj",chatButton:"GigDetails_chatButton__1Xjar",gigDetailsMain:"GigDetails_gigDetailsMain__OtvdH",gigDetailsSection:"GigDetails_gigDetailsSection__AiwaS",workerSection:"GigDetails_workerSection__8dMaa",workerAvatar:"GigDetails_workerAvatar__TKHtC",workerDetailsContainer:"GigDetails_workerDetailsContainer__SkdOC",workerDetails:"GigDetails_workerDetails__lO8VT",workerName:"GigDetails_workerName__pqsyq",gigDetailsHeader:"GigDetails_gigDetailsHeader__nMZfj",sectionTitle:"GigDetails_sectionTitle__bkLMR",specialInstTitle:"GigDetails_specialInstTitle__VwcC5",gigDetailsRow:"GigDetails_gigDetailsRow___QdKb",label:"GigDetails_label__RV8f1",detailValue:"GigDetails_detailValue__RR81A",negotiationButton:"GigDetails_negotiationButton__8Ory3",instructionsSection:"GigDetails_instructionsSection__N1WbE",actionSection:"GigDetails_actionSection__FxQOE",actionButton:"GigDetails_actionButton__I54Ny",actionButtonPrimary:"GigDetails_actionButtonPrimary__OiHBO",secondaryActionsSection:"GigDetails_secondaryActionsSection__08Dz6",secondaryActionButton:"GigDetails_secondaryActionButton__C0TYu",deleteButton:"GigDetails_deleteButton__7kC5G",icon:"GigDetails_icon___D8My",statusBadge:"GigDetails_statusBadge__JB_Du",statusAccepted:"GigDetails_statusAccepted__J99jE",statusInProgress:"GigDetails_statusInProgress___XOo_",statusAwaitingConfirmation:"GigDetails_statusAwaitingConfirmation__ULzXI",statusCompleted:"GigDetails_statusCompleted__44PHD",statusCancelled:"GigDetails_statusCancelled__gw_g6",statusMessage:"GigDetails_statusMessage__nRH5o",statusSuccess:"GigDetails_statusSuccess__Kz42T",statusDescription:"GigDetails_statusDescription__Rk9Eu",specialInstructions:"GigDetails_specialInstructions__GJKHz",footer:"GigDetails_footer__aMaVL",homeButton:"GigDetails_homeButton__qH7jx",loadingContainer:"GigDetails_loadingContainer__9zfsn",errorMessage:"GigDetails_errorMessage__drZAM",emptyState:"GigDetails_emptyState__d9Ufw",awaitingText:"GigDetails_awaitingText__eeGch",workerInfoSection:"GigDetails_workerInfoSection__IltFS",workerInfoContainer:"GigDetails_workerInfoContainer__eZMnV",workerInfoDetails:"GigDetails_workerInfoDetails__DId_4",workerStats:"GigDetails_workerStats__jpqLj",starBadge:"GigDetails_starBadge__g0aEu",sectionHeader:"GigDetails_sectionHeader__MsQxj"}},73479:(e,s,t)=>{"use strict";t.a(e,async(e,a)=>{try{t.d(s,{r:()=>d});var i=t(91199);t(42087);var r=t(30298),o=t(18839),l=t(60444),n=t(33331),c=e([r]);r=(c.then?(await c)():c)[0];let u=l.gigStatusEnum.enumValues[0];async function d({gigId:e,userId:s}){try{let t=await r.db.query.UsersTable.findFirst({where:(0,o.eq)(l.UsersTable.firebaseUid,s),columns:{id:!0}});if(!t)return{error:"User not found",status:404};let a=await r.db.query.GigsTable.findFirst({where:(0,o.Uo)((0,o.eq)(l.GigsTable.id,e),(0,o.eq)(l.GigsTable.buyerUserId,t.id)),columns:{id:!0,statusInternal:!0}});if(!a)return{error:"Gig not found or you do not have permission to delete it",status:404};if(a.statusInternal!==u)return{error:"Can only delete gigs that are not yet accepted",status:400};return await r.db.delete(l.GigsTable).where((0,o.eq)(l.GigsTable.id,e)),{status:200,message:"Gig deleted successfully"}}catch(e){return console.error("Error deleting gig:",e),{error:e.message,status:500}}}(0,n.D)([d]),(0,i.A)(d,"4084359704f71594f9310ab1931288fb6d27cb5814",null),a()}catch(e){a(e)}})},74337:(e,s,t)=>{"use strict";t.d(s,{U:()=>i});var a=t(6475);let i=(0,a.createServerReference)("402e2448f83fdc0f1b31fdff1de0016567c7fd3feb",a.callServer,void 0,a.findSourceMapURL,"acceptGigOffer")},80863:e=>{e.exports={actionButton:"GigActionButton_actionButton__Rx4Lb",activeWorker:"GigActionButton_activeWorker__mA4aQ",activeBuyer:"GigActionButton_activeBuyer__aaVHm",disabled:"GigActionButton_disabled__aLXDc"}},89001:(e,s,t)=>{"use strict";t.d(s,{y:()=>i});var a=t(6475);let i=(0,a.createServerReference)("40d24a1ec023788a7626d74ce5a28bddbb77869bf3",a.callServer,void 0,a.findSourceMapURL,"declineGigOffer")},96882:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(62688).A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])}};