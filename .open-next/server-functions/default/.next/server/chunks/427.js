exports.id=427,exports.ids=[427],exports.modules={6475:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{callServer:function(){return n.callServer},createServerReference:function(){return i},findSourceMapURL:function(){return o.findSourceMapURL}});let n=s(11264),o=s(11448),i=s(19357).createServerReference},11860:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(62688).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},12665:(e,t,s)=>{"use strict";s.d(t,{qc:()=>u,rL:()=>h});let n={UNKNOWN:{code:1e4,message:"Unknown error",type:"error"},MODEL_NOT_SUPPORTED:{code:10001,message:"Model not supported",type:"error"},SCHEMA_VALIDATION_FAILED:{code:10002,message:"Schema validation failed",type:"error"},AI_API_ERROR:{code:10003,message:"AI API error",type:"error"},STREAM_NOT_IMPLEMENTED:{code:10004,message:"Streaming not implemented",type:"warning"}};function o(e){}function i(e){"error"===e.type||"critical"===e.type?console.error(`[Server][${e.type.toUpperCase()}] [CODE: ${e.code}] ${e.message}`,e.details||""):"warning"===e.type?console.warn(`[Server][${e.type.toUpperCase()}] [CODE: ${e.code}] ${e.message}`,e.details||""):console.log(`[Server][${e.type.toUpperCase()}] [CODE: ${e.code}] ${e.message}`,e.details||"")}var r=s(7958);let a=(e,t)=>t.includes(e),l=(e,t)=>(o(e),i(e),t(e),{ok:!1,error:e.message,code:e.code,details:e.details}),c=e=>!!e,g=async(e,t,s)=>{try{let s,n=await e.generateContent(t);if("function"==typeof n.response.text){let e=await n.response.text();s=JSON.parse(e)}else s=JSON.parse(n.response.text);if(null==s)return Error("Parsed data is undefined or null");return s}catch(t){let e="object"==typeof t&&null!==t&&"message"in t&&"string"==typeof t.message?t.message:"Failed to parse Gemini model response";return s({type:"error",message:e,code:500,details:{err:t}}),Error(e)}},u=["gemini-2.5-flash-preview-05-20","gemini-2.0-flash"],d=()=>{};async function h(e,t,s,o,p=3,f=d){var _,m,A,S;let k=(_=e,m=o,A=t,a(_,u)?m&&!a(m,u)?{...n.MODEL_NOT_SUPPORTED,details:{fallbackModelName:m}}:A.isStream?n.STREAM_NOT_IMPLEMENTED:c(A.responseSchema)?null:{...n.SCHEMA_VALIDATION_FAILED,details:{reason:"No responseSchema provided"}}:{...n.MODEL_NOT_SUPPORTED,details:{modelName:_}});if(k){return l(k,f),{ok:!1,error:(S=k).message,code:S.code,details:S.details}}if(!c(t.responseSchema))return l({...n.SCHEMA_VALIDATION_FAILED,details:{reason:"No responseSchema provided"}},f),{ok:!1,error:n.SCHEMA_VALIDATION_FAILED.message,code:n.SCHEMA_VALIDATION_FAILED.code,details:{reason:"No responseSchema provided"}};let y=null,x=0,C=!1,B=e;for(;x<p;)try{if(!s){let s={...n.AI_API_ERROR,details:{attempt:x,modelName:e,aiOptions:t}};i(s),f(s),y=s,x++;continue}let o=(0,r.oc)(s,{model:B,generationConfig:{...t.generationConfig||{},responseMimeType:"application/json",responseSchema:t.responseSchema}}),a=await g(o,t.prompt,f);if(a instanceof Error){y={...n.SCHEMA_VALIDATION_FAILED,details:{reason:a.message}},x++;continue}return{ok:!0,data:a}}catch(t){let e={...n.AI_API_ERROR,details:{err:t instanceof Error?t.message:String(t),model:B,attempt:x}};if(l(e,f),y=e,o&&!C&&x>=Math.max(1,p-2)){B=o,C=!0,x++;continue}x++}let I=y||{...n.UNKNOWN,details:{modelName:e,aiOptions:t}};return{ok:!1,error:"Sorry, I cannot answer this time. Please retry or report this issue.",code:I.code,details:I.details}}},14952:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(62688).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},16269:(e,t,s)=>{"use strict";s.d(t,{A:()=>_});var n=s(60687);s(43210);var o=s(28559),i=s(17917),r=s.n(i),a=s(85814),l=s.n(a),c=s(21295),g=s(79563),u=s(16189),d=s(30474),h=s(40477),p=s.n(h);let f=({uid:e,handleClick:t,unreadCount:s,unreadNotifications:o})=>(0,n.jsxs)(l(),{href:`/user/${e}/notifications`,passHref:!0,onClick:t,children:[(0,n.jsx)("button",{className:p().notificationButton,"aria-label":"Notifications",children:(0,n.jsx)(d.default,{src:"/images/notifications.svg",alt:"Notifications",width:40,height:40})}),s>0||o>0?(0,n.jsx)("span",{className:p().notificationBadge,children:s>0?s:o}):null]}),_=e=>{let{user:t}=(0,c.A)(),s=(0,u.usePathname)(),{isHomePage:i,title:a,onBackClick:h,handleClick:p,unreadCount:_,unreadNotifications:m}=e,A=s.includes("/able-ai");return(0,n.jsxs)("header",{className:r().header,children:[i?(0,n.jsx)(d.default,{src:"/images/home.svg",alt:"Back",width:40,height:40}):(0,n.jsx)("button",{onClick:h,className:r().backButton,"aria-label":"Go back",children:(0,n.jsx)(o.A,{size:20})}),a&&(0,n.jsx)("h1",{className:r().title,children:a}),(0,n.jsx)(l(),{href:`/user/${t?.uid}/able-ai`,className:r().chat,children:A?(0,n.jsx)(g.A,{width:40,height:40}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"Chat with Able"}),(0,n.jsx)(g.A,{width:30,height:30})]})}),i&&(0,n.jsx)(f,{uid:t?.uid,handleClick:p,unreadCount:_,unreadNotifications:m})]})}},17917:e=>{e.exports={header:"ScreenHeaderWithBack_header__mx1Ch",backButton:"ScreenHeaderWithBack_backButton__0EIlD",title:"ScreenHeaderWithBack_title__Un97C",chat:"ScreenHeaderWithBack_chat__WpLse"}},21169:e=>{e.exports={logo:"Logo_logo__aLQuM"}},28559:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(62688).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},32605:(e,t,s)=>{"use strict";s.d(t,{A:()=>d});var n=s(60687),o=s(43210),i=s(78122),r=s(11860),a=s(47033),l=s(14952),c=s(16189),g=s(80986),u=s.n(g);function d({suggestions:e,currentIndex:t,isLoading:s,error:g,dismissed:d,onDismiss:h,onRefresh:p,goToNext:f,goToPrev:_,userId:m,className:A=""}){let S=(0,c.useRouter)(),k=e&&e.length>0&&t<e.length?e[t]:null,y=(0,o.useCallback)(()=>{if(!m||!k)return;let e={...k,timestamp:new Date().toISOString()};localStorage.setItem("lastAISuggestion",JSON.stringify(e));let t=encodeURIComponent(JSON.stringify(e));S.push(`/user/${m}/able-ai?suggestion=${t}`)},[m,k,S]),x=(0,o.useCallback)(e=>{("Enter"===e.key||" "===e.key)&&y()},[y]),C=(0,o.useCallback)(e=>{e.stopPropagation(),_()},[_]),B=(0,o.useCallback)(e=>{e.stopPropagation(),f()},[f]);return d?(0,n.jsxs)("div",{className:`${u().suggestionBanner} ${u().suggestionTextContainer} ${A}`,children:[(0,n.jsx)("p",{className:u().dismissedText,children:"AI suggestions are hidden."}),(0,n.jsx)("button",{onClick:p,children:"Show Ideas"})]}):s?(0,n.jsxs)("div",{className:`${u().suggestionTextContainer} ${A} ${u().suggestionBanner}`,children:[(0,n.jsx)("div",{className:`${u().skeletonLine} ${u().skeletonLineLong}`,children:"..."}),(0,n.jsx)("div",{className:`${u().skeletonLine} ${u().skeletonLineShort}`,children:"..."}),(0,n.jsx)("div",{className:`${u().skeletonLine} ${u().skeletonLineLong}`,children:"..."})]}):g?(0,n.jsxs)("div",{className:`${u().suggestionBanner} ${u().error} ${A}`,children:["Error: ",g,(0,n.jsx)("button",{onClick:p,className:u().refreshButtonIcon,"aria-label":"Refresh suggestions",children:(0,n.jsx)(i.A,{size:18})})]}):k?(0,n.jsxs)("div",{className:`${u().suggestionBanner} ${A}`,role:"region","aria-labelledby":"ai-suggestion-banner-heading",children:[(0,n.jsx)("div",{className:u().topRowContainer,children:(0,n.jsx)("div",{className:u().suggestionTextContainer,onClick:y,onKeyDown:x,role:"button",tabIndex:0,"aria-live":"polite",children:(0,n.jsx)("p",{className:u().suggestionDescription,children:k.description})})}),(0,n.jsxs)("div",{className:u().bottomControlsContainer,children:[(0,n.jsx)("button",{onClick:h,className:u().dismissButton,"aria-label":"Dismiss suggestions",children:(0,n.jsx)(r.A,{size:18})}),(0,n.jsx)("button",{onClick:p,className:u().refreshButtonIcon,"aria-label":"Refresh suggestions",children:(0,n.jsx)(i.A,{size:18})}),e.length>1&&(0,n.jsxs)("div",{className:u().inlineCarouselControls,children:[(0,n.jsx)("button",{onClick:C,className:u().navButton,"aria-label":"Previous suggestion",children:(0,n.jsx)(a.A,{size:20})}),(0,n.jsxs)("span",{className:u().suggestionCounter,"aria-label":`Suggestion ${t+1} of ${e.length}`,children:[t+1," / ",e.length]}),(0,n.jsx)("button",{onClick:B,className:u().navButton,"aria-label":"Next suggestion",children:(0,n.jsx)(l.A,{size:20})})]})]})]}):null}},36125:(e,t,s)=>{"use strict";async function n(e){try{return localStorage.setItem("lastRoleUsed",e),null}catch(e){console.log("Error updating last role used:",e)}}function o(){try{return window.localStorage.getItem("lastRoleUsed")}catch(e){return console.log("Error retrieving last role used:",e),null}}s.d(t,{C:()=>n,K:()=>o})},40477:e=>{e.exports={notificationButton:"Notification_notificationButton__NL740",notificationBadge:"Notification_notificationBadge__ZxPNU"}},41862:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(62688).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},47033:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(62688).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},62688:(e,t,s)=>{"use strict";s.d(t,{A:()=>u});var n=s(43210);let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),r=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)},a=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim(),l=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let g=(0,n.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:i="",children:r,iconNode:g,...u},d)=>(0,n.createElement)("svg",{ref:d,...c,width:t,height:t,stroke:e,strokeWidth:o?24*Number(s)/Number(t):s,className:a("lucide",i),...!r&&!l(u)&&{"aria-hidden":"true"},...u},[...g.map(([e,t])=>(0,n.createElement)(e,t)),...Array.isArray(r)?r:[r]])),u=(e,t)=>{let s=(0,n.forwardRef)(({className:s,...i},l)=>(0,n.createElement)(g,{ref:l,iconNode:t,className:a(`lucide-${o(r(e))}`,`lucide-${e}`,s),...i}));return s.displayName=r(e),s}},78122:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});let n=(0,s(62688).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},79563:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var n=s(60687);s(43210);var o=s(30474),i=s(21169),r=s.n(i);let a=({width:e=260,height:t=260})=>(0,n.jsx)(o.default,{src:"/images/ableai.png",alt:"App Logo",width:e,height:t,className:r().logo})},80986:e=>{e.exports={suggestionBanner:"AiSuggestionBanner_suggestionBanner__GaHhl",error:"AiSuggestionBanner_error__AsUTs",suggestionHeader:"AiSuggestionBanner_suggestionHeader___6TZV",suggestionTextContainer:"AiSuggestionBanner_suggestionTextContainer__agMgJ",suggestionIconContainer:"AiSuggestionBanner_suggestionIconContainer__JaFok",suggestionIcon:"AiSuggestionBanner_suggestionIcon__9OEMG",suggestionTitle:"AiSuggestionBanner_suggestionTitle__QeUfh",suggestionDescription:"AiSuggestionBanner_suggestionDescription__i0CPi",suggestionText:"AiSuggestionBanner_suggestionText__7vJXC",navButton:"AiSuggestionBanner_navButton__rs_7f",closeButton:"AiSuggestionBanner_closeButton__aixXz",chatButton:"AiSuggestionBanner_chatButton__OmEBq",counter:"AiSuggestionBanner_counter__7lqc6",refreshButton:"AiSuggestionBanner_refreshButton__yYutW",topRowContainer:"AiSuggestionBanner_topRowContainer__oD67C",bottomControlsContainer:"AiSuggestionBanner_bottomControlsContainer__0KlBh",inlineCarouselControls:"AiSuggestionBanner_inlineCarouselControls__PZc1M",skeletonBanner:"AiSuggestionBanner_skeletonBanner__tPp82",skeletonLine:"AiSuggestionBanner_skeletonLine__JqpA1",shimmer:"AiSuggestionBanner_shimmer__ffz_1",skeletonLineShort:"AiSuggestionBanner_skeletonLineShort__FUK2c",skeletonLineLong:"AiSuggestionBanner_skeletonLineLong__D9YKC",dismissButton:"AiSuggestionBanner_dismissButton__U6j7B",refreshButtonIcon:"AiSuggestionBanner_refreshButtonIcon__eETlt"}},96321:(e,t,s)=>{"use strict";s.d(t,{M:()=>c});var n=s(43210),o=s(12665),i=s(7958);let r=i.Sj.array({items:i.Sj.object({properties:{id:i.Sj.string({description:"A unique identifier for the suggestion, e.g., UUID."}),title:i.Sj.string({description:'A concise title for the suggestion (e.g., "Boost Your Profile!").'}),description:i.Sj.string({description:'The main text of the suggestion (e.g., "Adding more details to your profile can attract more offers.").'}),suggestedActions:i.Sj.array({items:i.Sj.object({properties:{text:i.Sj.string({description:'User-facing text for the action (e.g., "Complete your profile").'}),linkKey:i.Sj.string({description:'An optional key for a predefined in-app navigation link (e.g., "PROFILE_EDIT", "VIEW_OFFERS").'})},optionalProperties:["linkKey"]}),description:"An array of 1-4 suggested actions related to the suggestion. For use in AI chat."})},optionalProperties:["suggestedActions"]})});async function a(e,t,s){let n=`
Known linkKeys and their purpose (use these if applicable for a suggested action):
- PROFILE_EDIT: Takes the user to their profile editing page.
- VIEW_OFFERS: Shows the user their current offers (for workers) or candidates (for buyers).
- POST_GIG: Allows a buyer to post a new gig.
- BROWSE_GIGS: Allows a worker to browse available gigs.
- LEARN_SKILL_PHOTOGRAPHY: Directs to resources for learning photography.
(Add more known linkKeys as your application evolves)
`,i=`You are an AI assistant for ${"buyer"===t?"buyers":"gig workers"}. Given the following context (which is PII-free), suggest 1-3 actionable, privacy-safe tips. Return a JSON array of suggestions. Each suggestion object must have:
1.  'id': A unique UUID (generate one, e.g., using a UUID v4 format if possible, or a random string).
2.  'title': A concise title for the suggestion (e.g., "Boost Your Profile!").
3.  'description': The main text of the suggestion (1-2 short sentences, e.g., "Adding more details to your profile can attract more offers.").
4.  'suggestedActions': An array of 1 to 3 objects, each representing a follow-up action for the AI chat. Each action object must have:
    a. 'text': User-facing text for the action (e.g., "Complete your profile now").
    b. 'linkKey' (optional): If the action directly corresponds to an in-app function, use one of the known linkKeys provided below. Otherwise, omit 'linkKey'.

${n}

Keep descriptions and action texts concise. Ensure all output is privacy-safe.

Context: ${JSON.stringify(e)}`,a=o.qc[0],l=await (0,o.rL)(a,{prompt:i,responseSchema:r,isStream:!1,generationConfig:{responseMimeType:"application/json",responseSchema:r}},s);return l.ok?l.data:(console.error("Error generating suggestions:",l.error),[{id:crypto.randomUUID(),title:"Suggestion Generation Failed",description:"The AI could not generate specific suggestions at this time. Please try again.",suggestedActions:[]}])}var l=s(36864);function c({role:e,userId:t,context:s={},enabled:o=!0,defaultSuggestions:i=[]}){let[r,c]=(0,n.useState)([]),[g,u]=(0,n.useState)(0),d=(0,n.useRef)(r),[h,p]=(0,n.useState)(!0),[f,_]=(0,n.useState)(null),{ai:m}=(0,l.D)(),A=(0,n.useCallback)(()=>`aiSuggestionDismissed_${t}_${e}`,[t,e]),S=(0,n.useCallback)(()=>`suggestionBatch_${t}_${e}`,[t,e]),k=(0,n.useCallback)(()=>`suggestionBatchIndex_${t}_${e}`,[t,e]),[y,x]=(0,n.useState)(()=>!1),C=(0,n.useCallback)(async(n=!1)=>{if(!y&&o&&t){if(!n&&d.current.length>0)return void p(!1);p(!0),_(null);try{let t=await a(s,e,m);t&&0!==t.length||(t=i.map(e=>({...e,id:crypto.randomUUID(),suggestedActions:[]})));let n=t.map(e=>({title:e.title,description:e.description,id:e.id||crypto.randomUUID(),suggestedActions:e.suggestedActions||[]}));c(n),u(0)}catch(e){console.error("Failed to fetch AI suggestions:",e),_("Failed to load suggestions."),c(i.map(e=>({...e,id:crypto.randomUUID(),suggestedActions:[]}))),u(0)}p(!1)}},[y,o,t,s,e,i,S,k,p,_,c,u]),B=(0,n.useCallback)(()=>{x(!0),c([]),u(0)},[A,S,k]),I=(0,n.useCallback)(()=>{x(!1),c([]),u(0),_(null),C(!0)},[A,S,k,C]),b=(0,n.useCallback)(()=>{u(e=>e===r.length-1?0:e+1)},[r.length,k]),v=(0,n.useCallback)(()=>{u(e=>0===e?r.length-1:e-1)},[r.length,k]);return{suggestions:r,currentIndex:g,isLoading:h,error:f,dismissed:y,dismiss:B,refresh:I,goToNext:b,goToPrev:v}}}};