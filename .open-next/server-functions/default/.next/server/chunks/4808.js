exports.id=4808,exports.ids=[4808],exports.modules={16269:(e,t,o)=>{"use strict";o.d(t,{A:()=>m});var a=o(60687);o(43210);var n=o(28559),i=o(17917),s=o.n(i),r=o(85814),c=o.n(r),l=o(21295),d=o(79563),g=o(16189),u=o(30474),f=o(40477),b=o.n(f);let h=({uid:e,handleClick:t,unreadCount:o,unreadNotifications:n})=>(0,a.jsxs)(c(),{href:`/user/${e}/notifications`,passHref:!0,onClick:t,children:[(0,a.jsx)("button",{className:b().notificationButton,"aria-label":"Notifications",children:(0,a.jsx)(u.default,{src:"/images/notifications.svg",alt:"Notifications",width:40,height:40})}),o>0||n>0?(0,a.jsx)("span",{className:b().notificationBadge,children:o>0?o:n}):null]}),m=e=>{let{user:t}=(0,l.A)(),o=(0,g.usePathname)(),{isHomePage:i,title:r,onBackClick:f,handleClick:b,unreadCount:m,unreadNotifications:L}=e,p=o.includes("/able-ai");return(0,a.jsxs)("header",{className:s().header,children:[i?(0,a.jsx)(u.default,{src:"/images/home.svg",alt:"Back",width:40,height:40}):(0,a.jsx)("button",{onClick:f,className:s().backButton,"aria-label":"Go back",children:(0,a.jsx)(n.A,{size:20})}),r&&(0,a.jsx)("h1",{className:s().title,children:r}),(0,a.jsx)(c(),{href:`/user/${t?.uid}/able-ai`,className:s().chat,children:p?(0,a.jsx)(d.A,{width:40,height:40}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{children:"Chat with Able"}),(0,a.jsx)(d.A,{width:30,height:30})]})}),i&&(0,a.jsx)(h,{uid:t?.uid,handleClick:b,unreadCount:m,unreadNotifications:L})]})}},17917:e=>{e.exports={header:"ScreenHeaderWithBack_header__mx1Ch",backButton:"ScreenHeaderWithBack_backButton__0EIlD",title:"ScreenHeaderWithBack_title__Un97C",chat:"ScreenHeaderWithBack_chat__WpLse"}},21169:e=>{e.exports={logo:"Logo_logo__aLQuM"}},36125:(e,t,o)=>{"use strict";async function a(e){try{return localStorage.setItem("lastRoleUsed",e),null}catch(e){console.log("Error updating last role used:",e)}}function n(){try{return window.localStorage.getItem("lastRoleUsed")}catch(e){return console.log("Error retrieving last role used:",e),null}}o.d(t,{C:()=>a,K:()=>n})},40477:e=>{e.exports={notificationButton:"Notification_notificationButton__NL740",notificationBadge:"Notification_notificationBadge__ZxPNU"}},45071:(e,t,o)=>{"use strict";o.a(e,async(e,a)=>{try{o.d(t,{Y:()=>u});var n=o(91199);o(42087);var i=o(30298),s=o(18839),r=o(60444),c=o(49071),l=o.n(c),d=o(33331),g=e([i]);async function u({gigId:e,userId:t,role:o,isViewQA:a}){if(!t)return{error:"User id is required",gig:{},status:404};try{let n=await i.db.query.UsersTable.findFirst({where:(0,s.eq)(r.UsersTable.firebaseUid,t),columns:{id:!0}});if(!n)return{error:"User is not found",gig:{},status:404};let c="buyer"===o?r.GigsTable.buyerUserId:r.GigsTable.workerUserId,d=await i.db.query.GigsTable.findFirst({where:(0,s.Uo)((0,s.eq)(c,n.id),(0,s.eq)(r.GigsTable.id,e)),with:{buyer:{columns:{id:!0,fullName:!0,email:!0}},worker:{columns:{id:!0,fullName:!0}}}});if(a&&!d)return{gig:function(e){if("gig123-accepted"===e)return{id:"gig123-accepted",role:"Lead Bartender",gigTitle:"Corporate Mixer Event",buyerName:"Innovate Solutions Ltd.",buyerAvatarUrl:"/images/logo-placeholder.svg",date:new Date(Date.now()+1728e5).toISOString(),startTime:new Date(Date.now()+1728e5).toISOString(),endTime:new Date(Date.now()+1728e5+108e5).toISOString(),location:"123 Business Rd, Tech Park, London, EC1A 1BB",hourlyRate:25,estimatedEarnings:125,specialInstructions:"Focus on high-quality cocktails. Dress code: smart black. Setup starts 30 mins prior. Contact person on site: Jane (07xxxxxxxxx).",status:"ACCEPTED",statusInternal:"IN_PROGRESS",hiringManager:"Jane Smith",hiringManagerUsername:"@janesmith",isBuyerSubmittedFeedback:!1,isWorkerSubmittedFeedback:!0};if("gig456-inprogress"===e)return{id:"gig456-inprogress",role:"Event Server",gigTitle:"Wedding Reception",buyerName:"Alice & Bob",date:new Date().toISOString(),startTime:new Date(new Date().setHours(16,0,0,0)).toISOString(),endTime:new Date(new Date().setHours(22,0,0,0)).toISOString(),location:"The Manor House, Countryside Lane, GU21 5ZZ",hourlyRate:18,estimatedEarnings:108,specialInstructions:"Silver service required. Liaise with the event coordinator Sarah upon arrival.",status:"ACCEPTED",statusInternal:"IN_PROGRESS",hiringManager:"Sarah Johnson",hiringManagerUsername:"@sarahjohnson",isBuyerSubmittedFeedback:!1,isWorkerSubmittedFeedback:!0};let t=new Date,o=new Date(t.getTime()+864e5),a=new Date(o.getTime()+72e5);return{id:e,role:"Bartender",gigTitle:"Pop-up Bar Night",buyerName:"John Doe",date:o.toISOString(),startTime:o.toISOString(),endTime:a.toISOString(),duration:"2 hours",location:"221B Baker Street, London",hourlyRate:20,estimatedEarnings:40,specialInstructions:"Arrive 20 mins early for setup.",status:"COMPLETED",statusInternal:"PENDING_WORKER_ACCEPTANCE",hiringManager:"Alex Doe",hiringManagerUsername:"@alexd",isBuyerSubmittedFeedback:!0,isWorkerSubmittedFeedback:!0}}(e),status:200};if(!d)return{error:"gig not found",gig:{},status:404};console.log("Gig debug - raw gig object:",JSON.stringify(d,null,2));let g=l()(d.startTime),u=l()(d.endTime),f=u.diff(g,"hours",!0),b=d.totalAgreedPrice?parseFloat(d.totalAgreedPrice):0,h=d.agreedRate?parseFloat(d.agreedRate):0,m="Location not specified";console.log("Location debug - exactLocation:",d.exactLocation),console.log("Location debug - addressJson:",d.addressJson),console.log("Location debug - exactLocation type:",typeof d.exactLocation),console.log("Location debug - addressJson type:",typeof d.addressJson);let L=e=>{if(!e||"object"!=typeof e||Array.isArray(e))return null;if(console.log("Location debug - extracting from object:",e),e.lat&&e.lng&&"number"==typeof e.lat&&"number"==typeof e.lng){let t=`Coordinates: ${e.lat.toFixed(6)}, ${e.lng.toFixed(6)}`;return console.log("Location debug - extracted coordinates:",t),t}if(e.formatted_address){let t=e.formatted_address;return console.log("Location debug - extracted formatted_address:",t),t}if(e.address){let t=e.address;return console.log("Location debug - extracted address:",t),t}if(e.street_address||e.route){let t=[];if(e.street_number&&t.push(e.street_number),e.route&&t.push(e.route),e.locality&&t.push(e.locality),e.administrative_area_level_1&&t.push(e.administrative_area_level_1),e.postal_code&&t.push(e.postal_code),e.country&&t.push(e.country),t.length>0){let e=t.join(", ");return console.log("Location debug - extracted address components:",e),e}}return console.log("Location debug - no meaningful data found in object"),null},p=e=>{if(!e||"string"!=typeof e)return null;if(console.log("Location debug - processing string:",e),e.includes(",")&&!e.includes("[object Object]"))return console.log("Location debug - using string as-is:",e),e;if(e.match(/^-?\d+\.\d+,\s*-?\d+\.\d+$/)){let t=`Coordinates: ${e}`;return console.log("Location debug - formatted coordinates:",t),t}if(e.startsWith("http")){let t=`Map Link: ${e}`;return console.log("Location debug - formatted URL:",t),t}return console.log("Location debug - string not recognized as location"),null};if(d.exactLocation){if(console.log("Location debug - processing exactLocation:",d.exactLocation),"string"==typeof d.exactLocation){let e=p(d.exactLocation);e&&(m=e,console.log("Location debug - using exactLocation string:",m))}else if("object"==typeof d.exactLocation){let e=L(d.exactLocation);e&&(m=e,console.log("Location debug - using exactLocation object:",m))}}if("Location not specified"===m&&d.addressJson){if(console.log("Location debug - processing addressJson:",d.addressJson),"string"==typeof d.addressJson)try{let e=JSON.parse(d.addressJson),t=L(e);t&&(m=t,console.log("Location debug - using parsed addressJson:",m))}catch(t){console.log("Location debug - addressJson parsing failed, trying as string");let e=p(d.addressJson);e&&(m=e,console.log("Location debug - using addressJson as string:",m))}else if("object"==typeof d.addressJson){let e=L(d.addressJson);e&&(m=e,console.log("Location debug - using addressJson object:",m))}}if("Location not specified"===m){if(console.log("Location debug - attempting final aggressive extraction"),d.addressJson&&"object"==typeof d.addressJson){let e=d.addressJson;if(console.log("Location debug - final addressJson object:",e),e.lat&&e.lng)m=`Coordinates: ${e.lat.toFixed(6)}, ${e.lng.toFixed(6)}`,console.log("Location debug - final coordinates:",m);else if(e.formatted_address)m=e.formatted_address,console.log("Location debug - final formatted_address:",m);else if(e.address)m=e.address,console.log("Location debug - final address:",m);else if(e.street&&e.city)m=`${e.street}, ${e.city}`,console.log("Location debug - final street+city:",m);else for(let[t,o]of Object.entries(e))if("string"==typeof o&&o.trim()&&"null"!==o&&"undefined"!==o&&"[object Object]"!==o&&!o.includes("[object Object]")){m=o.trim(),console.log("Location debug - final extraction from key:",t,"value:",m);break}}if("Location not specified"===m&&d.exactLocation&&"object"==typeof d.exactLocation){let e=d.exactLocation;console.log("Location debug - final exactLocation object:",e),e.lat&&e.lng?(m=`Coordinates: ${e.lat.toFixed(6)}, ${e.lng.toFixed(6)}`,console.log("Location debug - final exactLocation coordinates:",m)):e.formatted_address&&(m=e.formatted_address,console.log("Location debug - final exactLocation formatted_address:",m))}}("[object Object]"===m||m.includes("[object Object]"))&&(console.warn("Location debug - caught problematic location value, clearing it"),m="Location not specified"),"Location not specified"===m&&(console.log("Location debug - no location found, using fallback"),m="Location details available"),console.log("Location debug - FINAL locationDisplay:",m),console.log("Location debug - FINAL locationDisplay type:",typeof m);let x=d.titleInternal||"Gig Worker";return{gig:{id:d.id,role:x,gigTitle:d.titleInternal||"Untitled Gig",buyerName:d.buyer?.fullName||"Unknown",date:g.format("YYYY-MM-DD"),startTime:g.toISOString(),endTime:u.toISOString(),duration:`${f} hours`,location:m,hourlyRate:h,estimatedEarnings:b,specialInstructions:d.notesForWorker||void 0,status:function(e){switch(e){case"PENDING_WORKER_ACCEPTANCE":return"PENDING";case"ACCEPTED":return"ACCEPTED";case"COMPLETED":return"COMPLETED";case"CANCELLED_BY_BUYER":case"CANCELLED_BY_WORKER":case"CANCELLED_BY_ADMIN":return"CANCELLED";default:return console.warn(`Unhandled gig statusInternal: ${e}`),"PENDING"}}(d.statusInternal),statusInternal:d.statusInternal,hiringManager:d.buyer?.fullName||"Manager",hiringManagerUsername:d.buyer?.email||"No email",isWorkerSubmittedFeedback:!1,isBuyerSubmittedFeedback:!1},status:200}}catch(e){return console.error("Error fetching gig:",e),{error:e.message,gig:{},status:500}}}i=(g.then?(await g)():g)[0],(0,d.D)([u]),(0,n.A)(u,"400e000ab33a7f5af2587925f175e4f793654b0f04",null),a()}catch(e){a(e)}})},58202:(e,t,o)=>{"use strict";o.d(t,{Y:()=>n});var a=o(6475);let n=(0,a.createServerReference)("400e000ab33a7f5af2587925f175e4f793654b0f04",a.callServer,void 0,a.findSourceMapURL,"getGigDetails")},79563:(e,t,o)=>{"use strict";o.d(t,{A:()=>r});var a=o(60687);o(43210);var n=o(30474),i=o(21169),s=o.n(i);let r=({width:e=260,height:t=260})=>(0,a.jsx)(n.default,{src:"/images/ableai.png",alt:"App Logo",width:e,height:t,className:s().logo})}};